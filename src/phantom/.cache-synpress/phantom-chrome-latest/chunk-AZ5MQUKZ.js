import{a as T,b as d,c as L,d as R,e as W,f as B}from"./chunk-DYF4TIEK.js";import{Da as U,Fa as w,Ha as K,Ka as E,Oa as F,Ua as O,Wa as q,h as l,o as V,p as g,ua as j,xa as I,za as Q}from"./chunk-HZ46BFL2.js";import{pb as M}from"./chunk-4HRGOILD.js";import{Ic as C,Uc as A}from"./chunk-4KPHYKUF.js";import{Ac as y,Bc as m,Ec as p,Zd as h}from"./chunk-ODNNZUPK.js";import{h as x,k as D}from"./chunk-L7YPSK2Y.js";import{a as c,i as a,n as s}from"./chunk-NSVULBS3.js";a();s();a();s();function G(e,o){return d(o,e)===0?0:e/d(o,e)*100}c(G,"calculateTotalPercentChange24h");var N=G;a();s();a();s();async function k({walletCaip19s:e,includeFungibleCaip19s:o,excludeFungibleCaip19s:n}){let i=await x.api().timeout(h({seconds:10})).get("/portfolio/v1/fungibles/value",{params:{walletAddresses:e.join(","),...o.length>0&&{includeFungibleCaip19s:o.join(",")},...n.length>0&&{excludeFungibleCaip19s:n.join(",")}}}).then(t=>{if(D(t))return t.data;throw new Error(t.data?.message||t.data?.error||t.statusText||`Status: ${t.status}`,{cause:t.data?.code})}).catch(t=>{throw p.addBreadcrumb(m.Tokens,"getPortfolioValue",y.Error,{message:t.message,cause:t.cause,walletCaip19s:e.join(","),...o.length>0&&{includeFungibleCaip19s:o.join(",")},...n.length>0&&{excludeFungibleCaip19s:n.join(",")}}),p.captureError(t,m.Tokens),t}),r=Q.parse(i);return r.errors&&r.errors.length>0&&r.errors.forEach(t=>{p.addBreadcrumb(m.Tokens,"getPortfolioValue_partialError",y.Info,{code:t.code,message:t.message,chainId:t.details.chainId,address:t.details.address})}),r}c(k,"getPortfolioValue");a();s();var H=V(e=>{let o=e(B);return o?M(o):{queryKey:["default-mainnet"],queryFn:c(()=>({isDeveloperMode:!1}),"queryFn")}}),J=l(e=>!e(H).data?.isDeveloperMode),P=J;var X=g(l(e=>{let o=e(O),i=e(F).reduce((r,t)=>{let u=A(void 0,{key:t.legacyKey??"",spamStatus:t.spamStatus??C.NotVerified}),f=A(o,{key:t.legacyKey??"",spamStatus:t.spamStatus??C.NotVerified});return u===f?r:u?{...r,exclude:[...r.exclude,t.encodedCaip19]}:{...r,include:[...r.include,t.encodedCaip19]}},{include:[],exclude:[]});return{include:i.include.sort().slice(0,50),exclude:i.exclude.sort().slice(0,50)}}),e=>e,(e,o)=>e.include.join(",")===o.include.join(",")&&e.exclude.join(",")===o.exclude.join(",")),Y=V(e=>{let o=e(K),{include:n,exclude:i}=e(X),r=e(w),t=e(P),u=j.portfolioValue({walletCaip19s:o,include:n,exclude:i,isMainnet:t});return{enabled:o.length>0&&!r&&t,queryKey:u,refetchInterval:!1,queryFn:c(async()=>k({walletCaip19s:o,includeFungibleCaip19s:n,excludeFungibleCaip19s:i}),"queryFn")}}),S=Y;var $=l(e=>{let o=e(q),n=!1,i=o.reduce((r,t)=>{let u=t.livePrice?.price??t.price?.price,f=t.livePrice?.priceChange24h??t.price?.priceChange24h;u&&(n=!0);let v=W(t,u??0),z=R(v,f??0);return{currentValue:T(r.currentValue,v),priceDifference:T(r.priceDifference,z)}},{currentValue:0,priceDifference:0});return n?{currentValue:i.currentValue,priceDifference:i.priceDifference,totalPercentChange24h:N(i.priceDifference,i.currentValue)}:{currentValue:void 0,priceDifference:void 0,totalPercentChange24h:void 0}}),Z=U({atomToStoreOffline:S,offlineKey:l(e=>`${e(E)??""}:portfolio-value`),namespaceKey:"fungible-tokens",ttlMs:h({days:10}),initialValue:{totalValueUsdCentsCurrent:void 0,totalValueUsdStringCurrent:void 0,totalValueUsdCents24h:void 0,totalValueUsdString24h:void 0,totalPercentChange24h:void 0},schema:I}),_=l(e=>{let o=e(Z),n=o?.totalPercentChange24h,i=o?.totalValueUsdCents24h,r=o?.totalValueUsdCentsCurrent;return{currentValue:r!==void 0?r/100:void 0,priceDifference:i!==void 0&&r!==void 0?L(d(r,i),100):void 0,totalPercentChange24h:n}}),Xe=l(e=>{let o=e($),n=e(_);return{local:o,remote:n}}),ee=g(S,e=>e.status),te=l(e=>{if(!e(P))return{status:"idle",data:{currentValue:void 0,priceDifference:void 0,totalPercentChange24h:void 0}};let n=e($),i=e(ee),r=e(_),t=typeof n.currentValue=="number"||typeof n.priceDifference=="number"||typeof n.totalPercentChange24h=="number";return{status:t?"success":i,data:t?n:r}}),Ye=te;export{P as a,S as b,Xe as c,Ye as d};
//# sourceMappingURL=chunk-AZ5MQUKZ.js.map
