import{a as gn}from"./chunk-Z4NIAEKD.js";import{A as Us,B as Ps,F as Rs,G as _s,J as js,S as Ns,V as Ls,W as Vs,X as Fs,_ as $s,ta as zs,y as Bs}from"./chunk-HZ46BFL2.js";import{Ja as ns,f as es,h as ts,o as rs}from"./chunk-DALLY2ZR.js";import{jc as rn,n as Jt,nc as Zt,rb as tn,s as en,xb as Zi}from"./chunk-4HRGOILD.js";import{$a as et,$d as Ms,Ac as Cs,B as lo,Bb as po,Bd as kt,Cd as Ar,E as vr,Gc as ws,Hc as xs,I as os,Ib as mn,Ic as De,Ja as tr,Jb as pn,Jc as $,K as is,Ka as Q,L as ss,La as ln,Lc as Ke,Ma as Er,N as sn,Na as I,Nc as Ts,Nd as As,Oa as mo,Od as ks,Pa as rr,Qa as nr,Qc as fo,R as as,Ra as A,Rc as vs,Sa as _,Sc as Or,Ta as ft,U as uo,Ua as W,V as an,Va as x,Vc as ho,Wa as ae,Wc as hn,Xa as or,Xb as ps,Xc as Es,Y as cs,Ya as M,Za as un,_a as ie,a as Ji,ab as z,bb as F,cc as cu,dc as fs,eb as dn,ec as hs,ee as Ds,fd as Is,gb as Ir,h as on,hb as At,hd as Os,ia as ls,ib as us,ja as cn,jb as ds,k as er,sc as fn,tb as ms,tc as gs,uc as bs,vc as ys,xc as Ss}from"./chunk-4KPHYKUF.js";import{Ac as Qi,Bc as Ee,Ec as Ce,Gb as Fi,Ib as Xr,L as Li,Pb as V,Pc as Yi,Qb as $i,X as Qr,Xd as au,Zb as zi,Zd as re,_ as _e,ba as Vi,dc as Gi,dd as Xi,fd as Xt,ge as fe,i as co,ic as Jr,jc as Hi,na as Yr,nc as qi,oc as Ki,pa as Yt,qd as de,s as _i,sd as Zr,v as Qt,vd as Me,w as L,x as Ni,yc as Wi}from"./chunk-ODNNZUPK.js";import{F as Kt,G as Wt}from"./chunk-UAQWDGIM.js";import{S as nn,a as k,d as Re,e as ue,m as Ie,r as Z}from"./chunk-LELMSWC2.js";import{h as ke,k as ji,l as pt}from"./chunk-L7YPSK2Y.js";import{g as h,j as Wr}from"./chunk-VAUOTJLY.js";import{a as o,g as E,i as c,l as su,m as Buffer,n as l}from"./chunk-NSVULBS3.js";c();l();c();l();var we=o(t=>{if(t!=null&&!(t.constructor===Object&&Object.keys(t).length===0))return t},"toUndefined");var lu=o(t=>t??[],"toEmptyArray"),We=class extends Error{static{o(this,"CollectiblesError")}constructor(e){super(e),this.name="CollectiblesError"}},j=h.string().nullish().transform(we),Mt=h.number().nullish().transform(we),go=h.union([j,Mt]).transform(t=>typeof t=="number"?t.toString():t),uu=h.object({name:j,symbol:j,decimals:Mt,address:j}),ir;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.EditionV1=1]="EditionV1",t[t.MasterEditionV1=2]="MasterEditionV1",t[t.ReservationListV1=3]="ReservationListV1",t[t.MetadataV1=4]="MetadataV1",t[t.ReservationListV2=5]="ReservationListV2",t[t.MasterEditionV2=6]="MasterEditionV2",t[t.EditionMarker=7]="EditionMarker",t[t.UseAuthorityRecord=8]="UseAuthorityRecord",t[t.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",t[t.TokenOwnedEscrow=10]="TokenOwnedEscrow",t[t.TokenRecord=11]="TokenRecord",t[t.MetadataDelegate=12]="MetadataDelegate"})(ir||(ir={}));var bn=h.nativeEnum(ir),qs=h.object({price:h.number(),token:uu.nullish().transform(we)}),du=qs.nullish().transform(we),mu=h.object({name:j,url:j,isVerified:h.coerce.boolean()}),Ks=h.object({id:h.string(),isValidCollectionId:h.coerce.boolean(),name:j,description:j,externalUrl:j,imageUrl:j,isSpam:h.coerce.boolean(),spamStatus:h.nativeEnum(De).optional().default(De.NotVerified),floorPrice:qs.nullish().transform(we),ownerCount:Mt,totalCount:Mt,tokenCount:Mt,marketplaces:h.array(mu)}),pu=h.object({small:j,medium:j,large:j,blurhash:j}),fu=pu.nullish().transform(we),hu=h.enum(["image","video","audio","model","other"]),gu=h.object({url:j}),kr=gu.nullish().transform(we),bu=h.object({type:hu,image:kr,video:kr,audio:kr,model:kr,other:kr,previews:fu}),yu=bu.nullish().transform(we),Su=h.object({trait_type:j,value:j.or(Mt),display_type:j}),Cu=h.object({id:h.string(),contract:h.string(),standard:h.nativeEnum(Ar)}),Ws=h.object({compressed:h.boolean(),merkleTree:h.string(),leafIndex:h.number()}),wu=h.object({mint:h.string(),tokenAccount:h.string(),standard:h.nativeEnum(kt),compression:Ws.nullish().transform(we),programId:h.string(),mintExtensions:Is(Os).optional()}),xu=h.object({id:h.string(),url:h.string(),displayName:h.string(),description:h.string(),count:h.number()}),Tu=h.object({hash:h.string(),index:h.number(),distinctRareSats:h.number(),satributes:h.array(xu),blockNumber:h.number(),value:h.number(),backgroundImageUrl:h.string()}),vu=h.object({firstCreatedTransactionHash:h.string(),firstCreatedInscriptionId:h.string(),inscriptionId:j,inscriptionNumber:go,outputValue:go,satNumber:go,satName:j,satRarity:j,protocolName:j,utxoHash:j,utxoIndex:Mt,createdAt:h.string().nullish().transform(we),utxoDetails:Tu.nullish().transform(we)}),Eu=h.object({objectId:h.string().optional(),kioskId:h.string().optional()}),Iu=h.object({listingPrice:h.string(),listingPriceUiAmount:h.string(),isNative:h.boolean(),url:h.string()}),Ou=h.union([wu,Cu,vu,Eu]),bo=h.object({id:$i,chain:Gi,name:j,symbol:j,description:j,externalUrl:j,collection:Ks,media:yu,uri:j,attributes:h.array(Su).nullish().transform(lu),lastSalePrice:du,balance:j,decimals:j,owner:j,chainData:Ou.optional(),listings:h.record(Iu).nullish().transform(we)}),Au=Ks.extend({items:h.array(bo)}),mh=h.object({items:h.array(Au),isTrimmed:h.boolean()}),Gs;(function(t){t.HiddenTitle="hidden-title",t.HiddenButton="hidden-button",t.Collection="collection",t.Empty="empty",t.CollectiblesTrimmed="collectibles-trimmed",t.AddCollection="add-collection"})(Gs||(Gs={}));var Hs;(function(t){t.userHid="userHid",t.userUnhid="userUnhid",t.userBurned="userBurned",t.markAsSpam="markAsSpam",t.markAsNotSpam="markAsNotSpam"})(Hs||(Hs={}));var ph=h.object({compression:Ws.nullish().transform(we).refine(t=>t?.compressed),mint:h.string()}),fh=h.object({root:h.string(),proof:h.array(h.string()),merkleTree:h.string(),dataHash:h.string(),creatorHash:h.string(),leafIndex:h.number(),owner:h.string(),delegate:h.string().optional()}),xe;(function(t){t.CONFIRMATION="CONFIRMATION",t.SUBMISSION="SUBMISSION"})(xe||(xe={}));c();l();c();l();var yo=E(su(),1);function yn(t){let e=[ir.MasterEditionV1,ir.MasterEditionV2],r=bn.safeParse(t);return r.success&&e.includes(r.data)}o(yn,"isMasterEdition");var So=yo.Buffer.from("metadata"),ku=yo.Buffer.from("edition"),Co=vr.toBuffer();function Th(t){let[e]=L.PublicKey.findProgramAddressSync([So,Co,t],vr);return e}o(Th,"getMetadataPDA");function Qs(t){let[e]=L.PublicKey.findProgramAddressSync([So,Co,t,ku],vr);return e}o(Qs,"getMasterEditionPDA");function vh(t){let[e]=L.PublicKey.findProgramAddressSync([So,Co,t],vr);return e}o(vh,"getCollectionMetadataPDA");var Mu="CollectibleEdition";function Du(t,e){return Me({queryKey:[Mu,{mintAddress:t}],async queryFn(){if(!e)return{};let r=Buffer.from(new L.PublicKey(t).toBytes()),n=Qs(r),{Edition:i}=await is();try{let s=await i.fromAccountAddress(e,n),a=bn.safeParse(s.key);if(!a.success)throw new Error(`Invalid MetaplexTokenEdition: ${s.key}`);return{key:a.data,isMasterEdition:yn(s.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}o(Du,"useCollectibleEdition");c();l();function ce(t){return t?.tokenAccount!==void 0}o(ce,"isSolanaCollectibleChainData");function Qe(t){return t?.contract!==void 0}o(Qe,"isEvmCollectibleChainData");function Ye(t){return t!==void 0&&"firstCreatedTransactionHash"in t}o(Ye,"isBitcoinCollectibleChainData");function Ys(t){return t!==void 0&&"objectId"in t}o(Ys,"isSuiCollectibleChainData");function Xs(t){return t!==void 0&&"outputValue"in t&&"utxoHash"in t&&"utxoIndex"in t}o(Xs,"isBitcoinOrdinalCollectibleChainData");function sr(t){return t!==void 0&&"utxoDetails"in t}o(sr,"isBitcoinRareSatsCollectibleChainData");c();l();var je=E(k(),1);c();l();c();l();var Be="collectibles",wo=[Be,"collectibleBids"],H={collections:o(t=>[Be,"collections",{addresses:t.map(po)}],"collections"),hiddenCollections:o(t=>[Be,"hiddenCollections",t],"hiddenCollections"),unhiddenCollections:o(t=>[Be,"unhiddenCollections",t],"unhiddenCollections"),visibilityOverrides:o(t=>[Be,"visibilityOverrides",t],"visibilityOverrides"),pinnedCollections:o(t=>[Be,"pinnedCollections",t],"pinnedCollections"),topCollections:o(t=>[Be,"topCollections",{addresses:t.map(po)}],"topCollections"),optimisticUpdates:o(()=>[Be,"optimisticUpdates"],"optimisticUpdates"),collectibleBids:o(t=>[...wo,t],"collectibleBids"),collectibleMintGasEstimation:o(t=>[Be,"mintNFTGasEstimation",t],"collectibleMintGasEstimation"),collectibleSellSteps:o(t=>[Be,"collectibleSellSteps",t],"collectibleSellSteps"),createMintTransaction:o(t=>[Be,"createMintTransaction",t],"createMintTransaction"),transferTransaction:o(t=>[Be,"transferTransaction",t],"transferTransaction")};var Sn=o((t,e)=>{t.invalidateQueries({queryKey:wo}),t.invalidateQueries({predicate:o(({queryKey:r})=>r.includes("collectibleSellSteps")&&r[2].details.orderId===e?.orderId,"predicate")})},"invalidateBidsAndSellSteps");c();l();var Bu=20;function ar(t,e){let r=H.optimisticUpdates(),n=t.getQueryData(r)??[];t.setQueryData(r,[...n,e])}o(ar,"pushOptimisticUpdate");async function Js(t,e){let r=H.optimisticUpdates(),n=await t.getQueryState(r);if(n){let i=e??Date.now(),s=n.dataUpdatedAt,a=re({seconds:Bu});return i-s>a?(t.removeQueries({queryKey:r}),[]):n?.data??[]}else return[]}o(Js,"getOptimisticUpdates");function Zs(t,e){let r=e.reduce((n,i)=>{let{id:s,amount:a}=i,u=new ue(a);return n[s]=(n[s]??new ue(0)).plus(u),n},{});for(let n of t)n.items=n.items.reduce((i,s)=>{let a=s.id,u=r[a];if(u){let m=new ue(s.balance??0);return m.minus(u).isGreaterThan(0)?i.concat({...s,balance:m.minus(u).toString()}):i}else return i.concat(s)},[]);return t=t.filter(n=>n.items.length>0),t}o(Zs,"applyOptimisticUpdates");var Uu=o(()=>{let{data:t}=tn();return(0,je.useMemo)(()=>{let r=t?.identifier??"",n=t?.type===en.Ledger,i=t?.addresses??[],s=i.find(zi),a=s?.networkID,u=s?.address??"",m=ds(a),p=us(m);return{accountIdentifier:r,chainAddresses:i,chainId:a,solanaPublicKey:u,isLedger:n,cluster:m,connection:p}},[t])},"useAccountMetadata"),Pu=o((t,e)=>{let[r,n]=(0,je.useState)(void 0);return(0,je.useEffect)(()=>{o(async()=>{if(!t)return;let a=t.find(f=>f.type==="transaction")?.data?.transaction;if(!a)return;let u=co(a,"base64"),m=await ys(e,[u.message]),p=_i(m.value);n(p)},"processEncodedTx")()},[t,e]),r},"useSolanaGasEstimation"),Ru=o(async(t,e,r,n,i,s)=>{if(!s)throw new Error("Bid summary is required");let{collectionName:a,marketplace:u,receiveAmount:m,currencySymbol:p}=s,f={topRight:{text:`+${m} ${p}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${a}`},bottomLeft:{text:nn(u)}},{data:g,chainId:y,type:C}=e,{transaction:S}=g,w=co(S,"base64"),v={ownerAddress:r.solanaPublicKey,networkID:y,data:{signature:""},type:on.Sell,display:{summary:f}},{accountIdentifier:D,solanaPublicKey:N,connection:O}=r,K=new L.PublicKey(N),J=await Cs({accountIdentifier:D,feePayer:K,transaction:w,pendingTransactionInput:v,connection:O,accountSigner:n,storage:i,opts:{skipPreflight:!0}});return{type:C,data:J}},"executeTransactionStep"),_u="Steps are required",ju="These steps are not from the same bid",Cn=class extends Error{static{o(this,"StepsRequiredError")}message=_u},wn=class extends Error{static{o(this,"StepsFromDifferentBidError")}message=ju},Nu=o((t,e,r,n)=>{let i=Xt(),s=fe(),a=de(),u=Jt(),[m,p]=(0,je.useState)("idle"),[f,g]=(0,je.useState)(null),[y,C]=(0,je.useState)(null),{t:S}=Z(),w=Uu(),{chainId:v,connection:D,chainAddresses:N,isLedger:O}=w,K=v&&V.isSolanaNetworkID(v)?v:Yt.Solana.Mainnet,J=Pu(e,K);(0,je.useEffect)(o(function(){m==="loading"&&Sn(a,r)},"invalidateQueriesOnLoading"),[m,a,r]),(0,je.useEffect)(o(function(){m==="success"&&r&&ar(a,{id:r.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[m,a,N,r]);let lt=o(()=>{p("idle"),g(null),C(null)},"reset"),te=n&&r?.receiveAmount?r.receiveAmount*n:void 0;return{executeSellSolanaSteps:o(async()=>{try{if(t&&t!==r?.orderId)throw new wn;if(!Array.isArray(e)||e.length===0)throw new Cn;p("loading");for await(let ne of e){let ut=await Ru(S,ne,w,u,i,r);C(ut.data),await Ss({connection:D,signature:ut.data})}p("success"),s.capture("collectibleSellSuccess",{data:{bidSummary:r,usdSaleValue:te}})}catch(ne){let ut=ne?.message??"";(!(ne instanceof Cn)||!(ne instanceof wn))&&(Ce.captureError(ne,Ee.Collectibles),s.capture("collectibleSellFailure",{data:{bidSummary:r,usdSaleValue:te,errorMessage:ut}})),p("error"),g(ne)}},"executeSellSolanaSteps"),reset:lt,gas:J,error:f,result:y,status:m,isLedger:O}},"useInstantSellExecuteSolanaSteps");c();l();var Tg=o(t=>`${t/100}%`,"bpsToPercent"),ea=o((t,e)=>t*e/100/100,"bpsToValue");c();l();var sa=E(lo(),1),ur=E(k(),1);c();l();c();l();var ht=o((t,e,r,n)=>{(!e||e>=400&&e<500)&&(Ce.addBreadcrumb(r,t.message,Qi.Info,n),Ce.captureError(t,Ee.Collectibles))},"captureClientError");c();l();var xn;(function(t){t[t.Always=1/0]="Always",t[t.Short=re({days:1})]="Short",t[t.Medium=re({days:3})]="Medium",t[t.Long=re({days:7})]="Long"})(xn||(xn={}));var gt;(function(t){t[t.Immediate=0]="Immediate",t[t.Short=re({minutes:1})]="Short",t[t.Medium=re({minutes:2.5})]="Medium",t[t.Long=re({minutes:5})]="Long",t[t.Never=1/0]="Never"})(gt||(gt={}));var cr;(function(t){t[t.Shortest=re({seconds:10})]="Shortest",t[t.Shorter=re({seconds:30})]="Shorter",t[t.Short=re({minutes:1})]="Short",t[t.Medium=re({minutes:2.5})]="Medium",t[t.Long=re({minutes:5})]="Long",t[t.Longer=re({minutes:7.5})]="Longer",t[t.Longest=re({minutes:10})]="Longest"})(cr||(cr={}));var Lu=h.object({caip19:h.string(),name:h.string(),symbol:h.string()}),Vu=h.object({bps:h.number(),kind:h.union([h.literal("marketplace"),h.literal("royalty")]),recipient:h.string().optional()}),Fu=h.object({amount:h.number(),feeBreakdown:h.array(Vu),netAmount:h.number(),token:Lu,totalFeeBps:h.number()}),$u=h.object({name:h.string(),logo:h.string(),url:h.string().optional()}),zu=h.object({id:h.string(),expiration:h.string().optional(),price:Fu,source:$u}),Gu=h.object({bids:h.array(zu)}),ta=new We("Failed to fetch collectible bids."),Hu="collectible-instant-sell-bids",qu=o(async t=>{if(!t.address)throw ta;try{let e=await ke.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:r}=Gu.parse(e.data);return r}catch(e){if(pt(e)){let r=e.response?.status;ht(e,r,Hu)}throw ta}},"getCollectibleBids"),ra=o(({bidAsset:t,isEnabled:e})=>{let r=e&&t.address!==null&&t.chainId!==null;return Me({enabled:r,staleTime:gt.Short,refetchInterval:cr.Shortest,queryKey:H.collectibleBids(t),async queryFn(){return qu(t)}})},"useCollectibleBids"),na=o(t=>{let e=t?.chainData,r=t?.chain.id??null,n=Qe(e),i=ce(e),s=n?{tokenId:e.id}:{},a=i?{contractType:e.standard}:{},u=n?e.contract.toLowerCase():i?e.mint:null;return{chainId:r,address:u,resourceType:"address",...s,...a}},"createBidAsset");c();l();var Ku=E(k(),1);var oe=h.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),Wu=h.enum(["/execute/auth-signature/v1","/order/v3"]),Xe=h.enum(["transaction","signature","post","refetch"]),Qu=h.enum(["eip712","eip191"]),Yu=h.object({domain:h.any(),types:h.any(),value:h.any()}),Xu=h.object({message:h.string()}),Ju=h.object({from:h.string(),to:h.string(),data:h.string()}),Zu=h.object({endpoint:Wu,body:h.object({id:h.string(),kind:h.string()})}),ed=h.object({action:oe,chainId:Yr,type:h.literal(Xe.enum.signature),data:h.object({signatureKind:Qu,signatureData:h.union([Xu,Yu]),postData:Zu})}),td=h.object({chainId:Yr,action:oe,data:Ju,type:h.literal(Xe.enum.transaction)}),rd=h.object({chainId:Yr,action:oe,type:h.literal(Xe.enum.refetch),data:h.object({resource:h.string()})}),nd=h.union([ed,td,rd]),od=h.object({action:oe,chainId:Vi,type:h.literal(Xe.enum.transaction),data:h.object({transaction:h.string()})}),id=h.union([nd,od]),sd=h.object({steps:h.array(id),orderId:h.string().optional()}),ad=new We("Failed to fetch collectible sell steps."),cd="collectible-instant-sell-steps",ld=o(async t=>{try{let e=await ke.api().validateStatus(!0).post("/collectibles/v1/sell",t);return sd.parse(e.data)}catch(e){if(pt(e)){let r=e.response?.status;if(ht(e,r,cd),e.response?.data?.code){let{code:n}=e.response.data;throw{code:n}}if(r)throw e}throw ad}},"getCollectibleSellSteps"),oa=o(({sellAsset:t})=>{let e=t.details.orderId!==void 0;return Me({enabled:e,queryKey:H.collectibleSellSteps(t),staleTime:gt.Never,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:o((r,n)=>n.code?!1:r<3,"retry"),async queryFn(){return ld(t)}})},"useCollectibleSellSteps");var ia=o((t,e,r)=>{let n=r?.chainData,i=Qe(n),s=ce(n),a=r?.owner,u=i?a?.toLowerCase():a,m=e?.id,p=e?.source?.name,f=s?{minPrice:e?.price?.netAmount,tokenAccount:n.tokenAccount}:{};return{details:{asset:t,owner:u,orderId:m,marketplace:p,...f}}},"createSellAsset");c();l();Re.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var lr=o((t,e)=>new Re(t).div(an(e)).toNumber(),"amountToBalance");var ud={steps:[],orderId:""},dd=o(({collectible:t})=>{let{t:e}=Z(),r=(0,ur.useMemo)(()=>na(t),[t]),{data:n=[],isPending:i,isError:s}=ra({bidAsset:r,isEnabled:!0}),a=(0,ur.useMemo)(()=>n.length>0?n[0]:void 0,[n]),u=(0,ur.useMemo)(()=>ia(r,a,t),[r,a,t]),{data:m=ud,isPending:p,isError:f,refetch:g,error:y}=oa({sellAsset:u}),C=(0,ur.useMemo)(()=>a&&t?aa({t:e,bid:a,collectible:t}):void 0,[e,a,t]),S=(0,ur.useMemo)(()=>f?Number.isInteger(y.code):!1,[f,y]);return{bid:a,bidSummary:C,isLoadingBids:i,isErrorBids:s,sellSteps:m,isLoadingSellSteps:p,isErrorSellSteps:f,refetchSellSteps:g,sellStepsError:y,isSellErrorCode:S}},"useInstantSell"),md=o(({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,"calculatePNL"),pd=o(({offerAmount:t,collectionFloor:e})=>t-e,"calculateFloorDifference"),fd=o(t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",r=(0,sa.default)(t).format(e);return`${t>0?"+":""}${r}`},"getFloorDifferencePercentage"),hd=o(t=>{if(t){let{price:e,token:r}=t,n=r?.decimals;if(n)return lr(e,n)}},"parseCollectionFloor"),gd=o(t=>{if(t){let{price:e,token:r}=t,n=r?.decimals;if(n)return lr(e,n)}},"parseLastSale"),bd=o(t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large},"getCollectibleImagePreview"),dr;(function(t){t.BLUR="Blur"})(dr||(dr={}));var aa=o(({bid:t,collectible:e,t:r})=>{let{lastSalePrice:n,media:i,name:s,collection:a}=e,{name:u,logo:m}=t.source,{amount:p,netAmount:f,feeBreakdown:g,token:y,totalFeeBps:C}=t.price,{symbol:S,caip19:w}=y,v=0,D=f,N=a.id,O=e.id,K=gd(n),J=S.slice(0,6),lt=e.chain.symbol,te=hd(a.floorPrice),Se=te?pd({offerAmount:p,collectionFloor:te}):void 0,ne=Se?fd(Se):void 0;return{bidTokenSymbol:J,caip19:w,collectionId:N,collectibleId:O,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:lt,collectionFloor:te,collectibleImage:bd(i),collectibleName:s??r("collectiblesUnknownCollectible"),collectionName:a.name??r("collectiblesUnknownCollection"),currencySymbol:t.source.name===dr.BLUR?lt:J,fees:g,floorDifference:Se,floorDifferencePercent:ne,lastSale:K,marketplace:u,marketplaceLogoURL:m,offerAmount:p,offerAmountFormatted:gn(p),phantomFeePercentage:v,pnl:md({lastSale:K,receiveAmount:D}),receiveAmount:D,receiveAmountFormatted:gn(D),totalFeeBps:C}},"parseBidSummary"),yd=o(({gasFee:t,totalFeeBps:e,offerAmount:r})=>{let n=ea(e,r)+t.toNumber();return{raw:n,formatted:gn(n)}},"formatEstimatedFees");c();l();var ca=new Map([[oe.enum["nft-approval"],8e4],[oe.enum["blur-swap"],42e3],[oe.enum.sale,39e4],["default",42e4]]),Sd=o((t,e,r,n)=>{let i=t===dr.BLUR,s=r.filter(w=>w.type==="transaction").map(({action:w})=>({action:w}));if(s.some(({action:w})=>w===oe.enum["nft-approval"])||(s=[...s,{action:oe.enum["nft-approval"]}]),i){let w=s.some(({action:D})=>D===oe.enum.sale),v=s.some(({action:D})=>D===oe.enum["blur-swap"]);w||(s=[...s,{action:oe.enum.sale}]),v||(s=[...s,{action:oe.enum["blur-swap"]}])}let u=s?.reduce((w,{action:v})=>{let D=ca.get(v)??ca.get("default");return w+(D??0)},0),m=new ue(u),{status:p,data:f}=_s({gasLimit:m,networkID:e,transactionSpeed:er.standard}),{data:g}=js(e,f),y=ls(f),C=Number(y?.replace(/[^\d.]/g,"")??0),S=n?n.isGreaterThan(C):!1;return{gasEvm:C,gasEstimation:f,gasEstimationStatus:p,ethFeeUI:y,gasEstimationPrice:g,hasEnoughGas:S}},"useInstantSellEvmGasEstimation");c();l();var tt=E(k(),1);var Cd=o(()=>{let{data:t}=tn();return(0,tt.useMemo)(()=>{let r=t?.type,n=t?.name??"",i=t?.addresses??[],s=t?.identifier??"";return{isLedger:t?.type===en.Ledger,accountName:n,accountType:r,chainAddresses:i,accountIdentifier:s}},[t])},"useAccountMetadata"),wd=o(({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:n,accountSigner:i,storage:s,includeCallPayload:a})=>({accountSigner:i,accountIdentifier:n,networkID:t,unsignedTransaction:e,...a&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:on.Sell,display:{summary:r}},storage:s}),"buildArgs"),xd=o(async(t,e,r,n,i,s,a)=>{try{if(!r)throw new Error("Gas estimation is required");if(!a)throw new Error("Bid summary is required");let{data:u,chainId:m,action:p}=e,{collectionName:f,marketplace:g,receiveAmount:y,currencySymbol:C,collectibleChainSymbol:S,bidTokenSymbol:w}=a,v=nn(g),D={};p==="nft-approval"&&(D={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:f})},bottomLeft:{text:v}}),p==="sale"&&(D={topRight:{text:`+${y} ${C}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${f}`},bottomLeft:{text:v}}),p==="blur-swap"&&(D={topRight:{text:`+${y} ${S}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${y} ${w}`},bottomLeft:{text:v}});let N=Wt.parse({type:Kt.eip1559,to:u.to,from:u.from,data:u.data,chainId:V.getEVMNetworkIDValue(m),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`}),O=wd({storage:n,accountSigner:i,pendingActivityRows:D,includeCallPayload:!1,networkID:m,unsignedTransaction:N,accountIdentifier:s.accountIdentifier}),K=await ps(O);return{type:e.type,data:K}}catch(u){return{type:e.type,error:u}}},"executeTransactionStep"),Td=o(async(t,e,r)=>{try{let{chainId:n,data:i}=t,{signatureData:s,signatureKind:a,postData:u}=i;if(a==="eip191"&&"message"in s){let m=await e.sign(r.accountIdentifier,{signingType:"message",chainType:Qr.EVM,message:s.message});if(m.status==="success")return await ke.api().post("/collectibles/v1/submit-signature",{chainId:n,signature:m.signature,postData:u}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(n){return{type:t.type,error:n}}},"executeSignatureStep"),vd=o(async(t,e)=>{try{let{resource:r}=t.data;if(r==="/sell"){let{data:n}=await e();return{type:t.type,data:n?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(r){return{type:t.type,error:r}}},"executeRefetchSteps"),Ed=[oe.enum.auth,oe.enum["nft-approval"],oe.enum.sale],Id="Steps are required",Od="These steps are not from the same bid",Tn=class extends Error{static{o(this,"StepsRequiredError")}message=Id},vn=class extends Error{static{o(this,"StepsFromDifferentBidError")}message=Od},Ad=o((t,e,r,n,i,s,a)=>{let u=Xt(),m=fe(),p=de(),f=Jt(),[g,y]=(0,tt.useState)("idle"),[C,S]=(0,tt.useState)(null),[w,v]=(0,tt.useState)(null),{t:D}=Z(),N=Cd(),{chainAddresses:O,isLedger:K}=N;(0,tt.useEffect)(o(function(){g==="loading"&&Sn(p,i)},"invalidateQueriesOnLoading"),[g,p,i]),(0,tt.useEffect)(o(function(){g==="success"&&i&&ar(p,{id:i.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[g,p,O,i]);let J=o(()=>{y("idle"),S(null),v(null)},"reset"),lt=a&&i?.receiveAmount?i.receiveAmount*a:void 0,te=o(async(Se,ne=new Map)=>{let ut=Se??e;try{if(t&&t!==""&&t!==i?.orderId)throw new vn;if(!Array.isArray(ut)||ut.length===0)throw new Tn;y("loading");for await(let dt of ut){let{action:mt}=dt,ru=ne.get(mt)==="success",nu=mt===oe.enum.sale,Ui=mt===oe.enum.refetch,ou=Ed.some(qt=>qt===mt);if(ru)continue;Ui||ne.set(mt,"loading");let iu=o(async qt=>{switch(qt.type){case Xe.enum.transaction:return await xd(D,qt,r,u,f,N,i);case Xe.enum.signature:return await Td(qt,f,N);case Xe.enum.refetch:return await vd(qt,n)}},"handleStep"),{type:Pi,data:ao,error:Ri}=await iu(dt);if(ou&&Ri)throw Ri;if(ao&&(Ui||ne.set(mt,"success"),Pi===Xe.enum.transaction&&nu&&v(ao),Pi===Xe.enum.refetch))return await Ji(500),await te(ao,ne)}y("success"),m.capture("collectibleSellSuccess",{data:{bidSummary:i,usdSaleValue:lt}})}catch(dt){let mt=dt?.message??"";(!(dt instanceof Tn)||!(dt instanceof vn))&&(Ce.captureError(dt,Ee.Collectibles),m.capture("collectibleSellFailure",{data:{bidSummary:i,usdSaleValue:lt,errorMessage:mt}})),y("error"),S(dt)}},"executeSellEvmSteps");return{executeSellEvmSteps:te,reset:J,error:C,result:w,status:g,isLedger:K}},"useInstantSellExecuteEvmSteps");c();l();var kd=.01,Md=o(t=>{let{fungible:e}=zs({key:Ds(t.collectibleChainId,void 0)}),r=e?.data.balance;return{hasEnoughGas:r?r.isGreaterThan(kd):!1}},"useInstantSellSolanaGasEstimation");c();l();var yt=E(k(),1);c();l();var xo=E(k(),1);c();l();c();l();var la=o(t=>{let e=!1;return{collectibles:t.reduce((n,i)=>{let s=bo.safeParse(i);return s.success?n.push(s.data):e=!0,n},[]),containsParseFailure:e}},"parseCollectiblesResponse");var Dd="collectibles",Bd=new Error("Failed to fetch collectibles for addresses");async function ua(t){let e="/collectibles/v1";try{let n=(await ke.api().post(e,{addresses:t})).data,i=!!n.isTrimmed;if(!n.collectibles)throw Bd;let{collectibles:s,containsParseFailure:a}=la(n.collectibles);return a&&Ce.captureError(new Error("collectibles failed to parse some items"),Ee.Collectibles),{allCollectibles:s,isTrimmed:i}}catch(r){if(pt(r)){let n=r.response?.status;ht(r,n,Dd)}throw r}}o(ua,"getCollectibles");c();l();c();l();var ma=o(t=>{let e=[];for(let[r,n]of t){n.sort((s,a)=>{let u=s.name??"",m=a.name??"",p=u.localeCompare(m);if(u.localeCompare(m))return p;let f=da(s),g=da(a);return f.localeCompare(g)});let[i]=n;i&&e.push({..."externalUrl"in i?{externalUrl:i.externalUrl}:void 0,...i.collection,items:n})}return e.sort((r,n)=>{if(r.items.length>n.items.length)return-1;if(n.items.length>r.items.length)return 1;let i=r.name??r.id??"",s=n.name??n.id??"";return i.localeCompare(s)})},"sortCollections");function da(t){let e=t.chainData;return ce(e)?e.tokenAccount:Qe(e)?e.id:(Ye(e),t.id)}o(da,"extractChainDataSortKey");function pa(t){let e=new Map;for(let r of t){let n=r.collection.id,i=e.get(n)??[];i.push(r),e.set(n,i)}return ma(e)}o(pa,"mapCollectiblesToCollections");var fa=o(({addresses:t,queryOptions:e={staleTime:gt.Short,refetchInterval:cr.Long,enabled:!0},select:r})=>{let n=de(),i=H.collections(t),s=t.length!==0&&t.every(a=>!V.isLocalNetworkID(a.networkID));return Me({enabled:s&&e.enabled,queryKey:i,gcTime:xn.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:a}]}){let[u]=await Promise.allSettled([ua(a)]);if(u.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:m,isTrimmed:p}=u.status==="fulfilled"?u.value:{allCollectibles:[],isTrimmed:!1},f=pa(m),g=await Js(n),y=Zs(f,g);return{items:y,nrOfItems:y.reduce((C,S)=>C+S.items.length,0),isTrimmed:p}},select:r})},"useCollectionsQuery"),Dt=o(t=>fa({...t,select:(0,xo.useCallback)(e=>e.items,[])}),"useCollections"),Ud=o(t=>fa({...t,select:(0,xo.useCallback)(r=>r.isTrimmed,[])}).data??!1,"useCollectionsAreTrimmed");c();l();var pe=E(k(),1);c();l();var Ut=E(k(),1);c();l();var ya=E(k(),1);c();l();var ba=E(k(),1);c();l();var X;(function(t){t.AccountIdToVisibilitySettings="accountIdToCollectibleVisibilitySettings",t.HiddenCollections="hiddenCollections",t.PinnedCollections="pinnedCollections",t.UnhiddenCollections="unhiddenCollections"})(X||(X={}));var ha=2,Pd=h.object({version:h.literal(ha),value:h.record(h.array(h.object({id:h.string(),status:h.nativeEnum($)})))}),Rd=o((t,e)=>{let r=e,n=t;return r||n||null},"visibilityOverridesResolver"),_d=h.record(h.array(h.string())),ga=o((t,e)=>{let r=e,n=t;return r||n||null},"pinnedCollectionsResolver"),jd=o(t=>{let e=t[X.HiddenCollections],r=t[X.UnhiddenCollections];if(!e&&!r)return null;let n={};return e&&Object.entries(e).forEach(([i,s])=>{n[i]||(n[i]=[]),s.forEach(a=>{n[i].push({id:a,status:$.Hidden})})}),r&&Object.entries(r).forEach(([i,s])=>{n[i]||(n[i]=[]);let a=new Set(n[i].map(u=>u.id));s.forEach(u=>{a.has(u)||n[i].push({id:u,status:$.Visible})})}),{version:ha,value:n}},"migrateVisibilityOverrides"),Nd=o(t=>t[X.PinnedCollections]??null,"migratePinnedCollections"),[Ld,En,In]=Yi("collectibles",[{key:X.AccountIdToVisibilitySettings,type:"object",validator:Pd,nullable:!0,resolver:Rd,updateOn:"idle"},{key:X.PinnedCollections,type:"object",validator:_d,nullable:!0,resolver:ga,updateOn:"idle"}]),qy=[{legacyKeys:[X.HiddenCollections,X.UnhiddenCollections],targetSchema:"collectibles",targetKey:X.AccountIdToVisibilitySettings,migrate:jd},{legacyKeys:[X.PinnedCollections],targetSchema:"collectibles",targetKey:X.PinnedCollections,migrate:Nd}],On=o((...t)=>Wi(Ld,...t),"useCollectiblesStorage");var Ky={...Xi(X.PinnedCollections,["collectibles","pinnedCollections"],ga)};var Vd=2e3,mr=class extends We{static{o(this,"UseSetCollectionVisibilityError")}constructor(e){super(e),this.name="UseSetCollectionVisibilityError"}};function Fd(t,e,r){let n=Object.values(t.value).reduce((s,a)=>s+a.length,0),i=r.filter(({id:s,visibility:a})=>a!==null&&!t.value[e]?.some(u=>u.id===s));if(i.length>0&&n+i.length>Vd){let s=i.some(a=>a.visibility===$.Hidden||a.visibility===$.HiddenSpam);throw new mr(s?"Too many ids hidden":"Too many ids unhidden")}}o(Fd,"checkVisibilityOverrideLimit");function $d(t,e){let r=new Map(t.map(n=>[n.id,n]));for(let{id:n,visibility:i}of e)i===null?r.delete(n):r.set(n,{id:n,status:i});return Array.from(r.values())}o($d,"applyMutationsToMap");function zd(t,e){for(let{id:r,visibility:n}of t)n!==null&&e.capture(n.includes("hidden")?"collectionHidden":"collectionUnhidden",{data:{id:r}})}o(zd,"captureVisibilityAnalytics");function An(t){let e=fe(),r=de();return(0,ba.useCallback)(async(n,i)=>{let s=i?.checkLimit??!1;if(!t)return;let a=await In(X.AccountIdToVisibilitySettings)??{version:2,value:{}};s&&Fd(a,t,n);let u=a.value[t]??[],m=$d(u,n),p={...a.value,[t]:m};await En(X.AccountIdToVisibilitySettings)({version:2,value:p}),zd(n,e),await Promise.allSettled([r.invalidateQueries({queryKey:H.visibilityOverrides(t)}),r.invalidateQueries({queryKey:H.hiddenCollections(t)}),r.invalidateQueries({queryKey:H.unhiddenCollections(t)})])},[t,e,r])}o(An,"useSetCollectionVisibility");function Bt(t){let e=An(t);return(0,ya.useCallback)(async r=>{let n=r.map(({id:i,visibility:s})=>({id:i,visibility:s}));await e(n,{checkLimit:!1})},[e])}o(Bt,"useSetVisibilityOverrides");c();l();var Sa=E(k(),1);function me(t){let e=On(X.AccountIdToVisibilitySettings);return{data:(0,Sa.useMemo)(()=>{if(!t)return new Map;let i=e?.value?.[t]??[];return new Map(i.map(s=>[s.id,s]))},[t,e]),isPending:!!t&&e===void 0}}o(me,"useVisibilityOverrides");async function kn({collectible:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:n,desiredVisibility:i,onSuccess:s,onError:a}){if(!n)return;let u=t.collection.id||t.id,m=e.get(u)?.status;try{let p=wa(i,t.collection);await r([{id:u,visibility:p}]),await s({collectible:t,desiredVisibility:i,previousVisibility:m,updatedVisibility:p})}catch(p){await a(p,{collectible:t,desiredVisibility:i})}}o(kn,"handleChangeVisibilityForCollectible");async function Ca({collection:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:n,desiredVisibility:i,onSuccess:s,onError:a}){if(!n)return;let u=t.id,m=e.get(u)?.status;try{let p=wa(i,t);await r([{id:u,visibility:p}]),s&&await s({collection:t,desiredVisibility:i,previousVisibility:m,updatedVisibility:p})}catch(p){a&&await a(p,{collection:t,desiredVisibility:i})}}o(Ca,"handleChangeVisibilityForCollection");function wa(t,e){let{spamStatus:r}=e,n=Ts({minimum:Ke.NotVerified,spamStatus:r});switch(t){case $.HiddenSpam:if(n)return $.HiddenSpam;if(r===Ke.PossibleSpam||r===Ke.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking spam.`);case $.VisibleNotSpam:if(n)return null;if(r===Ke.PossibleSpam||r===Ke.Spam)return $.VisibleNotSpam;throw new Error(`Unexpected spam status: ${r} found while marking not spam.`);case $.Hidden:if(n)return $.Hidden;if(r===Ke.PossibleSpam||r===Ke.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking hidden.`);case $.Visible:if(n)return null;if(r===Ke.PossibleSpam||r===Ke.Spam)return $.Visible;throw new Error(`Unexpected spam status: ${r} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}o(wa,"calculateNewVisibility");function bt(t){return{networkId:t.chain.id,chainId:V.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}o(bt,"computeCollectibleAnalyticsPayload");function xa({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Bt(t);return(0,Ut.useCallback)(async s=>{await kn({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.HiddenSpam,onSuccess:r,onError:e})},[n,i,t,e,r])}o(xa,"useMarkAsSpam");function Ta({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Bt(t);return(0,Ut.useCallback)(async s=>{await kn({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.VisibleNotSpam,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ta,"useMarkAsNotSpam");function va({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Bt(t);return(0,Ut.useCallback)(async s=>{await kn({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Hidden,onSuccess:r,onError:e})},[n,i,t,e,r])}o(va,"useMarkAsHidden");function Ea({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Bt(t);return(0,Ut.useCallback)(async s=>{await kn({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Visible,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ea,"useMarkAsVisible");function Ia({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Bt(t);return(0,Ut.useCallback)(async s=>{await Ca({collection:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Hidden,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ia,"useMarkCollectionAsHidden");function Oa({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Bt(t);return(0,Ut.useCallback)(async s=>{await Ca({collection:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Visible,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Oa,"useMarkCollectionAsVisible");c();l();var To=E(k(),1);var Aa=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=fe(),i=(0,To.useCallback)(({collectible:a,updatedVisibility:u})=>{u!==null&&n.capture("collectionHidden",{data:bt(a)}),t&&t.success(r("collectionHideSuccess"))},[r,t,n]),s=(0,To.useCallback)((a,u)=>{t&&t.error(r("collectionHideFail"))},[r,t]);return va({accountId:e,onSuccess:i,onError:s})},"useHideCollectible");c();l();var vo=E(k(),1);var ka=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=fe(),i=(0,vo.useCallback)(({collectible:a,updatedVisibility:u})=>{u!==null&&n.capture("collectionUnhidden",{data:bt(a)}),t&&t.success(r("collectionUnhideSuccess"))},[r,t,n]),s=(0,vo.useCallback)((a,u)=>{t&&t.error(r("collectionUnhideFail"))},[r,t]);return Ea({accountId:e,onSuccess:i,onError:s})},"useUnhideCollectible");function Gd({accountId:t,collectible:e,toast:r}){let n=Aa({accountId:t,toast:r}),i=(0,pe.useCallback)(()=>{if(e)return n(e)},[n,e]),s=ka({accountId:t,toast:r}),a=(0,pe.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:u}=me(t),m=(0,pe.useMemo)(()=>u.get(e?.collection.id??e?.id??""),[u,e]),p=(0,pe.useMemo)(()=>e?hn(m,{spamStatus:e.collection.spamStatus}):!1,[e,m]),f=(0,pe.useCallback)(()=>p?a():i(),[p,i,a]);return(0,pe.useMemo)(()=>({isHidden:p,onHideCollectible:i,onUnhideCollectible:a,onToggleHide:f}),[i,f,a,p])}o(Gd,"useCollectiblesHideUnhide");function Hd(t){let{data:e,isPending:r}=me(t),n=(0,pe.useCallback)(a=>{if(!a)return!1;let u=a.collection.id||a.id;return ho(e,{spamStatus:a.collection.spamStatus,key:u})},[e]),i=(0,pe.useCallback)(a=>{if(!a)return De.NotVerified;let u=a.collection.id||a.id;return fo(e,{spamStatus:a.collection.spamStatus,key:u})},[e]),s=(0,pe.useCallback)(a=>Or(i(a)),[i]);return(0,pe.useMemo)(()=>({getIsHidden:n,getSpamStatus:i,getIsSpam:s,isLoading:r}),[n,i,s,r])}o(Hd,"useGetCollectibleVisibilityStatus");function Ma(t){let{data:e,isPending:r}=me(t),n=(0,pe.useCallback)(a=>{if(!a)return!1;let u=a.id;return ho(e,{spamStatus:a.spamStatus,key:u})},[e]),i=(0,pe.useCallback)(a=>{if(!a)return De.NotVerified;let u=a.id;return fo(e,{spamStatus:a.spamStatus,key:u})},[e]),s=(0,pe.useCallback)(a=>Or(i(a)),[i]);return(0,pe.useMemo)(()=>({getIsHidden:n,getSpamStatus:i,getIsSpam:s,isLoading:r}),[n,i,s,r])}o(Ma,"useGetCollectionVisibilityStatus");function Da(t){let e=Ma(t),r=Ia({accountId:t}),n=Oa({accountId:t});return(0,pe.useMemo)(()=>({...e,hideCollection:r,unhideCollection:n}),[e,r,n])}o(Da,"useCollectionVisibilityOverrides");c();l();var Ba=E(k(),1);var qd=o(t=>t.reduce((e,r)=>({...e,[r]:1}),{}),"convertIdArrayToObj");function Eo({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:n}){let i=[],s=[],a=[],u=[],m=qd(e),p={};for(let g of t)n(g)&&r(g)?u.push(g):r(g)?s.push(g):m[g.id]?p[g.id]=g:n(g)?a.push(g):i.push(g);let f=[];for(let g of e)p[g]&&f.push(p[g]);return{collections:[...f,...i,...a],hiddenCollections:s,spamCollections:u}}o(Eo,"orderedCollections");var Kd=o(({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:n})=>(0,Ba.useMemo)(()=>Eo({allCollections:t,pinnedCollectionIds:e,getIsHidden:r,getIsSpam:n}),[t,r,n,e]),"useOrderedCollections");c();l();var Mn=E(k(),1);var Io={location:0,distance:50,threshold:.3},eC={...Io,keys:["name"]},tC={...Io,keys:["name"]},rC={...Io,keys:["name"]},Mr=o((t,e)=>{if(e===void 0)return!1;let r=t.toLowerCase();return e.toLowerCase().split(" ").map(n=>n.startsWith(r)||r.startsWith(n)&&e.toLowerCase().includes(r)).includes(!0)},"filterByWordPrefix");var Ua=o((t,e)=>(0,Mn.useMemo)(()=>({collections:t.filter(n=>Mr(e,n.name||n.items[0].name))}),[e,t]),"useSearchCollections"),Wd=o((t,e,r,n)=>{let i=(0,Mn.useMemo)(()=>t.flatMap(s=>s.items),[t]);return(0,Mn.useMemo)(()=>{let s=t.filter(p=>Mr(n,p.name)),a=i.filter(p=>Mr(n,p.name)),u=e.filter(p=>Mr(n,p.name)),m=r.filter(p=>Mr(n,p.name));return{collections:s,collectibles:a,hiddenCollections:u,spamCollections:m}},[n,i,t,e,r])},"useSearchCollectiblesStrict");var Qd=re({seconds:10}),Yd=re({seconds:5});function Xd({account:t}){let e=t?.identifier??"",r=t?.addresses??[],{data:n=[],isLoading:i}=Dt({addresses:r,queryOptions:{staleTime:Yd,refetchInterval:Qd}}),[s,a]=(0,yt.useState)(""),u=ns(s)??"",m=(0,yt.useCallback)(O=>a(typeof O=="string"?O:O.currentTarget.value),[a]),{getIsHidden:p,getIsSpam:f,getSpamStatus:g,hideCollection:y,unhideCollection:C,isLoading:S}=Da(e),w=(0,yt.useMemo)(()=>{let{collections:O,hiddenCollections:K,spamCollections:J}=Eo({allCollections:n,getIsHidden:p,getIsSpam:f});return[...O,...K,...J]},[n]),v=Ua(w,u),D=(0,yt.useCallback)(({item:O,status:K})=>K==="show"?C(O):y(O),[C,y]);return{viewState:(0,yt.useMemo)(()=>({accountId:e,listItems:u?v.collections:w,searchQuery:s,debouncedSearchQuery:u,handleSearch:m,getIsHidden:p,getIsSpam:f,getSpamStatus:g,onToggleHidden:D}),[e,v.collections,s,m,w,D,p,f,g,u]),viewStateLoading:S||i}}o(Xd,"useManageCollectionsVisibilityViewState");c();l();var Oo=E(au());c();l();var Dn={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new Re(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},Pa=class extends Error{static{o(this,"SendFungibleFlowError")}constructor(e){super(e),this.name="SendFungibleFlowError"}};var Ra={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:Dn,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},Jd=Zt((t,e)=>({...(0,Oo.default)(Ra),resetSendSlice:o(()=>{let r=(0,Oo.default)(Ra);r.sendSessionId=Ni(),t(r)},"resetSendSlice"),setAnalyticsRecipient:o(r=>{t({analyticsRecipient:r})},"setAnalyticsRecipient"),setSendFungibleKey:o((r,n,i)=>{t({fungibleKey:r,splTokenAccount:n,encodedCaip19:i})},"setSendFungibleKey"),setSendFormValues:o(r=>{t({sendFormValues:r})},"setSendFormValues"),setInputAmount:o(r=>{let n=e();t({sendFormValues:{...n.sendFormValues,inputAmount:r}})},"setInputAmount"),setShouldShowFiatValues:o(r=>{t({shouldShowFiatValues:r})},"setShouldShowFiatValues"),setRetryArgs:o(r=>{t({retryArgs:r})},"setRetryArgs"),setGasEstimation:o(r=>{t({gasEstimation:r})},"setGasEstimation")}));c();l();var _a={collectible:void 0,sendFormValues:Dn,shouldRequireAmount:!1},Ao=Zt(t=>({..._a,resetSendSlice:o(()=>{t({..._a})},"resetSendSlice"),setSendCollectible:o(e=>{t({collectible:e})},"setSendCollectible"),setSendFormValues:o(e=>{t({sendFormValues:e})},"setSendFormValues"),setShouldRequireAmount:o(e=>{t({shouldRequireAmount:e})},"setShouldRequireAmount")}));c();l();c();l();var le=E(cu(),1);var Zd="token-account-min-balances",ja=le.struct([le.blob(32,"mint"),le.blob(32,"owner"),le.nu64("amount"),le.blob(93)]),zC=le.struct([le.blob(44),le.u8("decimals"),le.blob(37)]),em=le.struct([le.blob(679)]),tm=le.struct([le.u8("edition"),le.blob(281)]),rm=o(async t=>t.getMinimumBalanceForRentExemption(ja.span).then(ue),"getTokenAccountCostAsync"),nm=o(async t=>ue(await t.getMinimumBalanceForRentExemption(em.span)+await t.getMinimumBalanceForRentExemption(tm.span)+await t.getMinimumBalanceForRentExemption(ja.span)),"getMplTokenAccountCostAsync");function om({tokenEdition:t,connection:e}){return Me({queryKey:[Zd,{tokenEdition:t}],queryFn:o(async()=>e?t===null||!yn(t)?rm(e):nm(e):ue(0),"queryFn")})}o(om,"useTokenAccountMinBalance");c();l();var Na=E(k(),1);var im=o((t,e,r=!1,n)=>(0,Na.useMemo)(()=>{if(t)return Bn({collectibleMedia:t,isImageAnimationEnabled:r,previewSize:n??"medium",mediaTypeOverride:e})},[t,e,r,n]),"useCollectibleMediaURI"),Bn=o(({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:r,mediaTypeOverride:n})=>{let i=n??t.type;if((i==="image"||i==="other")&&t.previews?.[r]){let a=e?"":`${r==="medium"?"=":"-"}k`;return`${t.previews[r]}${a}`}return t[i]?.url},"parseCollectibleMediaURI");c();l();c();l();var La={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},Va=o(t=>({...La,resetBurnCollectible:o(()=>t({...La}),"resetBurnCollectible"),setBurnCollectibleTx:o(e=>t({burnCollectibleTx:e}),"setBurnCollectibleTx"),setBurnCollectibleTxFee:o(e=>t({burnCollectibleTxFee:e}),"setBurnCollectibleTxFee")}),"createBurnCollectibleSlice");c();l();var Fa={multichainSellCollectible:void 0},$a=o(t=>({...Fa,resetMultichainSellCollectible:o(()=>t({...Fa}),"resetMultichainSellCollectible"),setMultichainSellCollectible:o(e=>t({multichainSellCollectible:e}),"setMultichainSellCollectible")}),"createMultichainSellCollectibleSlice");c();l();var za={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},Ga=o(t=>({...za,reset:o(()=>t({...za}),"reset"),setListCollectible:o(e=>t({listCollectible:e}),"setListCollectible"),setListPrice:o(e=>t({listCollectiblePrice:e}),"setListPrice"),setEditListPrice:o(e=>t({editListCollectiblePrice:e}),"setEditListPrice"),setUnlistCollectible:o(e=>t({unlistCollectible:e}),"setUnlistCollectible"),setTransactionURL:o(e=>t({transactionURL:e}),"setTransactionURL")}),"createListCollectibleSlice");c();l();var Ha={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},qa=o(t=>({...Ha,reset:o(()=>t({...Ha}),"reset"),setMultichainListCollectible:o(e=>t({multichainListCollectible:e}),"setMultichainListCollectible"),setMultichainListPrice:o(e=>t({multichainListCollectiblePrice:e}),"setMultichainListPrice"),setEditMultichainListPrice:o(e=>t({editMultichainListCollectiblePrice:e}),"setEditMultichainListPrice"),setUnlistMultichainCollectible:o(e=>t({unlistMultichainCollectible:e}),"setUnlistMultichainCollectible"),setMultichainTransactionURL:o(e=>t({multichainTransactionURL:e}),"setMultichainTransactionURL")}),"createMultichainListCollectibleSlice");var sm=Zt((t,e)=>({...Ga(t,e),...Va(t,e),...qa(t,e),...$a(t,e)}));c();l();c();l();var am=500,Ka=H.collections([])[1],cm=[Ka,H.hiddenCollections("")[1],H.unhiddenCollections("")[1],H.pinnedCollections("")[1]],lm=o(t=>{let e=String(t.queryKey[1]);return e===Ka?t.state.data?.nrOfItems<=am:cm.includes(e)},"collectiblesShouldDehydrateQueryPredicate");c();l();var nc=E(k(),1);c();l();c();l();c();l();c();l();c();l();var um=o(t=>{let e=Math.abs(t);if(e<1e3)return t;let r=Math.floor(Math.log10(e)),n=r>=6?1e5:r>=5?1e3:100;return Math.sign(t)*Math.floor(e/n)*n},"floorForDisplay"),Wa=o((t,e={})=>{let r=typeof t=="number"?t:Re(t).toNumber(),{includePlusPrefix:n=!1,prefix:i="",infix:s="",suffix:a="",extendedDecimalsForSmallNumbers:u=!1,minimumAmount:m=.01,format:p="0,0.[00]",decimalFormatSmallNumbers:f="0.[00]",roundDecimals:g=!1}=e,y=r<0?"-":"",C=n&&r>0?"+":y,S=g?Ps(Math.abs(r)):Math.abs(r);if(e.compact&&S>=1e3&&(S=Math.abs(um(r))),Math.abs(r)>=m||r===0){let w=Math.abs(r)>1?e.compact?"0.[00]a":p:f,v=(0,Us.default)(S).format(w);return`${i}${C}${s}${v}${a}`}else if(u){let w=new Re(S).abs().toFormat();return`${i}${C}${s}${w}${a}`}else return`${i}${C}<${s}${new Re(m).toFormat()}${a}`},"formatNumber");var Qa=o((t,e={})=>Wa(t,{...e,infix:"$",format:e.compact?"0.[00]a":e.format??"0,0.00",decimalFormatSmallNumbers:e.decimalFormatSmallNumbers??"0.00"}),"formatDollarAmount");var dm=5e4,mm="https://help.magiceden.io/en/articles/8450002-mastering-utxo-management-extracting-splitting-sats-on-magic-eden-bitcoin",Ya={sendSuccessCondition:xe.SUBMISSION,collectibleDetailPrecision:7,collectibleDetailCtaBanner:o((t,e)=>{let r=t.chainData;if(sr(r)&&e){let n=new ue(r.utxoDetails.value??0);if(n.lte(dm))return;let i=Object.values(r.utxoDetails.satributes).reduce((m,{count:p})=>m+p,0),s=uo(i,V.bitcoin.tokenDecimals),a=uo(n,V.bitcoin.tokenDecimals),u=Qa(a.minus(s).times(e));return{title:Ie.t("collectibleDetailUtxoSplitterCtaTitle"),subtitle:Ie.t("collectibleDetailUtxoSplitterCtaSubtitle",{value:u}),iconColor:"spotPositive",modal:{title:Ie.t("collectibleDetailUtxoSplitterModalCtaTitle"),subtitle:Ie.t("collectibleDetailUtxoSplitterModalCtaSubtitle",{value:u}),buttonText:Ie.t("collectibleDetailUtxoSplitterModalCtaButton"),uri:mm,iconColor:"spotPositive"}}}},"collectibleDetailCtaBanner")};c();l();var St={sendSuccessCondition:xe.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};c();l();var Xa={sendSuccessCondition:xe.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};c();l();var Ja={sendSuccessCondition:xe.CONFIRMATION,collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var pm=new Ki({[_e.Solana]:Xa,[_e.Ethereum]:St,[_e.Polygon]:St,[_e.Base]:St,[_e.Monad]:St,[_e.Arbitrum]:St,[_e.Bitcoin]:Ya,[_e.Sui]:Ja,[_e.Hypercore]:St,[_e.Hyperevm]:St}),Pt=qi(pm);c();l();var tc=E(k(),1);c();l();var Za=E(lo(),1);var ec=o(({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,Za.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}},"formatTrait");var rc=o(t=>(0,tc.useMemo)(()=>{if(!t)return[];let e=t.chainData;return Ye(e)&&e.utxoDetails?e.utxoDetails.satributes.map(({count:r,displayName:n,description:i,url:s})=>({type:n.toUpperCase(),value:Ie.t(fm(r,"collectibleDetailSatsCount_one","collectibleDetailSatsCount_other"),{count:r})??"",modal:{name:n,description:i,iconUrl:s}})):t.attributes.map(({trait_type:r,value:n,display_type:i})=>({type:r,value:ec({value:n,type:i})}))},[t]),"useCollectibleTraits"),fm=o((t,e,r)=>t===1?e:r,"getI18nKey");function hm(t){let{chain:e,owner:r}=t||{},n=e?.id,{data:i}=rn({address:r,networkID:n});Fs(i);let s=rc(t),a=n?V.getChainID(n):void 0,u=a?Hi(a):void 0,{data:m}=Bs({query:u?{data:u}:void 0});return{ctaBanner:(0,nc.useMemo)(()=>{if(!(!t||!m||!a))return Pt.get(a).collectibleDetailCtaBanner?.(t,m.price)},[a,t,m]),traits:s}}o(hm,"useCollectibleDetailViewState");c();l();c();l();c();l();c();l();var oc=E(Xr(),1),ic=E(Xr(),1),sc=E(Fi(),1);var ac=o(({value:t,senderAddress:e,recipient:r,utxoState:{safeToSendUtxos:n},feerate:i,utxoHash:s,utxoIndex:a})=>{let u={transactionHash:s,index:a,value:t,isSafeToSend:!1,owner:e},m=[u],p=[{address:r,value:parseFloat(u.value),script:(0,sc.toOutputScript)(r)}],f=mn(Jr(Yt.Bitcoin.Mainnet,e),n,p,i,m),g=new ic.Psbt({network:oc.networks.bitcoin});if(f.type==="success"){let{inputs:y,outputs:C}=f;g.addInputs(y.map(S=>pn(S,e,!0))),g.addOutputs(C)}return[g,g.data.inputs.map((y,C)=>({address:e,signingIndexes:[C]})),f.vb]},"createOrdinalsTransaction");c();l();var cc=E(Xr(),1),lc=E(Xr(),1),uc=E(Fi(),1);var dc=o(({hash:t,index:e,value:r,senderAddress:n,recipient:i,utxoState:{safeToSendUtxos:s},feerate:a})=>{let u={index:e,transactionHash:t,value:r,isSafeToSend:!1,owner:n},m=[u],p=[{address:i,value:parseFloat(u.value),script:(0,uc.toOutputScript)(i)}],f=mn(Jr(Yt.Bitcoin.Mainnet,n),s,p,a,m),g=new lc.Psbt({network:cc.networks.bitcoin});if(f.type==="success"){let{inputs:C,outputs:S}=f;g.addInputs(C.map(w=>pn(w,n,!0))),g.addOutputs(S)}let y=g.data.inputs.map((C,S)=>({address:n,signingIndexes:[S]}));return[g,y,f.vb]},"createRareSatsTransaction");function mc({chain:t,owner:e,chainData:r},{recipient:n,transactionSpeed:i=er.standard},{utxoState:s,transactionSpeedsToUnitCost:a}){let u,m,p;if(!e)throw new Error("Owner is required");let f=t.id,g=a[i],y=r,C=g,S=Math.round(C?cs(C.btcPerKilobyte).toNumber():as);if(Xs(y)){let{outputValue:w,utxoHash:v,utxoIndex:D}=y;[u,m,p]=ac({value:w,senderAddress:e,recipient:n,utxoState:s,feerate:S,utxoHash:v,utxoIndex:D})}else if(sr(y)){let{utxoDetails:w}=y;[u,m,p]=dc({feerate:S,senderAddress:e,recipient:n,utxoState:s,hash:w.hash,index:w.index,value:w.value.toString()})}else throw new Error("Unsupported bitcoin transfer transaction");return{networkID:f,psbt:u,vb:p,psbtChain:void 0,inputsToSign:m}}o(mc,"createBitcoinTransferTransaction");c();l();c();l();var gm=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],pc=new Error("Error populating ERC721 transaction data."),fc=o(async t=>{let{sender:e,networkID:r,destination:n,contractAddress:i,tokenID:s}=t,a=cn(r,i,gm,e),u;try{let p=await a.populateTransaction.safeTransferFrom(e,n,new ue(s).toString(10));if(p.data)u=p.data;else throw pc}catch{throw pc}return Wt.parse({type:Kt.eip1559,from:e,to:i,chainId:V.getEVMNetworkIDValue(r),data:u})},"createErc721TransferTransaction");c();l();var bm=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],hc=new Error("Error populating ERC1155 transaction data."),gc=o(async t=>{let{sender:e,networkID:r,destination:n,contractAddress:i,tokenID:s,value:a}=t,u=cn(r,i,bm,e),m;try{let f=await u.populateTransaction.safeTransferFrom(e,n,new ue(s).toString(10),a.toString(10),[]);if(f.data)m=f.data;else throw hc}catch{throw hc}return Wt.parse({type:Kt.eip1559,from:e,to:i,chainId:V.getEVMNetworkIDValue(r),data:m})},"createErc1155TransferTransaction");async function bc({chain:t,chainData:e,owner:r},{recipient:n,amountAsset:i}){let s=e,a=t.id,u;if(ym(s)){let{contract:m,id:p}=s;u=await fc({networkID:a,sender:r??"",destination:n,contractAddress:m,tokenID:p})}else if(Sm(s)){let{contract:m,id:p}=s;u=await gc({networkID:a,sender:r??"",destination:n,contractAddress:m,tokenID:p,value:i??"1"})}else throw new Error(`Unsupported EVM collectible type: ${s.standard}`);return{networkID:a,unsignedTransaction:u}}o(bc,"createEvmTransferTransaction");function ym(t){return t.standard===Ar.ERC721}o(ym,"isErc721Collectible");function Sm(t){return t.standard===Ar.ERC1155}o(Sm,"isErc1155Collectible");c();l();c();l();c();l();var Un=class extends Error{static{o(this,"CompressionProofError")}constructor(e){super(e),this.name="ProofError"}};async function yc({networkID:t,mintAddress:e}){let r="/collectibles/v1/proof",n;try{n=await ke.api().post(r,{chainId:t,address:e})}catch{let s=new Un(`Failed to fetch proof for ${e} on network ${t}.`);throw Ce.captureError(s,Ee.Collectibles),s}if(n.status!==200){let s=new Un(`Failed to fetch proof for ${e} on network ${t}.`);throw Ce.captureError(s,Ee.Collectibles),s}return await n.data}o(yc,"getCompressionProof");async function Sc({networkID:t,mint:e,recipient:r}){let n=new Qt.Transaction,i=await yc({networkID:t,mintAddress:e});return n.add(await os({...i,destination:r})),n}o(Sc,"createCompressedTokenTransferTransaction");c();l();async function Cc({networkID:t,destination:e,mint:r,senderAddress:n}){let{createComputeBudgetIx:i,createOCTferIX:s,getOCPMintState:a}=await sn(),u=At(t),m=new L.PublicKey(r),p=await a(m,u);if(!p)throw new Error("Mint state not found for OCP transfer");Wr()&&console.log("This is a Magic Eden Open Creator Protocol Token");let f=new Qt.Transaction;f.add(i());let{destinationAddress:g}=await fn({solanaConnection:u,destination:new L.PublicKey(e),mint:m,programId:Ir}),y=new L.PublicKey(n.address),{initAccountIX:C,transferIX:S}=await s({senderAddress:y,destinationAddress:g,mintAddress:m,mintState:p,connection:u});return C&&f.add(C),f.add(S),f}o(Cc,"createOcpTokenTransferTransaction");c();l();async function wc({networkID:t,senderAddress:e,senderAccount:r,destination:n,mint:i}){let s=At(t),a=new L.PublicKey(i),{destinationAddress:u,destinationAccount:m}=await fn({solanaConnection:s,destination:new L.PublicKey(n),mint:a,programId:Ir}),{createPNFTTransferIX:p}=await sn(),f=new Qt.Transaction,g=new L.PublicKey(e.address),y=new L.PublicKey(r),C=m;if(!C){let[S,w]=await hs(g,u,a,Ir);f.add(fs({account:u,owner:L.SystemProgram.programId})),f.add(S),C=w}return f.add(await p({senderAddress:g,tokenAccount:y,destinationAddress:u,destinationAccount:C,mintAddress:a,connection:s})),f}o(wc,"createProgrammableNftTransferTransaction");async function xc(t,e){let{chain:r,owner:n,decimals:i="0"}=t,s=parseFloat(i),{solana:a}=e,{memo:u,references:m}=a,p=r.id,f=At(p),g={networkID:t.chain.id,addressType:Qr.Solana,address:t.owner??""};if(!ce(t.chainData))throw new Error("Chain data is not a SolanaCollectibleChainData");let y;if(Cm(t))y=await Sc({networkID:p,mint:t.chainData.mint,recipient:e.recipient});else if(wm(t))y=await wc({networkID:p,senderAddress:g,senderAccount:t.chainData.tokenAccount,destination:e.recipient,mint:t.chainData.mint});else if(await xm(t))y=await Cc({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:g});else if(Tm(t)){let C=ks(t),S=e.amountAsset.isZero()?"1":e.amountAsset.toFixed();y=await bs({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:g,senderAccount:t.chainData.tokenAccount,decimals:s,programId:t.chainData.programId,amount:S,references:m?.map(w=>w.toString())??[],memo:u??"",transferHookProgramId:C,connection:f})}else throw new Error("Unsupported transferSPLSolana args");return u&&y.add(gs({memoText:u})),y.feePayer=new L.PublicKey(n??""),y=await ms(y,{connection:f}),y.recentBlockhash=(await f.getLatestBlockhash("confirmed")).blockhash,{networkID:p,transaction:[y]}}o(xc,"createSolanaTransferTransaction");function Cm(t){return ce(t.chainData)?"compression"in t.chainData&&!!t.chainData.compression?.compressed:!1}o(Cm,"isCompressedTokenCollectible");function wm(t){return ce(t.chainData)?"standard"in t.chainData&&(t.chainData.standard===kt.ProgrammableNonFungible||t.chainData.standard===kt.ProgrammableNonFungibleEdition):!1}o(wm,"isProgrammableNftCollectible");async function xm(t){let{chainData:e}=t;if(!ce(e))return!1;let{mint:r}=e,n=At(t.chain.id);return await ss(new L.PublicKey(r),n)!==null}o(xm,"isOcpTokenCollectible");function Tm(t){return ce(t.chainData)}o(Tm,"isDefaultSplTokenCollectible");c();l();c();l();c();l();c();l();var Tc="1.21.2",vc="1.43.0";c();l();var vm={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},Pn=class extends Error{static{o(this,"SuiHTTPTransportError")}},pr=class extends Pn{static{o(this,"JsonRpcError")}constructor(e,r){super(e),this.code=r,this.type=vm[r]??"ServerError"}},Rn=class extends Pn{static{o(this,"SuiHTTPStatusError")}constructor(e,r,n){super(e),this.status=r,this.statusText=n}};c();l();var Ec=o(t=>{throw TypeError(t)},"__typeError"),Mo=o((t,e,r)=>e.has(t)||Ec("Cannot "+r),"__accessCheck"),ee=o((t,e,r)=>(Mo(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Rt=o((t,e,r)=>e.has(t)?Ec("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),fr=o((t,e,r,n)=>(Mo(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),Ic=o((t,e,r)=>(Mo(t,e,"access private method"),r),"__privateMethod"),Em=o((t,e,r,n)=>({set _(i){fr(t,e,i,r)},get _(){return ee(t,e,n)}}),"__privateWrapper"),_t,Dr,rt,jt,Br,hr,_n,Oc,Ac;function Im(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}o(Im,"getWebsocketUrl");var Om={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},jn=class{static{o(this,"WebsocketClient")}constructor(e,r={}){if(Rt(this,_n),Rt(this,_t,0),Rt(this,Dr,0),Rt(this,rt,null),Rt(this,jt,null),Rt(this,Br,new Set),Rt(this,hr,new Map),this.endpoint=e,this.options={...Om,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Im(this.endpoint))}async makeRequest(e,r){let n=await Ic(this,_n,Oc).call(this);return new Promise((i,s)=>{fr(this,_t,ee(this,_t)+1),ee(this,hr).set(ee(this,_t),{resolve:i,reject:s,timeout:setTimeout(()=>{ee(this,hr).delete(ee(this,_t)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:ee(this,_t),method:e,params:r}))}).then(({error:i,result:s})=>{if(i)throw new pr(i.message,i.code);return s})}async subscribe(e){let r=new ko(e);return ee(this,Br).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};_t=new WeakMap;Dr=new WeakMap;rt=new WeakMap;jt=new WeakMap;Br=new WeakMap;hr=new WeakMap;_n=new WeakSet;Oc=o(function(){return ee(this,jt)?ee(this,jt):(fr(this,jt,new Promise(t=>{ee(this,rt)?.close(),fr(this,rt,new this.options.WebSocketConstructor(this.endpoint)),ee(this,rt).addEventListener("open",()=>{fr(this,Dr,0),t(ee(this,rt))}),ee(this,rt).addEventListener("close",()=>{Em(this,Dr)._++,ee(this,Dr)<=this.options.maxReconnects&&setTimeout(()=>{Ic(this,_n,Ac).call(this)},this.options.reconnectTimeout)}),ee(this,rt).addEventListener("message",({data:e})=>{let r;try{r=JSON.parse(e)}catch(n){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:n}));return}if("id"in r&&r.id!=null&&ee(this,hr).has(r.id)){let{resolve:n,timeout:i}=ee(this,hr).get(r.id);clearTimeout(i),n(r)}else if("params"in r){let{params:n}=r;ee(this,Br).forEach(i=>{i.subscriptionId===n.subscription&&n.subscription===i.subscriptionId&&i.onMessage(n.result)})}})})),ee(this,jt))},"setupWebSocket_fn");Ac=o(async function(){return ee(this,rt)?.close(),fr(this,jt,null),Promise.allSettled([...ee(this,Br)].map(t=>t.subscribe(this)))},"reconnect_fn");var ko=class{static{o(this,"RpcSubscription")}constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var kc=o(t=>{throw TypeError(t)},"__typeError"),Uo=o((t,e,r)=>e.has(t)||kc("Cannot "+r),"__accessCheck"),Ue=o((t,e,r)=>(Uo(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Nn=o((t,e,r)=>e.has(t)?kc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Do=o((t,e,r,n)=>(Uo(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),Am=o((t,e,r)=>(Uo(t,e,"access private method"),r),"__privateMethod"),Ur,Ne,Pr,Bo,Mc,Ln=class{static{o(this,"SuiHTTPTransport")}constructor(e){Nn(this,Bo),Nn(this,Ur,0),Nn(this,Ne),Nn(this,Pr),Do(this,Ne,e)}fetch(e,r){let n=Ue(this,Ne).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){Do(this,Ur,Ue(this,Ur)+1);let r=await this.fetch(Ue(this,Ne).rpc?.url??Ue(this,Ne).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Tc,"Client-Target-Api-Version":vc,"Client-Request-Method":e.method,...Ue(this,Ne).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:Ue(this,Ur),method:e.method,params:e.params})});if(!r.ok)throw new Rn(`Unexpected status code: ${r.status}`,r.status,r.statusText);let n=await r.json();if("error"in n&&n.error!=null)throw new pr(n.error.message,n.error.code);return n.result}async subscribe(e){let r=await Am(this,Bo,Mc).call(this).subscribe(e);return async()=>!!await r()}};Ur=new WeakMap;Ne=new WeakMap;Pr=new WeakMap;Bo=new WeakSet;Mc=o(function(){if(!Ue(this,Pr)){let t=Ue(this,Ne).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Do(this,Pr,new jn(Ue(this,Ne).websocket?.url??Ue(this,Ne).url,{WebSocketConstructor:t,...Ue(this,Ne).websocket}))}return Ue(this,Pr)},"getWebsocketClient_fn");c();l();c();l();c();l();c();l();c();l();function km(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<t.length;p++){let f=t.charAt(p),g=f.charCodeAt(0);if(e[g]!==255)throw new TypeError(f+" is ambiguous");e[g]=p}let r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function a(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let f=0,g=0,y=0,C=p.length;for(;y!==C&&p[y]===0;)y++,f++;let S=(C-y)*s+1>>>0,w=new Uint8Array(S);for(;y!==C;){let N=p[y],O=0;for(let K=S-1;(N!==0||O<g)&&K!==-1;K--,O++)N+=256*w[K]>>>0,w[K]=N%r>>>0,N=N/r>>>0;if(N!==0)throw new Error("Non-zero carry");g=O,y++}let v=S-g;for(;v!==S&&w[v]===0;)v++;let D=n.repeat(f);for(;v<S;++v)D+=t.charAt(w[v]);return D}o(a,"encode");function u(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let f=0,g=0,y=0;for(;p[f]===n;)g++,f++;let C=(p.length-f)*i+1>>>0,S=new Uint8Array(C);for(;p[f];){let N=e[p.charCodeAt(f)];if(N===255)return;let O=0;for(let K=C-1;(N!==0||O<y)&&K!==-1;K--,O++)N+=r*S[K]>>>0,S[K]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=O,f++}let w=C-y;for(;w!==C&&S[w]===0;)w++;let v=new Uint8Array(g+(C-w)),D=g;for(;w!==C;)v[D++]=S[w++];return v}o(u,"decodeUnsafe");function m(p){let f=u(p);if(f)return f;throw new Error("Non-base"+r+" character")}return o(m,"decode"),{encode:a,decodeUnsafe:u,decode:m}}o(km,"base");var Dc=km;var Mm="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Po=Dc(Mm);var nt=o(t=>Po.encode(t),"toBase58"),Le=o(t=>Po.decode(t),"fromBase58");c();l();function he(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}o(he,"fromBase64");var Ro=8192;function Y(t){if(t.length<Ro)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Ro){let n=t.slice(r,r+Ro);e+=String.fromCharCode(...n)}return btoa(e)}o(Y,"toBase64");c();l();c();l();function gr(t){let e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map(i=>parseInt(i,16))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(n)}o(gr,"fromHex");function Je(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}o(Je,"toHex");c();l();c();l();function Nt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}o(Nt,"ulebEncode");function Bc(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(i&127)<<r,!(i&128))break;r+=7}return{value:e,length:n}}o(Bc,"ulebDecode");var Vn=class{static{o(this,"BcsReader")}constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:i}=Bc(r);return this.shift(i),n}readVec(e){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(e(this,i,r));return n}};c();l();c();l();function _o(t,e){switch(e){case"base58":return nt(t);case"base64":return Y(t);case"hex":return Je(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}o(_o,"encodeStr");function Fn(t,e=["<",">"]){let[r,n]=e,i=[],s="",a=0;for(let u=0;u<t.length;u++){let m=t[u];if(m===r&&a++,m===n&&a--,a===0&&m===","){i.push(s.trim()),s="";continue}s+=m}return i.push(s.trim()),i}o(Fn,"splitGenericParameters");var $n=class{static{o(this,"BcsWriter")}constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let r=this.bytePosition+e;if(r>this.size){let n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;let i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return jo(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return jo(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return jo(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Nt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,i)=>r(this,n,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return _o(this.toBytes(),e)}};function jo(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}o(jo,"toLittleEndian");var Uc=o(t=>{throw TypeError(t)},"__typeError"),Pc=o((t,e,r)=>e.has(t)||Uc("Cannot "+r),"__accessCheck"),Ve=o((t,e,r)=>(Pc(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Gn=o((t,e,r)=>e.has(t)?Uc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Hn=o((t,e,r,n)=>(Pc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),br,Rr,zn,Ct,Dm=class Rc{static{o(this,"_BcsType")}constructor(e){Gn(this,br),Gn(this,Rr),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Hn(this,br,e.write),Hn(this,Rr,e.serialize??((r,n)=>{let i=new $n({initialSize:this.serializedSize(r)??void 0,...n});return Ve(this,br).call(this,r,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),Ve(this,br).call(this,e,r)}serialize(e,r){return this.validate(e),new qn(this,Ve(this,Rr).call(this,e,r))}parse(e){let r=new Vn(e);return this.read(r)}fromHex(e){return this.parse(gr(e))}fromBase58(e){return this.parse(Le(e))}fromBase64(e){return this.parse(he(e))}transform({name:e,input:r,output:n,validate:i}){return new Rc({name:e??this.name,read:o(s=>n?n(this.read(s)):this.read(s),"read"),write:o((s,a)=>Ve(this,br).call(this,r?r(s):s,a),"write"),serializedSize:o(s=>this.serializedSize(r?r(s):s),"serializedSize"),serialize:o((s,a)=>Ve(this,Rr).call(this,r?r(s):s,a),"serialize"),validate:o(s=>{i?.(s),this.validate(r?r(s):s)},"validate")})}};br=new WeakMap;Rr=new WeakMap;var Pe=Dm,_c=Symbol.for("@mysten/serialized-bcs");function yr(t){return!!t&&typeof t=="object"&&t[_c]===!0}o(yr,"isSerializedBcs");var qn=class{static{o(this,"SerializedBcs")}constructor(e,r){Gn(this,zn),Gn(this,Ct),Hn(this,zn,e),Hn(this,Ct,r)}get[_c](){return!0}toBytes(){return Ve(this,Ct)}toHex(){return Je(Ve(this,Ct))}toBase64(){return Y(Ve(this,Ct))}toBase58(){return nt(Ve(this,Ct))}parse(){return Ve(this,zn).parse(Ve(this,Ct))}};zn=new WeakMap;Ct=new WeakMap;function _r({size:t,...e}){return new Pe({...e,serializedSize:o(()=>t,"serializedSize")})}o(_r,"fixedSizeBcsType");function Kn({readMethod:t,writeMethod:e,...r}){return _r({...r,read:o(n=>n[t](),"read"),write:o((n,i)=>i[e](n),"write"),validate:o(n=>{if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);r.validate?.(n)},"validate")})}o(Kn,"uIntBcsType");function Wn({readMethod:t,writeMethod:e,...r}){return _r({...r,read:o(n=>n[t](),"read"),write:o((n,i)=>i[e](BigInt(n)),"write"),validate:o(n=>{let i=BigInt(n);if(i<0||i>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);r.validate?.(i)},"validate")})}o(Wn,"bigUIntBcsType");function jc({serialize:t,...e}){let r=new Pe({...e,serialize:t,write:o((n,i)=>{for(let s of r.serialize(n).toBytes())i.write8(s)},"write")});return r}o(jc,"dynamicSizeBcsType");function Nc({toBytes:t,fromBytes:e,...r}){return new Pe({...r,read:o(n=>{let i=n.readULEB(),s=n.readBytes(i);return e(s)},"read"),write:o((n,i)=>{let s=t(n);i.writeULEB(s.length);for(let a=0;a<s.length;a++)i.write8(s[a])},"write"),serialize:o(n=>{let i=t(n),s=Nt(i.length),a=new Uint8Array(s.length+i.length);return a.set(s,0),a.set(i,s.length),a},"serialize"),validate:o(n=>{if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);r.validate?.(n)},"validate")})}o(Nc,"stringLikeBcsType");function Lc(t){let e=null;function r(){return e||(e=t()),e}return o(r,"getType"),new Pe({name:"lazy",read:o(n=>r().read(n),"read"),serializedSize:o(n=>r().serializedSize(n),"serializedSize"),write:o((n,i)=>r().write(n,i),"write"),serialize:o((n,i)=>r().serialize(n,i).toBytes(),"serialize")})}o(Lc,"lazyBcsType");c();l();var d={u8(t){return Kn({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Kn({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Kn({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Wn({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Wn({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Wn({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return _r({name:"bool",size:1,read:o(e=>e.read8()===1,"read"),write:o((e,r)=>r.write8(e?1:0),"write"),...t,validate:o(e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)},"validate")})},uleb128(t){return jc({name:"uleb128",read:o(e=>e.readULEB(),"read"),serialize:o(e=>Uint8Array.from(Nt(e)),"serialize"),...t})},bytes(t,e){return _r({name:`bytes[${t}]`,size:t,read:o(r=>r.readBytes(t),"read"),write:o((r,n)=>{let i=new Uint8Array(r);for(let s=0;s<t;s++)n.write8(i[s]??0)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)},"validate")})},byteVector(t){return new Pe({name:"bytesVector",read:o(e=>{let r=e.readULEB();return e.readBytes(r)},"read"),write:o((e,r)=>{let n=new Uint8Array(e);r.writeULEB(n.length);for(let i=0;i<n.length;i++)r.write8(n[i]??0)},"write"),...t,serializedSize:o(e=>{let r="length"in e?e.length:null;return r==null?null:Nt(r).length+r},"serializedSize"),validate:o(e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)},"validate")})},string(t){return Nc({name:"string",toBytes:o(e=>new TextEncoder().encode(e),"toBytes"),fromBytes:o(e=>new TextDecoder().decode(e),"fromBytes"),...t})},fixedArray(t,e,r){return new Pe({name:`${e.name}[${t}]`,read:o(n=>{let i=new Array(t);for(let s=0;s<t;s++)i[s]=e.read(n);return i},"read"),write:o((n,i)=>{for(let s of n)e.write(s,i)},"write"),...r,validate:o(n=>{if(r?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)},"validate")})},option(t){return d.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:o(e=>e==null?{None:!0}:{Some:e},"input"),output:o(e=>e.$kind==="Some"?e.Some:null,"output")})},vector(t,e){return new Pe({name:`vector<${t.name}>`,read:o(r=>{let n=r.readULEB(),i=new Array(n);for(let s=0;s<n;s++)i[s]=t.read(r);return i},"read"),write:o((r,n)=>{n.writeULEB(r.length);for(let i of r)t.write(i,n)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)},"validate")})},tuple(t,e){return new Pe({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:o(r=>{let n=0;for(let i=0;i<t.length;i++){let s=t[i].serializedSize(r[i]);if(s==null)return null;n+=s}return n},"serializedSize"),read:o(r=>{let n=[];for(let i of t)n.push(i.read(r));return n},"read"),write:o((r,n)=>{for(let i=0;i<t.length;i++)t[i].write(r[i],n)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)},"validate")})},struct(t,e,r){let n=Object.entries(e);return new Pe({name:t,serializedSize:o(i=>{let s=0;for(let[a,u]of n){let m=u.serializedSize(i[a]);if(m==null)return null;s+=m}return s},"serializedSize"),read:o(i=>{let s={};for(let[a,u]of n)s[a]=u.read(i);return s},"read"),write:o((i,s)=>{for(let[a,u]of n)u.write(i[a],s)},"write"),...r,validate:o(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)},"validate")})},enum(t,e,r){let n=Object.entries(e);return new Pe({name:t,read:o(i=>{let s=i.readULEB(),a=n[s];if(!a)throw new TypeError(`Unknown value ${s} for enum ${t}`);let[u,m]=a;return{[u]:m?.read(i)??!0,$kind:u}},"read"),write:o((i,s)=>{let[a,u]=Object.entries(i).filter(([m])=>Object.hasOwn(e,m))[0];for(let m=0;m<n.length;m++){let[p,f]=n[m];if(p===a){s.writeULEB(m),f?.write(u,s);return}}},"write"),...r,validate:o(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);let s=Object.keys(i).filter(u=>i[u]!==void 0&&Object.hasOwn(e,u));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${t}}`);let[a]=s;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)},"validate")})},map(t,e){return d.vector(d.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:o(r=>[...r.entries()],"input"),output:o(r=>{let n=new Map;for(let[i,s]of r)n.set(i,s);return n},"output")})},lazy(t){return Lc(t)}};c();l();c();l();c();l();c();l();c();l();var Bm=32;function Qn(t){try{return Le(t).length===Bm}catch{return!1}}o(Qn,"isValidTransactionDigest");var jr=32;function Oe(t){return Um(t)&&Pm(t)===jr}o(Oe,"isValidSuiAddress");function Sr(t){return Oe(t)}o(Sr,"isValidSuiObjectId");function B(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(jr*2,"0")}`}o(B,"normalizeSuiAddress");function Te(t,e=!1){return B(t,e)}o(Te,"normalizeSuiObjectId");function Um(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}o(Um,"isHex");function Pm(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}o(Pm,"getHexByteLength");c();l();var Rm=/^vector<(.+)>$/,_m=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,ot=class t{static{o(this,"TypeTagSerializer")}static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let n=e.match(Rm);if(n)return{vector:t.parseFromStr(n[1],r)};let i=e.match(_m);if(i)return{struct:{address:r?B(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:t.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Fn(e).map(n=>t.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let r=e.struct,n=r.typeParams.map(t.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function jm(t){return d.u64({name:"unsafe_u64",...t}).transform({input:o(e=>e,"input"),output:o(e=>Number(e),"output")})}o(jm,"unsafe_u64");function Nm(t){return d.enum("Option",{None:null,Some:t})}o(Nm,"optionEnum");var G=d.bytes(jr).transform({validate:o(t=>{let e=typeof t=="string"?t:Je(t);if(!e||!Oe(B(e)))throw new Error(`Invalid Sui address ${e}`)},"validate"),input:o(t=>typeof t=="string"?gr(B(t)):t,"input"),output:o(t=>B(Je(t)),"output")}),Ae=d.vector(d.u8()).transform({name:"ObjectDigest",input:o(t=>Le(t),"input"),output:o(t=>nt(new Uint8Array(t)),"output"),validate:o(t=>{if(Le(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),ve=d.struct("SuiObjectRef",{objectId:G,version:d.u64(),digest:Ae}),No=d.struct("SharedObjectRef",{objectId:G,initialSharedVersion:d.u64(),mutable:d.bool()}),Lo=d.enum("ObjectArg",{ImmOrOwnedObject:ve,SharedObject:No,Receiving:ve}),Vo=d.enum("CallArg",{Pure:d.struct("Pure",{bytes:d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?he(t):t,"input"),output:o(t=>Y(new Uint8Array(t)),"output")})}),Object:Lo}),Fo=d.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:d.lazy(()=>Fo),struct:d.lazy(()=>Ko),u16:null,u32:null,u256:null}),Yn=Fo.transform({input:o(t=>typeof t=="string"?ot.parseFromStr(t,!0):t,"input"),output:o(t=>ot.tagToString(t),"output")}),Fe=d.enum("Argument",{GasCoin:null,Input:d.u16(),Result:d.u16(),NestedResult:d.tuple([d.u16(),d.u16()])}),$o=d.struct("ProgrammableMoveCall",{package:G,module:d.string(),function:d.string(),typeArguments:d.vector(Yn),arguments:d.vector(Fe)}),zo=d.enum("Command",{MoveCall:$o,TransferObjects:d.struct("TransferObjects",{objects:d.vector(Fe),address:Fe}),SplitCoins:d.struct("SplitCoins",{coin:Fe,amounts:d.vector(Fe)}),MergeCoins:d.struct("MergeCoins",{destination:Fe,sources:d.vector(Fe)}),Publish:d.struct("Publish",{modules:d.vector(d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?he(t):t,"input"),output:o(t=>Y(new Uint8Array(t)),"output")})),dependencies:d.vector(G)}),MakeMoveVec:d.struct("MakeMoveVec",{type:Nm(Yn).transform({input:o(t=>t===null?{None:!0}:{Some:t},"input"),output:o(t=>t.Some??null,"output")}),elements:d.vector(Fe)}),Upgrade:d.struct("Upgrade",{modules:d.vector(d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?he(t):t,"input"),output:o(t=>Y(new Uint8Array(t)),"output")})),dependencies:d.vector(G),package:G,ticket:Fe})}),Go=d.struct("ProgrammableTransaction",{inputs:d.vector(Vo),commands:d.vector(zo)}),Ho=d.enum("TransactionKind",{ProgrammableTransaction:Go,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),qo=d.enum("TransactionExpiration",{None:null,Epoch:jm()}),Ko=d.struct("StructTag",{address:G,module:d.string(),name:d.string(),typeParams:d.vector(Fo)}),Wo=d.struct("GasData",{payment:d.vector(ve),owner:G,price:d.u64(),budget:d.u64()}),Qo=d.struct("TransactionDataV1",{kind:Ho,sender:G,gasData:Wo,expiration:qo}),Yo=d.enum("TransactionData",{V1:Qo}),Xo=d.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Jo=d.enum("IntentVersion",{V0:null}),Zo=d.enum("AppId",{Sui:null}),ei=d.struct("Intent",{scope:Xo,version:Jo,appId:Zo});function ti(t){return d.struct(`IntentMessage<${t.name}>`,{intent:ei,value:t})}o(ti,"IntentMessage");var ri=d.enum("CompressedSignature",{ED25519:d.fixedArray(64,d.u8()),Secp256k1:d.fixedArray(64,d.u8()),Secp256r1:d.fixedArray(64,d.u8()),ZkLogin:d.vector(d.u8())}),ni=d.enum("PublicKey",{ED25519:d.fixedArray(32,d.u8()),Secp256k1:d.fixedArray(33,d.u8()),Secp256r1:d.fixedArray(33,d.u8()),ZkLogin:d.vector(d.u8())}),oi=d.struct("MultiSigPkMap",{pubKey:ni,weight:d.u8()}),ii=d.struct("MultiSigPublicKey",{pk_map:d.vector(oi),threshold:d.u16()}),Vc=d.struct("MultiSig",{sigs:d.vector(ri),bitmap:d.u16(),multisig_pk:ii}),Lm=d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?he(t):t,"input"),output:o(t=>Y(new Uint8Array(t)),"output")}),si=d.struct("SenderSignedTransaction",{intentMessage:ti(Yo),txSignatures:d.vector(Lm)}),Fc=d.vector(si,{name:"SenderSignedData"}),$c=d.struct("PasskeyAuthenticator",{authenticatorData:d.vector(d.u8()),clientDataJson:d.string(),userSignature:d.vector(d.u8())});c();l();var Vm=d.enum("PackageUpgradeError",{UnableToFetchPackage:d.struct("UnableToFetchPackage",{packageId:G}),NotAPackage:d.struct("NotAPackage",{objectId:G}),IncompatibleUpgrade:null,DigestDoesNotMatch:d.struct("DigestDoesNotMatch",{digest:d.vector(d.u8())}),UnknownUpgradePolicy:d.struct("UnknownUpgradePolicy",{policy:d.u8()}),PackageIDDoesNotMatch:d.struct("PackageIDDoesNotMatch",{packageId:G,ticketId:G})}),Fm=d.struct("ModuleId",{address:G,name:d.string()}),zc=d.struct("MoveLocation",{module:Fm,function:d.u16(),instruction:d.u16(),functionName:d.option(d.string())}),$m=d.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:d.struct("IndexOutOfBounds",{idx:d.u16()}),SecondaryIndexOutOfBounds:d.struct("SecondaryIndexOutOfBounds",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidResultArity:d.struct("InvalidResultArity",{resultIdx:d.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),zm=d.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Gm=d.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:d.struct("MoveObjectTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),MovePackageTooBig:d.struct("MovePackageTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),CircularObjectOwnership:d.struct("CircularObjectOwnership",{object:G}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:d.option(zc),MoveAbort:d.tuple([zc,d.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:d.struct("CommandArgumentError",{argIdx:d.u16(),kind:$m}),TypeArgumentError:d.struct("TypeArgumentError",{argumentIdx:d.u16(),kind:zm}),UnusedValueWithoutDrop:d.struct("UnusedValueWithoutDrop",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidPublicFunctionReturnType:d.struct("InvalidPublicFunctionReturnType",{idx:d.u16()}),InvalidTransferObject:null,EffectsTooLarge:d.struct("EffectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:d.struct("PackageUpgradeError",{upgradeError:Vm}),WrittenObjectsTooLarge:d.struct("WrittenObjectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:d.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:d.vector(G)}),AddressDeniedForCoin:d.struct("AddressDeniedForCoin",{address:G,coinType:d.string()}),CoinTypeGlobalPause:d.struct("CoinTypeGlobalPause",{coinType:d.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Gc=d.enum("ExecutionStatus",{Success:null,Failed:d.struct("ExecutionFailed",{error:Gm,command:d.option(d.u64())})}),Hc=d.struct("GasCostSummary",{computationCost:d.u64(),storageCost:d.u64(),storageRebate:d.u64(),nonRefundableStorageFee:d.u64()}),Cr=d.enum("Owner",{AddressOwner:G,ObjectOwner:G,Shared:d.struct("Shared",{initialSharedVersion:d.u64()}),Immutable:null}),Hm=d.struct("TransactionEffectsV1",{status:Gc,executedEpoch:d.u64(),gasUsed:Hc,modifiedAtVersions:d.vector(d.tuple([G,d.u64()])),sharedObjects:d.vector(ve),transactionDigest:Ae,created:d.vector(d.tuple([ve,Cr])),mutated:d.vector(d.tuple([ve,Cr])),unwrapped:d.vector(d.tuple([ve,Cr])),deleted:d.vector(ve),unwrappedThenDeleted:d.vector(ve),wrapped:d.vector(ve),gasObject:d.tuple([ve,Cr]),eventsDigest:d.option(Ae),dependencies:d.vector(Ae)}),ai=d.tuple([d.u64(),Ae]),qm=d.enum("ObjectIn",{NotExist:null,Exist:d.tuple([ai,Cr])}),Km=d.enum("ObjectOut",{NotExist:null,ObjectWrite:d.tuple([Ae,Cr]),PackageWrite:ai}),Wm=d.enum("IDOperation",{None:null,Created:null,Deleted:null}),Qm=d.struct("EffectsObjectChange",{inputState:qm,outputState:Km,idOperation:Wm}),Ym=d.enum("UnchangedSharedKind",{ReadOnlyRoot:ai,MutateDeleted:d.u64(),ReadDeleted:d.u64(),Cancelled:d.u64(),PerEpochConfig:null}),Xm=d.struct("TransactionEffectsV2",{status:Gc,executedEpoch:d.u64(),gasUsed:Hc,transactionDigest:Ae,gasObjectIndex:d.option(d.u32()),eventsDigest:d.option(Ae),dependencies:d.vector(Ae),lamportVersion:d.u64(),changedObjects:d.vector(d.tuple([G,Qm])),unchangedSharedObjects:d.vector(d.tuple([G,Ym])),auxDataDigest:d.option(Ae)}),qc=d.enum("TransactionEffects",{V1:Hm,V2:Xm});c();l();function wr(t){switch(t){case"u8":return d.u8();case"u16":return d.u16();case"u32":return d.u32();case"u64":return d.u64();case"u128":return d.u128();case"u256":return d.u256();case"bool":return d.bool();case"string":return d.string();case"id":case"address":return G}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[r,n]=e.slice(1);return r==="vector"?d.vector(wr(n)):d.option(wr(n))}throw new Error(`Invalid Pure type name: ${t}`)}o(wr,"pureBcsSchemaFromTypeName");var U={...d,U8:d.u8(),U16:d.u16(),U32:d.u32(),U64:d.u64(),U128:d.u128(),U256:d.u256(),ULEB128:d.uleb128(),Bool:d.bool(),String:d.string(),Address:G,AppId:Zo,Argument:Fe,CallArg:Vo,CompressedSignature:ri,GasData:Wo,Intent:ei,IntentMessage:ti,IntentScope:Xo,IntentVersion:Jo,MultiSig:Vc,MultiSigPkMap:oi,MultiSigPublicKey:ii,ObjectArg:Lo,ObjectDigest:Ae,ProgrammableMoveCall:$o,ProgrammableTransaction:Go,PublicKey:ni,SenderSignedData:Fc,SenderSignedTransaction:si,SharedObjectRef:No,StructTag:Ko,SuiObjectRef:ve,Command:zo,TransactionData:Yo,TransactionDataV1:Qo,TransactionExpiration:qo,TransactionKind:Ho,TypeTag:Yn,TransactionEffects:qc,PasskeyAuthenticator:$c};c();l();c();l();var Jm=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Zm=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function Kc(t,e="at"){let r=t.toLowerCase(),n;if(r.includes("@")){if(!Jm.test(r))throw new Error(`Invalid SuiNS name ${t}`);let[i,s]=r.split("@");n=[...i?i.split("."):[],s]}else{if(!Zm.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}o(Kc,"normalizeSuiNSName");c();l();var ep=BigInt(1e9),ci="0x1",Xn="0x2";var tp=Te("0x6");var li=`${Xn}::sui::SUI`,rp=Te("0x5");c();l();c();l();c();l();function Jn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}o(Jn,"number");function np(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}o(np,"isBytes");function ui(t,...e){if(!np(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}o(ui,"bytes");function di(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}o(di,"exists");function Wc(t,e){ui(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}o(Wc,"output");c();l();var xr=o(t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),"u32");var wt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Qc=o(t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,"byteSwap"),$e=wt?t=>t:t=>Qc(t);function Lt(t){for(let e=0;e<t.length;e++)t[e]=Qc(t[e])}o(Lt,"byteSwap32");function op(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}o(op,"utf8ToBytes");function Vt(t){return typeof t=="string"&&(t=op(t)),ui(t),t}o(Vt,"toBytes");var Zn=class{static{o(this,"Hash")}clone(){return this._cloneInto()}},YI={}.toString;function Yc(t){let e=o((n,i)=>t(i).update(Vt(n)).digest(),"hashC"),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}o(Yc,"wrapConstructorWithOpts");var Xc=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),eo=class extends Zn{static{o(this,"BLAKE")}constructor(e,r,n={},i,s,a){if(super(),this.blockLen=e,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Jn(e),Jn(r),Jn(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==a)throw new Error(`personalization must be ${a} byte long or undefined`);this.buffer32=xr(this.buffer=new Uint8Array(e))}update(e){di(this);let{blockLen:r,buffer:n,buffer32:i}=this;e=Vt(e);let s=e.length,a=e.byteOffset,u=e.buffer;for(let m=0;m<s;){this.pos===r&&(wt||Lt(i),this.compress(i,0,!1),wt||Lt(i),this.pos=0);let p=Math.min(r-this.pos,s-m),f=a+m;if(p===r&&!(f%4)&&m+p<s){let g=new Uint32Array(u,f,Math.floor((s-m)/4));wt||Lt(g);for(let y=0;m+r<s;y+=i.length,m+=r)this.length+=r,this.compress(g,y,!1);wt||Lt(g);continue}n.set(e.subarray(m,m+p),this.pos),this.pos+=p,this.length+=p,m+=p}return this}digestInto(e){di(this),Wc(e,this);let{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),wt||Lt(n),this.compress(n,0,!0),wt||Lt(n);let i=xr(e);this.get().forEach((s,a)=>i[a]=$e(s))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){let{buffer:r,length:n,finished:i,destroyed:s,outputLen:a,pos:u}=this;return e||(e=new this.constructor({dkLen:a})),e.set(...this.get()),e.length=n,e.finished=i,e.destroyed=s,e.outputLen=a,e.buffer.set(r),e.pos=u,e}};c();l();var to=BigInt(4294967295),mi=BigInt(32);function Jc(t,e=!1){return e?{h:Number(t&to),l:Number(t>>mi&to)}:{h:Number(t>>mi&to)|0,l:Number(t&to)|0}}o(Jc,"fromBig");function ip(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:s,l:a}=Jc(t[i],e);[r[i],n[i]]=[s,a]}return[r,n]}o(ip,"split");var sp=o((t,e)=>BigInt(t>>>0)<<mi|BigInt(e>>>0),"toBig"),ap=o((t,e,r)=>t>>>r,"shrSH"),cp=o((t,e,r)=>t<<32-r|e>>>r,"shrSL"),lp=o((t,e,r)=>t>>>r|e<<32-r,"rotrSH"),up=o((t,e,r)=>t<<32-r|e>>>r,"rotrSL"),dp=o((t,e,r)=>t<<64-r|e>>>r-32,"rotrBH"),mp=o((t,e,r)=>t>>>r-32|e<<64-r,"rotrBL"),pp=o((t,e)=>e,"rotr32H"),fp=o((t,e)=>t,"rotr32L"),hp=o((t,e,r)=>t<<r|e>>>32-r,"rotlSH"),gp=o((t,e,r)=>e<<r|t>>>32-r,"rotlSL"),bp=o((t,e,r)=>e<<r-32|t>>>64-r,"rotlBH"),yp=o((t,e,r)=>t<<r-32|e>>>64-r,"rotlBL");function Sp(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}o(Sp,"add");var Cp=o((t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),"add3L"),wp=o((t,e,r,n)=>e+r+n+(t/2**32|0)|0,"add3H"),xp=o((t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),"add4L"),Tp=o((t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,"add4H"),vp=o((t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),"add5L"),Ep=o((t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,"add5H");var Ip={fromBig:Jc,split:ip,toBig:sp,shrSH:ap,shrSL:cp,rotrSH:lp,rotrSL:up,rotrBH:dp,rotrBL:mp,rotr32H:pp,rotr32L:fp,rotlSH:hp,rotlSL:gp,rotlBH:bp,rotlBL:yp,add:Sp,add3L:Cp,add3H:wp,add4L:xp,add4H:Tp,add5H:Ep,add5L:vp},ge=Ip;var se=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),T=new Uint32Array(32);function xt(t,e,r,n,i,s){let a=i[s],u=i[s+1],m=T[2*t],p=T[2*t+1],f=T[2*e],g=T[2*e+1],y=T[2*r],C=T[2*r+1],S=T[2*n],w=T[2*n+1],v=ge.add3L(m,f,a);p=ge.add3H(v,p,g,u),m=v|0,{Dh:w,Dl:S}={Dh:w^p,Dl:S^m},{Dh:w,Dl:S}={Dh:ge.rotr32H(w,S),Dl:ge.rotr32L(w,S)},{h:C,l:y}=ge.add(C,y,w,S),{Bh:g,Bl:f}={Bh:g^C,Bl:f^y},{Bh:g,Bl:f}={Bh:ge.rotrSH(g,f,24),Bl:ge.rotrSL(g,f,24)},T[2*t]=m,T[2*t+1]=p,T[2*e]=f,T[2*e+1]=g,T[2*r]=y,T[2*r+1]=C,T[2*n]=S,T[2*n+1]=w}o(xt,"G1b");function Tt(t,e,r,n,i,s){let a=i[s],u=i[s+1],m=T[2*t],p=T[2*t+1],f=T[2*e],g=T[2*e+1],y=T[2*r],C=T[2*r+1],S=T[2*n],w=T[2*n+1],v=ge.add3L(m,f,a);p=ge.add3H(v,p,g,u),m=v|0,{Dh:w,Dl:S}={Dh:w^p,Dl:S^m},{Dh:w,Dl:S}={Dh:ge.rotrSH(w,S,16),Dl:ge.rotrSL(w,S,16)},{h:C,l:y}=ge.add(C,y,w,S),{Bh:g,Bl:f}={Bh:g^C,Bl:f^y},{Bh:g,Bl:f}={Bh:ge.rotrBH(g,f,63),Bl:ge.rotrBL(g,f,63)},T[2*t]=m,T[2*t+1]=p,T[2*e]=f,T[2*e+1]=g,T[2*r]=y,T[2*r+1]=C,T[2*n]=S,T[2*n+1]=w}o(Tt,"G2b");var pi=class extends eo{static{o(this,"BLAKE2b")}constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=se[0]|0,this.v0h=se[1]|0,this.v1l=se[2]|0,this.v1h=se[3]|0,this.v2l=se[4]|0,this.v2h=se[5]|0,this.v3l=se[6]|0,this.v3h=se[7]|0,this.v4l=se[8]|0,this.v4h=se[9]|0,this.v5l=se[10]|0,this.v5h=se[11]|0,this.v6l=se[12]|0,this.v6h=se[13]|0,this.v7l=se[14]|0,this.v7h=se[15]|0;let r=e.key?e.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,e.salt){let n=xr(Vt(e.salt));this.v4l^=$e(n[0]),this.v4h^=$e(n[1]),this.v5l^=$e(n[2]),this.v5h^=$e(n[3])}if(e.personalization){let n=xr(Vt(e.personalization));this.v6l^=$e(n[0]),this.v6h^=$e(n[1]),this.v7l^=$e(n[2]),this.v7h^=$e(n[3])}if(e.key){let n=new Uint8Array(this.blockLen);n.set(Vt(e.key)),this.update(n)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:i,v2l:s,v2h:a,v3l:u,v3h:m,v4l:p,v4h:f,v5l:g,v5h:y,v6l:C,v6h:S,v7l:w,v7h:v}=this;return[e,r,n,i,s,a,u,m,p,f,g,y,C,S,w,v]}set(e,r,n,i,s,a,u,m,p,f,g,y,C,S,w,v){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=a|0,this.v3l=u|0,this.v3h=m|0,this.v4l=p|0,this.v4h=f|0,this.v5l=g|0,this.v5h=y|0,this.v6l=C|0,this.v6h=S|0,this.v7l=w|0,this.v7h=v|0}compress(e,r,n){this.get().forEach((m,p)=>T[p]=m),T.set(se,16);let{h:i,l:s}=ge.fromBig(BigInt(this.length));T[24]=se[8]^s,T[25]=se[9]^i,n&&(T[28]=~T[28],T[29]=~T[29]);let a=0,u=Xc;for(let m=0;m<12;m++)xt(0,4,8,12,e,r+2*u[a++]),Tt(0,4,8,12,e,r+2*u[a++]),xt(1,5,9,13,e,r+2*u[a++]),Tt(1,5,9,13,e,r+2*u[a++]),xt(2,6,10,14,e,r+2*u[a++]),Tt(2,6,10,14,e,r+2*u[a++]),xt(3,7,11,15,e,r+2*u[a++]),Tt(3,7,11,15,e,r+2*u[a++]),xt(0,5,10,15,e,r+2*u[a++]),Tt(0,5,10,15,e,r+2*u[a++]),xt(1,6,11,12,e,r+2*u[a++]),Tt(1,6,11,12,e,r+2*u[a++]),xt(2,7,8,13,e,r+2*u[a++]),Tt(2,7,8,13,e,r+2*u[a++]),xt(3,4,9,14,e,r+2*u[a++]),Tt(3,4,9,14,e,r+2*u[a++]);this.v0l^=T[0]^T[16],this.v0h^=T[1]^T[17],this.v1l^=T[2]^T[18],this.v1h^=T[3]^T[19],this.v2l^=T[4]^T[20],this.v2h^=T[5]^T[21],this.v3l^=T[6]^T[22],this.v3h^=T[7]^T[23],this.v4l^=T[8]^T[24],this.v4h^=T[9]^T[25],this.v5l^=T[10]^T[26],this.v5h^=T[11]^T[27],this.v6l^=T[12]^T[28],this.v6h^=T[13]^T[29],this.v7l^=T[14]^T[30],this.v7h^=T[15]^T[31],T.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Zc=Yc(t=>new pi(t));var Op="object",Ap="ID",kp="ascii",Mp="String",Dp="string",Bp="String",Up="option",Pp="Option";function el(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&B(e.package)===B("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}o(el,"isTxContext");function ro(t){if(typeof t=="string")switch(t){case"address":return U.Address;case"bool":return U.Bool;case"u8":return U.U8;case"u16":return U.U16;case"u32":return U.U32;case"u64":return U.U64;case"u128":return U.U128;case"u256":return U.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return U.vector(U.U8).transform({input:o(r=>typeof r=="string"?new TextEncoder().encode(r):r,"input"),output:o(r=>r,"output")});let e=ro(t.vector);return e?U.vector(e):null}if("datatype"in t){let e=B(t.datatype.package);if(e===B(ci)){if(t.datatype.module===kp&&t.datatype.type===Mp)return U.String;if(t.datatype.module===Dp&&t.datatype.type===Bp)return U.String;if(t.datatype.module===Up&&t.datatype.type===Pp){let r=ro(t.datatype.typeParameters[0]);return r?U.vector(r):null}}if(e===B(Xn)&&t.datatype.module===Op&&t.datatype.type===Ap)return U.Address}return null}o(ro,"getPureBcsSchema");function tl(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Nr(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Nr(t.MutableReference)}:{ref:null,body:Nr(t)}}o(tl,"normalizedTypeToMoveTypeSignature");function Nr(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Nr(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Nr)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}o(Nr,"normalizedTypeToMoveTypeSignatureBody");c();l();function Rp(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?Y(t):t.toBase64()}}}o(Rp,"Pure");var ze={Pure:Rp,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:B(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:B(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:B(t)}}}}};c();l();c();l();function Et(t){let e=Object.entries(t).map(([r,n])=>x({[r]:n}));return F(ie(e),ln(r=>({...r,$kind:Object.keys(r)[0]})))}o(Et,"safeEnum");var Ft=F(M(),ln(t=>B(t)),tr(Oe)),ye=Ft,vt=M(),be=F(ie([M(),F(W(),Q())]),tr(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Ge=x({objectId:Ft,version:be,digest:M()}),q=F(ie([x({GasCoin:A(!0)}),x({Input:F(W(),Q()),type:ae(A("pure"))}),x({Input:F(W(),Q()),type:ae(A("object"))}),x({Result:F(W(),Q())}),x({NestedResult:un([F(W(),Q()),F(W(),Q())])})]),ln(t=>({...t,$kind:Object.keys(t)[0]}))),_p=x({budget:_(be),price:_(be),owner:_(Ft),payment:_(I(Ge))}),zO=x({address:M(),module:M(),name:M(),typeParams:I(M())}),fi=ie([A("address"),A("bool"),A("u8"),A("u16"),A("u32"),A("u64"),A("u128"),A("u256"),x({vector:nr(()=>fi)}),x({datatype:x({package:M(),module:M(),type:M(),typeParameters:I(nr(()=>fi))})}),x({typeParameter:F(W(),Q())})]),jp=x({ref:_(ie([A("&"),A("&mut")])),body:fi}),Np=x({package:ye,module:M(),function:M(),typeArguments:I(M()),arguments:I(q),_argumentTypes:ae(_(I(jp)))}),Lp=x({name:M(),inputs:or(M(),ie([q,I(q)])),data:or(M(),et())}),Vp=Et({MoveCall:Np,TransferObjects:x({objects:I(q),address:q}),SplitCoins:x({coin:q,amounts:I(q)}),MergeCoins:x({destination:q,sources:I(q)}),Publish:x({modules:I(vt),dependencies:I(ye)}),MakeMoveVec:x({type:_(M()),elements:I(q)}),Upgrade:x({modules:I(vt),dependencies:I(ye),package:ye,ticket:q}),$Intent:Lp}),rl=Et({ImmOrOwnedObject:Ge,SharedObject:x({objectId:ye,initialSharedVersion:be,mutable:rr()}),Receiving:Ge}),Fp=Et({Object:rl,Pure:x({bytes:vt}),UnresolvedPure:x({value:et()}),UnresolvedObject:x({objectId:ye,version:ae(_(be)),digest:ae(_(M())),initialSharedVersion:ae(_(be))})}),hi=Et({Object:rl,Pure:x({bytes:vt})}),gi=Et({None:A(!0),Epoch:be}),Tr=x({version:A(2),sender:ft(Ft),expiration:ft(gi),gasData:_p,inputs:I(Fp),commands:I(Vp)});var It={MoveCall(t){let[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>z(q,r)),address:z(q,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:z(q,t),amounts:e.map(r=>z(q,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:z(q,t),sources:e.map(r=>z(q,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:Y(new Uint8Array(r))),dependencies:e.map(r=>Te(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(i=>typeof i=="string"?i:Y(new Uint8Array(i))),dependencies:e.map(i=>Te(i)),package:r,ticket:z(q,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>z(q,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Array.isArray(i)?i.map(s=>z(q,s)):z(q,i)])),data:r}}}};c();l();c();l();var bi=x({digest:M(),objectId:M(),version:ie([F(W(),Q()),M(),mo()])}),$p=Et({ImmOrOwned:bi,Shared:x({objectId:ye,initialSharedVersion:be,mutable:rr()}),Receiving:bi}),nl=Et({Object:$p,Pure:I(F(W(),Q()))}),il=ie([x({kind:A("Input"),index:F(W(),Q()),value:et(),type:ae(A("object"))}),x({kind:A("Input"),index:F(W(),Q()),value:et(),type:A("pure")})]),zp=ie([x({Epoch:F(W(),Q())}),x({None:_(A(!0))})]),ol=F(ie([W(),M(),mo()]),tr(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),yi=ie([x({bool:_(A(!0))}),x({u8:_(A(!0))}),x({u64:_(A(!0))}),x({u128:_(A(!0))}),x({address:_(A(!0))}),x({signer:_(A(!0))}),x({vector:nr(()=>yi)}),x({struct:nr(()=>Gp)}),x({u16:_(A(!0))}),x({u32:_(A(!0))}),x({u256:_(A(!0))})]),Gp=x({address:M(),module:M(),name:M(),typeParams:I(yi)}),Hp=x({budget:ae(ol),price:ae(ol),payment:ae(I(bi)),owner:ae(M())}),qp=[il,x({kind:A("GasCoin")}),x({kind:A("Result"),index:F(W(),Q())}),x({kind:A("NestedResult"),index:F(W(),Q()),resultIndex:F(W(),Q())})],at=ie([...qp]),Kp=x({kind:A("MoveCall"),target:F(M(),tr(t=>t.split("::").length===3)),typeArguments:I(M()),arguments:I(at)}),Wp=x({kind:A("TransferObjects"),objects:I(at),address:at}),Qp=x({kind:A("SplitCoins"),coin:at,amounts:I(at)}),Yp=x({kind:A("MergeCoins"),destination:at,sources:I(at)}),Xp=x({kind:A("MakeMoveVec"),type:ie([x({Some:yi}),x({None:_(A(!0))})]),objects:I(at)}),Jp=x({kind:A("Publish"),modules:I(I(F(W(),Q()))),dependencies:I(M())}),Zp=x({kind:A("Upgrade"),modules:I(I(F(W(),Q()))),dependencies:I(M()),packageId:M(),ticket:at}),ef=[Kp,Wp,Qp,Yp,Jp,Zp,Xp],tf=ie([...ef]),iA=x({version:A(1),sender:ae(M()),expiration:ft(zp),gasConfig:Hp,inputs:I(il),transactions:I(tf)});function Si(t){let e=t.inputs.map((r,n)=>{if(r.Object)return{kind:"Input",index:n,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:n,value:{Pure:Array.from(he(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:n,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:n,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:ot.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(n=>it(n,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:it(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(n=>it(n,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(n=>it(n,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(n=>Array.from(he(n))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:it(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(n=>it(n,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(n=>it(n,e)),address:it(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(n=>Array.from(he(n))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:it(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}o(Si,"serializeV1TransactionData");function it(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}o(it,"convertTransactionArgument");function sl(t){return z(Tr,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(Er(nl,e.value)){let r=z(nl,e.value);if(r.Object){if(r.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:r.Object.ImmOrOwned.objectId,version:String(r.Object.ImmOrOwned.version),digest:r.Object.ImmOrOwned.digest}}};if(r.Object.Shared)return{Object:{SharedObject:{mutable:r.Object.Shared.mutable??null,initialSharedVersion:r.Object.Shared.initialSharedVersion,objectId:r.Object.Shared.objectId}}};if(r.Object.Receiving)return{Object:{Receiving:{digest:r.Object.Receiving.digest,version:String(r.Object.Receiving.version),objectId:r.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Y(new Uint8Array(r.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?ot.tagToString(e.type.Some):null,elements:e.objects.map(r=>st(r))}};case"MergeCoins":return{MergeCoins:{destination:st(e.destination),sources:e.sources.map(r=>st(r))}};case"MoveCall":{let[r,n,i]=e.target.split("::");return{MoveCall:{package:r,module:n,function:i,typeArguments:e.typeArguments,arguments:e.arguments.map(s=>st(s))}}}case"Publish":return{Publish:{modules:e.modules.map(r=>Y(Uint8Array.from(r))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:st(e.coin),amounts:e.amounts.map(r=>st(r))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(r=>st(r)),address:st(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(r=>Y(Uint8Array.from(r))),dependencies:e.dependencies,package:e.packageId,ticket:st(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}o(sl,"transactionDataFromV1");function st(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}o(st,"parseV1TransactionArgument");c();l();function Lr(t){return ie(Object.entries(t).map(([e,r])=>x({[e]:r})))}o(Lr,"enumUnion");var He=Lr({GasCoin:A(!0),Input:F(W(),Q()),Result:F(W(),Q()),NestedResult:un([F(W(),Q()),F(W(),Q())])}),rf=x({budget:_(be),price:_(be),owner:_(Ft),payment:_(I(Ge))}),nf=x({package:ye,module:M(),function:M(),typeArguments:I(M()),arguments:I(He)}),of=x({name:M(),inputs:or(M(),ie([He,I(He)])),data:or(M(),et())}),sf=Lr({MoveCall:nf,TransferObjects:x({objects:I(He),address:He}),SplitCoins:x({coin:He,amounts:I(He)}),MergeCoins:x({destination:He,sources:I(He)}),Publish:x({modules:I(vt),dependencies:I(ye)}),MakeMoveVec:x({type:_(M()),elements:I(He)}),Upgrade:x({modules:I(vt),dependencies:I(ye),package:ye,ticket:He}),$Intent:of}),af=Lr({ImmOrOwnedObject:Ge,SharedObject:x({objectId:ye,initialSharedVersion:be,mutable:rr()}),Receiving:Ge}),cf=Lr({Object:af,Pure:x({bytes:vt}),UnresolvedPure:x({value:et()}),UnresolvedObject:x({objectId:ye,version:ae(_(be)),digest:ae(_(M())),initialSharedVersion:ae(_(be))})}),lf=Lr({None:A(!0),Epoch:be}),al=x({version:A(2),sender:ft(Ft),expiration:ft(lf),gasData:rf,inputs:I(cf),commands:I(sf)});c();l();var uf=50,df=1000n,mf=5e10;async function ll(t,e,r){return await bf(t,e),await gf(t,e),e.onlyTransactionKind||(await pf(t,e),await ff(t,e),await hf(t,e)),await yf(t),await r()}o(ll,"resolveTransactionData");async function pf(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Vr(e).getReferenceGasPrice()))}o(pf,"setGasPrice");async function ff(t,e){if(t.gasConfig.budget)return;let r=await Vr(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(mf),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let n=df*BigInt(t.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(s>i?s:i)}o(ff,"setGasBudget");async function hf(t,e){if(!t.gasConfig.payment){let n=(await Vr(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:li})).data.filter(i=>!t.inputs.find(a=>a.Object?.ImmOrOwnedObject?i.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1)).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(i=>z(Ge,i))}}o(hf,"setGasPayment");async function gf(t,e){let r=t.inputs.filter(f=>f.UnresolvedObject&&!(f.UnresolvedObject.version||f.UnresolvedObject?.initialSharedVersion)),n=[...new Set(r.map(f=>Te(f.UnresolvedObject.objectId)))],i=n.length?xf(n,uf):[],s=(await Promise.all(i.map(f=>Vr(e).multiGetObjects({ids:f,options:{showOwner:!0}})))).flat(),a=new Map(n.map((f,g)=>[f,s[g]])),u=Array.from(a).filter(([f,g])=>g.error).map(([f,g])=>JSON.stringify(g.error));if(u.length)throw new Error(`The following input objects are invalid: ${u.join(", ")}`);let m=s.map(f=>{if(f.error||!f.data)throw new Error(`Failed to fetch object: ${f.error}`);let g=f.data.owner,y=g&&typeof g=="object"&&"Shared"in g?g.Shared.initial_shared_version:null;return{objectId:f.data.objectId,digest:f.data.digest,version:f.data.version,initialSharedVersion:y}}),p=new Map(n.map((f,g)=>[f,m[g]]));for(let[f,g]of t.inputs.entries()){if(!g.UnresolvedObject)continue;let y,C=B(g.UnresolvedObject.objectId),S=p.get(C);g.UnresolvedObject.initialSharedVersion??S?.initialSharedVersion?y=ze.SharedObjectRef({objectId:C,initialSharedVersion:g.UnresolvedObject.initialSharedVersion||S?.initialSharedVersion,mutable:Sf(t,f)}):Cf(t,f)&&(y=ze.ReceivingRef({objectId:C,digest:g.UnresolvedObject.digest??S?.digest,version:g.UnresolvedObject.version??S?.version})),t.inputs[t.inputs.indexOf(g)]=y??ze.ObjectRef({objectId:C,digest:g.UnresolvedObject.digest??S?.digest,version:g.UnresolvedObject.version??S?.version})}}o(gf,"resolveObjectReferences");async function bf(t,e){let{inputs:r,commands:n}=t,i=[],s=new Set;n.forEach(u=>{if(u.MoveCall){if(u.MoveCall._argumentTypes)return;if(u.MoveCall.arguments.map(f=>f.$kind==="Input"?t.inputs[f.Input]:null).some(f=>f?.UnresolvedPure||f?.UnresolvedObject)){let f=`${u.MoveCall.package}::${u.MoveCall.module}::${u.MoveCall.function}`;s.add(f),i.push(u.MoveCall)}}switch(u.$kind){case"SplitCoins":u.SplitCoins.amounts.forEach(m=>{cl(m,U.U64,t)});break;case"TransferObjects":cl(u.TransferObjects.address,U.Address,t);break}});let a=new Map;if(s.size>0){let u=Vr(e);await Promise.all([...s].map(async m=>{let[p,f,g]=m.split("::"),y=await u.getNormalizedMoveFunction({package:p,module:f,function:g});a.set(m,y.parameters.map(C=>tl(C)))}))}i.length&&await Promise.all(i.map(async u=>{let m=a.get(`${u.package}::${u.module}::${u.function}`);if(!m)return;let f=m.length>0&&el(m.at(-1))?m.slice(0,m.length-1):m;u._argumentTypes=f})),n.forEach(u=>{if(!u.MoveCall)return;let m=u.MoveCall,p=`${m.package}::${m.module}::${m.function}`,f=m._argumentTypes;if(f){if(f.length!==u.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${p}`);f.forEach((g,y)=>{let C=m.arguments[y];if(C.$kind!=="Input")return;let S=r[C.Input];if(!S.UnresolvedPure&&!S.UnresolvedObject)return;let w=S.UnresolvedPure?.value??S.UnresolvedObject?.objectId,v=ro(g.body);if(v){C.type="pure",r[r.indexOf(S)]=ze.Pure(v.serialize(w));return}if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);C.type="object";let D=S.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:w}}:S;r[C.Input]=D})}})}o(bf,"normalizeInputs");function yf(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}o(yf,"validate");function cl(t,e,r){if(t.$kind!=="Input")return;let n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=ze.Pure(e.serialize(n.UnresolvedPure.value)))}o(cl,"normalizeRawArgument");function Sf(t,e){let r=!1;return t.getInputUses(e,(n,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(n);r=i.MoveCall._argumentTypes[s].ref!=="&"||r}(i.$kind==="MakeMoveVec"||i.$kind==="MergeCoins"||i.$kind==="SplitCoins")&&(r=!0)}),r}o(Sf,"isUsedAsMutable");function Cf(t,e){let r=!1;return t.getInputUses(e,(n,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(n);r=wf(i.MoveCall._argumentTypes[s])||r}}),r}o(Cf,"isUsedAsReceiving");function wf(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}o(wf,"isReceivingType");function Vr(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}o(Vr,"getClient");function xf(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))}o(xf,"chunk");c();l();function ul(t){function e(r){return t(r)}return o(e,"object"),e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:n})=>i=>i.moveCall({typeArguments:[r],target:`0x1::option::${n===null?"none":"some"}`,arguments:n===null?[]:[i.object(n)]}),e}o(ul,"createObjectMethods");c();l();function dl(t){function e(r,n){if(typeof r=="string")return t(wr(r).serialize(n));if(r instanceof Uint8Array||yr(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return o(e,"pure"),e.u8=r=>t(U.U8.serialize(r)),e.u16=r=>t(U.U16.serialize(r)),e.u32=r=>t(U.U32.serialize(r)),e.u64=r=>t(U.U64.serialize(r)),e.u128=r=>t(U.U128.serialize(r)),e.u256=r=>t(U.U256.serialize(r)),e.bool=r=>t(U.Bool.serialize(r)),e.string=r=>t(U.String.serialize(r)),e.address=r=>t(U.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(U.vector(wr(r)).serialize(n)),e.option=(r,n)=>t(U.option(wr(r)).serialize(n)),e}o(dl,"createPure");c();l();c();l();function ml(t,e){let r=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),Zc(n,{dkLen:32})}o(ml,"hashTypedData");function pl(t){return B(t).replace("0x","")}o(pl,"prepareSuiAddress");var Ot=class t{static{o(this,"TransactionDataBuilder")}constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let n=U.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){let n=U.TransactionData.parse(e)?.V1,i=n.kind.ProgrammableTransaction;if(!n||!i)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new t(z(Tr,e)):new t(z(Tr,sl(e)))}static getDigestFromBytes(e){let r=ml("TransactionData",e);return nt(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){let i=this.inputs,s=this.commands,a={ProgrammableTransaction:{inputs:i,commands:s}};if(n)return U.TransactionKind.serialize(a,{maxSize:e}).toBytes();let u=r?.expiration??this.expiration,m=r?.sender??this.sender,p={...this.gasData,...r?.gasConfig,...r?.gasData};if(!m)throw new Error("Missing transaction sender");if(!p.budget)throw new Error("Missing gas budget");if(!p.payment)throw new Error("Missing gas payment");if(!p.price)throw new Error("Missing gas price");let f={sender:pl(m),expiration:u||{None:!0},gasData:{payment:p.payment,owner:pl(this.gasData.owner??m),price:BigInt(p.price),budget:BigInt(p.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return U.TransactionData.serialize({V1:f},{maxSize:e}).toBytes()}addInput(e,r){let n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,i)=>(n.$kind==="Input"&&n.Input===e&&r(n,i),n))}mapArguments(e){for(let r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(i=>e(i,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(i=>e(i,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(i=>e(i,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(i=>e(i,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(i=>e(i,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":let n=r.$Intent.inputs;r.$Intent.inputs={};for(let[i,s]of Object.entries(n))r.$Intent.inputs[i]=Array.isArray(s)?s.map(a=>e(a,r)):e(s,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}let n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(i=>{switch(i.$kind){case"Result":i.Result>e&&(i.Result+=n);break;case"NestedResult":i.NestedResult[0]>e&&(i.NestedResult[0]+=n);break}return i})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return z(Tr,this)}};c();l();function Ci(t){if(typeof t=="string")return B(t);if(t.Object)return t.Object.ImmOrOwnedObject?B(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?B(t.Object.Receiving.objectId):B(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return B(t.UnresolvedObject.objectId)}o(Ci,"getIdFromCallArg");var gl=o(t=>{throw TypeError(t)},"__typeError"),vi=o((t,e,r)=>e.has(t)||gl("Cannot "+r),"__accessCheck"),P=o((t,e,r)=>(vi(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Fr=o((t,e,r)=>e.has(t)?gl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),$t=o((t,e,r,n)=>(vi(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),ct=o((t,e,r)=>(vi(t,e,"access private method"),r),"__privateMethod"),zr,Gr,zt,R,qe,no,Ei,xi,Ii;function fl(t,e=1/0){let r={$kind:"Result",Result:t},n=[],i=o(s=>n[s]??(n[s]={$kind:"NestedResult",NestedResult:[t,s]}),"nestedResultFor");return new Proxy(r,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,a){if(a in s)return Reflect.get(s,a);if(a===Symbol.iterator)return function*(){let m=0;for(;m<e;)yield i(m),m++};if(typeof a=="symbol")return;let u=parseInt(a,10);if(!(Number.isNaN(u)||u<0))return i(u)}})}o(fl,"createTransactionResult");var bl=Symbol.for("@mysten/transaction");function oo(t){return!!t&&typeof t=="object"&&t[bl]===!0}o(oo,"isTransaction");var hl={buildPlugins:new Map,serializationPlugins:new Map},wi=Symbol.for("@mysten/transaction/registry");function $r(){try{let t=globalThis;return t[wi]||(t[wi]=hl),t[wi]}catch{return hl}}o($r,"getGlobalPluginRegistry");var Tf=class Ti{static{o(this,"_Transaction")}constructor(){Fr(this,qe),Fr(this,zr),Fr(this,Gr),Fr(this,zt,new Map),Fr(this,R),this.object=ul(r=>{if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Er(q,r))return r;let n=Ci(r),i=P(this,R).inputs.find(s=>n===Ci(s));return i?.Object?.SharedObject&&typeof r=="object"&&r.Object?.SharedObject&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||r.Object.SharedObject.mutable),i?{$kind:"Input",Input:P(this,R).inputs.indexOf(i),type:"object"}:P(this,R).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:B(r)}}:r)});let e=$r();$t(this,R,new Ot),$t(this,Gr,[...e.buildPlugins.values()]),$t(this,zr,[...e.serializationPlugins.values()])}static fromKind(e){let r=new Ti;return $t(r,R,Ot.fromKindBytes(typeof e=="string"?he(e):e)),r}static from(e){let r=new Ti;return oo(e)?$t(r,R,new Ot(e.getData())):typeof e!="string"||!e.startsWith("{")?$t(r,R,Ot.fromBytes(typeof e=="string"?he(e):e)):$t(r,R,Ot.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){$r().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){$r().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){$r().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){$r().buildPlugins.delete(e)}addSerializationPlugin(e){P(this,zr).push(e)}addBuildPlugin(e){P(this,Gr).push(e)}addIntentResolver(e,r){if(P(this,zt).has(e)&&P(this,zt).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);P(this,zt).set(e,r)}setSender(e){P(this,R).sender=e}setSenderIfNotSet(e){P(this,R).sender||(P(this,R).sender=e)}setExpiration(e){P(this,R).expiration=e?z(gi,e):null}setGasPrice(e){P(this,R).gasConfig.price=String(e)}setGasBudget(e){P(this,R).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){P(this,R).gasData.budget==null&&(P(this,R).gasConfig.budget=String(e))}setGasOwner(e){P(this,R).gasConfig.owner=e}setGasPayment(e){P(this,R).gasConfig.payment=e.map(r=>z(Ge,r))}get blockData(){return Si(P(this,R).snapshot())}getData(){return P(this,R).snapshot()}get[bl](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:dl(e=>yr(e)?P(this,R).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):P(this,R).addInput("pure",Er(hi,e)?z(hi,e):e instanceof Uint8Array?ze.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(ze.ObjectRef(...e))}receivingRef(...e){return this.object(ze.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(ze.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let r=P(this,R).commands.push(e);return fl(r-1)}splitCoins(e,r){let n=It.SplitCoins(typeof e=="string"?this.object(e):ct(this,qe,Ei).call(this,e),r.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):ct(this,qe,no).call(this,s))),i=P(this,R).commands.push(n);return fl(i-1,r.length)}mergeCoins(e,r){return this.add(It.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(It.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:i}){return this.add(It.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(i)}))}moveCall({arguments:e,...r}){return this.add(It.MoveCall({...r,arguments:e?.map(n=>ct(this,qe,no).call(this,n))}))}transferObjects(e,r){return this.add(It.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):ct(this,qe,no).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(It.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify(Si(P(this,R).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(z(al,P(this,R).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){let{signer:r,...n}=e,i=await this.build(n);return r.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await ct(this,qe,xi).call(this,e),P(this,R).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await ct(this,qe,xi).call(this,e),P(this,R).getDigest()}async prepareForSerialization(e){let r=new Set;for(let i of P(this,R).commands)i.$Intent&&r.add(i.$Intent.name);let n=[...P(this,zr)];for(let i of r)if(!e.supportedIntents?.includes(i)){if(!P(this,zt).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(P(this,zt).get(i))}await ct(this,qe,Ii).call(this,n,e)}};zr=new WeakMap;Gr=new WeakMap;zt=new WeakMap;R=new WeakMap;qe=new WeakSet;no=o(function(t){return yr(t)?this.pure(t):ct(this,qe,Ei).call(this,t)},"normalizeTransactionArgument_fn");Ei=o(function(t){return typeof t=="function"?z(q,t(this)):z(q,t)},"resolveArgument_fn");xi=o(async function(t){if(!t.onlyTransactionKind&&!P(this,R).sender)throw new Error("Missing transaction sender");await ct(this,qe,Ii).call(this,[...P(this,Gr),ll],t)},"prepareBuild_fn");Ii=o(async function(t,e){let r=o(n=>{if(n>=t.length)return()=>{};let i=t[n];return async()=>{let s=r(n+1),a=!1,u=!1;if(await i(P(this,R),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);a=!0,await s(),u=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!u)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}},"createNext");await r(0)()},"runPlugins_fn");var Oi=Tf;var vf=Symbol.for("@mysten/SuiClient");var Hr=class{static{o(this,"SuiClient")}get[vf](){return!0}constructor(e){this.transport=e.transport??new Ln({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!Oe(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!Oe(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!Oe(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!Oe(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!Oe(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!Sr(Te(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!Sr(Te(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Qn(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Qn(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:i}){let s=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:Y(e),Array.isArray(r)?r:[r],n]});if(i==="WaitForLocalExecution")try{await this.waitForTransaction({digest:s.digest})}catch{}return s}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(r.toSuiAddress()),i=await e.build({client:this}));let{signature:s,bytes:a}=await r.signTransaction(i);return this.executeTransactionBlock({transactionBlock:a,signature:s,...n})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!Oe(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!Sr(Te(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let r;if(oo(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=Y(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=Y(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:Y(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!Sr(Te(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),r=Le(e.digest);return Je(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){let{nextCursor:n,hasNextPage:i,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:i,nextCursor:n,data:s.map(a=>Kc(a,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...i}){let s=AbortSignal.timeout(r),a=new Promise((u,m)=>{s.addEventListener("abort",()=>m(s.reason))});for(a.catch(()=>{});!s.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(m=>setTimeout(m,n)),a])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var yl=o(async({chain:t,owner:e,chainData:r},{recipient:n})=>{let i=t.id,{objectId:s}=r,a=V.getRpcProxyUrl(i);if(!s)throw new Error("Unable to determine object id for collectible");if(!e)throw new Error("Unable to determine owner for collectible");if(!a)throw new Error("Failed to get Sui RPC url");let u=new Hr({url:a}),m=new Oi;m.setSender(e),m.transferObjects([s],n);let p=await m.build({client:u});return{networkID:i,transaction:p}},"createSuiTransferTransaction");async function Sl(t,e,r){let{chain:n}=t,i=n.id;return V.isSolanaNetworkID(i)?xc(t,e):V.isEVMNetworkID(i)?bc(t,e):V.isSuiNetworkID(i)?yl(t,e):V.isBitcoinNetworkID(i)?mc(t,e,r):Li(i)}o(Sl,"createTransferTransaction");var Ef="collectible-transfer-tx",If=re({seconds:30});function Of(t){return t&&!t.isNaN()}o(Of,"isValidAmountFn");function Af(t){let{collectible:e,sendFormValues:r}=t??{},{chain:n,owner:i}=e??{},{id:s}=n??{},{recipient:a,amountAsset:u}=r??{},m=$s(a,s)??"",p=u?.isNaN()?void 0:u,f=Of(p),{data:g}=rn({address:i,networkID:s}),{data:y}=Vs(g),{data:C}=Rs({networkID:s,enableFallback:!0}),S=kf(s,C,y,g),w=S?.sendContextRequired?S.sendContext:void 0;return Me({staleTime:If,enabled:f&&!!e&&!!t&&!!S,queryKey:H.transferTransaction({collectible:e,sendFormValues:r,sendContext:w}),async queryFn(){try{if(!e||!r||!S)throw new Error("Missing required data to construct fungible transfer transaction");return await Sl(e,{...r,recipient:m},w)}catch(v){if(pt(v)){let D=v.response?.status;ht(v,D,Ef)}throw v}}})}o(Af,"useCollectibleTransferTransaction");function kf(t,e,r,n){if(t)return V.isBitcoinNetworkID(t)?!e||!r||!n?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:e,utxoState:r,chainAddress:n}}:{sendContextRequired:!1}}o(kf,"createSendContext");c();l();var Cl=E(k(),1);function Ai(t){let e=On(X.PinnedCollections);return{data:(0,Cl.useMemo)(()=>t?e?.[t]??[]:[],[t,e]),isPending:!!t&&e===void 0}}o(Ai,"usePinnedCollections");c();l();var wl=E(k(),1);function xl(t){let{data:e,isPending:r}=me(t);return{data:(0,wl.useMemo)(()=>t?Array.from(e.values()).filter(i=>hn(i,{spamStatus:De.NotVerified})).map(({id:i})=>i):[],[t,e]),isPending:r}}o(xl,"useHiddenCollections");c();l();var Tl=E(k(),1);var Mf=o(t=>{let e=de();return(0,Tl.useCallback)(()=>e.invalidateQueries({queryKey:H.collections(t)}),[e,t])},"useInvalidateCollectibles");c();l();var vl=E(k(),1);var Df=2e3,io=class extends We{static{o(this,"UsePinCollectionError")}constructor(e){super(e),this.name="UsePinCollectionError"}};function El(t){let e=de();return(0,vl.useCallback)(async({collectionId:r,pinned:n})=>{if(!t)return;let i=await In(X.PinnedCollections)??{},s=i[t]??[];if(n){if(Object.values(i).reduce((m,p)=>m+p.length,0)+1>Df)throw new io("Pinned limit reached");i[t]=Array.from(new Set([...s,r]))}else{let u=s.indexOf(r);if(u===-1)throw new io("Collection not previously pinned");let m=[...s];m.splice(u,1),i[t]=m}await En(X.PinnedCollections)(i),await e.invalidateQueries({queryKey:H.pinnedCollections(t)})},[t,e])}o(El,"usePinCollection");c();l();var Il=E(k(),1);var Bf=o(t=>{let e=de();return(0,Il.useCallback)(()=>e.refetchQueries({queryKey:H.collections(t)}),[e,t])},"useRefetchCollectibles");c();l();c();l();var Uf=new Error("Failed to report event for collectible");async function Ol(t){try{let e=await ke.api().post("/collectibles/v1/events",{events:t});if(!ji(e))throw new Error}catch{throw Uf}}o(Ol,"reportCollectibleEvent");function Pf(){return Zr({async mutationFn({event:t}){try{await Ol([t])}catch{}}})}o(Pf,"useReportCollectibleEvent");c();l();function Rf(){let{data:t}=Zi(),e=Xt(),r=de(),n=Ls(),i=Jt();return Zr({mutationFn:o(async({multichainTransaction:a,pendingTransactionInput:u,senderAddress:m,optimisticUpdate:p,gasEstimation:f})=>{if(!t)throw new Error("No account identifier found");let{networkID:g}=a,y=await dn.get(g).onBeforeSend({multichainTransaction:a,gasEstimation:f}),C=await xs({accountIdentifier:t,accountSigner:i,multichainTransaction:y,networkID:g,pendingTransactionInput:u,senderAddress:m,storage:e,utxoManager:n});return p&&ar(r,p),ws(g,C)},"mutationFn"),onError(a){a instanceof Error&&Ce.captureError(a,Ee.Collectibles)}})}o(Rf,"useTransferCollectible");c();l();var Al=E(k(),1);function kl(t){let{data:e,isPending:r}=me(t);return{data:(0,Al.useMemo)(()=>t?Array.from(e.values()).filter(i=>Es(i,{spamStatus:De.NotVerified})).map(({id:i})=>i):[],[t,e]),isPending:r}}o(kl,"useUnhiddenCollections");c();l();var Ml=E(k(),1);var ki=class extends mr{static{o(this,"UseUnhideCollectionError")}constructor(e){super(e),this.name="UseUnhideCollectionError"}};function Dl(t){let e=An(t);return(0,Ml.useCallback)(async({collectionId:r})=>{try{await e([{id:r,visibility:$.Visible}],{checkLimit:!0})}catch(n){throw n instanceof mr?new ki(n.message):n}},[e])}o(Dl,"useUnhideCollection");c();l();var Bl=E(k(),1);var _f=o(({id:t,addresses:e})=>{let{data:r,isSuccess:n}=Dt({addresses:e});return(0,Bl.useMemo)(()=>{let s={isSuccess:n,data:void 0};for(let a of r??[])for(let u of a.items)if(u.id===t)return{...s,data:u};return s},[t,r,n])},"useCollectible");c();l();var Gt=E(k(),1);c();l();var Mi=E(k(),1);var Ul=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=fe(),i=(0,Mi.useCallback)(({collectible:a,previousVisibility:u,updatedVisibility:m})=>{m!==null&&n.capture("collectiblesReportAsNotSpam",{data:bt(a)}),t.success(u===$.Visible?r("collectiblesNotSpamSuccess"):r("collectiblesNotSpamAndUnhiddenSuccess"))},[r,t,n]),s=(0,Mi.useCallback)((a,u)=>{t.error(r("collectiblesNotSpamFail"))},[r,t]);return Ta({accountId:e,onSuccess:i,onError:s})},"useReportNotSpam");c();l();var Di=E(k(),1);var Pl=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=fe(),i=(0,Di.useCallback)(({collectible:a,previousVisibility:u,updatedVisibility:m})=>{m!==null&&n.capture("collectiblesReportAsSpam",{data:bt(a)}),t.success(u===$.Hidden?r("collectiblesSpamSuccess"):r("collectiblesSpamAndHiddenSuccess"))},[r,t,n]),s=(0,Di.useCallback)((a,u)=>{t.error(r("collectiblesSpamFail"))},[r,t]);return xa({accountId:e,onSuccess:i,onError:s})},"useReportSpam");function jf({accountId:t,collectible:e,toast:r}){let n=Pl({collectible:e,accountId:t,toast:r}),i=(0,Gt.useCallback)(()=>{if(e)return n(e)},[n,e]),s=Ul({collectible:e,accountId:t,toast:r}),a=(0,Gt.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:u}=me(t),m=(0,Gt.useMemo)(()=>u.get(e?.collection.id??e?.id??""),[u,e]),p=(0,Gt.useMemo)(()=>e?vs(m,{spamStatus:e.collection.spamStatus}):De.NotVerified,[e,m]),f=Or(p);return(0,Gt.useMemo)(()=>({isSpam:f,spamStatus:p,onReportSpam:f?void 0:i,onReportNotSpam:f?a:void 0}),[p,f,i,a])}o(jf,"useCollectiblesReportSpam");c();l();var Rl=E(lo(),1),_l=E(k(),1);c();l();var so=o((t,e)=>{let r=new Re(t);if(r.isZero())return"0";let n=an(-e);return r.abs().lt(n)?r.isPositive()?`<${n.toFixed()}`:`-<${n.toFixed()}`:parseFloat(r.toString()).toLocaleString("en-US",{maximumFractionDigits:e})},"formatValue");var Nf=o(t=>{let{t:e}=Z();return(0,_l.useMemo)(()=>{let n=[];if(!t)return n;let i=t?.chain.id,s=Pt.get(i).collectibleDetailPrecision;t.collection.name&&n.push({topLeft:e("collectibleScreenCollectionLabel"),topRight:t.collection.name});let a,u;if(t.collection.floorPrice){let{price:f,token:g}=t.collection.floorPrice;if(g&&g.decimals&&g.symbol){let{decimals:y,symbol:C}=g,S=lr(f,y);n.push({topLeft:e("collectiblesFloorPrice"),topRight:`${so(S,s)} ${C}`}),a=S,u=C}}let m,p;if(t.lastSalePrice){let{price:f,token:g}=t.lastSalePrice;if(g&&g.decimals&&(g.symbol||g.name)){let{decimals:y,symbol:C,name:S}=g,w=lr(f,y);n.push({topLeft:e("collectiblesLastSalePrice"),topRight:`${so(w,s)} ${C??S}`}),m=w,p=C}}if(a&&m&&u===p){let f=a-m;n.push({topLeft:e("collectiblesTotalReturn"),topRight:{text:`${so(f,s)} ${p}`,color:f>0?"spotPositive":f===0?void 0:"spotNegative"}})}return t.collection.ownerCount&&n.push({topLeft:e("collectiblesUniqueHolders"),topRight:(0,Rl.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&n.push({topLeft:e("sendFungibleSummaryNetwork"),topRight:V.getNetworkName(t.chain.id)}),Wr()&&n.push({topLeft:"Standard",topRight:Lf(t)}),As(t)&&n.push({topLeft:e("collectiblesNonTransferable"),topRight:e("collectiblesNonTransferableYes")}),n},[t,e])},"useCollectibleTableRows");function Lf(t){let e=t.chainData;if(ce(e))return e.standard;if(Qe(e))return e.standard;if(Ye(e))return"Ordinals"}o(Lf,"getStandard");c();l();var jl=E(k(),1);var Vf=o(({id:t,addresses:e})=>{let{data:r}=Dt({addresses:e});return(0,jl.useMemo)(()=>(r??[]).find(n=>n.id===t),[t,r])},"useCollection");c();l();var Nl=E(k(),1);var Ll=o((t,e,r,n)=>(0,Nl.useMemo)(()=>e.includes(r)?!1:t.includes(r)?!0:!!n,[t,e,r,n]),"useIsCollectionHidden");c();l();var Vl=E(k(),1);var Bi=o((t,e)=>(0,Vl.useMemo)(()=>e?t.includes(e):!1,[e,t]),"useIsCollectionPinned");c();l();var qr=E(k(),1);c();l();var Fl=E(k(),1);var $l=o(({accountId:t,collectionId:e,isPinned:r,pinMessages:n,pinCollection:i,toast:s,sendAnalyticEvent:a,unhideCollection:u,isHidden:m})=>(0,Fl.useCallback)(()=>{(async()=>{if(!e||!t){s.error(r?n.unpinFail:n.pinFail);return}try{await i({collectionId:e,pinned:!r}),m&&!r&&await u({collectionId:e}),s.success(r?n.unpinSuccess:n.pinSuccess),a&&a(r?"collectionUnpinned":"collectionPinned")}catch{s.error(r?n.unpinFail:n.pinFail)}})()},[e,t,r,n,i,s,a,u,m]),"usePinCollectionToggle");var Ff=o(({collectionId:t,isSpam:e,accountId:r,networkId:n,toast:i})=>{let{t:s}=Z(),a=fe(),u=Dl(r),{data:m=[]}=xl(r),{data:p=[]}=kl(r),f=Ll(m,p,t??"",!!e),g=El(r),{data:y}=Ai(r),C=Bi(y,t??""),S=(0,qr.useMemo)(()=>({pinSuccess:s("collectionPinSuccess"),pinFail:s("collectionPinFail"),unpinSuccess:s("collectionUnpinSuccess"),unpinFail:s("collectionUnpinFail")}),[s]),w=(0,qr.useCallback)(D=>{n&&a.capture(D,{data:{networkId:n,chainId:V.getChainID(n)}})},[a,n]),v=$l({accountId:r,collectionId:t,isPinned:C,pinMessages:S,pinCollection:g,toast:i,sendAnalyticEvent:w,unhideCollection:u,isHidden:f});return(0,qr.useMemo)(()=>({isPinned:C,onTogglePin:v}),[C,v])},"usePinCollectionProps");c();l();var Kr=E(k(),1);var Ze;(function(t){t.SUCCESS="SUCCESS",t.ERROR="ERROR",t.LOADING="LOADING"})(Ze||(Ze={}));var $f=o(({networkID:t,isTxError:e,isTxConfirmed:r,isTxSubmitted:n})=>{let i=Pt.get(t).sendSuccessCondition,s=(0,Kr.useMemo)(()=>e?Ze.ERROR:i===xe.SUBMISSION&&n||i===xe.CONFIRMATION&&r?Ze.SUCCESS:Ze.LOADING,[r,e,n,i]),a=i===xe.CONFIRMATION?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",u=(0,Kr.useMemo)(()=>{switch(s){case Ze.LOADING:return Ie.t("sendStatusLoadingTitle");case Ze.ERROR:return Ie.t("sendStatusErrorTitle");case Ze.SUCCESS:return Ie.t(a)}},[s,a]),{isError:m,isSuccess:p}=(0,Kr.useMemo)(()=>({isError:s===Ze.ERROR,isSuccess:s===Ze.SUCCESS}),[s]),{transactionSpeed:f=er.standard}=Ao(y=>y.sendFormValues),g=(0,Kr.useMemo)(()=>{let y=dn.get(t).transactionSpeedDescription(f);return y?Ie.t(y):""},[t,f]);return{title:u,isError:m,isSuccess:p,sendSuccessCondition:i,estimatedTime:g}},"useSendCollectibleStatusViewState");c();l();var zl=E(k(),1);var zf=!1,Gf="small",Hf="image",qf=o(t=>(0,zl.useMemo)(()=>Gl(t),[t]),"useCollectionMediaUri"),Gl=o((t,e=Gf)=>{if(!t)return;let{media:r,collection:n}=t,i=zf,s=Hf;return r?Bn({collectibleMedia:r,isImageAnimationEnabled:i,previewSize:e,mediaTypeOverride:s}):n.imageUrl},"parseCollectionMediaUri");c();l();var Hl=E(k(),1);var ql=o(t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:r})=>r?.type==="image")},"findFirstImageCollectible"),Kf=o(t=>(0,Hl.useMemo)(()=>{if(t)return ql(t)??t.items[0]},[t]),"useCollectionCollectible");c();l();var Kl=E(k(),1);var Wf=o(t=>(0,Kl.useMemo)(()=>{if(!(!t||t.items.length===0))return Wl(t)},[t]),"useCollectionItemsCount"),Wl=o(t=>{let{items:e}=t,{length:r}=e;if(r===1){let[{balance:n="",chainData:i}]=e;if(ce(i)&&i.standard===kt.SemiFungible){let s=parseInt(n,10);return isNaN(s)?1:s}}return r},"parseCollectionItemsCount");c();l();var Ql=E(k(),1);var Qf=o(t=>(0,Ql.useMemo)(()=>t.filter(e=>e?.media?.type==="image"),[t]),"useOnlyImageCollectibles");c();l();var Yl=E(k(),1);var Yf=o((t,e)=>(0,Yl.useMemo)(()=>{if(!t||!e)return;let r=t.chain.id,n=e.explorers[r]??es.get(r).defaultExplorer,i,s;if(ce(t.chainData))s="address",i=t.chainData.mint;else if(Qe(t.chainData))if(t.chainData.contract)t.chainData.id?(s="nft",i=[t.chainData.contract,t.chainData.id]):(s="token",i=t.chainData.contract);else return;else if(Ye(t.chainData))if(sr(t.chainData)){let{hash:u,index:m}=t.chainData.utxoDetails;s="transaction",i=`${u}#flow=&vout=${m}`}else return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};else if(Ys(t.chainData))s="nft",i=t.chainData.objectId??"";else throw new Error(`Unhandled collectible explorer for chain id: ${t.chain.id}`);if(!i)return;let a=rs({networkID:r,endpoint:s,explorerType:n,param:i});if(a)return{name:ts[n],url:a}},[t,e]),"useCollectibleExplorer");c();l();var Xl=E(k(),1);var Xf=o(t=>(0,Xl.useMemo)(()=>{let e=new Set;return t.filter(r=>{if(!r?.media?.image?.url)return!1;let{url:n}=r.media.image;return e.has(n)?!1:(e.add(n),!0)})},[t]),"useDedupeCollectibles");c();l();c();l();function Jl(t,e,r){let n="...",i=e+r+n.length;if(t.length<=i)return t;let s=t.substring(0,e),a=t.substring(t.length-r);return`${s}${n}${a}`}o(Jl,"ellipsize");var Zl=E(k(),1);var Jf=o(t=>{let{t:e}=Z();return(0,Zl.useMemo)(()=>{let n=[];if(!t)return;let i=t.chainData;if(Ye(i)){let{outputValue:s,satNumber:a,satName:u,inscriptionId:m,inscriptionNumber:p,protocolName:f,createdAt:g,utxoDetails:y}=i,C=e(m?"collectibleDetailOrdinalInfo":"collectibleDetailRareSatsInfo"),S;return s?S=parseFloat(s).toLocaleString("en-US"):y&&(S=y.value.toLocaleString("en-US")),S&&n.push({topLeft:e("collectibleDetailSatsInUtxo"),topRight:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:S})??void 0}),a&&n.push({topLeft:e("collectibleDetailSatNumber"),topRight:a}),u&&n.push({topLeft:e("collectibleDetailSatName"),topRight:u}),m&&n.push({topLeft:e("collectibleDetailInscriptionId"),topRight:Jl(m,5,3)}),p&&n.push({topLeft:e("collectibleDetailInscriptionNumber"),topRight:p}),f&&n.push({topLeft:e("collectibleDetailStandard"),topRight:f?.toUpperCase()}),g&&n.push({topLeft:e("collectibleDetailCreated"),topRight:Zf(new Date(g))}),{label:C,items:n.filter(Ns)}}},[t,e])},"useCollectibleChainSpecificInfoSection");function Zf(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),r=t.toLocaleTimeString();return`${e} ${r}`}o(Zf,"formatDate");c();l();var tu=E(k(),1);var Ht=o(()=>{},"noop"),eu=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function eh(t){let{amountToBurn:e=0,explorerName:r,isBurnable:n,isHidden:i,isPinned:s,isSpam:a,onBurnToken:u,onReportNotSpam:m,onReportSpam:p,onSaveToLibrary:f,onSend:g,onSetAsAvatar:y,onToggleHide:C,onTogglePin:S,onViewOnExplorer:w,shortcuts:v,shouldDisplaySend:D,shouldDisplayShortcuts:N}=t,{t:O}=Z();return(0,tu.useMemo)(()=>{let J=[];if(D&&J.push({text:O("commandSend"),type:"send",onClick:g??Ht}),f&&J.push({text:O("assetDetailSavePhoto"),singleWordAltText:O("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:f??Ht}),y&&!a&&J.push({text:O("collectibleDetailSetAsAvatar"),singleWordAltText:O("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:y??Ht}),S){let te=O(s?"assetDetailUnpinCollection":"assetDetailPinCollection"),Se=O(s?"commandUnpin":"commandPin"),ne=s?"unpin":"pin";J.push({text:te,singleWordAltText:Se,type:ne,menuOnly:!0,onClick:S??Ht})}if(C){let te=O(i?"assetDetailUnhideCollection":"assetDetailHideCollection"),Se=O(i?"commandUnhide":"commandHide"),ne=i?"unhide":"hide";J.push({text:te,singleWordAltText:Se,type:ne,menuOnly:!0,onClick:C??Ht})}if(m){let te=O("collectiblesReportAsNotSpam");J.push({text:te,type:"reportAsNotSpam",singleWordAltText:O("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:m})}if(p){let te=O("collectiblesReportAsSpam");J.push({text:te,type:"reportAsSpam",singleWordAltText:O("commandReport"),menuOnly:!0,isDestructive:!0,onClick:p})}if(n){let te=O(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");J.push({text:te,singleWordAltText:O("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:u??Ht})}return!!w&&!!r&&J.push({text:O("assetDetailViewOnExplorer",{explorer:r}),singleWordAltText:O("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:w??Ht}),J.sort((te,Se)=>(eu.get(te.type)??100)-(eu.get(Se.type)??100)),{actions:Ms(J,4),shortcuts:N?v:[]}},[e,r,n,i,s,a,u,m,p,f,g,y,C,S,w,v,D,N,O])}o(eh,"useCollectibleCTABar");export{we as a,hu as b,Hs as c,xe as d,qy as e,Ky as f,yn as g,Th as h,Qs as i,vh as j,Du as k,lm as l,Qa as m,ce as n,Qe as o,Ye as p,Ys as q,sr as r,hm as s,yc as t,Af as u,Dt as v,Ud as w,ju as x,Nu as y,Tg as z,ea as A,Gd as B,Hd as C,Ma as D,Kd as E,Ai as F,Mf as G,Bf as H,Pf as I,Rf as J,_f as K,jf as L,Nf as M,Vf as N,Bi as O,dd as P,yd as Q,Sd as R,Ad as S,Md as T,Wd as U,Xd as V,Ff as W,Pa as X,Jd as Y,Ao as Z,$f as _,om as $,im as aa,qf as ba,Kf as ca,Wf as da,Qf as ea,Yf as fa,Xf as ga,Jf as ha,eh as ia,sm as ja};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-JOOVJERF.js.map
