import{D as Hs,I as Gs,Ia as qs,Ja as js,ba as Qs,f as po,h as ho,n as pn,o as yo,t as go,x as Pt}from"./chunk-DALLY2ZR.js";import{I as Us,J as Bs,Nb as Ks,Pb as Vs,n as Je,rb as Ve}from"./chunk-4HRGOILD.js";import{$ as mr,A as ta,Ac as $t,B as Qd,C as hn,Cb as qd,D as na,Db as ba,Dd as En,Eb as Ea,Ec as Ua,Fb as Ta,Fd as So,G as To,Gb as wa,Gd as Ar,H as ra,Ib as va,Jc as bn,Kb as Aa,Lb as Sa,O as oa,Ob as xa,P as ia,Pd as ja,Qd as Ee,Rb as Ca,Rd as $a,S as sa,Sd as Wa,U as aa,Ub as Pa,Uc as Tr,V as yn,W as wo,X as ca,Xb as Er,Y as ua,Yc as Wt,Yd as Sr,Zb as Ma,_ as Gt,_d as xo,aa as pr,ac as Na,ba as Qt,bc as Da,be as za,da as hr,db as fa,e as dr,ea as yr,eb as Mt,fa as la,fb as ma,fd as Ba,g as q,ga as da,gc as gn,h as Ht,hb as qt,hd as Ka,ia as gr,ib as pa,ic as ka,id as Va,jb as br,jc as Ao,jd as Ha,k as pe,la as vo,lc as Ra,ld as F,m as $s,mb as ha,mc as Fa,md as Ze,me as Tn,n as Ws,nd as wr,ne as Ya,o as fr,oc as Ia,p as zs,pb as ya,q as Ys,r as bo,s as Eo,ud as Ga,v as Xs,vc as La,vd as Qa,w as Js,wb as ga,wd as qa,x as Zs,xb as jt,xc as Oa,xd as vr,y as _s,z as ea}from"./chunk-4KPHYKUF.js";import{$ as ze,Ac as te,Bc as K,Ec as B,L as Fe,Mb as bs,Ob as Es,Pb as A,Pc as Ds,Ra as Ld,Rb as de,Sb as Ts,Tb as ws,Ub as vs,Uc as mn,Vb as Ye,Vc as ks,Wb as oe,Y as gs,Yb as fo,Zb as xt,Zd as P,_ as je,a as Fd,aa as rr,ad as sr,b as Vt,bd as Rs,c as Id,dd as Ct,fd as Ne,ge as Ke,hc as As,ic as Ss,jc as or,jd as ar,md as cr,nc as xs,nd as Fs,oc as Cs,od as Is,pa as St,pc as ht,pd as Ls,qd as X,rc as Ps,rd as Os,sc as Se,sd as Xe,tc as ir,uc as Ms,v as ys,vc as dn,vd as R,w as me,wc as Ns,wd as ur,yc as fn}from"./chunk-ODNNZUPK.js";import{F as ps,G as hs,b as lo,d as Rd}from"./chunk-UAQWDGIM.js";import{$ as lr,A as Bd,B as Kd,C as Vd,_ as mo,a as Q,d as V,e as Y,gb as Gd,m as ne,r as Be,w as Od,x as Ud,ya as Hd}from"./chunk-LELMSWC2.js";import{b as er,e as ln,f as tr,h as re,k as Ue,l as nr}from"./chunk-L7YPSK2Y.js";import{A as _n,a as pt,g,n as Jn,y as Zn}from"./chunk-VAUOTJLY.js";import{a as i,d as Me,g as L,i as u,j as y,m as Buffer,n as l}from"./chunk-NSVULBS3.js";var Xa=Me((No,Do)=>{u();l();(function(e,t){typeof No=="object"&&typeof Do<"u"?Do.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_isToday=t()})(No,function(){"use strict";return function(e,t,n){t.prototype.isToday=function(){var r="YYYY-MM-DD",o=n();return this.format(r)===o.format(r)}}})});var Ja=Me((ko,Ro)=>{u();l();(function(e,t){typeof ko=="object"&&typeof Ro<"u"?Ro.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_isYesterday=t()})(ko,function(){"use strict";return function(e,t,n){t.prototype.isYesterday=function(){var r="YYYY-MM-DD",o=n().subtract(1,"day");return this.format(r)===o.format(r)}}})});var Kc=Me((bS,Bc)=>{u();l();var nm=Od(),rm=Ud(),om=Hd(),im=Kd(),sm=Bd(),am=Vd(),cm=Object.prototype,um=cm.hasOwnProperty,lm=om(function(e,t){if(sm(t)||im(t)){rm(t,am(t),e);return}for(var n in t)um.call(t,n)&&nm(e,n,t[n])});Bc.exports=lm});var Lr=Me(_=>{"use strict";u();l();Object.defineProperty(_,"__esModule",{value:!0});_.MULTIPLE_ACCOUNT_INFO_MAX=_.NAME_HOUSE_PREFIX=_.TLD_HOUSE_PREFIX=_.NFT_RECORD_PREFIX=_.TOKEN_METADATA_PROGRAM_ID=_.SPL_TOKEN_PROGRAM_ID=_.NAME_HOUSE_PROGRAM_ID=_.TLD_HOUSE_PROGRAM_ID=_.ANS_PROGRAM_ID=_.ORIGIN_TLD=_.MAIN_DOMAIN_PREFIX=void 0;var On=Vt();_.MAIN_DOMAIN_PREFIX="main_domain";_.ORIGIN_TLD="ANS";_.ANS_PROGRAM_ID=new On.PublicKey("ALTNSZ46uaAUU7XUV6awvdorLGqAsPwa9shm7h4uP2FK");_.TLD_HOUSE_PROGRAM_ID=new On.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S");_.NAME_HOUSE_PROGRAM_ID=new On.PublicKey("NH3uX6FtVE2fNREAioP7hm5RaozotZxeL6khU1EHx51");_.SPL_TOKEN_PROGRAM_ID=new On.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");_.TOKEN_METADATA_PROGRAM_ID=new On.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");_.NFT_RECORD_PREFIX="nft_record";_.TLD_HOUSE_PREFIX="tld_house";_.NAME_HOUSE_PREFIX="name_house";_.MULTIPLE_ACCOUNT_INFO_MAX=100});var gu=Me(W=>{"use strict";u();l();var Gm=W&&W.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:i(function(){return t[n]},"get")})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Qm=W&&W.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),et=W&&W.__decorate||function(e,t,n,r){var o=arguments.length,s=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},qm=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&Gm(t,e,n);return Qm(t,e),t},mu=W&&W.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(W,"__esModule",{value:!0});W.deserializeUnchecked=W.deserialize=W.serialize=W.BinaryReader=W.BinaryWriter=W.BorshError=W.baseDecode=W.baseEncode=void 0;var gt=mu(lo()),pu=mu(Rd()),jm=qm(Fd()),$m=typeof self.TextDecoder!="function"?jm.TextDecoder:self.TextDecoder,Wm=new $m("utf-8",{fatal:!0});function zm(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),pu.default.encode(Buffer.from(e))}i(zm,"baseEncode");W.baseEncode=zm;function Ym(e){return Buffer.from(pu.default.decode(e))}i(Ym,"baseDecode");W.baseDecode=Ym;var di=1024,ge=class extends Error{static{i(this,"BorshError")}constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};W.BorshError=ge;var Or=class{static{i(this,"BinaryWriter")}constructor(){this.buf=Buffer.alloc(di),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(di)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new gt.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new gt.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new gt.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new gt.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(di)]),this.length+=t.length}writeString(t){this.maybeResize();let n=Buffer.from(t,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,n){this.maybeResize(),this.writeU32(t.length);for(let r of t)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}};W.BinaryWriter=Or;function tt(e,t,n){let r=n.value;n.value=function(...o){try{return r.apply(this,o)}catch(s){if(s instanceof RangeError){let a=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new ge("Reached the end of buffer when deserializing")}throw s}}}i(tt,"handlingRangeError");var xe=class{static{i(this,"BinaryReader")}constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new gt.default(t,"le")}readU128(){let t=this.readBuffer(16);return new gt.default(t,"le")}readU256(){let t=this.readBuffer(32);return new gt.default(t,"le")}readU512(){let t=this.readBuffer(64);return new gt.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new ge(`Expected buffer length ${t} isn't within bounds`);let n=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,n}readString(){let t=this.readU32(),n=this.readBuffer(t);try{return Wm.decode(n)}catch(r){throw new ge(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let n=this.readU32(),r=Array();for(let o=0;o<n;++o)r.push(t());return r}};et([tt],xe.prototype,"readU8",null);et([tt],xe.prototype,"readU16",null);et([tt],xe.prototype,"readU32",null);et([tt],xe.prototype,"readU64",null);et([tt],xe.prototype,"readU128",null);et([tt],xe.prototype,"readU256",null);et([tt],xe.prototype,"readU512",null);et([tt],xe.prototype,"readString",null);et([tt],xe.prototype,"readFixedArray",null);et([tt],xe.prototype,"readArray",null);W.BinaryReader=xe;function hu(e){return e.charAt(0).toUpperCase()+e.slice(1)}i(hu,"capitalizeFirstLetter");function Un(e,t,n,r,o){try{if(typeof r=="string")o[`write${hu(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new ge(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);o.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new ge(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let s=0;s<r[1];s++)Un(e,null,n[s],r[0],o)}else o.writeArray(n,s=>{Un(e,t,s,r[0],o)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?o.writeU8(0):(o.writeU8(1),Un(e,t,n,r.type,o));break}default:throw new ge(`FieldType ${r} unrecognized`)}else yu(e,n,o)}catch(s){throw s instanceof ge&&s.addToFieldPath(t),s}}i(Un,"serializeField");function yu(e,t,n){if(typeof t.borshSerialize=="function"){t.borshSerialize(n);return}let r=e.get(t.constructor);if(!r)throw new ge(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([o,s])=>{Un(e,o,t[o],s,n)});else if(r.kind==="enum"){let o=t[r.field];for(let s=0;s<r.values.length;++s){let[a,c]=r.values[s];if(a===o){n.writeU8(s),Un(e,a,t[a],c,n);break}}}else throw new ge(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}i(yu,"serializeStruct");function Xm(e,t,n=Or){let r=new n;return yu(e,t,r),r.toArray()}i(Xm,"serialize");W.serialize=Xm;function Bn(e,t,n,r){try{if(typeof n=="string")return r[`read${hu(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){let o=[];for(let s=0;s<n[1];s++)o.push(Bn(e,null,n[0],r));return o}else return r.readArray(()=>Bn(e,t,n[0],r))}return n.kind==="option"?r.readU8()?Bn(e,t,n.type,r):void 0:fi(e,n,r)}catch(o){throw o instanceof ge&&o.addToFieldPath(t),o}}i(Bn,"deserializeField");function fi(e,t,n){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(n);let r=e.get(t);if(!r)throw new ge(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){let o={};for(let[s,a]of e.get(t).fields)o[s]=Bn(e,s,a,n);return new t(o)}if(r.kind==="enum"){let o=n.readU8();if(o>=r.values.length)throw new ge(`Enum index: ${o} is out of range`);let[s,a]=r.values[o],c=Bn(e,s,a,n);return new t({[s]:c})}throw new ge(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}i(fi,"deserializeStruct");function Jm(e,t,n,r=xe){let o=new r(n),s=fi(e,t,o);if(o.offset<n.length)throw new ge(`Unexpected ${n.length-o.offset} bytes after deserialized data`);return s}i(Jm,"deserialize");W.deserialize=Jm;function Zm(e,t,n,r=xe){let o=new r(n);return fi(e,t,o)}i(Zm,"deserializeUnchecked");W.deserializeUnchecked=Zm});var Ur=Me(_t=>{"use strict";u();l();var bu=_t&&_t.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{d(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((r=r.apply(e,t||[])).next())})};Object.defineProperty(_t,"__esModule",{value:!0});_t.NameRecordHeader=void 0;var mi=Vt(),Kn=gu(),Lt=class e{static{i(this,"NameRecordHeader")}constructor(t){this.parentName=new mi.PublicKey(t.parentName),this.nclass=new mi.PublicKey(t.nclass),this.expiresAt=new Date(new Kn.BinaryReader(Buffer.from(t.expiresAt)).readU64().toNumber()*1e3),this.createdAt=new Date(new Kn.BinaryReader(Buffer.from(t.createdAt)).readU64().toNumber()*1e3),this.nonTransferable=t.nonTransferable[0]!==0;let n=45*24*60*60*1e3;this.isValid=new Kn.BinaryReader(Buffer.from(t.expiresAt)).readU64().toNumber()===0?!0:this.expiresAt.getTime()+n>new Date(Date.now()).getTime(),this.owner=this.isValid?new mi.PublicKey(t.owner):void 0}static get byteSize(){return 200}static fromAccountAddress(t,n){var r;return bu(this,void 0,void 0,function*(){let o=yield t.getAccountInfo(n,"confirmed");if(!o)return;let s=(0,Kn.deserializeUnchecked)(this.schema,e,o.data);return s.data=(r=o.data)===null||r===void 0?void 0:r.subarray(this.byteSize),s})}static fromMultipileAccountAddresses(t,n){return bu(this,void 0,void 0,function*(){let r=yield t.getMultipleAccountsInfo(n),o=[];return r.forEach(s=>{if(!s){o.push(void 0);return}let a=this.fromAccountInfo(s);if(!a){o.push(void 0);return}o.push(a)}),o})}static fromAccountInfo(t){var n;let r=(0,Kn.deserializeUnchecked)(this.schema,e,t.data);return r.data=(n=t.data)===null||n===void 0?void 0:n.subarray(this.byteSize),r}pretty(){var t;let n=this.data.indexOf(0);return{parentName:this.parentName.toBase58(),owner:(t=this.owner)===null||t===void 0?void 0:t.toBase58(),nclass:this.nclass.toBase58(),expiresAt:this.expiresAt,createdAt:this.createdAt,nonTransferable:this.nonTransferable,isValid:this.isValid,data:this.isValid?this.data.subarray(0,n).toString():void 0}}};_t.NameRecordHeader=Lt;Lt.DISCRIMINATOR=[68,72,88,44,15,167,103,243];Lt.HASH_PREFIX="ALT Name Service";Lt.schema=new Map([[Lt,{kind:"struct",fields:[["discriminator",[8]],["parentName",[32]],["owner",[32]],["nclass",[32]],["expiresAt",[8]],["createdAt",[8]],["nonTransferable",[1]],["padding",[79]]]}]])});var pi=Me(Ie=>{"use strict";u();l();var _m=Ie&&Ie.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[n]},"get")}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ep=Ie&&Ie.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tp=Ie&&Ie.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&_m(t,e,n);return ep(t,e),t};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.tagBeet=Ie.Tag=void 0;var np=tp(To()),Eu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.ActiveRecord=1]="ActiveRecord",e[e.InactiveRecord=2]="InactiveRecord"})(Eu=Ie.Tag||(Ie.Tag={}));Ie.tagBeet=np.fixedScalarEnum(Eu)});var hi=Me(le=>{"use strict";u();l();var rp=le&&le.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[n]},"get")}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),op=le&&le.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wu=le&&le.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&rp(t,e,n);return op(t,e),t},Tu=le&&le.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{d(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((r=r.apply(e,t||[])).next())})};Object.defineProperty(le,"__esModule",{value:!0});le.nftRecordBeet=le.NftRecord=le.nftRecordDiscriminator=void 0;var Br=wu(To()),Kr=wu(ra()),vu=pi();le.nftRecordDiscriminator=[174,190,114,100,177,14,90,254];var Vr=class e{static{i(this,"NftRecord")}constructor(t,n,r,o,s,a){this.tag=t,this.bump=n,this.nameAccount=r,this.owner=o,this.nftMintAccount=s,this.tldHouse=a}static fromArgs(t){return new e(t.tag,t.bump,t.nameAccount,t.owner,t.nftMintAccount,t.tldHouse)}static fromAccountInfo(t,n=0){return e.deserialize(t.data,n)}static fromAccountAddress(t,n){return Tu(this,void 0,void 0,function*(){let r=yield t.getAccountInfo(n);if(r==null)throw new Error(`Unable to find NftRecord account at ${n}`);return e.fromAccountInfo(r,0)[0]})}static deserialize(t,n=0){return le.nftRecordBeet.deserialize(t,n)}serialize(){return le.nftRecordBeet.serialize(Object.assign({accountDiscriminator:le.nftRecordDiscriminator},this))}static get byteSize(){return le.nftRecordBeet.byteSize}static getMinimumBalanceForRentExemption(t,n){return Tu(this,void 0,void 0,function*(){return yield t.getMinimumBalanceForRentExemption(e.byteSize,n)})}static hasCorrectByteSize(t,n=0){return t.byteLength-n===e.byteSize}pretty(){return{tag:"Tag."+vu.Tag[this.tag],bump:this.bump,nameAccount:this.nameAccount.toBase58(),owner:this.owner.toBase58(),nftMintAccount:this.nftMintAccount.toBase58(),tldHouse:this.tldHouse.toBase58()}}};le.NftRecord=Vr;le.nftRecordBeet=new Br.BeetStruct([["accountDiscriminator",Br.uniformFixedSizeArray(Br.u8,8)],["tag",vu.tagBeet],["bump",Br.u8],["nameAccount",Kr.publicKey],["owner",Kr.publicKey],["nftMintAccount",Kr.publicKey],["tldHouse",Kr.publicKey]],Vr.fromArgs,"NftRecord")});var Hr=Me(U=>{"use strict";u();l();var $e=U&&U.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{d(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((r=r.apply(e,t||[])).next())})};Object.defineProperty(U,"__esModule",{value:!0});U.splitDomainTld=U.getParsedAllDomainsNftAccountsByOwner=U.delay=U.performReverseLookupBatched=U.findMetadataAddress=U.findNameHouse=U.findTldHouse=U.findNftRecord=U.getMintOwner=U.findAllDomainsForTld=U.getParentAccountFromTldHouseAccountInfo=U.getTldFromTldHouseAccountInfo=U.getAllTld=U.findMainDomain=U.findOwnedNameAccountsForUser=U.getOriginNameAccountKey=U.getHashedName=U.getNameOwner=U.getNameAccountKeyWithBump=void 0;var qe=Vt(),ip=lo(),sp=Ld(),we=Lr(),yi=Ur(),ap=pi(),cp=hi();function gi(e,t,n){let r=[e,t?t.toBuffer():Buffer.alloc(32),n?n.toBuffer():Buffer.alloc(32)];return qe.PublicKey.findProgramAddressSync(r,we.ANS_PROGRAM_ID)}i(gi,"getNameAccountKeyWithBump");U.getNameAccountKeyWithBump=gi;function up(e,t,n){return $e(this,void 0,void 0,function*(){let r=yield yi.NameRecordHeader.fromAccountAddress(e,t),o=r.owner;if(!r.isValid)return;if(!n)return o;let[s]=Pu(n),[a]=Cu(t,s);return o?.toBase58()!==a.toBase58()?o:yield xu(e,a)})}i(up,"getNameOwner");U.getNameOwner=up;function bi(e){return $e(this,void 0,void 0,function*(){let t=yi.NameRecordHeader.HASH_PREFIX+e,n=(0,sp.sha256)(Buffer.from(t,"utf8")).slice(2);return Buffer.from(n,"hex")})}i(bi,"getHashedName");U.getHashedName=bi;function lp(e=we.ORIGIN_TLD){return $e(this,void 0,void 0,function*(){let t=yield bi(e),[n]=gi(t,void 0,void 0);return n})}i(lp,"getOriginNameAccountKey");U.getOriginNameAccountKey=lp;function dp(e,t,n){return $e(this,void 0,void 0,function*(){let r=[{memcmp:{offset:40,bytes:t.toBase58(),encoding:"base58"}}];return n&&r.push({memcmp:{offset:8,bytes:n.toBase58(),encoding:"base58"}}),(yield e.getProgramAccounts(we.ANS_PROGRAM_ID,{filters:r})).map(s=>s.pubkey)})}i(dp,"findOwnedNameAccountsForUser");U.findOwnedNameAccountsForUser=dp;function fp(e){return qe.PublicKey.findProgramAddressSync([Buffer.from(we.MAIN_DOMAIN_PREFIX),e.toBuffer()],we.TLD_HOUSE_PROGRAM_ID)}i(fp,"findMainDomain");U.findMainDomain=fp;function mp(e){return $e(this,void 0,void 0,function*(){let n=[{memcmp:{offset:0,bytes:[247,144,135,1,238,173,19,249],encoding:"binary"}}],r=yield e.getProgramAccounts(we.TLD_HOUSE_PROGRAM_ID,{filters:n}),o=[];return r.map(({account:s})=>{let a=Su(s),c=Au(s);o.push({tld:c,parentAccount:a})}),o})}i(mp,"getAllTld");U.getAllTld=mp;function Au(e){var t;let r=(t=e?.data)===null||t===void 0?void 0:t.subarray(104),o=new ip.BN(r?.subarray(0,4),"le").toNumber();return r.subarray(4,4+o).toString().replace(/\0.*$/g,"")}i(Au,"getTldFromTldHouseAccountInfo");U.getTldFromTldHouseAccountInfo=Au;function Su(e){var t;let r=(t=e?.data)===null||t===void 0?void 0:t.subarray(72,104);return new qe.PublicKey(r)}i(Su,"getParentAccountFromTldHouseAccountInfo");U.getParentAccountFromTldHouseAccountInfo=Su;function pp(e,t){return $e(this,void 0,void 0,function*(){let n=[{memcmp:{offset:8,bytes:t.toBase58(),encoding:"base58"}}];return(yield e.getProgramAccounts(we.ANS_PROGRAM_ID,{filters:n})).map(o=>o.pubkey)})}i(pp,"findAllDomainsForTld");U.findAllDomainsForTld=pp;function xu(e,t){return $e(this,void 0,void 0,function*(){try{let n=yield cp.NftRecord.fromAccountAddress(e,t);if(n.tag!==ap.Tag.ActiveRecord)return;let r=yield e.getTokenLargestAccounts(n.nftMintAccount),o=yield e.getParsedAccountInfo(r.value[0].address);return o.value.data?new qe.PublicKey(o.value.data.parsed.info.owner):void 0}catch{return}})}i(xu,"getMintOwner");U.getMintOwner=xu;function Cu(e,t){return qe.PublicKey.findProgramAddressSync([Buffer.from(we.NFT_RECORD_PREFIX),t.toBuffer(),e.toBuffer()],we.NAME_HOUSE_PROGRAM_ID)}i(Cu,"findNftRecord");U.findNftRecord=Cu;function hp(e){return e=e.toLowerCase(),qe.PublicKey.findProgramAddressSync([Buffer.from(we.TLD_HOUSE_PREFIX),Buffer.from(e)],we.TLD_HOUSE_PROGRAM_ID)}i(hp,"findTldHouse");U.findTldHouse=hp;function Pu(e){return qe.PublicKey.findProgramAddressSync([Buffer.from(we.NAME_HOUSE_PREFIX),e.toBuffer()],we.NAME_HOUSE_PROGRAM_ID)}i(Pu,"findNameHouse");U.findNameHouse=Pu;var yp=i(e=>qe.PublicKey.findProgramAddressSync([Buffer.from("metadata"),we.TOKEN_METADATA_PROGRAM_ID.toBuffer(),e.toBuffer()],we.TOKEN_METADATA_PROGRAM_ID)[0],"findMetadataAddress");U.findMetadataAddress=yp;function gp(e,t,n){return $e(this,void 0,void 0,function*(){let r=t.map(a=>$e(this,void 0,void 0,function*(){let c=yield bi(a.toBase58()),[f]=gi(c,n,void 0);return f})),o=yield Promise.all(r);return(yield e.getMultipleAccountsInfo(o)).map(a=>a?.data.subarray(yi.NameRecordHeader.byteSize,a?.data.length).toString())})}i(gp,"performReverseLookupBatched");U.performReverseLookupBatched=gp;function bp(e){return new Promise(t=>setTimeout(t,e))}i(bp,"delay");U.delay=bp;var Ep=i((e,t,n)=>$e(void 0,void 0,void 0,function*(){let{value:r}=yield t.getParsedTokenAccountsByOwner(e,{programId:we.SPL_TOKEN_PROGRAM_ID}),o=r.filter(a=>{var c,f,d,m,p,h,b,E,w,S;let k=(p=(m=(d=(f=(c=a.account)===null||c===void 0?void 0:c.data)===null||f===void 0?void 0:f.parsed)===null||d===void 0?void 0:d.info)===null||m===void 0?void 0:m.tokenAmount)===null||p===void 0?void 0:p.uiAmount;return((S=(w=(E=(b=(h=a.account)===null||h===void 0?void 0:h.data)===null||b===void 0?void 0:b.parsed)===null||E===void 0?void 0:E.info)===null||w===void 0?void 0:w.tokenAmount)===null||S===void 0?void 0:S.decimals)===0&&k===1}).map(a=>{var c,f,d,m;return(m=(d=(f=(c=a.account)===null||c===void 0?void 0:c.data)===null||f===void 0?void 0:f.parsed)===null||d===void 0?void 0:d.info)===null||m===void 0?void 0:m.mint});return yield Tp(o,t,n)}),"getParsedAllDomainsNftAccountsByOwner");U.getParsedAllDomainsNftAccountsByOwner=Ep;var Tp=i((e,t,n)=>$e(void 0,void 0,void 0,function*(){let r=[];if(e.length>100)for(;e.length>0;){let a=e.splice(0,100).map(f=>(0,U.findMetadataAddress)(new qe.PublicKey(f))),c=yield t.getMultipleAccountsInfo(a);for(let f of c)if(f){let d=new qe.PublicKey(f.data.subarray(326,358));if(!!f.data.subarray(326,327)&&d.toString()===n.toString()){let p=f.data.subarray(66,101).toString().replace(/\u0000/g,"");r.push(p)}}}else{let a=e.map(f=>(0,U.findMetadataAddress)(new qe.PublicKey(f))),c=yield t.getMultipleAccountsInfo(a);for(let f of c)if(f){let d=new qe.PublicKey(f.data.subarray(326,358));if(!!f.data.subarray(326,327)&&d.toString()===n.toString()){let p=f.data.subarray(66,101).toString().replace(/\u0000/g,"");r.push(p)}}}return r}),"getOwnedDomains");function wp(e){let t=e.split("."),n="",r="",o="";return t.length===1?r=t[0]:(n="."+t[t.length-1],r=t[t.length-2],o=t.slice(0,t.length-2).join(".")),[n,r,o]}i(wp,"splitDomainTld");U.splitDomainTld=wp});var Ti=Me(ie=>{"use strict";u();l();var vp=ie&&ie.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[n]},"get")}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ap=ie&&ie.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ei=ie&&ie.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&vp(t,e,n);return Ap(t,e),t},Mu=ie&&ie.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{d(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((r=r.apply(e,t||[])).next())})};Object.defineProperty(ie,"__esModule",{value:!0});ie.mainDomainBeet=ie.MainDomain=ie.mainDomainDiscriminator=void 0;var Sp=Ei(Vt()),Nu=Ei(ra()),Vn=Ei(To());ie.mainDomainDiscriminator=[109,239,227,199,98,226,66,175];var Gr=class e{static{i(this,"MainDomain")}constructor(t,n,r){this.nameAccount=t,this.tld=n,this.domain=r}static fromArgs(t){return new e(t.nameAccount,t.tld,t.domain)}static fromAccountInfo(t,n=0){return e.deserialize(t.data,n)}static fromAccountAddress(t,n,r){return Mu(this,void 0,void 0,function*(){let o=yield t.getAccountInfo(n,r);if(o==null)throw new Error(`Unable to find MainDomain account at ${n}`);return e.fromAccountInfo(o,0)[0]})}static gpaBuilder(t=new Sp.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S")){return Nu.GpaBuilder.fromStruct(t,ie.mainDomainBeet)}static deserialize(t,n=0){return ie.mainDomainBeet.deserialize(t,n)}serialize(){return ie.mainDomainBeet.serialize(Object.assign({accountDiscriminator:ie.mainDomainDiscriminator},this))}static byteSize(t){let n=e.fromArgs(t);return ie.mainDomainBeet.toFixedFromValue(Object.assign({accountDiscriminator:ie.mainDomainDiscriminator},n)).byteSize}static getMinimumBalanceForRentExemption(t,n,r){return Mu(this,void 0,void 0,function*(){return yield n.getMinimumBalanceForRentExemption(e.byteSize(t),r)})}pretty(){return{nameAccount:this.nameAccount.toBase58(),tld:this.tld,domain:this.domain}}};ie.MainDomain=Gr;ie.mainDomainBeet=new Vn.FixableBeetStruct([["accountDiscriminator",Vn.uniformFixedSizeArray(Vn.u8,8)],["nameAccount",Nu.publicKey],["tld",Vn.utf8String],["domain",Vn.utf8String]],Gr.fromArgs,"MainDomain")});var vi=Me(en=>{"use strict";u();l();var Du=en&&en.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{d(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((r=r.apply(e,t||[])).next())})};Object.defineProperty(en,"__esModule",{value:!0});en.getDomainKey=void 0;var wi=Hr(),xp=i((e,t=!1)=>Du(void 0,void 0,void 0,function*(){let n=e.split(".");if(n.length===3){let c="."+n[2],f=n[1],d=n[0],{pubkey:m}=yield ft(c),{pubkey:p}=yield ft(f,m),b=Buffer.from([t?1:0]).toString().concat(d),E=yield ft(b,p);return Object.assign(Object.assign({},E),{isSub:!0,parent:p})}else if(n.length===4&&t){let c="."+n[3],f=n[2],d=n[1],m=n[0],{pubkey:p}=yield ft(c),{pubkey:h}=yield ft(f,p),{pubkey:b}=yield ft("\0".concat(d),h),E=Buffer.from([1]).toString(),w=yield ft(E.concat(m),b);return Object.assign(Object.assign({},w),{isSub:!0,parent:h,isSubRecord:!0})}else if(n.length>4)throw new Error("Invalid derivation input");let r="."+n[1],{pubkey:o}=yield ft(r),s=n[0],a=yield ft(s,o);return Object.assign(Object.assign({},a),{isSub:!1,parent:void 0})}),"getDomainKey");en.getDomainKey=xp;var ft=i((e,t)=>Du(void 0,void 0,void 0,function*(){t||(t=yield(0,wi.getOriginNameAccountKey)());let n=yield(0,wi.getHashedName)(e),[r]=yield(0,wi.getNameAccountKeyWithBump)(n,void 0,t);return{pubkey:r,hashed:n}}),"_getNameAccount")});var Ru=Me(tn=>{"use strict";u();l();var Le=tn&&tn.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{d(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((r=r.apply(e,t||[])).next())})};Object.defineProperty(tn,"__esModule",{value:!0});tn.TldParser=void 0;var nt=Vt(),Cp=lo(),Pp=Ti(),Ai=Ur(),I=Hr(),bt=Lr(),ku=vi(),Si=class{static{i(this,"TldParser")}constructor(t){this.connection=t}getAllUserDomains(t){return Le(this,void 0,void 0,function*(){return typeof t=="string"&&(t=new nt.PublicKey(t)),yield(0,I.findOwnedNameAccountsForUser)(this.connection,t,void 0)})}getAllUserDomainsFromTld(t,n){return Le(this,void 0,void 0,function*(){let r="."+n,o=yield(0,I.getOriginNameAccountKey)(),s=yield(0,I.getHashedName)(r),[a]=(0,I.getNameAccountKeyWithBump)(s,void 0,o);return typeof t=="string"&&(t=new nt.PublicKey(t)),yield(0,I.findOwnedNameAccountsForUser)(this.connection,t,a)})}getOwnerFromDomainTld(t){return Le(this,void 0,void 0,function*(){let n=t.split("."),r=n[0],o="."+n[1],s=yield(0,I.getOriginNameAccountKey)(),a=yield(0,I.getHashedName)(o),[c]=(0,I.getNameAccountKeyWithBump)(a,void 0,s),f=yield(0,I.getHashedName)(r),[d]=(0,I.getNameAccountKeyWithBump)(f,void 0,c),[m]=(0,I.findTldHouse)(o);return yield(0,I.getNameOwner)(this.connection,d,m)})}getNameRecordFromDomainTld(t){return Le(this,void 0,void 0,function*(){let n=t.split("."),r=n[0],o="."+n[1],s=yield(0,I.getOriginNameAccountKey)(),a=yield(0,I.getHashedName)(o),[c]=(0,I.getNameAccountKeyWithBump)(a,void 0,s),f=yield(0,I.getHashedName)(r),[d]=(0,I.getNameAccountKeyWithBump)(f,void 0,c);return yield Ai.NameRecordHeader.fromAccountAddress(this.connection,d)})}getTldFromParentAccount(t){var n;return Le(this,void 0,void 0,function*(){typeof t=="string"&&(t=new nt.PublicKey(t));let r=yield Ai.NameRecordHeader.fromAccountAddress(this.connection,t),o=yield this.connection.getAccountInfo(r?.owner),a=(n=o?.data)===null||n===void 0?void 0:n.subarray(104),c=new Cp.BN(a?.subarray(0,4),"le").toNumber();return a.subarray(4,4+c).toString().replace(/\0.*$/g,"")})}reverseLookupNameAccount(t,n){var r;return Le(this,void 0,void 0,function*(){typeof t=="string"&&(t=new nt.PublicKey(t)),typeof n=="string"&&(n=new nt.PublicKey(n));let o=yield(0,I.getHashedName)(t.toString()),[s]=(0,I.getNameAccountKeyWithBump)(o,n,void 0),a=yield Ai.NameRecordHeader.fromAccountAddress(this.connection,s);return(r=a?.data)===null||r===void 0?void 0:r.toString()})}getMainDomain(t){return Le(this,void 0,void 0,function*(){typeof t=="string"&&(t=new nt.PublicKey(t));let[n]=(0,I.findMainDomain)(t);return yield Pp.MainDomain.fromAccountAddress(this.connection,n)})}getParsedAllUserDomainsFromTldUnwrapped(t,n){return Le(this,void 0,void 0,function*(){let r="."+n,o=yield(0,I.getOriginNameAccountKey)(),s=yield(0,I.getHashedName)(r),[a]=(0,I.findTldHouse)(r),[c]=(0,I.getNameAccountKeyWithBump)(s,void 0,o);typeof t=="string"&&(t=new nt.PublicKey(t));let f=yield(0,I.findOwnedNameAccountsForUser)(this.connection,t,c),d=[];for(let m=0;m<f.length;m+=bt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,I.delay)(100);let p=Math.min(m+bt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),h=f.slice(m,p),E=(yield(0,I.performReverseLookupBatched)(this.connection,h,a)).map((w,S)=>({nameAccount:h[S],domain:w+r}));E.length>0&&E.sort((w,S)=>w.domain.localeCompare(S.domain,void 0,{numeric:!0,sensitivity:"base"})),d.push(...E)}return d})}getParsedAllUserDomainsFromTld(t,n){return Le(this,void 0,void 0,function*(){let r="."+n,o=yield(0,I.getOriginNameAccountKey)(),s=yield(0,I.getHashedName)(r),[a]=(0,I.findTldHouse)(r),[c]=(0,I.getNameAccountKeyWithBump)(s,void 0,o);typeof t=="string"&&(t=new nt.PublicKey(t));let f=yield(0,I.findOwnedNameAccountsForUser)(this.connection,t,c),d=[],p=(yield(0,I.getParsedAllDomainsNftAccountsByOwner)(t,this.connection,(0,I.findNameHouse)(a)[0])).map(b=>b+r),h=yield Promise.all(p.map(b=>Le(this,void 0,void 0,function*(){return{nameAccount:(yield(0,ku.getDomainKey)(b)).pubkey,domain:b}})));d.push(...h);for(let b=0;b<f.length;b+=bt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,I.delay)(100);let E=Math.min(b+bt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),w=f.slice(b,E),k=(yield(0,I.performReverseLookupBatched)(this.connection,w,a)).map((H,z)=>({nameAccount:w[z],domain:H+r}));d.push(...k)}return d.length>0&&d.sort((b,E)=>b.domain.localeCompare(E.domain,void 0,{numeric:!0,sensitivity:"base"})),d})}getParsedAllUserDomainsUnwrapped(t){return Le(this,void 0,void 0,function*(){let n=yield(0,I.getAllTld)(this.connection),r=[];typeof t=="string"&&(t=new nt.PublicKey(t));for(let{parentAccount:o,tld:s}of n){let a=s.toString(),[c]=(0,I.findTldHouse)(a),f=yield(0,I.findOwnedNameAccountsForUser)(this.connection,t,o);for(let d=0;d<f.length;d+=bt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,I.delay)(100);let m=Math.min(d+bt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),p=f.slice(d,m),b=(yield(0,I.performReverseLookupBatched)(this.connection,p,c)).map((E,w)=>({nameAccount:p[w],domain:E+a}));r.push(...b)}}return r.length>0&&r.sort((o,s)=>o.domain.localeCompare(s.domain,void 0,{numeric:!0,sensitivity:"base"})),r})}getParsedAllUserDomains(t){return Le(this,void 0,void 0,function*(){let n=yield(0,I.getAllTld)(this.connection),r=[];typeof t=="string"&&(t=new nt.PublicKey(t));for(let{parentAccount:o,tld:s}of n){let a=s.toString(),[c]=(0,I.findTldHouse)(a),f=yield(0,I.findOwnedNameAccountsForUser)(this.connection,t,o),m=(yield(0,I.getParsedAllDomainsNftAccountsByOwner)(t,this.connection,(0,I.findNameHouse)(c)[0])).map(h=>h+a),p=yield Promise.all(m.map(h=>Le(this,void 0,void 0,function*(){return{nameAccount:(yield(0,ku.getDomainKey)(h)).pubkey,domain:h}})));r.push(...p);for(let h=0;h<f.length;h+=bt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,I.delay)(100);let b=Math.min(h+bt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),E=f.slice(h,b),S=(yield(0,I.performReverseLookupBatched)(this.connection,E,c)).map((k,H)=>({nameAccount:E[H],domain:k+a}));r.push(...S)}}return r.length>0&&r.sort((o,s)=>o.domain.localeCompare(s.domain,void 0,{numeric:!0,sensitivity:"base"})),r})}};tn.TldParser=Si});var Fu=Me(Hn=>{"use strict";u();l();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.Record=void 0;var Mp;(function(e){e.IPFS="IPFS",e.ARWV="ARWV",e.SOL="SOL",e.ETH="ETH",e.BTC="BTC",e.LTC="LTC",e.DOGE="DOGE",e.Email="email",e.Url="url",e.Discord="discord",e.Github="github",e.Reddit="reddit",e.Twitter="twitter",e.Telegram="telegram",e.Pic="pic",e.SHDW="SHDW",e.POINT="POINT"})(Mp=Hn.Record||(Hn.Record={}))});var Iu=Me(ke=>{"use strict";u();l();var Np=ke&&ke.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[n]},"get")}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Et=ke&&ke.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Np(t,e,n)};Object.defineProperty(ke,"__esModule",{value:!0});Et(Hr(),ke);Et(Lr(),ke);Et(Ru(),ke);Et(Ur(),ke);Et(Ti(),ke);Et(hi(),ke);Et(vi(),ke);Et(Fu(),ke)});u();l();var Co=L(dr(),1);var Po=i(e=>{let t=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).format(0).includes(" ")?"h:mm a":"HH:mm",n=(0,Co.default)(),r=(0,Co.default)(e),o=r.format(t),s=n.startOf("day"),c=r.startOf("day").diff(s,"day");return c===0?o:c===1?`${o} ${ne.t("tomorrow")}`:c>=2&&c<=7?`${new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(r.toDate())} ${o}`:`${r.format("MMM D, YYYY")} ${o}`},"formatUntil");u();l();u();l();u();l();function zt(e){if(Array.isArray(e))return e.map(zt);if(e&&typeof e=="object"){if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(e instanceof Map)return new Map(Array.from(e.entries()).map(([n,r])=>[zt(n),zt(r)]));if(e instanceof Set)return new Set(Array.from(e).map(zt));let t=Object.create(Object.getPrototypeOf(e));for(let n of Object.keys(e))t[n]=zt(e[n]);return t}return e}i(zt,"cloneDeep");var jd=dn(e=>zt(e.value)),$d=dn((e,...t)=>{let n=e(...t);return new Proxy(n,{get(r,o,s){return o==="value"?jd(r):Reflect.get(r,o,s)}})});function Mo(e,...t){let n=fn($d,e,...t);return fn(()=>n.value),n}i(Mo,"useQuery");u();l();u();l();u();l();var wn=L(dr(),1),Za=L(Xa(),1),_a=L(Ja(),1);wn.default.extend(Za.default);wn.default.extend(_a.default);var ec=i(e=>{let t={Today:[],Yesterday:[],"Last Week":[],Earlier:[]};for(let n of e){let r=n.timestamp??0,o=wn.default.unix(r/1e3),s="Earlier";o.isToday()?s="Today":o.isYesterday()?s="Yesterday":o.isAfter((0,wn.default)().subtract(1,"week"))&&(s="Last Week"),t[s].push(n)}return Object.keys(t).reduce((n,r)=>({...n,[r]:t[r].sort((o,s)=>(o.timestamp==null&&(o.timestamp=0),s.timestamp==null&&(s.timestamp=0),o.timestamp<s.timestamp?1:o.timestamp>s.timestamp?-1:0)).map(o=>o.data)}),{})},"bucketByTime");var tc=i(e=>{let{accountIdentifier:t,autoConfirmEnabled:n=!1,trustedAppsByAccount:r}=e;if(!t||!r)return;let o=Object.values(r),s=[],a=[];n?(o.forEach(f=>{f.autoConfirm&&Hs(f.autoConfirm)?s.push(f):a.push(f)}),s.sort((f,d)=>(d.autoConfirm?.sessionStartTime??0)-(f.autoConfirm?.sessionStartTime??0))):a=o;let c=ec(a.map(f=>{let d=f.lastConnectedTimestamp??0;return{timestamp:d,data:{...f,lastConnectedTimestamp:d}}}));return{autoConfirmEnabledApps:s,timeBucketedApps:c}},"prepareTrustedAppsSections");function nc(e){return e.map(t=>({lastConnectedTimestamp:t.createdAtMs,expiryTimestamp:t.expiresAtMs,dappMeta:{appUrl:t.origin,imageUrl:t.imageUrl,title:t.title,appId:t.appId}}))}i(nc,"mapAppPermissionsToTrustedApps");u();l();var rc=i((e,t)=>{if(!t||e.autoConfirm?.sessionStartTime===void 0||e.autoConfirm?.maxSessionDuration===void 0)return;if(e.expiryTimestamp)return e.expiryTimestamp?Po(new Date(e.expiryTimestamp)):void 0;let n=new Date(e.autoConfirm?.sessionStartTime+e.autoConfirm?.maxSessionDuration*1e3);return Po(n)},"getTrustedAppRowUntilValue");u();l();var Wd={...Ct(pn.EmojiSkinTone,[...Pt.emojiSkinTone()]),...Ct(pn.IsAnalyticsOptedOut,[...Pt.isAnalyticsOptedOut()]),...Ct(ur.UserExplorerPreferenceV2,[...Pt.preferredExplorers()]),...Ct(pn.SelectedCurrency,[...Pt.selectedCurrency()]),...Ct(ur.UserRecentAddresses,[...Pt.recentAddresses()],Gs()),...Ct(ur.UserSavedAddresses,[...Pt.savedAddresses()])};u();l();var zd=0;function D(e,t){let n=`atom${++zd}`,r={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=Yd,r.write=Xd),t&&(r.write=t),r}i(D,"atom");function Yd(e){return e(this)}i(Yd,"defaultRead");function Xd(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}i(Xd,"defaultWrite");var oc=i((e,t)=>e.unstable_is?e.unstable_is(t):t===e,"isSelfAtom"),Io=i(e=>"init"in e,"hasInitialValue"),Fo=i(e=>!!e.write,"isActuallyWritableAtom"),Cr=new WeakMap,Lo=i(e=>{var t;return Oo(e)&&!((t=Cr.get(e))!=null&&t[1])},"isPendingPromise"),Jd=i((e,t)=>{let n=Cr.get(e);if(n)n[1]=!0,n[0].forEach(r=>r(t));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},"cancelPromise"),Zd=i(e=>{if(Cr.has(e))return;let t=[new Set,!1];Cr.set(e,t);let n=i(()=>{t[1]=!0},"settle");e.then(n,n),e.onCancel=r=>{t[0].add(r)}},"patchPromiseForCancelability"),Oo=i(e=>typeof e?.then=="function","isPromiseLike"),ic=i(e=>"v"in e||"e"in e,"isAtomStateInitialized"),xr=i(e=>{if("e"in e)throw e.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},"returnAtomValue"),sc=i((e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},"addPendingPromiseToDependency"),_d=i((e,t,n,r)=>{var o;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&n===e)throw new Error("[Bug] atom cannot depend on itself");t.d.set(n,r.n),Lo(t.v)&&sc(e,t.v,r),(o=r.m)==null||o.t.add(e)},"addDependency"),ef=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),ac=i((...e)=>{let[t,n,r,o,s,a]=e,c=i(v=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!v)throw new Error("Atom is undefined or null");let T=t(v);return T||(T={d:new Map,p:new Set,n:0},n(v,T),s?.(v,Re)),T},"ensureAtomState"),f=new WeakMap,d=new Map,m=new Set,p=new Set,h=i(()=>{var v;let T=[],C=i(x=>{try{x()}catch(M){T.push(M)}},"call");do{(v=Re[ef])==null||v.call(Re);let x=new Set,M=x.add.bind(x);d.forEach(N=>{var G;return(G=N.m)==null?void 0:G.l.forEach(M)}),d.clear(),m.forEach(M),m.clear(),p.forEach(M),p.clear(),x.forEach(C),d.size&&H()}while(d.size||m.size||p.size);if(T.length)throw T[0]},"flushCallbacks"),b=i((v,T,C)=>{let x="v"in T,M=T.v,N=Lo(T.v)?T.v:null;if(Oo(C)){Zd(C);for(let G of T.d.keys())sc(v,C,c(G));T.v=C}else T.v=C;delete T.e,(!x||!Object.is(M,T.v))&&(++T.n,N&&Jd(N,C))},"setAtomStateValueOrPromise"),E=i(v=>{var T;let C=c(v);if(ic(C)&&(C.m&&f.get(v)!==C.n||Array.from(C.d).every(([J,Z])=>E(J).n===Z)))return C;C.d.clear();let x=!0,M=i(()=>{C.m&&(ce(v,C),H(),h())},"mountDependenciesIfAsync"),N=i(J=>{if(oc(v,J)){let be=c(J);if(!ic(be))if(Io(J))b(J,be,J.init);else throw new Error("no atom init");return xr(be)}let Z=E(J);try{return xr(Z)}finally{_d(v,C,J,Z),x||M()}},"getter"),G,j,Ae={get signal(){return G||(G=new AbortController),G.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!Fo(v)&&console.warn("setSelf function cannot be used with read-only atom"),!j&&Fo(v)&&(j=i((...J)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&x&&console.warn("setSelf function cannot be called in sync"),!x)return ae(v,...J)},"setSelf")),j}};try{let J=r(v,N,Ae);return b(v,C,J),Oo(J)&&((T=J.onCancel)==null||T.call(J,()=>G?.abort()),J.then(M,M)),C}catch(J){return delete C.v,C.e=J,++C.n,C}finally{x=!1}},"readAtomState"),w=i(v=>xr(E(v)),"readAtom"),S=i(v=>{var T;let C=new Map;for(let x of((T=v.m)==null?void 0:T.t)||[]){let M=c(x);M.m&&C.set(x,M)}for(let x of v.p)C.set(x,c(x));return C},"getMountedOrPendingDependents"),k=i(v=>{let T=[v];for(;T.length;){let C=T.pop();for(let[x,M]of S(C))f.has(x)||(f.set(x,M.n),T.push(M))}},"invalidateDependents"),H=i(()=>{var v;let T=[],C=new WeakSet,x=new WeakSet,M=Array.from(d);for(;M.length;){let[N,G]=M[M.length-1];if(x.has(N)){M.pop();continue}if(C.has(N)){f.get(N)===G.n?T.push([N,G,G.n]):(f.delete(N),d.set(N,G)),x.add(N),M.pop();continue}C.add(N);for(let[j,Ae]of S(G))C.has(j)||M.push([j,Ae])}for(let N=T.length-1;N>=0;--N){let[G,j,Ae]=T[N],J=!1;for(let Z of j.d.keys())if(Z!==G&&d.has(Z)){J=!0;break}J&&(E(G),ce(G,j),Ae!==j.n&&(d.set(G,j),(v=j.u)==null||v.call(j))),f.delete(G)}},"recomputeInvalidatedAtoms"),z=i((v,...T)=>{let C=!0,x=i(N=>xr(E(N)),"getter"),M=i((N,...G)=>{var j;let Ae=c(N);try{if(oc(v,N)){if(!Io(N))throw new Error("atom not writable");let J=Ae.n,Z=G[0];b(N,Ae,Z),ce(N,Ae),J!==Ae.n&&(d.set(N,Ae),(j=Ae.u)==null||j.call(Ae),k(Ae));return}else return z(N,...G)}finally{C||(H(),h())}},"setter");try{return o(v,x,M,...T)}finally{C=!1}},"writeAtomState"),ae=i((v,...T)=>{try{return z(v,...T)}finally{H(),h()}},"writeAtom"),ce=i((v,T)=>{var C;if(T.m&&!Lo(T.v)){for(let[x,M]of T.d)if(!T.m.d.has(x)){let N=c(x);ve(x,N).t.add(v),T.m.d.add(x),M!==N.n&&(d.set(x,N),(C=N.u)==null||C.call(N),k(N))}for(let x of T.m.d||[])if(!T.d.has(x)){T.m.d.delete(x);let M=ee(x,c(x));M?.t.delete(v)}}},"mountDependencies"),ve=i((v,T)=>{var C;if(!T.m){E(v);for(let x of T.d.keys())ve(x,c(x)).t.add(v);if(T.m={l:new Set,d:new Set(T.d.keys()),t:new Set},(C=T.h)==null||C.call(T),Fo(v)){let x=T.m,M=i(()=>{let N=!0,G=i((...j)=>{try{return z(v,...j)}finally{N||(H(),h())}},"setAtom");try{let j=a(v,G);j&&(x.u=()=>{N=!0;try{j()}finally{N=!1}})}finally{N=!1}},"processOnMount");p.add(M)}}return T.m},"mountAtom"),ee=i((v,T)=>{var C;if(T.m&&!T.m.l.size&&!Array.from(T.m.t).some(x=>{var M;return(M=c(x).m)==null?void 0:M.d.has(v)})){let x=T.m.u;x&&m.add(x),delete T.m,(C=T.h)==null||C.call(T);for(let M of T.d.keys()){let N=ee(M,c(M));N?.t.delete(v)}return}return T.m},"unmountAtom"),Re={get:w,set:ae,sub:i((v,T)=>{let C=c(v),M=ve(v,C).l;return M.add(T),h(),()=>{M.delete(T),ee(v,C),h()}},"subscribeAtom"),unstable_derive:i(v=>ac(...v(...e)),"unstable_derive")};return Re},"buildStore"),tf=i(e=>{let t=new Set,n,r=0,o=e.unstable_derive((...c)=>{let[f,d,,m]=c;return n=f,c[1]=i(function(h,b){d(h,b);let E=b.h;b.h=()=>{E?.(),b.m?t.add(h):t.delete(h)}},"devSetAtomState"),c[3]=i(function(h,b,E,...w){return r?E(h,...w):m(h,b,E,...w)},"devAtomWrite"),c}),s=o.set;return Object.assign(o,{dev4_get_internal_weak_map:i(()=>({get:i(c=>{let f=n(c);if(!(!f||f.n===0))return f},"get")}),"dev4_get_internal_weak_map"),dev4_get_mounted_atoms:i(()=>t,"dev4_get_mounted_atoms"),dev4_restore_atoms:i(c=>{s({read:i(()=>null,"read"),write:i((d,m)=>{++r;try{for(let[p,h]of c)Io(p)&&m(p,h)}finally{--r}},"write")})},"dev4_restore_atoms")})},"deriveDevStoreRev4"),Uo=i(()=>{let e=new WeakMap,t=ac(n=>e.get(n),(n,r)=>e.set(n,r).get(n),(n,...r)=>n.read(...r),(n,...r)=>n.write(...r),(n,...r)=>{var o;return(o=n.unstable_onInit)==null?void 0:o.call(n,...r)},(n,...r)=>{var o;return(o=n.onMount)==null?void 0:o.call(n,...r)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?tf(t):t},"createStore"),vn,cc=i(()=>(vn||(vn=Uo(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=vn),globalThis.__JOTAI_DEFAULT_STORE__!==vn&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),vn),"getDefaultStore");u();l();var he=L(Q(),1);var lc=(0,he.createContext)(void 0),dc=i(e=>{let t=(0,he.useContext)(lc);return e?.store||t||cc()},"useStore"),gE=i(({children:e,store:t})=>{let n=(0,he.useRef)(void 0);return!t&&!n.current&&(n.current=Uo()),(0,he.createElement)(lc.Provider,{value:t||n.current},e)},"Provider"),Ko=i(e=>typeof e?.then=="function","isPromiseLike"),fc=i(e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},"attachPromiseMeta"),nf=he.default.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(fc(e),e)}),Bo=new WeakMap,uc=i(e=>{let t=Bo.get(e);return t||(t=new Promise((n,r)=>{let o=e,s=i(f=>d=>{o===f&&n(d)},"onFulfilled"),a=i(f=>d=>{o===f&&r(d)},"onRejected"),c=i(f=>{"onCancel"in f&&typeof f.onCancel=="function"&&f.onCancel(d=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&d===f)throw new Error("[Bug] p is not updated even after cancelation");Ko(d)?(Bo.set(d,t),o=d,d.then(s(d),a(d)),c(d)):n(d)})},"registerCancelHandler");e.then(s(e),a(e)),c(e)}),Bo.set(e,t)),t},"createContinuablePromise");function Te(e,t){let n=dc(t),[[r,o,s],a]=(0,he.useReducer)(d=>{let m=n.get(e);return Object.is(d[0],m)&&d[1]===n&&d[2]===e?d:[m,n,e]},void 0,()=>[n.get(e),n,e]),c=r;(o!==n||s!==e)&&(a(),c=n.get(e));let f=t?.delay;if((0,he.useEffect)(()=>{let d=n.sub(e,()=>{if(typeof f=="number"){let m=n.get(e);Ko(m)&&fc(uc(m)),setTimeout(a,f);return}a()});return a(),d},[n,e,f]),(0,he.useDebugValue)(c),Ko(c)){let d=uc(c);return nf(d)}return c}i(Te,"useAtomValue");function An(e,t){let n=dc(t);return(0,he.useCallback)((...o)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...o)},[n,e])}i(An,"useSetAtom");function bE(e,t){return[Te(e,t),An(e,t)]}i(bE,"useAtom");u();l();var rf=g.object({data:g.string(),from:g.string(),to:g.string()}),of=g.object({transaction:rf});async function sf({caip19:e,amount:t,owner:n}){let r=await re.api().post("/tokens/v1/unwrap",{owner:n,caip19:e,amount:t.toNumber()}),o=of.safeParse(r.data);if(!o.success){let{error:s}=o;throw B.captureError(s,K.Fungibles),new En(`Failed to get unwrap transaction: ${s.message}`)}return o.data.transaction}i(sf,"getUnwrapTransaction");var af=i(({caip19:e,amount:t,owner:n})=>R({gcTime:Va.Medium,staleTime:Ha.Never,enabled:n!==""&&t.isGreaterThan(0),queryKey:Ee.unwrapTransaction({caip19:e,amount:t,owner:n}),async queryFn(){return await sf({caip19:e,amount:t,owner:n})}}),"useGetUnwrapTransaction");u();l();u();l();u();l();u();l();u();l();var mc;(function(e){e[e.Every1Second=1e3]="Every1Second",e[e.Every5Seconds=5e3]="Every5Seconds",e[e.Every10Seconds=1e4]="Every10Seconds",e[e.Every30Seconds=3e4]="Every30Seconds",e[e.Every1Minute=6e4]="Every1Minute",e[e.Every5Minutes=3e5]="Every5Minutes"})(mc||(mc={}));var Nt;(function(e){e.Always="always",e.Online="online",e.OfflineFirst="offlineFirst"})(Nt||(Nt={}));var He=Symbol("array"),Ge=Symbol("record");function Sn(e){if(e instanceof Set)return Array.from(e).map(r=>typeof r=="string"?`"${r}"`:String(r)).join(" | ");if(typeof e=="string")return`"${e}"`;if(typeof e=="boolean")return String(e);if(typeof e=="number"){let n=[];return e&1&&n.push("undefined"),e&2&&n.push("null"),e&4&&n.push("number"),e&8&&n.push("string"),e&16&&n.push("boolean"),e&32&&n.push("object"),e&64&&n.push("array"),n.length===0?"unknown":n.length===1?n[0]:n.join(" | ")}let t=e.mask;if(t&512){let n=e,r=[];if(n.values!==void 0&&n.values.size>0)for(let o of n.values){let s=typeof o=="string"?`"${o}"`:String(o);r.push(s)}if(n.shape!==void 0){n.shape[He]!==void 0&&r.push(`Array<${Sn(n.shape[He])}>`),n.shape[Ge]!==void 0&&r.push(`Record<string, ${Sn(n.shape[Ge])}>`);for(let[o,s]of Object.entries(n.shape))o!==He&&o!==Ge&&r.push(o)}return t=n.mask,t&1&&r.push("undefined"),t&2&&r.push("null"),t&4&&r.push("number"),t&8&&r.push("string"),t&16&&r.push("boolean"),r.length===0?"union":r.join(" | ")}if(t&1024)return`Entity<${e.typenameValue}>`;if(t&64){let n=e.shape;return`Array<${Sn(n)}>`}if(t&256){let n=e.shape;return`Record<string, ${Sn(n)}>`}if(t&32){let n=e.typenameValue;return n?`Object<${n}>`:"object"}return"unknown"}i(Sn,"typeToString");function xn(e,t,n){return new TypeError(`Validation error at ${e}: expected ${Sn(t)}, got ${typeof n=="object"?n===null?"null":Array.isArray(n)?"array":"object":typeof n}`)}i(xn,"typeError");u();l();var cf=Object.entries,uf=Array.isArray,De=class e{static{i(this,"ValidatorDef")}kind;mask;_optional;_nullable;_nullish;_shapeKey=void 0;_shape;subEntityPaths=void 0;typenameField=void 0;typenameValue=void 0;idField=void 0;values=void 0;constructor(t,n,r,o=void 0){this.kind=t,this.mask=n,this._shape=r,this.values=o}static cloneWith(t,n,r=void 0){let o=new e(t.kind,n|t.mask,t._shape,r);return o.subEntityPaths=t.subEntityPaths,o.values=t.values,o.typenameField=t.typenameField,o.typenameValue=t.typenameValue,o.idField=t.idField,o}reifyShape(){if(this._shapeKey===void 0)switch(this.kind){case 5:{let t=this._shape();this._shape=pc(this,t);break}case 0:this._shape=pc(this,this._shape);break;case 1:this._shape=pf(this,this._shape);break;case 3:case 4:{let t=this._shape;this._shapeKey=Se([this.mask,this.values,t.shapeKey]),t.mask&3072&&(this.mask|=2048);break}}}get shape(){return this.reifyShape(),this._shape}get shapeKey(){return this.reifyShape(),this._shapeKey}set shapeKey(t){this._shapeKey=t>>>0}get optional(){return this._optional===void 0&&(this._optional=e.cloneWith(this,1)),this._optional}get nullable(){return this._nullable===void 0&&(this._nullable=e.cloneWith(this,2)),this._nullable}get nullish(){return this._nullish===void 0&&(this._nullish=e.cloneWith(this,3)),this._nullish}};function lf(e){return new De(3,64,e)}i(lf,"defineArray");function df(e){return new De(4,288,e)}i(df,"defineRecord");function ff(e){return new De(0,32,e)}i(ff,"defineObject");function mf(...e){let t=0,n,r,o;for(let s of e){if(typeof s=="number"){t|=s;continue}if(s instanceof Set){if(o===void 0)o=new Set(s);else for(let a of s)o.add(a);continue}if(n===void 0){n=s;continue}r===void 0&&(r=[n]),r.push(s)}return n===void 0?o===void 0?t:t===0?o:new De(2,t|512,void 0,o):r===void 0?De.cloneWith(n,t|512,o):new De(1,t|512,r,o)}i(mf,"defineUnion");function pc(e,t){let n=Se([e.mask,e.values]);for(let[r,o]of cf(t))switch(typeof o){case"number":if(o&128){if(e.idField!==void 0)throw new Error(`Duplicate id field: ${r}`);e.idField=r}n+=Se(r)^o;break;case"string":if(e.typenameField!==void 0&&e.typenameField!==r)throw new Error(`Duplicate typename field: ${r}`);e.typenameField=r,e.typenameValue=o,n+=Se(r)^Se(o);break;case"object":if(o instanceof Set){n^=Se(r)^Se(o);break}n+=Se(r)^o.shapeKey,o.mask&3072&&(e.mask|=2048,e.subEntityPaths===void 0?e.subEntityPaths=r:uf(e.subEntityPaths)?e.subEntityPaths.push(r):e.subEntityPaths=[e.subEntityPaths,r]);break}return e.shapeKey=n>>>0,t}i(pc,"reifyObjectShape");function pf(e,t){let n=e.mask,r=Object.create(null),o,s=Se([n,e.values]);for(let a of t){let c=a.mask;if(n|=c,s+=a.shapeKey,c&512){let f=a;if(f.typenameField!==void 0){if(o!==void 0&&o!==f.typenameField)throw new Error(`Union typename field conflict: Cannot merge unions with different typename fields ('${o}' vs '${f.typenameField}')`);o=f.typenameField}let d=f.shape;if(d!==void 0)for(let m of[...Object.keys(d),He,Ge]){let p=d[m];if(r[m]!==void 0&&r[m]!==p)throw new Error(`Union merge conflict: Duplicate typename value '${String(m)}' found when merging nested unions (${String(r[m])} vs ${String(p)})`);r[m]=p}}else if(c&64){if(r[He]!==void 0)throw new Error("Array shape already defined");r[He]=a.shape}else if(c&256){if(r[Ge]!==void 0)throw new Error("Record shape already defined");r[Ge]=a.shape}else{let f=a.typenameField,d=a.typenameValue;if(d===void 0)throw new Error("Object definitions must have a typename to be in a union with other objects, records, or arrays");if(o!==void 0&&f!==o)throw new Error("Object definitions must have the same typename field to be in the same union");o=f,r[d]=a}}return e.typenameField=o,e.shapeKey=s>>>0,e.mask=n,r}i(pf,"reifyUnionShape");function hf(e){return e}i(hf,"defineTypename");function yf(e){return new Set([e])}i(yf,"defineConst");function gf(...e){return new Set(e)}i(gf,"defineEnum");var bf=16;var Ef=[];var Tf=new Map;function wf(e){let t=Tf.get(e);if(t===void 0)throw new Error(`Format ${e} not registered`);return t}i(wf,"defineFormatted");function Cn(e){let t=e>>bf;return Ef[t]}i(Cn,"getFormat");function Vo(e){return new De(5,1056,e)}i(Vo,"entity");var $={format:wf,typename:hf,const:yf,enum:gf,id:140,string:8,number:4,boolean:16,null:2,undefined:1,array:lf,object:ff,record:df,union:mf};u();l();var vf=Array.isArray;function Pn(e){if(e===null)return 2;switch(typeof e){case"number":return 4;case"string":return 8;case"boolean":return 16;case"undefined":return 1;case"object":return vf(e)?64:32;default:throw new Error(`Invalid type: ${typeof e}`)}}i(Pn,"typeMaskOf");var Ho=Object.entries,Af=Array.isArray,Go=new WeakSet;function Sf(e,t,n,r){if(e===64){let o=n.shape[He];return o===void 0||typeof o=="number"?t:hc(t,o,r)}else{let o=n.typenameField,s=o?t[o]:void 0;if(s===void 0||typeof s!="string"){let c=n.shape[Ge];return c===void 0||typeof c=="number"?t:xf(t,c,r)}let a=n.shape[s];return a===void 0||typeof a=="number"?t:yc(t,a,r)}}i(Sf,"parseUnionValue");function hc(e,t,n){for(let r=0;r<e.length;r++)e[r]=Dt(e[r],t,`${n}[${r}]`);return e}i(hc,"parseArrayValue");function xf(e,t,n){for(let[r,o]of Ho(e))e[r]=Dt(o,t,`${n}["${r}"]`);return e}i(xf,"parseRecordValue");function yc(e,t,n){if(Go.has(e))return e;let r=t.shape;for(let[o,s]of Ho(r))e[o]=Dt(e[o],s,`${n}.${o}`);return e}i(yc,"parseObjectValue");function Dt(e,t,n){if(t instanceof Set){if(!t.has(e))throw xn(n,t,e);return e}switch(typeof t){case"string":if(e!==t)throw xn(n,t,e);return e;case"number":{let r=Pn(e);if(!(t&r))throw xn(n,t,e);return t&4096&&r===4?Cn(t)(e):t&8192&&r===8?Cn(t)(e):e}default:{let r=Pn(e),o=t.mask;if(!(o&r)&&!t.values?.has(e))throw xn(n,o,e);return r<32?o&4096&&r===4?Cn(o)(e):o&8192&&r===8?Cn(o)(e):e:r&512?Sf(r,e,t,n):r===64?hc(e,t.shape,n):yc(e,t,n)}}}i(Dt,"parseValue");function Qo(e,t){for(let[n,r]of Ho(t))typeof r=="object"&&r!==null&&!Af(r)&&!Go.has(r)?Qo(e[n],r):e[n]=r;return e}i(Qo,"mergeValues");var Cf=Symbol.for("nodejs.util.inspect.custom");function qo(e,t,n,r){let o=n.shape,s=i(()=>({__entityRef:e}),"toJSON"),a={get(f,d){if(d==="toJSON")return s;let{signal:m,cache:p}=t,h=m.value;if(p.has(d))return p.get(d);let b=h[d],E=o[d];if(!Object.hasOwnProperty.call(o,d))return b;let w=Dt(b,E,`[[${r}]].${d}`);return p.set(d,w),w},has(f,d){return d in o},ownKeys(f){let d=Object.keys(o),m=n.typenameField;return m&&!d.includes(m)&&d.push(m),d},getOwnPropertyDescriptor(f,d){let m=n.typenameField;if(d in o||d===m)return{enumerable:!0,configurable:!0}}},c=new Proxy({[Cf]:()=>Object.keys(o).reduce((f,d)=>(f[d]=c[d],f),{})},a);return Go.add(c),c}i(qo,"createEntityProxy");var Pr=class{static{i(this,"EntityStore")}map=new Map;hasEntity(t){return this.map.has(t)}getEntity(t){return this.map.get(t)}hydratePreloadedEntity(t,n){let r=this.getEntity(t);if(r===void 0)throw new Error(`Entity ${t} not found`);return r.proxy=qo(t,r,n),r}setPreloadedEntity(t,n){let r={key:t,signal:ht(n,{equals:!1}),cache:new Map,proxy:void 0};return this.map.set(t,r),r}setEntity(t,n,r){let o=this.map.get(t);return o===void 0?(o=this.setPreloadedEntity(t,n),o.proxy=qo(t,o,r)):(o.signal.update(s=>Qo(s,n)),o.cache.clear()),o}};u();l();var Yt=class{static{i(this,"NetworkManager")}onlineSignal;manualOverride=void 0;eventListenersAttached=!1;constructor(t){let n=t??this.detectOnlineStatus();this.onlineSignal=ht(n),this.canAttachListeners()&&this.attachEventListeners()}get isOnline(){return this.manualOverride!==void 0?this.manualOverride:this.onlineSignal.value}setNetworkStatus(t){this.manualOverride=t,this.onlineSignal.value=t}clearManualOverride(){this.manualOverride=void 0,this.onlineSignal.value=this.detectOnlineStatus()}getOnlineSignal(){return this.onlineSignal}detectOnlineStatus(){return typeof navigator<"u"&&"onLine"in navigator?navigator.onLine:!0}canAttachListeners(){return typeof self<"u"&&typeof self.addEventListener=="function"}attachEventListeners(){if(this.eventListenersAttached)return;let t=i(()=>{this.manualOverride===void 0&&(this.onlineSignal.value=!0)},"handleOnline"),n=i(()=>{this.manualOverride===void 0&&(this.onlineSignal.value=!1)},"handleOffline");self.addEventListener("online",t),self.addEventListener("offline",n),this.eventListenersAttached=!0}},jo=class e{static{i(this,"NoOpNetworkManager")}static onlineSignal=ht(!0);get isOnline(){return!0}setNetworkStatus(t){}clearManualOverride(){}getOnlineSignal(){return e.onlineSignal}destroy(){}},gc=new Yt,Pf=ir(gc);u();l();u();l();var Mf=Object.entries;function Nf(e,t,n,r,o){if(e===64){let s=n.shape[He];return s===void 0||typeof s=="number"?t:bc(t,{mask:64,shape:s,values:void 0},r,o)}else{let s=n.typenameField,a=s?t[s]:void 0;if(a===void 0||typeof a!="string"){let f=n.shape[Ge];return f===void 0||typeof f=="number"?t:Ec(t,f,r,o)}let c=n.shape[a];return c===void 0||typeof c=="number"?t:Tc(t,c,r,o)}}i(Nf,"parseUnionEntities");function bc(e,t,n,r){for(let o=0;o<e.length;o++)e[o]=yt(e[o],t,n,r);return e}i(bc,"parseArrayEntities");function Ec(e,t,n,r){if(typeof t=="number")return e;for(let[o,s]of Mf(e))e[o]=yt(s,t,n,r);return e}i(Ec,"parseRecordEntities");function Tc(e,t,n,r){let o=e.__entityRef;if(typeof o=="number")return n.hydrateEntity(o,t).proxy;let{mask:s}=t,a=s&1024?new Set:r,c=t.shape,f=t.subEntityPaths;if(f!==void 0)if(typeof f=="string"){let d=c[f];e[f]=yt(e[f],d,n,a)}else for(let d of f){let m=c[d];e[d]=yt(e[d],m,n,a)}if(s&1024){let d=t,m=d.typenameValue,p=e[d.idField];if(p===void 0)throw new Error(`Entity id is required: ${m}`);let h=`${m}:${p}`,b=Se(h);return r!==void 0&&r.add(b),n.saveEntity(b,e,d,a).proxy}return e}i(Tc,"parseObjectEntities");function yt(e,t,n,r){let o=Pn(e),s=t.mask;return o<32||!(s&o)?e:s&512?Nf(o,e,t,n,r):o===64?bc(e,t.shape,n,r):s&256?Ec(e,t.shape,n,r):Tc(e,t,n,r)}i(yt,"parseEntities");var Mr=class{static{i(this,"QueryResultImpl")}def;queryKey;queryClient;initialized=!1;isRefetchingSignal=ht(!1);isFetchingMoreSignal=ht(!1);updatedAt=void 0;params=void 0;refIds=void 0;refetchPromise=void 0;fetchMorePromise=void 0;attemptCount=0;unsubscribe=void 0;relay;_relayState=void 0;wasOffline=!1;get relayState(){let t=this._relayState;if(!t)throw new Error("Relay state not initialized");return t}_nextPageParams=void 0;get nextPageParams(){if(this.def.type==="stream")return null;let t=this._nextPageParams,n=this.relayState.value;if(t===void 0&&n!==void 0){if(!Array.isArray(n))throw new Error("Query result is not an array, this is a bug");let o=this.def.pagination?.getNextPageParams?.(n[n.length-1]);if(o===void 0)t=null;else{let s=!1,a={...this.params};for(let[c,f]of Object.entries(o))f!=null&&(a[c]=f,s=!0);this._nextPageParams=t=s?a:null}}return t??null}constructor(t,n,r,o){Ps(this),this.def=t,this.queryClient=n,this.queryKey=r,this.params=o,this.relay=Ns(s=>{this._relayState=s,this.queryClient.activateQuery(this);let a=this.queryClient.networkManager,c=a.getOnlineSignal().value;return this.wasOffline=!c,this.initialized?(this.def.type==="stream"?this.setupSubscription():!this.wasOffline&&c?((this.def.cache?.refreshStaleOnReconnect??!0)&&this.isStale&&this.refetch(),this.attemptCount=0):this.isStale&&!this.isPaused&&this.refetch(),this.wasOffline=!c):this.initialize(),{update:i(()=>{if(this.def.type==="stream"){this.setupSubscription();return}let f=a.getOnlineSignal().value;this.wasOffline&&f&&((this.def.cache?.refreshStaleOnReconnect??!0)&&this.isStale&&s.setPromise(this.runQuery(this.params,!0)),this.attemptCount=0),this.wasOffline=!f},"update"),deactivate:i(()=>{this.def.type==="stream"?this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0):this.def.cache?.refetchInterval&&this.queryClient.refetchManager.removeQuery(this),this.queryClient.memoryEvictionManager.scheduleEviction(this.queryKey)},"deactivate")}})}get value(){return this.relay.value}get error(){return this.relay.error}get isPending(){return this.relay.isPending}get isRejected(){return this.relay.isRejected}get isResolved(){return this.relay.isResolved}get isSettled(){return this.relay.isSettled}get isReady(){return this.relay.isReady}get _version(){return this.relay._version}get _signal(){return this.relay._signal}get _flags(){return this.relay._flags}then(t,n){return this.relay.then(t,n)}catch(t){return this.relay.catch(t)}finally(t){return this.relay.finally(t)}get[Symbol.toStringTag](){return"QueryResult"}async initialize(){let t=this.relayState;try{this.initialized=!0;let n=await this.queryClient.loadCachedQuery(this.def,this.queryKey);if(n!==void 0){let r=this.def.shape;t.value=r instanceof De?yt(n.value,r,this.queryClient,new Set):Dt(n.value,r,this.def.id),this.updatedAt=n.updatedAt,this.refIds=n.refIds}this.def.type==="stream"?this.setupSubscription():n!==void 0?this.isStale&&this.refetch():t.setPromise(this.runQuery(this.params,!0))}catch(n){t.setError(n)}}setupSubscription(){this.unsubscribe?.();let t=this.def;this.unsubscribe=t.subscribeFn(this.queryClient.getContext(),this.params,n=>{let r=this.def.shape,o=this.refIds??new Set,s=yt(n,r,this.queryClient,o);this.relayState.value=s,this.updatedAt=Date.now(),this.refIds=o,this.queryClient.saveQueryData(this.def,this.queryKey,s,this.updatedAt,o)})}async runQuery(t,n=!1){if(this.isPaused)throw new Error("Query is paused due to network status");let{retries:r,retryDelay:o}=this.getRetryConfig(),s;for(let a=0;a<=r;a++)try{let f=await this.def.fetchFn(this.queryClient.getContext(),t);this.attemptCount=0;let d,m=this.def.type==="infiniteQuery";m&&!n&&this.refIds!==void 0?d=this.refIds:d=new Set;let p=this.def.shape,h=p instanceof De?yt(f,p,this.queryClient,d):Dt(f,p,this.def.id),b;if(m){let w=this.relayState.value;b=n||w===void 0?[h]:[...w,h]}else b=h;let E;return n?E=this.updatedAt=Date.now():E=this.updatedAt??=Date.now(),this._nextPageParams=void 0,this.queryClient.saveQueryData(this.def,this.queryKey,b,E,d),this.updatedAt=Date.now(),b}catch(c){if(s=c,this.attemptCount=a+1,a>=r)throw c;let f=o(a);if(await new Promise(d=>setTimeout(d,f)),this.isPaused)throw new Error("Query is paused due to network status")}throw s}refetch=i(()=>{if(this.def.type==="stream")throw new Error("Cannot refetch a stream query");if(this.fetchMorePromise)throw new Error("Query is fetching more, cannot refetch");if(this.refetchPromise)return this.refetchPromise;this._nextPageParams=void 0,this.isRefetchingSignal.value=!0,this._version.update(n=>n+1);let t=this.runQuery(this.params,!0).then(n=>(this.relayState.value=n,n)).catch(n=>(this.relayState.setError(n),Promise.reject(n))).finally(()=>{this._version.update(n=>n+1),this.isRefetchingSignal.value=!1,this.refetchPromise=void 0});return this.refetchPromise=t,t},"refetch");fetchNextPage=i(()=>{if(this.def.type==="stream")throw new Error("Cannot fetch next page on a stream query");if(this.refetchPromise)return Promise.reject(new Error("Query is refetching, cannot fetch next page"));if(this.fetchMorePromise)return this.fetchMorePromise;let t=this.nextPageParams;if(!t)return Promise.reject(new Error("No next page params"));this.isFetchingMoreSignal.value=!0,this._version.update(r=>r+1);let n=this.runQuery(t,!1).then(r=>(this.relayState.value=r,r)).catch(r=>(this.relayState.setError(r),Promise.reject(r))).finally(()=>{this._version.update(r=>r+1),this.isFetchingMoreSignal.value=!1,this.fetchMorePromise=void 0});return this.fetchMorePromise=n,n},"fetchNextPage");get isRefetching(){return this.isRefetchingSignal.value}get isFetchingMore(){return this.isFetchingMoreSignal.value}get isFetching(){return this.relay.isPending||this.isRefetching||this.isFetchingMore}get hasNextPage(){return this.nextPageParams!==null}get isStale(){if(this.def.type==="stream")return!1;if(this.updatedAt===void 0)return!0;let t=this.def.cache?.staleTime??0;return Date.now()-this.updatedAt>=t}get isPaused(){if(this.def.type==="stream")return!1;let t=this.def.cache?.networkMode??Nt.Online,r=this.queryClient.networkManager.getOnlineSignal().value;switch(t){case Nt.Always:return!1;case Nt.Online:return!r;case Nt.OfflineFirst:return!r&&this.updatedAt===void 0;default:return!1}}getRetryConfig(){if(this.def.type==="stream")return{retries:0,retryDelay:i(()=>0,"retryDelay")};let t=this.def.cache?.retry,n=this.queryClient.isServer,r,o;return t===!1?r=0:t===void 0?r=n?0:3:typeof t=="number"?r=t:r=t.retries,typeof t=="object"&&t.retryDelay?o=t.retryDelay:o=i(s=>1e3*Math.pow(2,s),"retryDelay"),{retries:r,retryDelay:o}}};u();l();var Mn=class{static{i(this,"RefetchManager")}multiplier;intervalId;clock=0;buckets=new Map;constructor(t=1){this.multiplier=t;let n=1e3*this.multiplier;this.intervalId=setTimeout(()=>this.tick(),n)}addQuery(t){if(t.def.type==="stream")return;let n=t.def.cache?.refetchInterval;if(!n)return;let r=n*this.multiplier,o=this.buckets.get(r);o||(o=new Set,this.buckets.set(r,o)),o.add(t)}removeQuery(t){if(t.def.type==="stream")return;let n=t.def.cache?.refetchInterval;if(!n)return;let r=n*this.multiplier,o=this.buckets.get(r);o&&(o.delete(t),o.size===0&&this.buckets.delete(r))}tick(){this.clock+=1e3*this.multiplier;for(let[n,r]of this.buckets.entries())if(this.clock%n===0)for(let o of r)o&&!o.isFetching&&o.refetch();let t=1e3*this.multiplier;this.intervalId=setTimeout(()=>this.tick(),t)}destroy(){clearTimeout(this.intervalId)}};u();l();var Nn=class{static{i(this,"MemoryEvictionManager")}queryClient;multiplier;intervalId;currentFlush=new Set;nextFlush=new Set;constructor(t,n=1){this.queryClient=t,this.multiplier=n,this.intervalId=setInterval(this.tick,6e4*this.multiplier)}scheduleEviction(t){this.nextFlush.add(t)}cancelEviction(t){this.currentFlush.delete(t),this.nextFlush.delete(t)}tick=i(()=>{if(this.queryClient){for(let t of this.currentFlush)this.queryClient.queryInstances.delete(t);this.currentFlush=this.nextFlush,this.nextFlush=new Set}},"tick");destroy(){clearInterval(this.intervalId)}};var wc=i((e,t)=>Se([e.id,e.shapeKey,t]),"queryKeyFor"),$o=class{static{i(this,"QueryClient")}store;context;entityMap=new Pr;queryInstances=new Map;memoryEvictionManager;refetchManager;networkManager;isServer;constructor(t,n={fetch},r,o,s){this.store=t,this.context=n,this.memoryEvictionManager=o??new Nn(this,this.context.evictionMultiplier),this.refetchManager=s??new Mn(this.context.refetchMultiplier),this.networkManager=r??new Yt,this.isServer=typeof self>"u"}getContext(){return this.context}saveQueryData(t,n,r,o,s){this.store.saveQuery(t,n,r,o,s)}activateQuery(t){let{def:n,queryKey:r}=t;this.store.activateQuery(n,r),n.type!=="stream"&&n.cache?.refetchInterval&&this.refetchManager.addQuery(t),this.memoryEvictionManager.cancelEviction(r)}loadCachedQuery(t,n){return this.store.loadQuery(t,n,this.entityMap)}getQuery(t,n){let r=wc(t,n),o=this.queryInstances.get(r);return o===void 0&&(o=new Mr(t,this,r,n),this.queryInstances.set(r,o)),o}hydrateEntity(t,n){return this.entityMap.hydratePreloadedEntity(t,n)}saveEntity(t,n,r,o){let s=this.entityMap.setEntity(t,n,r);return this.store.saveEntity(t,n,o),s}destroy(){this.refetchManager.destroy(),this.memoryEvictionManager.destroy()}},Wo=ir(void 0);u();l();u();l();u();l();var Df=new Map;function zo(e){let t,n=i(()=>{if(t===void 0){let{id:o,response:s,subscribe:a,cache:c}=e();if(!(s instanceof De)||!(s.mask&1024))throw new Error("Stream query response must be an EntityDef");t={type:"stream",id:o,shape:s,shapeKey:s.shapeKey,subscribeFn:i((f,d,m)=>a(d,m),"subscribeFn"),cache:c}}return t},"getStreamDefinition"),r=dn(o=>{let s=Ms(Wo);if(s===void 0)throw new Error("QueryClient not found");return s.getQuery(n(),o)});return Df.set(r,n),r}i(zo,"streamQuery");u();l();var dt=L(Q());u();l();var kf=new Cs({[je.Solana]:{},[je.Ethereum]:{},[je.Polygon]:{},[je.Base]:{},[je.Arbitrum]:{},[je.Monad]:{},[je.Bitcoin]:{},[je.Sui]:{},[je.Hypercore]:{},[je.Hyperevm]:{}}),lt=xs(kf);u();l();u();l();u();l();var Rf=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],Yo=class{static{i(this,"EventSource")}ERROR=-1;CONNECTING=0;OPEN=1;CLOSED=2;CRLF=`\r
`;LF=`
`;CR="\r";lastEventId=null;status=this.CONNECTING;eventHandlers={open:[],message:[],error:[],close:[]};method;timeout;timeoutBeforeConnection;withCredentials;headers;body;debug;interval;lineEndingCharacter;_xhr=null;_pollTimer=null;_lastIndexProcessed=0;url;constructor(t,n={}){if(!t||typeof t!="string"&&typeof t.toString!="function")throw new SyntaxError("[EventSource] Invalid URL argument.");this.url=typeof t.toString=="function"?t.toString():t,this.method=n.method||"GET",this.timeout=n.timeout??0,this.timeoutBeforeConnection=n.timeoutBeforeConnection??0,this.withCredentials=n.withCredentials||!1,this.headers=n.headers||{},this.body=n.body||void 0,this.debug=n.debug||!1,this.interval=n.pollingInterval??5e3,this.lineEndingCharacter=n.lineEndingCharacter||null,this._pollAgain(this.timeoutBeforeConnection,!0)}_pollAgain(t,n){(t>0||n)&&(this._logDebug(`[EventSource] Will open new connection in ${t} ms.`),this._pollTimer=setTimeout(()=>{this.open()},t))}open(){try{this.status=this.CONNECTING,this._lastIndexProcessed=0,this._xhr=new XMLHttpRequest,this._xhr.open(this.method,this.url,!0),this.withCredentials&&(this._xhr.withCredentials=!0),this._xhr.setRequestHeader("Accept","text/event-stream"),this._xhr.setRequestHeader("Cache-Control","no-cache"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(let[t,n]of Object.entries(this.headers))this._xhr.setRequestHeader(t,n);this.lastEventId!==null&&this._xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this._xhr.timeout=this.timeout,this._xhr.onreadystatechange=()=>{if(this.status===this.CLOSED)return;let t=this._xhr;this._logDebug(`[EventSource][onreadystatechange] ReadyState: ${Rf[t.readyState]||"Unknown"}(${t.readyState}), status: ${t.status}`),[XMLHttpRequest.DONE,XMLHttpRequest.LOADING].includes(t.readyState)&&(t.status>=200&&t.status<400?(this.status===this.CONNECTING&&(this.status=this.OPEN,this.dispatch("open",{type:"open"}),this._logDebug("[EventSource][onreadystatechange][OPEN] Connection opened.")),this._handleEvent(t.responseText||""),t.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][DONE] Operation done."),this._pollAgain(this.interval,!1))):t.status!==0&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:t.responseText,xhrStatus:t.status,xhrState:t.readyState}),t.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][ERROR] Response status error."),this._pollAgain(this.interval,!1))))},this._xhr.onerror=()=>{this.status!==this.CLOSED&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:this._xhr.responseText,xhrStatus:this._xhr.status,xhrState:this._xhr.readyState}))},this.body?this._xhr.send(this.body):this._xhr.send(),this.timeout>0&&setTimeout(()=>{this._xhr.readyState===XMLHttpRequest.LOADING&&(this.dispatch("error",{type:"timeout"}),this.close())},this.timeout)}catch(t){this.status=this.ERROR,this.dispatch("error",{type:"exception",message:t.message,error:t})}}_logDebug(...t){this.debug&&console.debug(...t)}_handleEvent(t){if(this.lineEndingCharacter===null){let d=this._detectNewlineChar(t);if(d!==null)this._logDebug(`[EventSource] Automatically detected lineEndingCharacter: ${JSON.stringify(d).slice(1,-1)}`),this.lineEndingCharacter=d;else{console.warn("[EventSource] Unable to identify the line ending character. Ensure your server delivers a standard line ending character: \\r\\n, \\n, \\r, or specify your custom character using the 'lineEndingCharacter' option.");return}}let n=this._getLastDoubleNewlineIndex(t);if(n<=this._lastIndexProcessed)return;let r=t.substring(this._lastIndexProcessed,n).split(this.lineEndingCharacter);this._lastIndexProcessed=n;let o,s=null,a=[],c=0,f="";for(let d=0;d<r.length;d++)if(f=r[d].trim(),f.startsWith("event"))o=f.replace(/event:?\s*/,"");else if(f.startsWith("retry"))c=parseInt(f.replace(/retry:?\s*/,""),10),isNaN(c)||(this.interval=c);else if(f.startsWith("data"))a.push(f.replace(/data:?\s*/,""));else if(f.startsWith("id"))s=f.replace(/id:?\s*/,""),s!==""?this.lastEventId=s:this.lastEventId=null;else if(f===""&&a.length>0){let m=o||"message",p={type:m,data:a.join(`
`),url:this.url,lastEventId:this.lastEventId};this.dispatch(m,p),a=[],o=void 0}}_detectNewlineChar(t){let n=[this.CRLF,this.LF,this.CR];for(let r of n)if(t.includes(r))return r;return null}_getLastDoubleNewlineIndex(t){let n=this.lineEndingCharacter+this.lineEndingCharacter,r=t.lastIndexOf(n);return r===-1?-1:r+n.length}addEventListener(t,n){this.eventHandlers[t]===void 0&&(this.eventHandlers[t]=[]),this.eventHandlers[t].push(n)}removeEventListener(t,n){this.eventHandlers[t]!==void 0&&(this.eventHandlers[t]=this.eventHandlers[t].filter(r=>r!==n))}removeAllEventListeners(t){let n=Object.keys(this.eventHandlers);if(t===void 0)for(let r of n)this.eventHandlers[r]=[];else{if(!n.includes(t))throw Error(`[EventSource] '${t}' type is not supported event type.`);this.eventHandlers[t]=[]}}dispatch(t,n){if(Object.keys(this.eventHandlers).includes(t))for(let o of Object.values(this.eventHandlers[t]))o(n)}close(){this.status!==this.CLOSED&&(this.status=this.CLOSED,this.dispatch("close",{type:"close"})),clearTimeout(this._pollTimer),this._xhr&&this._xhr.abort()}},Xo=Yo;u();l();var Jo=class{static{i(this,"AbstractStreamEventProducer")}getDefaultHeaders(){let t={"X-Phantom-Version":Zn,"X-Phantom-Platform":_n},n=er();return n&&(t["X-Phantom-AnonymousId"]=n),t}getOptions(t={}){return{...t,headers:Object.fromEntries(ln(this.getDefaultHeaders(),t.headers).entries())}}getOptionsWithAuth(t,n={}){let r=this.getOptions(n);if(r.withClientAuth!==!1){let o=tr(t,r.headers);return{...r,headers:Object.fromEntries(ln(r.headers,o).entries())}}return r}getApiEnvironment(){return Jn()}safeJsonParse(t){try{return t?{success:!0,data:JSON.parse(t)}:{success:!1,error:new Error("No data provided")}}catch(n){return{success:!1,error:n instanceof Error?n:new Error("Failed to parse JSON")}}}createErrorEvent(t,n="error"){return{type:n,error:typeof t=="string"?new Error(t):t}}};u();l();function Zo({url:e,signal:t,customEvent:n}){return{[Symbol.asyncIterator](){let r=[],o=null,s=!1,a={"X-Phantom-Version":Zn,"X-Phantom-Platform":_n},c=er();c&&(a["X-Phantom-AnonymousId"]=c);let f=tr(e,a),d={headers:Object.fromEntries(ln(a,f).entries()),lineEndingCharacter:`
`},m=new Xo(e,d),p=i(S=>{try{r.push(JSON.parse(S.data??""))}catch{r.push(S.data??"")}if(o){let k=o;o=null,k({value:r.shift(),done:!1})}},"onMessage"),h=i(()=>{s||(s=!0,E(),b())},"onError"),b=i(()=>{if(o){let S=o;o=null,S({value:void 0,done:!0})}},"finish"),E=i(()=>{n&&m.removeEventListener(n,p),m.removeEventListener("message",p),m.removeEventListener("error",h),m.close()},"cleanup");n&&m.addEventListener(n,p),m.addEventListener("message",p),m.addEventListener("error",h);let w=i(()=>{s||(s=!0,E(),b())},"onAbort");return t?.addEventListener("abort",w,{once:!0}),{next(){return s?Promise.resolve({value:void 0,done:!0}):r.length?Promise.resolve({value:r.shift(),done:!1}):new Promise(S=>{o=S})},return(){return s||(s=!0,t?.removeEventListener("abort",w),E()),Promise.resolve({value:void 0,done:!0})},throw(S){return s||(s=!0,t?.removeEventListener("abort",w),E()),Promise.reject(S)}}}}}i(Zo,"sseIterable");u();l();function vc(e){return{usd:e.price??void 0,usd_24h_change:e.priceChange24h??void 0,price:e.price??void 0,priceChange24h:e.priceChange24h??void 0,lastUpdatedAt:e.lastUpdatedAt}}i(vc,"priceUpdateDataToPriceData");var Ff=P({minutes:5}),If=100,Ac=5,Lf=P({seconds:1}),Of=P({seconds:30}),_o=class{static{i(this,"PriceStreamManager")}subscriptions=new Map;activeConnection=null;currentTokenIds=new Set;subscriptionOrder=[];connectionState="disconnected";reconnectAttempts=0;reconnectTimeoutId=null;subscribe(t,n,r){!this.subscriptions.has(t)&&this.subscriptions.size>=If&&this.evictOldestToken();let o={priceCallback:n,evictedCallback:r?.onEvicted};return this.subscriptions.has(t)?(this.removeFromSubscriptionOrder(t),this.subscriptionOrder.push(t)):(this.subscriptions.set(t,new Set),this.subscriptionOrder.push(t)),this.subscriptions.get(t).add(o),this.updateConnection(),()=>{let s=this.subscriptions.get(t);if(s){for(let a of s)if(a.priceCallback===n){s.delete(a);break}s.size===0&&(this.subscriptions.delete(t),this.removeFromSubscriptionOrder(t),this.updateConnection())}}}updateConnection(){let t=new Set(this.subscriptions.keys());if(t.size===0){this.disconnect();return}this.setsEqual(this.currentTokenIds,t)&&this.activeConnection&&this.connectionState==="connected"||this.connectionState==="reconnecting"&&this.setsEqual(this.currentTokenIds,t)||(this.disconnect(),this.connect(t))}connect(t){let n=new AbortController;this.activeConnection=n,this.currentTokenIds=new Set(t),this.connectionState="connecting";let r=Array.from(t).map(s=>encodeURIComponent(s)).join(","),o=`${Jn()}/price-stream?tokenIds=${r}`;this.consumeStream(o,n.signal)}async consumeStream(t,n){try{let r=Zo({url:t,signal:n,customEvent:"price-update"});this.connectionState="connected",this.reconnectAttempts=0;for await(let o of r){if(n.aborted)break;this.handlePriceUpdate(o)}}catch{n.aborted||(this.connectionState="disconnected",this.scheduleReconnect())}}handlePriceUpdate(t){let n=t.caip19,r=this.subscriptions.get(n);if(!r)return;if(!t.price){let s=new Date(t.lastUpdatedAt).getTime();if(Date.now()-s<Ff)return}let o=vc(t);r.forEach(s=>{try{s.priceCallback(n,o)}catch{}})}disconnect(){this.cancelReconnection(),this.activeConnection&&(this.activeConnection.abort(),this.activeConnection=null),this.currentTokenIds.clear(),this.connectionState!=="disconnected"&&(this.connectionState="disconnected")}setsEqual(t,n){if(t.size!==n.size)return!1;for(let r of t)if(!n.has(r))return!1;return!0}evictOldestToken(){if(this.subscriptionOrder.length===0)return;let t=this.subscriptionOrder[0],n=this.subscriptions.get(t);n&&(n.forEach(r=>{if(r.evictedCallback)try{r.evictedCallback(t)}catch{}}),n.clear()),this.subscriptions.delete(t),this.removeFromSubscriptionOrder(t),this.updateConnection()}removeFromSubscriptionOrder(t){let n=this.subscriptionOrder.indexOf(t);n>-1&&this.subscriptionOrder.splice(n,1)}scheduleReconnect(){if(this.reconnectAttempts>=Ac){this.connectionState="disconnected";return}if(this.subscriptions.size===0)return;this.connectionState="reconnecting",this.reconnectAttempts++;let t=Math.min(Lf*Math.pow(2,this.reconnectAttempts-1),Of);this.reconnectTimeoutId=setTimeout(()=>{if(this.reconnectTimeoutId=null,this.subscriptions.size===0){this.connectionState="disconnected";return}this.connect(new Set(this.subscriptions.keys()))},t)}cancelReconnection(){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null)}getConnectionState(){return this.connectionState}getStats(){return{connectionState:this.connectionState,activeSubscriptions:this.subscriptions.size,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:Ac,currentTokenIds:Array.from(this.currentTokenIds)}}forceReconnect(){this.subscriptions.size!==0&&(this.reconnectAttempts=0,this.disconnect(),this.connect(new Set(this.subscriptions.keys())))}destroy(){this.cancelReconnection(),this.disconnect(),this.subscriptions.clear(),this.subscriptionOrder.length=0,this.connectionState="disconnected",this.reconnectAttempts=0}},ei=new _o;u();l();u();l();u();l();var Xt;(function(e){e[e.Always=1/0]="Always",e[e.Short=P({days:1})]="Short",e[e.Medium=P({days:3})]="Medium",e[e.Long=P({days:7})]="Long",e[e.VeryLong=P({days:30})]="VeryLong",e[e.Never=0]="Never"})(Xt||(Xt={}));var ue;(function(e){e[e.Immediate=0]="Immediate",e[e.VeryShort=P({seconds:1})]="VeryShort",e[e.Short=P({seconds:15})]="Short",e[e.Medium=P({minutes:3})]="Medium",e[e.Long=P({minutes:5})]="Long",e[e.VeryLong=P({minutes:10})]="VeryLong",e[e.Never=1/0]="Never"})(ue||(ue={}));var Qe;(function(e){e[e.VeryShort=P({seconds:2})]="VeryShort",e[e.Short=P({seconds:15})]="Short",e[e.Medium=P({minutes:3})]="Medium",e[e.Long=P({minutes:5})]="Long"})(Qe||(Qe={}));var Sc=P({seconds:10}),xc={gcTime:Xt.Short,staleTime:ue.Short};u();l();var Uf="prices",Nr=i((e,t)=>{if(!nr(e))return;let r=e.response?.status;if(!r||r===0||r>=500||r===404){B.addBreadcrumb(Uf,e.message,te.Info,t);return}r>=400&&r<500&&B.captureError(e,K.Prices)},"captureClientError");var Pc=g.object({price:g.number(),priceChange24h:g.number(),lastUpdatedAt:g.string().datetime().optional()}),Cc=g.object({prices:g.record(Ts,Pc)});async function kt({tokens:e}){try{let t=e.filter(a=>!lt.get(a.chainId)?.pricesDisabled),n={tokens:t.map(a=>({token:a}))},r="/price/v1",o,s=re.timeout(Sc).retry(1,200).validateStatus(!0).api();if(t.length===0)return{};if(t.length===1){let a=t[0];r+=`/${a.chainId}`,a.resourceType===de.nativeToken?r+=`/nativeToken/${a.slip44}`:r+=`/address/${a.address}`;let c=await s.get(r);o=Cc.parse({prices:{[oe(a)]:c.data}})}else{let a=await s.post(r,n);o=Cc.parse(a.data)}return Bf(o.prices)}catch(t){throw Nr(t),t}}i(kt,"getPrices");function Bf(e){let t={};for(let n of Object.keys(e)){let{price:r,priceChange24h:o,lastUpdatedAt:s}=e[n],a={price:r,usd:r,usd_24h_change:o,lastUpdatedAt:s};t[n]=a}return t}i(Bf,"pricesToPriceMap");u();l();function Dr(e){return{caip19:ti(e)}}i(Dr,"parseCaip19Able");function ti(e){return typeof e=="string"?Ye(e):e}i(ti,"fungibledCaip19");u();l();var kr="prices",ye={price:i(e=>[kr,{id:e}],"price"),priceError:i(()=>[kr,"error"],"priceError"),priceHistory:i((e,t)=>[kr,e,t],"priceHistory"),priceHistoryInterval:i((e,t,n,r)=>[kr,e,t,n,...r?[r]:[]],"priceHistoryInterval"),tempPrices:i(e=>["tempPrices",e],"tempPrices")};var Mc=new Error("Price not available"),ni=i(e=>{let t=e?e.data:void 0;return t?Hf(t):void 0},"tokenIdFromQuery"),ri=i(({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Qe.Short,staleTime:ue.Short,gcTime:ue.Short}})=>{let r=ni(e),o=n.refetchInterval,s=n.staleTime,a=n.gcTime,c=e?e.data:void 0,f=c?Dr(c).caip19.chainId:void 0,d=f?!lt.get(f).pricesDisabled:!1;return{enabled:t&&!!r&&d,queryKey:ye.price(r),refetchInterval(p){return p.state.error===Mc?!1:o},staleTime:s,gcTime:a,retry:!1,queryFn:i(async()=>{if(!c||!r)throw new Error("No caip19able provided");let p=ti(c);try{let b=(await kt({tokens:[p]}))[r];if(!b)throw new Error(`Failed to fetch price for ${c}`);return b}catch(h){let b=h;throw r&&(b.response?.status===404||b.response?.status===400)?Mc:h}},"queryFn")}},"getPriceQueryConfig"),Kf=i(({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Qe.Short,staleTime:ue.Short,gcTime:ue.Short}})=>({...ri({query:e,enabled:t,queryOptions:n}),refetchInterval:!1}),"getLivePriceQueryConfig");function Vf({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Qe.Short,staleTime:ue.Short,gcTime:ue.Short}}){let r=X(),o=mn("enable-price-streaming"),s=(0,dt.useRef)(null),a=ni(e),c=(0,dt.useMemo)(()=>a?ye.price(a):null,[a]);(0,dt.useEffect)(()=>{if(!o||!t||!a||!c)return;let d=i(()=>{s.current&&(s.current(),s.current=null)},"cleanup"),m=ei.subscribe(a,(p,h)=>{r.setQueryData(c,h)},{onEvicted:d});return s.current=m,d},[o,t,a,c,r]);let f=o?Kf({query:e,enabled:t,queryOptions:n}):ri({query:e,enabled:t,queryOptions:n});return R(f)}i(Vf,"usePriceLegacy");function Hf(e){return typeof e=="string"?e:oe(e)}i(Hf,"encodedCaip19");var Gf=Vo(()=>({__typename:$.typename("TokenPrice"),id:$.id,usd:$.union($.number,$.undefined),usd_24h_change:$.union($.number,$.undefined),price:$.union($.number,$.undefined),priceChange24h:$.union($.number,$.undefined),currencyValue:$.union($.number,$.undefined),currencyChange:$.union($.number,$.undefined),lastUpdatedAt:$.union($.string,$.undefined)})),Qf=zo(()=>({id:"PriceStream",response:Gf,params:{tokenId:$.union($.string,$.undefined)},subscribe:i((e,t)=>e.tokenId?ei.subscribe(e.tokenId,(n,r)=>{t({...r,__typename:"TokenPrice",id:e.tokenId})}):()=>{},"subscribe")})),qf=i(e=>{let{value:t,error:n,isReady:r,isResolved:o,isPending:s,isRejected:a,isFetching:c}=Mo(Qf,{tokenId:e});return(0,dt.useMemo)(()=>({data:t,error:n,isFetched:r,isFetching:c,isSuccess:o,isLoading:s,isError:a}),[t,n,r,o,s,a,c])},"usePriceLegacyInterop");function Rt({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Qe.Short,staleTime:ue.Short,gcTime:ue.Short}}){let[r]=(0,dt.useState)(ks("enable-signalium-query-price-streaming"));if(!r)return Vf({query:e,enabled:t,queryOptions:n});let o=ni(e);return qf(o)}i(Rt,"usePrice");u();l();u();l();var Fc=L(Q());u();l();var Nc=i(function(e,t=0){let n=3735928559^t,r=1103547991^t;for(let o=0,s;o<e.length;o++)s=e.charCodeAt(o),n=Math.imul(n^s,2654435761),r=Math.imul(r^s,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)},"cyrb53");u();l();function Dc(e){return e.data.map(Dr)}i(Dc,"parseQueries");u();l();u();l();var kc=i((e,t)=>Array.apply(0,new Array(Math.ceil(e.length/t))).map((n,r)=>e.slice(r*t,(r+1)*t)),"chunks");var jf=500;async function Rc({queryClient:e,queries:t}){let n={};try{let r={},o=[];for(let d of t){let m=d.caip19,p=oe(m);if(r[p])continue;r[p]=!0;let h=ye.price(p),b=e.getQueryState(h);if(b&&Date.now()-b.dataUpdatedAt<xc.staleTime){n[p]=b.data;continue}o.push(m)}let s=await Promise.allSettled(kc(o,jf).map(d=>kt({tokens:d}))),a=[],c=s.some(d=>d.status==="rejected"),f=s.reduce((d,m)=>m.status==="rejected"?d:{...d,...m.value},{});for(let d of o){let m=oe(d),p=f[m],h=ye.price(m);!p&&c&&(p=e.getQueryData(h)),p&&(n[m]=p),a.push(()=>{let b=p??null;e.setQueryData(h,b,{updatedAt:Date.now()})})}if(c){let d=e.getQueryData(ye.priceError())??0;e.setQueryData(ye.priceError(),d+1)}else e.removeQueries({queryKey:ye.priceError()});$f(a,50)}catch(r){Nr(r)}return n}i(Rc,"fetchPricesFn");function $f(e,t){let n=e.length,r=0;function o(){let s=e.slice(r,r+t);cr.batch(()=>{s.forEach(a=>a())}),r+=t,r<n&&setTimeout(o,0)}i(o,"processNextChunk"),o()}i($f,"updateCacheInChunks");var Wf=i(e=>typeof e=="string"?e:e.resourceType==="nativeToken"?e.slip44:e.address,"uniqueStringFromCaip19Able"),zf=i((e,t)=>e.localeCompare(t),"compare"),Ic=i(e=>{let t=e.map(Wf).sort(zf).join(",");return Nc(t)},"getPricesKey"),Lc=i(({query:e,enabled:t=!0,key:n,queryOptions:r={refetchInterval:Qe.Short},queryClient:o})=>{let{refetchInterval:s}=r,a=Dc(e),c=t&&e!=null&&e.data.length>0;return{queryKey:ye.tempPrices(n),staleTime:ue.Immediate,gcTime:Xt.Never,refetchInterval:s,queryFn:i(()=>Rc({queryClient:o,queries:a}),"queryFn"),enabled:c}},"getPricesQueryConfig");function oi({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Qe.Short}}){let r=X(),o=(0,Fc.useMemo)(()=>Ic(e.data),[e]);return R(Lc({query:e,enabled:t,key:o,queryOptions:n,queryClient:r}))}i(oi,"usePrices");u();l();var ii=i(()=>R({queryKey:ye.priceError(),queryFn:i(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0}),"usePricesErrorCount");u();l();u();l();var YA=g.object({caip19:g.string(),price:g.number().nullish(),priceChange24h:g.number().nullish(),lastUpdatedAt:g.string(),marketCap:g.string().nullish()}),Yf=[g.literal("1H"),g.literal("1D"),g.literal("1W"),g.literal("1M"),g.literal("YTD"),g.literal("ALL")],XA=g.union(Yf).nullish().transform(e=>e??"1D");var Xf=[g.literal("1m"),g.literal("5m"),g.literal("1h"),g.literal("4h"),g.literal("1d"),g.literal("1w"),g.literal("4w"),g.literal("1mo")],JA=g.union(Xf).nullish().transform(e=>e??"1d"),Jf=g.object({unixTime:g.number(),value:g.string()}),Oc=g.object({history:g.array(Jf)});var Dn=new Error("Price history unavailable for this token"),si=new Error("Insufficient data for this time frame and token"),Zf=i(async({caip19:e,timeFrame:t})=>{let n=Ye(e);if(lt.get(n.chainId)?.pricesDisabled)throw Dn;let o=await re.api().get("/price-history/v1",{params:{token:e,type:t}});if(o.status===400)throw Dn;let s=Oc.safeParse(o.data);if(!s.success)throw Dn;if(s.data.history.length<2)throw si;return s.data.history},"fetchPriceHistory"),_f=i(({caip19:e,timeFrame:t})=>({queryKey:ye.priceHistory(e,t),queryFn:i(()=>Zf({caip19:e,timeFrame:t}),"queryFn"),staleTime:ue.Short,gcTime:ue.Short}),"getPriceHistoryQueryConfig"),Uc=i(e=>R(_f(e)),"usePriceHistory");u();l();var em=1*60*1e3,tm=i(e=>{let t=e.queryKey[1];return Object.prototype.hasOwnProperty.call(t??{},"id")?e.state.dataUpdatedAt>Date.now()-em:String(t)===ye.priceError()[1]},"pricesShouldDehydrateQueryPredicate");u();l();u();l();u();l();var Vc=L(Kc()),Rr=L(Qd());(0,Vc.default)(Rr.default.localeData("en"),{abbreviations:{thousand:"K",million:"M",billion:"B",trillion:"T"}});u();l();var Hc=i(e=>{let t=e?Math.floor(Math.log10(e)):0,n=t<0?Math.pow(10,1-t):100;return Math.round(e*n)/n},"roundToTwoTrailingDecimals");var dm=i(e=>{let t=Math.abs(e);if(t<1e3)return e;let n=Math.floor(Math.log10(t)),r=n>=6?1e5:n>=5?1e3:100;return Math.sign(e)*Math.floor(t/r)*r},"floorForDisplay"),Gc=i((e,t={})=>{let n=typeof e=="number"?e:V(e).toNumber(),{includePlusPrefix:r=!1,prefix:o="",infix:s="",suffix:a="",extendedDecimalsForSmallNumbers:c=!1,minimumAmount:f=.01,format:d="0,0.[00]",decimalFormatSmallNumbers:m="0.[00]",roundDecimals:p=!1}=t,h=n<0?"-":"",b=r&&n>0?"+":h,E=p?Hc(Math.abs(n)):Math.abs(n);if(t.compact&&E>=1e3&&(E=Math.abs(dm(n))),Math.abs(n)>=f||n===0){let w=Math.abs(n)>1?t.compact?"0.[00]a":d:m,S=(0,Rr.default)(E).format(w);return`${o}${b}${s}${S}${a}`}else if(c){let w=new V(E).abs().toFormat();return`${o}${b}${s}${w}${a}`}else return`${o}${b}<${s}${new V(f).toFormat()}${a}`},"formatNumber");var se=L(Q());u();l();var Qc=i(({priceHistory:e,realtimePriceUpdates:t})=>{let n=e.at(-1),r=e.at(-2);if(!n||!r)return e.map(c=>({...c,tooltipUnixTime:c.unixTime}));let o=n.unixTime-r.unixTime,s=t.map((c,f)=>({unixTime:n.unixTime+(f+1)*o,value:c.value,tooltipUnixTime:c.unixTime}));return[...e.map(c=>({...c,tooltipUnixTime:c.unixTime})),...s]},"ensureConsistentIntervals");u();l();var qc=i(({priceHistory:e,currentPrice:t})=>{let n=e.at(-1),r=e.at(-2),o=e.map(c=>({...c,tooltipUnixTime:c.unixTime}));if(t===void 0||!n||!r)return o;let s=n.unixTime-r.unixTime,a={unixTime:n.unixTime+s,value:t.toString(),tooltipUnixTime:n.unixTime+s};return[...o,a]},"ensureLatestPricing");u();l();var jc=L(Gd()),Jt=L(Q());var $c=i((e,t=100)=>{let[n,r]=(0,Jt.useState)(e),o=(0,Jt.useMemo)(()=>(0,jc.default)(s=>r(s),t),[t]);return(0,Jt.useEffect)(()=>o(e),[o,e]),n},"useThrottle");var fm=i(({error:e,chainId:t,prices:n,isPending:r})=>{if(lt.get(t).pricesDisabled)return ne.t("assetDetailPriceNoValue");if(e===Dn)return ne.t("assetDetailPriceHistoryUnavailable");if(e===si||!r&&n.length===0)return ne.t("assetDetailPriceHistoryInsufficientData");if(e)return ne.t("assetDetailPriceHistoryError")},"getErrorText"),mm=i(({caip19:e,userLocale:t="en-US",timeFrame:n="1D"})=>{let{t:r}=Be(),o=Ke(),s=X(),[a,c]=(0,se.useState)(n),f=(0,se.useCallback)(Z=>{if(Z!==a){c(Z);try{let{symbol:be}=s.getQueryData(vr.tokenDetails({caip19:e,includePrice:!0}))||{};o.capture("onPublicFungibleTimeframeChanged",{data:{timeFrame:Z,caip19:e,symbol:typeof be=="string"?be:void 0}})}catch(be){console.error("error capturing onPublicFungibleTimeframeChanged",be)}}},[o,e,s,a]),{data:d,isPending:m,error:p}=Uc({caip19:e,timeFrame:a}),{data:h}=Rt({query:{data:e},queryOptions:{refetchInterval:Qe.VeryShort,staleTime:ue.VeryShort}}),b=(0,se.useMemo)(()=>{if(d){if(h?.price&&h.lastUpdatedAt&&d){let Z=h.price,be=new Date(h.lastUpdatedAt),Kt={value:Z.toString(),unixTime:Math.floor(be.getTime()/1e3)};return Qc({priceHistory:d,realtimePriceUpdates:[Kt]})}return qc({priceHistory:d,currentPrice:h?.price})}},[d,h?.price,h?.lastUpdatedAt]),w=Ye(e).chainId,S=h?.price,k=h?.usd_24h_change,H=(0,se.useMemo)(()=>!S||!k?null:S/(1+k/100),[S,k]),[z,ae]=(0,se.useState)(null);(0,se.useEffect)(()=>{b?.length&&ae(b)},[b,ae]);let ce=(0,se.useMemo)(()=>b||z||[],[b,z]),ve=fm({error:p,chainId:w,prices:ce,isPending:m});(0,se.useEffect)(()=>{ve&&ae(null)},[ve]);let ee=(0,se.useMemo)(()=>[{timeFrame:"1H",label:r("assetDetailTimeFrame1H")},{timeFrame:"1D",label:r("assetDetailTimeFrame1D")},{timeFrame:"1W",label:r("assetDetailTimeFrame1W")},{timeFrame:"1M",label:r("assetDetailTimeFrame1M")},{timeFrame:"YTD",label:r("assetDetailTimeFrameYTD")},{timeFrame:"ALL",label:r("assetDetailTimeFrameAll")}].map(Z=>({...Z,label:Z.label?.toUpperCase()})),[r]),[Ce,Pe]=(0,se.useState)(null),Re=$c(Ce,100),[v,T]=(0,se.useMemo)(()=>{if(!ce.length)return[H??null,S??null];let[Z,be]=[ce[0],ce[ce.length-1]].map(Kt=>new V(Kt.value).toNumber());return[Z,S||be]},[S,H,ce]),C=(0,se.useMemo)(()=>Re??T,[Re,T]),x=(0,se.useMemo)(()=>T===null||v===null?null:T-v,[v,T]),M=(0,se.useMemo)(()=>C===null||v===null?null:C-v,[C,v]),N=(0,se.useMemo)(()=>{if(M===null||v===null||v===0)return null;let Z=M/v*100;return`${Gc(Z,{includePlusPrefix:!0})}%`},[M,v]),G=(0,se.useCallback)(Z=>{let be=new Date(Z*1e3),Kt=be.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"}),fs=be.toLocaleString(t,{month:"short",day:"2-digit"}),kd=be.getFullYear(),ms=ce.at(-1);if(ms&&ms.unixTime===Z)return r("assetDetailPriceHistoryNow");switch(a){case"1H":case"1D":return Kt;case"1W":case"1M":return`${Kt}, ${fs}`;case"YTD":case"ALL":return`${fs}, ${kd}`;default:return a}},[t,ce,a,r]),j=(0,se.useMemo)(()=>lt.get(w).pricesDisabled??!1,[w]);return{activeTimeFrame:a,setActiveTimeFrame:f,prices:ce,isPending:m,errorText:ve,timeFrames:ee,setScrubValue:Pe,scrubValue:Re,currentPrice:C,overallPriceChange:x,currentPriceChange:M,formattedPercentageChange:N,formatTimeFrameText:G,hidePriceAmounts:j,hideTimeFrames:j}},"usePriceHistoryState");u();l();u();l();var ai=g.object({feerate:g.string()}),Wc=g.object({conservative:ai,economical:ai,unset:ai}),pm=g.object({recommended:g.object({priceEstimates:Wc}),bitcoin_rpc:g.object({priceEstimates:Wc})}),hm=g.object({gasPriceSources:pm}),ym=new Y("1.25"),gm=new Y("1.5"),zc=i(async(e,t=!0)=>{let n,r,o;try{let{priceEstimates:s}=(await bm(e)).gasPriceSources.recommended,{conservative:a,economical:c,unset:f}=s;n=new Y(a.feerate),r=new Y(c.feerate),o=new Y(f.feerate)}catch(s){if(!t)throw s;let a=await ma(e).estimateSmartFee(2,"ECONOMICAL");o=new Y(a.feerate),r=o.times(ym),n=o.times(gm)}return{[pe.fast]:{btcPerKilobyte:n.multipliedBy(1)},[pe.standard]:{btcPerKilobyte:r.multipliedBy(1)},[pe.slow]:{btcPerKilobyte:o.multipliedBy(1)}}},"getBitcoinTransactionSpeeds");async function bm(e){let t=`https://gas-price-oracle.phantom.app/?chainId=${e}`,n=await re.headers({"Content-Type":"application/json"}).get(t);return hm.parse(n.data)}i(bm,"getBitcoinTransactionUnitCosts");u();l();var Zt="gas-estimation";var Em=3,Tm=600,wm=P({seconds:30}),Ft=i(({networkID:e,enableFallback:t=!1,retry:n=Em,retryDelay:r=Tm,enabled:o=!0})=>R({queryFn:i(async()=>{try{if(!e)throw new Error("Missing networkID");if(A.isBitcoinNetworkID(e))return await zc(e,t);if(A.isEVMNetworkID(e))return await ta(e,t);if(A.isSolanaNetworkID(e))throw new Error("Transaction speeds is not supported for Solana.");if(A.isSuiNetworkID(e))throw new Es("transaction speeds to unit cost");return Fe(e)}catch(s){throw s instanceof ea||(B.addBreadcrumb(Zt,`enableFallback: ${t}, networkID: ${e}`,te.Info),B.captureError(s,K.Transaction)),s}},"queryFn"),queryKey:q.transactionSpeedsToUnitCost(e),refetchOnMount:"always",retry:n,retryDelay:r,staleTime:wm,enabled:o&&!!e&&(A.isEVMNetworkID(e)||A.isBitcoinNetworkID(e)),placeholderData:ar}),"useTransactionSpeedsToUnitCost");u();l();u();l();var Yc=i(async(e,t)=>{let n=Js(e),r=await $s.eth_estimateGas(n,[t]);if("error"in r)throw new Error(`[${r.error.code}] ${r.error.message}`);return new Y(r.result)},"estimateGas");var ux=new Y(21e3),vm=6,Am=600,Sm=P({seconds:5}),xm=P({days:1}),ci=i((e,t=!0)=>R({queryFn:i(async()=>{if(!e)throw new Error("Args is required for calculating transaction units.");try{return await Cm(e)}catch(r){throw B.addBreadcrumb(Zt,`networkId: ${e?.networkID}`,te.Info),B.captureError(r,K.Transaction),r}},"queryFn"),queryKey:q.transactionUnitAmount(e),enabled:!!e&&(A.isEVMNetworkID(e.networkID)||A.isBitcoinNetworkID(e.networkID))&&t,retry:vm,retryDelay:Am,staleTime:Sm,gcTime:xm}),"useTransactionUnitAmount"),Cm=i(async e=>{if(yr(e)){let{gas:t}=e.unsignedTransaction;if(t)return{gasLimit:new Y(t,16)};{let n=await Yc(e.networkID,e.unsignedTransaction);return{gasLimit:new Y(na(n))}}}else if(hr(e)){let t=e.psbtChain,n=t?new Y(wo(t.map(o=>o.additionalCost.vb.toNumber()))):new Y(0),r=t?new Y(wo(t.map(o=>o.additionalCost.sats.toNumber()))):new Y(0);return{virtualBytes:new Y(e.vb),additionalCosts:{vb:n,sats:r}}}else throw new Error(`Unsupported transaction networkId: ${e.networkID} for calculating transaction units.`)},"getTransactionUnitAmount");u();l();u();l();var Fr=L(Id(),1),Jc=L(Vt(),1);var Xc=(0,Fr.struct)([(0,Fr.u8)("instruction")]);function Zc(e,t,n,r=[],o=gn){let s=Ia([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],n,r),a=Buffer.alloc(Xc.span);return Xc.encode({instruction:Ra.CloseAccount},a),new Jc.TransactionInstruction({keys:s,programId:o,data:a})}i(Zc,"createCloseAccountInstruction");u();l();var Pm=P({seconds:30}),Mm=P({minutes:5}),_c=i(e=>R({queryKey:q.transactionAdditionalCosts(e),queryFn:i(async()=>{if(!e)return new Y(0);let t=Mt.get(e.networkID).additionalTransactionCost;return t?await t(e):new Y(0)},"queryFn"),enabled:!!e,staleTime:Pm,gcTime:Mm}),"useTransactionAdditionalCosts");var Nm=6,Dm=600,km=P({seconds:5}),Rm=P({days:1}),Fm=[pe.fast,pe.standard,pe.slow],Im=i(e=>{if(!e)return pe.fast;for(let t of Fm)if(e[t])return t;throw new Error("No valid transaction speeds found.")},"getFastestSpeed"),ui=i(e=>{let t=Um(e),n=e?.queryOptions?.refetchInterval,{data:r,isError:o}=ci(e?.multichainTransaction,t),{data:s}=Ft({networkID:e?.networkID,enableFallback:!0,refetchInterval:n}),{data:a}=_c(e?.multichainTransaction),c=Om(e,r,s);return R({queryFn:i(async()=>{try{if(!e)throw new Error("Missing args");let{multichainTransaction:d,transactionSpeed:m=pe.standard}=e;if(!d)throw new Error("Multichain transaction is null.");if(o&&li(e.networkID))throw new Error("Transaction unit amount is required but errored.");if(yr(d)||hr(d)){if(!s)throw new Error("Missing transactionSpeedsToUnitCost");if(!r)throw new Error("Missing transactionUnit");let p=m==="fastest"?Im(s):m,h=s[p];if(!h)throw new Error(`Missing transactionSpeedsToUnitCost for ${m}`);return jt(d.networkID,h,r,a)}if(la(d))return d.networkID===rr.Localnet?{networkID:d.networkID,value:0,highFees:!1}:await La(d.networkID,d.transaction.map(h=>"version"in h?h.message:h.compileMessage()));if(da(d))return await Ma(d);Fe(d)}catch(d){throw B.addBreadcrumb(Zt,`chainId: ${e?.networkID}`,te.Info),B.captureError(d,K.Transaction),d}},"queryFn"),queryKey:q.gasEstimation(e?.networkID,e?.multichainTransaction,e?.transactionSpeed,a),enabled:c,retry:Nm,retryDelay:Dm,refetchInterval:n,staleTime:km,gcTime:Rm,placeholderData:i(d=>d,"placeholderData")})},"useGasEstimation");function li(e){return A.isBitcoinNetworkID(e)||A.isEVMNetworkID(e)?!0:A.isSolanaNetworkID(e)||A.isSuiNetworkID(e)?!1:Fe(e)}i(li,"isTransactionUnitAmountRequired");function Lm(e){return A.isBitcoinNetworkID(e)||A.isEVMNetworkID(e)?!0:A.isSolanaNetworkID(e)||A.isSuiNetworkID(e)?!1:Fe(e)}i(Lm,"isTransactionUnitCostsBySpeedRequired");function Om(e,t,n){if(!e)return!1;let{networkID:r,multichainTransaction:o}=e;return o?(!!t||!li(r))&&(!!n||!Lm(r)):!1}i(Om,"calculateGasEstimationEnabled");function Um(e){return e?li(e.networkID):!1}i(Um,"calculateTransactionUnitAmountEnabled");u();l();u();l();var Bm=new Error("missing price"),Km=new Error("Unable to format gas estimation"),Ir=i((e,t)=>{if(!t.usd)throw Bm;try{let n=A.getTokenDecimals(e.networkID);if(pr(e)){let r=Ea(e),s=new V(r).div(yn(n)).times(new V(t.usd));return{gasEstimationPriceUSD:hn(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else if(Gt(e)){let r=Ta(e),s=r.div(new V(me.LAMPORTS_PER_SOL)).times(t.usd);return{gasEstimationPriceUSD:hn(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else if(mr(e)){let o=aa(e.gasBudget,n).times(t.usd);return{gasEstimationPriceUSD:hn(o),gasEstimationPriceUSDNumber:o.toNumber(),gasEstimationAmount:e.gasBudget}}else if(Qt(e)){let r=wa(e),s=new V(r).div(yn(n)).times(t.usd);return{gasEstimationPriceUSD:hn(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else throw Fe(e),new Error("unsupported chain type")}catch{throw Km}},"createGasEstimationPrice");var Vm=i((e,t,n)=>{let r=e?A.getChainID(e):null,o=r?or(r):void 0,{data:s,isFetched:a}=Rt({query:{data:o}}),c=!!e&&!!t&&a,f=q.gasEstimationPrice(e,t);return R({enabled:c,queryKey:f,queryFn:i(()=>{if(!s||!t)throw new Error("missing args");return Ir(t,s)},"queryFn"),refetchOnMount:!0,placeholderData:ar,...n||{}})},"useGasEstimationPrice");u();l();var ou=L(dr(),1),iu=L(qd(),1);u();l();var eu=Object.prototype.hasOwnProperty;function tu(e,t,n){for(n of e.keys())if(It(n,t))return n}i(tu,"find");function It(e,t){var n,r,o;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&It(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(o=r,o&&typeof o=="object"&&(o=tu(t,o),!o)||!t.has(o))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(o=r[0],o&&typeof o=="object"&&(o=tu(t,o),!o)||!It(r[1],t.get(o)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(eu.call(e,n)&&++r&&!eu.call(t,n)||!(n in t)||!It(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}i(It,"dequal");var Rn=L(Q(),1);u();l();var kn=L(dr(),1),nu=L(Q(),1);function ru(e,t){let n=(0,nu.useRef)((0,kn.default)());R({queryKey:["PENDING-TX-POLLER",e],enabled:e.length>0,queryFn:i(()=>ba(e,t),"queryFn"),refetchInterval:i(()=>(0,kn.default)().diff(n.current,"seconds")<30?5*1e3:(0,kn.default)().diff(n.current,"minutes")<2?15*1e3:(0,kn.default)().diff(n.current,"minutes")<5?30*1e3:!1,"refetchInterval")})}i(ru,"usePendingTransactionsFromEndpoint");ou.default.extend(iu.default);var Fn=i(e=>{let t=Ne(),n=(0,Rn.useRef)([]),r=(0,Rn.useRef)([]);(0,Rn.useEffect)(()=>{n.current=[],r.current=[]},[e]);let o=q.pendingTransactions(e),s=i(async()=>{let a=await ha(t),c=ya(a,e);if(!It(c,n.current)){let f=n.current.filter(d=>!c.find(m=>m.id===d.id));It(f,r.current)||(r.current=f),n.current=c}return{pendingTransaction:n.current,removedPendingTransactions:r.current}},"queryFn");return ru(e,t),R({queryKey:o,queryFn:s,refetchInterval:1e3,staleTime:500,gcTime:0,refetchOnMount:!0,enabled:!!e.length})},"usePendingTransactions");u();l();var uu=L(Q(),1);u();l();var su=i(e=>({connection:qt(e),cluster:br(e)}),"solanaNetworkIDToConnection"),au=i(()=>su(St.Solana.Mainnet),"getDefaultSolanaConnection"),cu=i(e=>{let t,n=e?.addresses??[];for(let o of n)if(A.isSolanaNetworkID(o.networkID)){t=o.networkID;break}let r=t??St.Solana.Mainnet;return su(r)},"selectSolanaConnection");var In=i(()=>{let e=(0,uu.useMemo)(au,[]),{data:t=e}=Ve({select:cu});return t},"useSelectedSolanaConnection");u();l();u();l();var _e=L(Q(),1);var lu=(0,_e.createContext)(null),Hm=i(({children:e})=>{let{data:t}=qs(),{data:n,isLoading:r}=go(t),o=t&&n?mo[t].languageCode:lr.languageCode,s=t||lr.value,a=t&&n?mo[t].symbol:lr.symbol,c=(0,_e.useCallback)((p,h)=>Intl.NumberFormat(o,{style:"currency",currency:s,...h}).format(p),[s,o]),f=(0,_e.useCallback)(p=>!t||!n?Number(p):V(p).div(V(n)).toNumber(),[t,n]),d=(0,_e.useCallback)((p,h)=>{if(!t||!n)return Number(p);let b=V(p).times(V(n));return h===void 0?b.toNumber():b.decimalPlaces(h).toNumber()},[t,n]),m={isLoading:r,currencyLocale:o,currencySymbol:a,currencyCode:s,toUsd:f,fromUsd:d,formatLocalizedPrice:c};return _e.default.createElement(lu.Provider,{value:m},e)},"LocalizedCurrencyProvider"),Ln=i(()=>{let e=(0,_e.useContext)(lu);if(!e)throw new Error("useLocalizedCurrency must be used within a LocalizedCurrencyProvider");return e},"useLocalizedCurrency");u();l();u();l();var Bu=L(Q(),1);u();l();var du=i(async e=>{try{return await Zs(St.Ethereum.Mainnet).resolveName(e)}catch(t){return console.error(t),null}},"resolveEVMDomainName");u();l();var fu=i(async(e,t)=>{let n="/uns/v1/resolve";try{let r=await re.api().headers({"Content-Type":"application/json"}).post(n,{query:e,chainId:t});if(!Ue(r))throw Eo;let o=r.data;if(o.address===""||o.status!=="OK")throw Eo;return o.address}catch{return null}},"resolveSolanaHandle");u();l();var Lu=L(Iu(),1);var Ou=i(async(e,t)=>{try{if(!A.isSolanaNetworkID(t))return null;let n=br(t),r=pa(n),s=await new Lu.TldParser(r).getOwnerFromDomainTld(e);return s?s.toString():null}catch{return null}},"fetchAnsDomainOwner");u();l();var Uu=i(async(e,t)=>{try{if(!A.isSuiNetworkID(t))return null;let n=fa(t);return e.toLowerCase().endsWith(".sui")&&await n.resolveNameServiceAddress({name:e})||null}catch{return null}},"fetchSuiNsDomainOwner");function xi(e,t){let n=e?.toLowerCase(),r=Ci(n,t),o=r.error,s=(0,Bu.useMemo)(()=>o===fr?ne.t("sendFormErrorInvalidDomain"):o===zs?ne.t("sendFormErrorInvalidSolanaAddress"):o===Ys?ne.t("sendFormErrorInvalidTwitterHandle"):o===bo?ne.t("sendFormErrorInvalidUsername"):"",[o]);return{...r,error:s}}i(xi,"useResolveDomainOwner");function Ci(e,t){let n=Vs(),r=Ke(),o=!!e&&!!t,s=q.resolveDomainName(e,t);return R({queryKey:s,queryFn:i(async()=>{if(!e||!t)throw Ws;let c=await Ku(e,t,n,r);return{address:c?.owner??null,type:c?.type??null,handle:e}},"queryFn"),enabled:o})}i(Ci,"useFetchDomainOwner");var Dp=i(async(e,t)=>{try{if(e.startsWith("@")||!A.isEVMNetworkID(t))return null;let[n]=Bs(e);if(n){let r=await du(e);if(!r)throw fr;return r}return null}catch(n){return B.captureError(n instanceof Error?n:new Error(`Unable to resolve EVM domain: ${e}`),K.Transaction),null}},"fetchEVMDomainOwner"),kp=i(async(e,t,n)=>{try{if(e.startsWith("@")||!A.isSolanaNetworkID(t))return null;let[r,o,s]=Us(e);(r||o||s)&&n.capture("resolveDomainBonfida");let a=r||o||s,c=null;if(a&&(c=await fu(e,t),!c))throw fr;return c}catch(r){return B.captureError(r instanceof Error?r:new Error(`Unable to resolve solana domain: ${e}`),K.Transaction),null}},"fetchSolanaDomainOwner"),Rp=i(async(e,t,n)=>{try{if(!e.startsWith("@"))return null;let r=e.slice(1),o=await n.getUserProfileByUsername(r),s=o?.username?.toLowerCase()===r.toLowerCase(),a=o?.addresses?o.addresses?.[t]!==void 0:!1,c=!!o&&s&&a,f=null;if(c&&(f=o.addresses[t],!f))throw bo;return f}catch(r){return B.captureError(r instanceof Error?r:new Error(`Unable to resolve username: ${e}`),K.Auth),null}},"fetchUsernameDomainOwner");async function Ku(e,t,n,r){let o=sr.isFeatureEnabled("kill-suins"),s=[{type:"username",fetch:Rp(e,t,n)},{type:"solana",fetch:kp(e,t,r)},{type:"evm",fetch:Dp(e,t)},{type:"ans",fetch:Ou(e,t)}];o||s.push({type:"suins",fetch:Uu(e,t)});let a=await Promise.all(s.map(({fetch:f})=>f)),c=a.findIndex(f=>f!==null);return c===-1?null:{type:s[c].type,owner:a[c]}}i(Ku,"fetchDomainOwner");u();l();var Vu=L(Q(),1);function Fp(e,t){let n=js(e,500),{data:r,error:o,isLoading:s}=xi(n,t),c=r?.address??e,f=e.length>0,m=!f||e!==n||s,p=(0,Vu.useMemo)(()=>{if(m)return;if(o)return o;if(!As(c,t))return ne.t("sendFormInvalidAddress",{assetName:A.getChainName(t)})},[t,m,o,c]);return{recipientError:p,currentRecipient:c,isStaleRecipient:m,disabledDueToRecipient:!!p||m||!f,isRecipientLoading:s&&e!==""}}i(Fp,"useRecipient");u();l();var Ip=3,Lp=500,Op=5e3,Up=i((e,t,n)=>R({async queryFn(){if(A.isEVMNetworkID(e))try{return await Bp(e,t,n)}catch(r){throw B.captureError(r,K.Transaction),r}},queryKey:q.gasEstimationTimeToMine(e,t,n),retry:Ip,retryDelay:Lp,refetchInterval:Op,enabled:A.isEVMNetworkID(e)&&A.isMainnetNetworkID(e)}),"useEvmTimeToMineEstimate");async function Bp(e,t,n){let r=`https://gas-price-oracle.phantom.app/time_to_mine?chainId=${e}&maxFeePerGas=${t}&maxPriorityFeePerGas=${n}`,o={Accept:"application/json","Content-Type":"application/json"},s=await re.headers(o).get(r);if(s.status!==200)throw new Error("Error estimating time to mine");return s.data}i(Bp,"fetchEvmTimeToMineEstimate");u();l();u();l();var Kp=i(({networkID:e,refetchInterval:t,transactionSpeed:n=pe.standard,gasLimit:r,enabled:o=!0})=>{let{data:s,status:a,fetchStatus:c,isError:f,isPending:d,isFetched:m,isSuccess:p}=Ft({networkID:e,refetchInterval:t,enableFallback:!0,enabled:o}),h;if(o&&s&&r){let{maxFeePerGas:E,maxPriorityFeePerGas:w}=s[n];h={networkID:e,gasLimit:r,maxFeePerGas:E,maxPriorityFeePerGas:w}}return{status:a,data:h,isError:f,isLoading:d,fetchStatus:c,hasFailed:m&&!p}},"useEvmGasEstimation");u();l();var Hu=i(e=>{let t=e[0]?.networkID,n=t?A.getChainID(t):null,r=n?or(n):void 0,{data:o}=Rt({query:{data:r}});return Os({queries:e.map(a=>({queryKey:q.gasEstimationPrice(t,a),queryFn:i(()=>{if(!o||!a)throw new Error("missing args");return Ir(a,o)},"queryFn")}))}).map(a=>a.data)},"useGasEstimationPrices");u();l();var Gu=L(Q(),1);var Vp=P({days:5}),Hp=i(()=>{let e=Ke(),t=X(),{data:n={}}=R({queryKey:q.timestamps(),queryFn:i(()=>({...t.getQueryData(q.timestamps())||{}}),"queryFn")});(0,Gu.useEffect)(()=>{let r=Object.values(n),{staleTimestampDatas:o,freshTimestampDatas:s}=r.reduce((c,f)=>{let d=Math.max(...Object.values(f.timestamps));return Date.now()-d>Vp?c.staleTimestampDatas.push(f):c.freshTimestampDatas.push(f),c},{staleTimestampDatas:[],freshTimestampDatas:[]});oa(t,o?.map(c=>c.transactionId)??[]);let a=s.filter(c=>c.timestamps.appUpdated);ia(a,e,t)},[n,e,t])},"useLogTimestamps");u();l();var Qu=L(Q(),1);var Pi=i((e,t,n=!1)=>{let r=X();return(0,Qu.useCallback)((s,a,c)=>{if(s===void 0)return;let f=q.timestamps(),m=r.getQueryData(f)||{[s]:{chainId:t,transactionType:e,isLedger:n,transactionId:s,timestamps:{}}},p=m[s];if(p?.timestamps[a])return;let h={...m,[s]:{...p||{chainId:t,transactionType:e,isLedger:n,transactionId:s,timestamps:{}},timestamps:{...p?.timestamps??{},[a]:c??Date.now()}}};r.setQueryData(f,h)},[t,n,r,e])},"useMarkTimestamp");u();l();function Gp(e){let t=Ne(),n=Je();return Xe({mutationFn:i(async o=>await $t({...o,accountSigner:n,connection:e,storage:t}),"mutationFn")})}i(Gp,"useSignAndSendSolanaTransactionAsync");u();l();u();l();function qu(e){return e!=null}i(qu,"nonNullable");var Gn=L(Q(),1);var Qp={[pe.fast]:"gasFast",[pe.standard]:"gasAverage",[pe.slow]:"gasSlow"};function qp(e,t,n){let[r,o]=(0,Gn.useState)(t),s=n??sa(e),{data:a={}}=Ft({networkID:e}),c=(0,Gn.useMemo)(()=>Object.keys(a).reduce((S,k)=>{let H=k,z=a[H];return z&&(S[H]=jt(e,z,s,void 0)),S},{}),[a,e,s]),f=Object.keys(c),d=Object.values(c),m=Hu(Object.values(c)),p=d.map(S=>gr(S)),{fromUsd:h,formatLocalizedPrice:b}=Ln(),E=f.map((S,k)=>{let H=d[k],z=m[k],ae=p[k];return jp(z,ae,S,H,h,b)});return{presets:(0,Gn.useMemo)(()=>E.map((S,k)=>({description:S,title:ne.t(Qp[f[k]]),selected:r===f[k],onClick:i(()=>o(f[k]),"onClick"),withBorderTop:k!==0})),[E,f,r]),transactionSpeed:r}}i(qp,"useTransactionSettingsViewState");var jp=i((e,t,n,r,o,s)=>{let a=[],c=e?.gasEstimationPriceUSDNumber?o(e?.gasEstimationPriceUSDNumber):void 0,f=c?s(c,{maximumFractionDigits:4}):void 0,d=f?ne.t("gasUpTo",{amount:f}):t?ne.t("gasUpTo",{amount:t}):void 0;a.push(d);let m=r?Mt.get(r.networkID).transactionSettingsRowFeeDescription?.(r):void 0;a.push(m);let p=r?.networkID;if(p){let h=Mt.get(p).transactionSpeedDescription(n);h&&a.push(ne.t(h))}return a.filter(qu).join("  \u2022  ")},"getSpeedDescriptionString");u();l();function $p(e){let{data:t}=Fn(e?[e]:[]);if(e&&A.isBitcoinNetworkID(e.networkID))return!t||t.pendingTransaction.length===0?void 0:{title:ne.t("sendSummaryBitcoinPendingTxTitle"),description:ne.t("sendSummaryBitcoinPendingTxDescription"),buttonText:ne.t("gotIt")}}i($p,"useTxSubmissionCheck");u();l();var ju=L(Q(),1);u();l();var Qr=Ks(Ne,e=>Sa(new Aa(e)));var Wp="transactions-utxo-state",zp=6,Yp=600,Xp=P({seconds:30}),Jp=P({seconds:5}),Zp=P({minutes:10}),Mi=i(e=>{let t=Qr(),n=mn("enable-bypass-utxo-protection");return R({queryFn:$u(e,t,n),queryKey:q.utxoState(e,n),enabled:Wu(e),retry:zp,retryDelay:Yp,refetchInterval:Xp,staleTime:Jp,gcTime:Zp})},"useUtxoState");function _p(e){let t=Qr(),n=X(),r=mn("enable-bypass-utxo-protection"),o=q.utxoState(e,r);(0,ju.useEffect)(()=>{Wu(e)&&n.prefetchQuery({queryKey:o,queryFn:$u(e,t,r)})},[])}i(_p,"usePrefetchUtxoState");function $u(e,t,n){return async()=>{try{if(!e)throw new Error("chainAddress not provided when fetching utxo state.");if(fo(e)){await t.refetchUtxos(e,n);let[r,o,s]=await Promise.all([t.getSafeToSendUtxos(e.address,n),t.getInscribedUtxos(e.address),t.getRareSatsUtxos(e.address)]);return{safeToSendUtxos:r,inscribedUtxos:o,rareSatsUtxos:s}}else throw new Error(`Unsupported chain address type for fetching utxo state: ${e.addressType}`)}catch(r){if(nr(r)){let o=r.response?.status;xa(r,o,Wp)}throw r}}}i($u,"queryFn");function Wu(e){return!!e&&fo(e)}i(Wu,"enabled");u();l();function eh(e,t){let n=e?.toLowerCase(),{data:r}=Ci(n,t);return r?.address||e}i(eh,"useResolveDomainOwnerIfNecessary");u();l();var th=i(({networkID:e,gasEstimation:t,gasEstimationPrice:n})=>{let r=gr(t),{fromUsd:o,formatLocalizedPrice:s}=Ln(),a=n?.gasEstimationPriceUSDNumber?o(n?.gasEstimationPriceUSDNumber):void 0,c=a?s(a,{maximumFractionDigits:4}):void 0,f=!A.isMainnetNetworkID(e),d=c&&!f?c:r||void 0;return Mt.get(e).networkFeeRowString(d,c)},"useNetworkFee");u();l();var zu=L(Q(),1);function nh(e,t,n){let r=e.data.transactions[e.data.transactions.length-1],{data:o}=Fn(n?.addresses||[]),s=e.networkID;(0,zu.useEffect)(()=>{let S=o?.pendingTransaction.find(k=>k.id===e.id);(!S||S.data.transactions.some(k=>k.confirmations>0))&&t()},[o?.pendingTransaction,t,e]);let a={networkID:s,unsignedTransaction:r.unsignedTransaction},{data:c,status:f}=ui({networkID:s,transactionSpeed:pe.fast,multichainTransaction:a,queryOptions:{refetchInterval:!1}}),d=new Y(r.unsignedTransaction.maxFeePerGas??"0"),m=c?.maxFeePerGas&&c?.maxFeePerGas.gt(d)?c?.maxFeePerGas:d,p=new Y(r.unsignedTransaction.maxPriorityFeePerGas??"0"),h=c?.maxPriorityFeePerGas&&c?.maxPriorityFeePerGas.gt(p)?c?.maxPriorityFeePerGas:p,b=m?.multipliedBy(1.11).integerValue(),E=h?.multipliedBy(1.11).integerValue();return{data:jt(s,{maxFeePerGas:b,maxPriorityFeePerGas:E},{gasLimit:new Y(r.unsignedTransaction.gas??"0")},c?.l1Fee),status:f}}i(nh,"useReplacementEvmTransactionGasEstimate");u();l();var rh=i(()=>{let e=sr.getMultivariateAssignment("frontend-transaction-sharing-delay-ms");if(!e)return vo;let t=parseInt(e);return Number.isNaN(t)?vo:t},"getTransactionSharingDelay"),oh=i(()=>({delayMs:rh()}),"useTransactionSharingConfig");u();l();u();l();var Yu=i(async(e,t,n)=>{let{accountIdentifier:r,nonce:o,pendingTransaction:s,pendingTransactionInput:a,gasEstimation:c}=t,{data:{transactions:f}}=s,d=f[f.length-1],{callPayload:m,unsignedTransaction:p}=d,{networkID:h}=s,b=await Er({accountSigner:e,accountIdentifier:r,networkID:h,unsignedTransaction:{...p,...ga(c),nonce:Pa(new Y(o))},callPayload:{...m},pendingTransactionInput:a,storage:n});return{networkID:h,id:b}},"speedUpEvmTransaction");function ih(){let e=Je(),t=Ne();return Xe({mutationFn:i(async r=>Yu(e,r,t),"mutationFn")})}i(ih,"useSpeedUpEvmTransaction");u();l();function sh(e,t){let n=Ke(),r=!!t,o=q.waitForTransactionConfirmation(t);return R({enabled:r,queryKey:o,queryFn:i(async()=>{if(!t){let a="Missing chainID or transactionReceipt.";throw new Error(a)}try{if(A.isSolanaNetworkID(t.networkID)){let a=qt(t.networkID);await Oa({connection:a,signature:t.id})}else if(A.isEVMNetworkID(t.networkID))await _s(t.networkID,t.id);else if(A.isBitcoinNetworkID(t.networkID))await Ca(t.networkID,t.id);else if(A.isSuiNetworkID(t.networkID))await Na(t.networkID,t.id);else throw new Error("Unsupported transaction receipt type.");return e(t),!0}catch(a){if(a&&a instanceof Xs)throw a;let c="Unable to send transaction.";a.message&&(c=a.message);let{networkID:f}=t,d={chainId:A.getChainID(f),networkId:f};throw n.capture("waitForTransactionConfirmationError",{data:{...d,errorMessage:a.message}}),new Error(c)}},"queryFn")})}i(sh,"useWaitForTransactionConfirmation");u();l();var ah=i(e=>{let t=e.transaction.getData();return R({queryKey:q.suiTransaction(t),queryFn:i(()=>Da(e),"queryFn")})},"useSuiTransaction");u();l();var ch=/[e|+|-]/i;function uh(e,t){let n=Math.floor(e*t*100)/100;return!Number.isFinite(n)||n.toString().match(ch)?0:n}i(uh,"assetToDollars");function lh(e,t,n){let r=V(e);return t<=0||!r.isFinite()?0:r.dividedBy(t).decimalPlaces(n).toNumber()}i(lh,"dollarsToAsset");u();l();u();l();function Ni({balance:e,priceId:t,priceMap:n}){let r=t?n[t]?.usd:void 0,o=t?n[t]?.usd_24h_change:void 0;if(r===void 0)return{usd:void 0,usd_24h_change:void 0,price:r};let s=e.multipliedBy(r),a;return o!==void 0&&(a=s.minus(s.dividedBy(1+o/100))),{usd:s.toNumber(),usd_24h_change:a?.toNumber(),price:r,priceChange24h:o,currencyValue:s.toNumber(),currencyChange:a?.toNumber()}}i(Ni,"calculatePriceData");u();l();u();l();u();l();var rt;(function(e){e.AccountIdToHiddenMints="accountIdToHiddenMints"})(rt||(rt={}));var dh=g.union([g.object({version:g.literal(1),value:g.record(g.array(g.string()))}),g.object({version:g.literal(2),value:g.record(g.array(g.object({mintId:g.string(),status:g.nativeEnum(bn)})))})]),fh=i((e,t)=>{let n=t,r=e;return n||r||null},"visibilityOverridesResolver"),[mh,Xu,Ju]=Ds("fungibles",[{key:rt.AccountIdToHiddenMints,type:"object",validator:dh,nullable:!0,resolver:fh,updateOn:"idle"}]),Zu=i((...e)=>fn(mh,...e),"useFungiblesStorage");var _u=L(Q());function Di(e){let t=Zu(rt.AccountIdToHiddenMints);return(0,_u.useMemo)(()=>{if(!e)return new Map;let o=(Wt(t??null)?.value??{})[e]??[];return new Map(o.map(s=>[s.mintId,s]))},[t,e])}i(Di,"useVisibilityOverrides");u();l();var el=L(Q());var ph=i(()=>{let{connection:e}=In(),{data:t}=Ve(),{solanaChainAddress:n,accountIdentifier:r}=(0,el.useMemo)(()=>({solanaChainAddress:t?.addresses.find(xt),accountIdentifier:t?.identifier??""}),[t]),o=Ne(),s=Je(),{t:a}=Be();return Xe({mutationFn:i(async c=>{if(!n)throw new Error("solanaChainAddress not loaded");if(c.type!==F.CompressedSPL)throw new Error("SPL is not compressed");let f=await Ua({owner:c.data.walletAddress,mint:c.data.mintAddress,amount:c.data.amount,programId:c.data.programId,connection:e}),{networkID:d,address:m}=n,p={ownerAddress:m,networkID:d,data:{signature:""},type:Ht.Decompress,display:{summary:{topLeft:{text:a("assetDetailClaiming")}}}};await $t({accountIdentifier:r,accountSigner:s,connection:e,feePayer:new me.PublicKey(m),pendingTransactionInput:p,storage:o,transaction:f,useSubmissionService:!1})},"mutationFn")})},"useDecompressSpl");u();l();u();l();var ot=L(Q());u();l();function tl(e){let t,n;for(let{data:r}of e){let{usd:o,usd_24h_change:s}=r;o!==void 0&&(t=t!==void 0?t+o:o),s!==void 0&&(n=n!==void 0?n+s:s)}return{value:t,earnings:n}}i(tl,"calculatePortfolio");u();l();function nl(e,t){return e.getQueriesData({predicate:i(r=>r.queryKey[0]===ja.transferFungibleLoggingContext,"predicate")}).map(([,r])=>r).filter(r=>{if(!r)return!1;let{previousBalance:o,fungibleKey:s}=r,a=t.get(s);return a?!a.data.balance.isEqualTo(o):!1})}i(nl,"checkForExpectedAppUpdates");u();l();var rl=i((e,t)=>{let n=Ee.transferFungibleLoggingContext(e);t.removeQueries({queryKey:n})},"removeLoggingContext");u();l();function ol({tokens:e,priceMap:t}){let n=[];for(let r of e){let{amount:o,decimals:s}=r.data,a=Sr(r),c=oe(a),f=Ar(r),d=Tn(o,s),m={type:r.type,data:{...r.data,balance:d,key:f}},p,h=Ni({priceId:c,balance:d,priceMap:t});if(r.type===F.SPL||r.type===F.CompressedSPL){let{mintAddress:b}=r.data;p=b}else if(r.type===F.ERC20||r.type===F.SuiCoin){let{contractAddress:b}=r.data;p=b}else if(r.type===F.BRC20){let{firstCreatedInscriptionId:b}=r.data;p=b}m.data.tokenAddress=p,m.data.usd=h.usd,m.data.price=h.price,m.data.usd_24h_change=h.usd_24h_change,m.data.priceChange24h=h.priceChange24h,m.data.currencyChange=h.currencyChange,m.data.currencyValue=h.currencyValue,n.push(m)}return n}i(ol,"tokensToFungibles");function Ot({showHiddenMints:e=!1,keys:t,enablePrices:n=!0,enableSorting:r=!0,usePricesQueryOptions:o,useTokenQueryOptions:s}={}){let{data:a}=Ve(),{data:c=[],isPending:f,isRefetching:d,refetch:m,error:p}=Wa({chainAddresses:a?.addresses,keys:t,queryOptions:s}),h=p!==null,b=Di(a?.identifier),{query:E}=(0,ot.useMemo)(()=>({query:{data:c.map(Sr)}}),[c]),{data:w,isPending:S,isRefetching:k,refetch:H,isError:z}=oi({query:E,enabled:n&&!f&&a?.identifier!=null,queryOptions:o}),{fungibles:ae,fungibleMap:ce}=(0,ot.useMemo)(()=>{let T=e?c:c.filter(M=>{let N=Ar(M),G=(t||[]).includes(N),j=Tr(b,{key:N,spamStatus:M.data.spamStatus});return G||j}),C=ol({tokens:T,priceMap:w??{}});r&&(t===void 0?C=C.sort(za):C=C.sort((M,N)=>{let G=t.indexOf(M.data.key),j=t.indexOf(N.data.key);return G<j?-1:G>j?1:0}));let x=new Map;for(let M of C)x.set(M.data.key,M);return{fungibles:C,fungibleMap:x}},[c,t,e,b,w,r]),ve=(0,ot.useMemo)(()=>!!b&&b.size>0&&c.length>0&&ae.length===0,[c,b,ae]),ee=X(),Ce=(0,ot.useMemo)(()=>nl(ee,ce),[ce,ee]),Pe=Pi("send:fungible",St.Solana.Mainnet);(0,ot.useEffect)(()=>{for(let T of Ce)Pe(T.transactionId,"appUpdated"),rl(T.fungibleKey,ee)},[Ce,Pe,ee]);let Re=(0,ot.useMemo)(()=>tl(ae),[ae]),v=(0,ot.useCallback)(async()=>{await Promise.all([m(),H()])},[m,H]);return{fungibles:ae,portfolio:Re,visibilityOverrides:b,isHidingAllFungibles:ve,isLoadingTokens:f,isLoadingPrices:n?S:!1,isRefetchingTokens:d,isRefetchingPrices:n?k:!1,isErrorTokens:h,tokensError:p,isErrorPrices:z,refetch:v}}i(Ot,"useGetFungibleBalances");function hh({key:e,splTokenAccount:t,...n}){let{fungibles:r,...o}=Ot({...n,keys:e?[e]:[]}),s;return r.length===1?s=r[0]:r.length>1&&t?s=r.find(a=>a.type===F.SPL&&a.data.splTokenAccountPubkey===t):r.length>1&&(s=r.filter(a=>a.type===F.SPL).reduce((a,c)=>!a||c.data.balance.gt(a.data.balance)?c:a,void 0)),{fungible:s,...o}}i(hh,"useGetFungibleBalance");u();l();var cn=L(Q());u();l();u();l();u();l();var nn=D(new Ls);function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ki.apply(this,arguments)}i(ki,"i");y.NODE_ENV!=="production"&&(nn.debugPrivate=!0);var yh=i((e,t,n)=>e?.suspense&&gh(t,n),"a"),gh=i((e,t)=>e.isPending&&!t,"p"),bh=i(({result:e,throwOnError:t,query:n})=>e.isError&&!e.isFetching&&Eh(t,[e.error,n]),"d");function Eh(e,t){return typeof e=="function"?e(...t):!!e}i(Eh,"E");var Th=i(e=>e.suspense&&typeof e.staleTime!="number"?ki({},e,{staleTime:1e3}):e,"l");function il(e,t,n=r=>r(nn)){let r=D(0),o=D(n);y.NODE_ENV!=="production"&&(o.debugPrivate=!0);let s=D(()=>new WeakMap);y.NODE_ENV!=="production"&&(s.debugPrivate=!0);let a=D(d=>{let m=d(o),p=e(d),h=m.defaultQueryOptions(p),b=d(s).get(m);return h._optimisticResults="optimistic",b&&b.setOptions(h,{listeners:!1}),Th(h)});y.NODE_ENV!=="production"&&(a.debugPrivate=!0);let c=D(d=>{let m=d(o),p=d(a),h=d(s),b=h.get(m);if(b)return b;let E=new t(m,p);return h.set(m,E),E});y.NODE_ENV!=="production"&&(c.debugPrivate=!0);let f=D(d=>{let m=d(c),p=d(a),h=m.getOptimisticResult(p),b=D(h);return y.NODE_ENV!=="production"&&(b.debugPrivate=!0),b.onMount=E=>{let w=m.subscribe(cr.batchCalls(E));return()=>{m.getCurrentResult().isError&&m.getCurrentQuery().reset(),w()}},b});return y.NODE_ENV!=="production"&&(f.debugPrivate=!0),D(d=>{d(r);let m=d(c),p=d(a),h=d(d(f));if(yh(p,h,!1))return m.fetchOptimistic(p);if(bh({result:h,query:m.getCurrentQuery(),throwOnError:p.throwOnError}))throw h.error;return h},(d,m)=>{m(r,p=>p+1)})}i(il,"b");function sl(e,t=n=>n(nn)){return il(e,Fs,t)}i(sl,"O");function al(e,t=n=>n(nn)){return il(e,Is,t)}i(al,"g");u();l();var hI=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");var Ri=i((e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),"getCached$2"),wh=new WeakMap,vh=i((e,t,n,r)=>{let o=Ri(()=>new WeakMap,wh,t),s=Ri(()=>new WeakMap,o,n);return Ri(e,s,r)},"memo3");function it(e,t,n=Object.is){return vh(()=>{let r=Symbol(),o=i(([a,c])=>{if(c===r)return t(a);let f=t(a,c);return n(c,f)?c:f},"selectValue"),s=D(a=>{let c=a(s),f=a(e);return o([f,c])});return s.init=r,s},e,t,n)}i(it,"selectAtom");var Ah=i(e=>typeof e?.then=="function","isPromiseLike");function Sh(e=()=>{try{return self.localStorage}catch(n){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(n);return}},t){var n;let r,o,s={getItem:i((f,d)=>{var m,p;let h=i(E=>{if(E=E||"",r!==E){try{o=JSON.parse(E,t?.reviver)}catch{return d}r=E}return o},"parse"),b=(p=(m=e())==null?void 0:m.getItem(f))!=null?p:null;return Ah(b)?b.then(h):h(b)},"getItem"),setItem:i((f,d)=>{var m;return(m=e())==null?void 0:m.setItem(f,JSON.stringify(d,t?.replacer))},"setItem"),removeItem:i(f=>{var d;return(d=e())==null?void 0:d.removeItem(f)},"removeItem")},a=i(f=>(d,m,p)=>f(d,h=>{let b;try{b=JSON.parse(h||"")}catch{b=p}m(b)}),"createHandleSubscribe"),c;try{c=(n=e())==null?void 0:n.subscribe}catch{}return!c&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(c=i((f,d)=>{if(!(e()instanceof self.Storage))return()=>{};let m=i(p=>{p.storageArea===e()&&p.key===f&&d(p.newValue)},"storageEventCallback");return self.addEventListener("storage",m),()=>{self.removeEventListener("storage",m)}},"subscriber")),c&&(s.subscribe=a(c)),s}i(Sh,"createJSONStorage");var yI=Sh();u();l();u();l();u();l();var xh=i(e=>{let t=wr(e);if(Ze(t))return t===F.BitcoinNative,t;if(t===F.SPL&&e.resourceType===de.address||t===F.ERC20&&e.resourceType===de.address)return e.address;if(t===F.BRC20&&e.resourceType===de.address)return`${e.address}-${gs[0]}`;if(t===F.SuiCoin&&e.resourceType===de.address)return e.address},"getLegacyKey"),cl=xh;function Ch({caip19:e,...t}){let n=Ye(e);return{...t,type:e.includes("/nativeToken:")?"native":"fungible",chainName:A.getChainName(n.chainId).toLowerCase(),encodedCaip19:e,decodedCaip19:n,legacyKey:cl(n)??e}}i(Ch,"getDerivedCaip19Values");var rn=Ch;var Ph=g.object({account:g.string(),quantity:g.number(),quantityString:g.string()}),Qn=g.object({address:g.string(),quantity:g.number(),quantityString:g.string(),lastTransferredDate:g.coerce.date().nullish(),subaccounts:g.array(Ph).optional()}),on=g.object({price:g.number(),priceChange24h:g.number().optional(),lastUpdatedAt:g.coerce.date(),marketCap:g.number().optional()}).nullish(),ul=g.object({id:g.string(),name:g.string(),imageUri:g.string().nullish().transform(e=>e??""),numTokens:g.number()}),qr=g.object({compression:g.object({compressed:g.boolean()}).optional(),creators:g.array(g.object({address:g.string(),share:g.number(),verified:g.boolean()})).nullish(),tokenProgram:g.string().nullish(),extensions:Ba(Ka).nullish()}),jr=g.enum(["TRUSTED","VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]),VI=g.object({totalValueUsdCentsCurrent:g.number().optional(),totalValueUsdStringCurrent:g.string().optional(),totalValueUsdCents24h:g.number().optional(),totalValueUsdString24h:g.string().optional(),totalPercentChange24h:g.number().optional()}),ll=g.object({name:g.string().nullish(),symbol:g.string().nullish(),decimals:g.number(),logoUri:g.string().nullish(),extraMetadata:qr.optional(),price:on}),Fi=ll.extend({type:g.enum(["native","fungible"]),encodedCaip19:g.string(),decodedCaip19:vs,spamStatus:jr,chainName:g.string(),legacyKey:g.string()}),Mh=ll.extend({caip19:g.string(),spamStatus:jr.nullish().transform(e=>e??"NOT_VERIFIED")}),dl=g.union([Mh.transform(e=>rn(e)),Fi]),fl=Fi.extend({totalQuantity:g.number(),totalQuantityString:g.string(),walletAddress:g.string().optional(),queriedWalletBalances:g.array(Qn),livePrice:on}),ml=Fi.extend({timestamp:g.string().nullish(),totalQuantityString:g.string(),totalQuantity:g.number(),queriedWalletBalances:g.array(Qn)});u();l();u();l();u();l();function We(e){let t=D(0),n=D(()=>({i:0}),(f,d)=>{let m=f(n);return Object.assign(m,{m:!0,peek:f,set:d}),d(t,p=>p+1),()=>{m.m=!1,a(m),c(m)}});n.onMount=f=>f();let r=D(f=>{f(t);let d=f(n);if(!d.m||d.irc||d.i&&!d.irf)return d.p;c(d);let m=new Map,p=i(w=>{let S=f(w);return m.set(w,S),S},"getter");p.peek=d.peek;let h=i((...w)=>{try{return++d.i,d.set(...w)}finally{Array.from(m.keys(),f),--d.i}},"setter");h.recurse=(w,...S)=>{if(d.fc){if(y.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return d.irc=!0,d.set(w,...S)}finally{d.irc=!1,Array.from(m).some(b)&&s(d)}};function b([w,S]){return f(w)!==S}i(b,"areDifferent"),++d.i;function E(){try{if(d.irf=!1,!d.m)return;a(d),d.c=o.effect(p,h)}catch(w){d.e=w,s(d)}finally{d.p=void 0,--d.i}}return i(E,"runEffect"),d.irf?E():d.p=Promise.resolve().then(E)});if(y.NODE_ENV!=="production"){let f=function(d,m){Object.defineProperty(d,"debugLabel",{get:i(()=>`${o.debugLabel??"effect"}:${m}`,"get")}),d.debugPrivate=!0};i(f,"setLabel"),f(t,"refresh"),f(n,"ref"),f(r,"base")}let o=D(f=>void f(r));return o.effect=e,o;function s(f){try{f.irf=!0,f.set(t,d=>d+1)}finally{f.irf=!1}}i(s,"refresh");function a(f){if(typeof f.c=="function")try{f.fc=!0,f.c()}finally{f.fc=!1,f.c=void 0}}i(a,"cleanup");function c(f){if("e"in f){let d=f.e;throw delete f.e,d}}i(c,"throwPendingError")}i(We,"atomEffect");u();l();var Nh=i(()=>{if(typeof self>"u")return!1;try{return typeof chrome<"u"&&(chrome.runtime?.id!==void 0||typeof browser<"u")}catch(e){return console.error("Error checking for extension context:",e),!1}},"isExtensionContext"),Ii=class{static{i(this,"ExtensionStorage")}browser;storage;constructor(t){if(!t||!t.storage||!t.storage.local)throw new Error("[ExtensionStorage] Invalid 'browser' object received.");this.browser=t,this.storage=this.browser.storage.local}async get(t){try{let r=(await this.storage.get(t))[t];return r==null||typeof r!="string"?null:JSON.parse(r)}catch(n){return console.error(`[ExtensionStorage.get] Error getting/parsing key (${t}):`,n),null}}async getAll(t){try{let n=await this.storage.get(t),r={};for(let o in n)if(Object.prototype.hasOwnProperty.call(n,o)){let s=n[o];if(s==null||typeof s!="string")r[o]=null;else try{r[o]=JSON.parse(s)}catch(a){console.error(`[ExtensionStorage.getAll] Error parsing key (${o}):`,a),r[o]=null}}return r}catch(n){let r=`[ExtensionStorage.getAll] Error getting keys (${t}): ${n}`;throw console.error(r),new Error(r)}}async remove(t){try{await this.storage.remove(t)}catch(n){let r=`[ExtensionStorage.remove] Error removing key(s) (${t}): ${n}`;throw console.error(r),new Error(r)}}async set(t,n){try{let r=JSON.stringify(n);await this.storage.set({[t]:r})}catch(r){let o=`[ExtensionStorage.set] Error setting/stringifying key (${t}): ${r}`;throw console.error(o),new Error(o)}}async setAll(t){try{let n={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=JSON.stringify(t[r]));await this.storage.set(n)}catch(n){let o=`[ExtensionStorage.setAll] Error setting/stringifying keys (${Object.keys(t)}): ${n}`;throw console.error(o),new Error(o)}}async update(t,n){if(!navigator.locks){let r=await this.get(t),o=await n(r);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async r=>{let o=await this.get(t),s=await n(o);s===null?await this.remove(t):await this.set(t,s)})}catch(r){let o=`[ExtensionStorage.update] Error updating key (${t}): ${r}`;throw console.error(o),new Error(o)}}async clear(){try{await this.storage.clear()}catch(t){let n=`[ExtensionStorage.clear] Error clearing storage: ${t}`;throw console.error(n),new Error(n)}}},$r=class{static{i(this,"WebLocalStorage")}_storage;get storage(){if(!this._storage){if(typeof self>"u")throw new Error("WebLocalStorage requires window.localStorage");this._storage=self.localStorage}return this._storage}async get(t){try{let n=this.storage.getItem(t);return n===null||typeof n!="string"?null:JSON.parse(n)}catch(n){return console.error(`[WebLocalStorage.get] Error getting/parsing key (${t}):`,n),null}}async getAll(t){let n={},r=t??Object.keys(this.storage);for(let o of r)try{let s=this.storage.getItem(o);if(t&&s===null)continue;if(s===null||typeof s!="string")n[o]=null;else try{n[o]=JSON.parse(s)}catch(a){console.error(`[WebLocalStorage.getAll] Error parsing key (${o}):`,a),n[o]=null}}catch(s){console.error(`[WebLocalStorage.getAll] Error reading key (${o}) from storage:`,s),t||(n[o]=null)}return n}async remove(t){try{let n=Array.isArray(t)?t:[t];for(let r of n)this.storage.removeItem(r)}catch(n){let r=`[WebLocalStorage.remove] Error removing key(s) (${t}): ${n}`;throw console.error(r),new Error(r)}}async set(t,n){try{let r=JSON.stringify(n);this.storage.setItem(t,r)}catch(r){let o=`[WebLocalStorage.set] Error setting/stringifying key (${t}): ${r}`;throw console.error(o),new Error(o)}}async setAll(t){let n=!1,r=Object.keys(t);for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))try{await this.set(o,t[o])}catch{n=!0}if(n)throw new Error(`[WebLocalStorage.setAll] One or more errors occurred while setting keys (${r})`)}async update(t,n){if(!navigator.locks){let r=await this.get(t),o=await n(r);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async r=>{let o=await this.get(t),s=await n(o);s===null?await this.remove(t):await this.set(t,s)})}catch(r){let o=`[WebLocalStorage.update] Error updating key (${t}): ${r}`;throw console.error(o),new Error(o)}}async clear(){try{this.storage.clear()}catch(t){let n=`[WebLocalStorage.clear] Error clearing storage: ${t}`;throw console.error(n),new Error(n)}}},Li=class{static{i(this,"LocalStorage")}initPromise;storageImpl=null;constructor(){this.initPromise=this._initialize(),this.initPromise.catch(t=>{console.error("LocalStorage initialization failed:",t)})}async _initialize(){if(!this.storageImpl&&!(typeof self>"u"))if(Nh())try{let n=(await import("./browser-polyfill-3WOTVXCO.js")).default;if(!n||!n.storage||!n.storage.local)throw new Error("webextension-polyfill loaded but missing storage.local API.");this.storageImpl=new Ii(n)}catch{this.storageImpl=new $r}else this.storageImpl=new $r}async ensureInitialized(){if(await this.initPromise,!this.storageImpl&&typeof self<"u"&&await this._initialize(),!this.storageImpl)throw new Error("LocalStorage is not initialized. Initialization may have failed or is not available in this context.")}async get(t){return await this.ensureInitialized(),this.storageImpl.get(t)}async getAll(t){return await this.ensureInitialized(),this.storageImpl.getAll(t)}async remove(t){return await this.ensureInitialized(),this.storageImpl.remove(t)}async set(t,n){return await this.ensureInitialized(),this.storageImpl.set(t,n)}async setAll(t){return await this.ensureInitialized(),this.storageImpl.setAll(t)}async update(t,n){return await this.ensureInitialized(),this.storageImpl.update(t,n)}async clear(){return await this.ensureInitialized(),this.storageImpl.clear()}},Oi=new Li;u();l();u();l();var qn=class{static{i(this,"PersistentStore")}namespaceKey;ttlMilliseconds;storage;onError;data={};isLoaded=!1;constructor(t){this.namespaceKey=t.namespaceKey,this.ttlMilliseconds=t.ttlMilliseconds,this.storage=t.storage,this.onError=t.onError,this._load().then(()=>{if(this._cleanupExpired())return this._save()}).catch(n=>{console.error("Failed to load data",n)})}async _load(){if(!this.isLoaded){try{let t=await this.storage.get(this.namespaceKey);t?(this.data=t,(typeof this.data!="object"||this.data===null)&&(this.onError?.(new Error("Stored data is not a valid object."),"load"),this.data={})):this.data={}}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to parse stored data"),"load"),this.data={}}this.isLoaded=!0}}async _save(){try{await this.storage.set(this.namespaceKey,this.data)}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to serialize data for storage"),"save")}}_cleanupExpired(){let t=Date.now(),n=!1;for(let r in this.data)Object.prototype.hasOwnProperty.call(this.data,r)&&this.data[r].expiresAt<=t&&(delete this.data[r],n=!0);return n}_updateExpiration(t){return this.data[t]?(this.data[t].expiresAt=Date.now()+this.ttlMilliseconds,!0):!1}async set(t,n){this.isLoaded||await this._load(),this._cleanupExpired(),this.data[t]={value:n,expiresAt:Date.now()+this.ttlMilliseconds},await this._save()}async get(t,n){this.isLoaded||await this._load();let r=this._cleanupExpired(),o=this.data[t];if(!o)return r&&await this._save(),null;let s=this._updateExpiration(t),a=n.safeParse(o.value);return a.success?((r||s)&&await this._save(),a.data):(this.onError?.(new pt(a.error.issues),`get (validation failed for key: ${t})`),delete this.data[t],await this._save(),null)}async remove(t){let n=this._cleanupExpired(),r=!1;Object.prototype.hasOwnProperty.call(this.data,t)&&(delete this.data[t],r=!0),(n||r)&&await this._save()}async clear(){this.data={},await this._save()}};var pl=new Map;function Dh({storage:e,namespaceKey:t,ttlMs:n}){let r=pl.get(t);if(r)return r;if(!e)throw new Error("Storage is required");let o=new qn({storage:e,namespaceKey:t,ttlMilliseconds:n,onError:i((s,a)=>{console.error(`[PersistentStore Error - ${a}]:`,s.message),s instanceof pt&&console.error("Zod Issues:",s.issues)},"onError")});return pl.set(t,o),o}i(Dh,"getDataStorage");var Ui=Dh;function kh({atomToStoreOffline:e,namespaceKey:t,ttlMs:n,initialValue:r,schema:o,...s}){let a=D({status:"pending",value:r}),c=D(p=>{if("offlineKey"in s)return p(s.offlineKey);let h=p(e);if("offlineKey"in h&&typeof h.offlineKey=="string")return h.offlineKey;throw new Error("No key provided")}),f=We((p,h)=>{Ui({storage:Oi,namespaceKey:`.offline.${t}`,ttlMs:n}).get(p(c),o).then(b=>{b&&h(a,{status:"offline",value:b})}).catch(b=>{console.error(b)})}),d=We((p,h)=>{p(c),h(a,{status:"pending",value:r})}),m=We((p,h)=>{let b=p(e),E=p(c);b.status==="success"&&b.data&&b.data!==p(a).value&&(h(a,{status:"live",value:b.data}),Ui({storage:Oi,namespaceKey:`.offline.${t}`,ttlMs:n}).set(E,b.data).catch(w=>{B.addBreadcrumb(K.Tokens,"Error storing offline data",te.Error,{namespaceKey:t,error:w.toString()})}))});return it(D(p=>{let h=p(e);p(d),p(f),p(m);let b=p(a);return h.data?{status:"live",value:h.data}:{status:"offline",value:b.value}}),p=>p.value)}i(kh,"atomWithOfflineStorage");var Wr=kh;u();l();u();l();var Bi=g.object({caip19:g.string(),name:g.string().nullish(),symbol:g.string().nullish(),decimals:g.number(),spamStatus:jr.nullish().transform(e=>e??"NOT_VERIFIED"),logoUri:g.string().nullish()}),hl=Bi.extend({totalQuantity:g.number(),totalQuantityString:g.string(),queriedWalletBalances:g.array(Qn),extraMetadata:qr.optional(),price:on}),yl=hl.transform(rn),gl=g.object({items:g.array(hl),cursor:g.string().nullish().default(null),errors:g.array(g.object({code:g.string(),message:g.string(),details:g.object({chainId:g.string(),address:g.string()})})).optional()}).transform(e=>{let{items:t,cursor:n,errors:r,...o}=e;return{...o,nextCursor:n,tokens:t,errors:r||[],updatedAt:Date.now()}}),bl=Bi.extend({timestamp:g.string().nullish(),postQuantityString:g.string(),postQuantity:g.number(),price:on,queriedWalletBalances:g.array(Qn)}),El=bl.transform(e=>{let{postQuantity:t,postQuantityString:n,...r}=rn(e);return{...r,totalQuantity:t,totalQuantityString:n}}),Tl=g.object({cursor:g.string().nullish().default(null),items:g.array(bl)}).transform(e=>({nextCursor:e.cursor,transfers:e.items})),ML=g.object({totalValueUsdCentsCurrent:g.number(),totalValueUsdStringCurrent:g.string(),totalValueUsdCents24h:g.number(),totalValueUsdString24h:g.string(),totalPercentChange24h:g.number(),errors:g.array(g.object({code:g.string(),message:g.string(),details:g.object({chainId:g.string(),address:g.string()})})).optional()}),Ki=Bi.extend({createdDate:g.coerce.date().nullish().default(null),extraMetadata:qr.extend({id:g.string().nullish().default(null),description:g.string().nullish().default(null),marketCap:g.coerce.number().optional(),circulatingSupply:g.coerce.number().optional(),totalSupply:g.coerce.number().optional(),liquidity:g.coerce.number().optional(),holders:g.coerce.number().optional(),links:g.array(g.object({type:g.string(),url:g.string()})).optional(),volume24hUSD:g.coerce.number().optional(),volume24hUSDChangePercentage:g.coerce.number().optional(),trades24h:g.coerce.number().optional(),trades24hChangePercentage:g.coerce.number().optional(),uniqueWallets24h:g.coerce.number().optional(),uniqueWallets24hChangePercentage:g.coerce.number().optional(),top10HoldersPercent:g.coerce.number().optional(),mintable:g.boolean().optional(),freezable:g.boolean().optional(),mutableMetadata:g.boolean().optional(),ownershipRenounced:g.boolean().optional(),updateAuthority:g.string().optional(),createdDate:g.string().datetime().nullish().default(null)}).optional(),categories:g.array(ul).optional().default([]),price:on}),wl=Ki.transform(rn);u();l();var Rh=i(e=>A.isBitcoinNetworkID(e.decodedCaip19.chainId)&&e.decodedCaip19.resourceType===de.nativeToken?e.queriedWalletBalances.map(r=>{let o=Qa(e.decodedCaip19.chainId,r.address);if(!o)throw new Error("No legacy key found for bitcoin native token");return{...e,legacyKey:o,queriedWalletBalances:[r],totalQuantity:r.quantity,totalQuantityString:r.quantityString,walletAddress:r.address}}):[e],"explodeBitcoinToken"),Fh=i(e=>t=>t.map(n=>e.parse(n)),"createTokenMapper"),OL=Fh(dl),Ih=i(e=>t=>t.flatMap(n=>{let r=e.parse(n);return Rh(r)}),"createTokenBalanceMapper"),vl=Ih(yl),Lh=i(e=>t=>t.map(n=>e.parse(n)),"createTokenBalanceUpdateMapper"),Al=Lh(El);async function Oh(e){let t={walletAddresses:e.walletCaip19s.join(","),includePrices:"true"};"cursor"in e&&(t.cursor=e.cursor),"fromMicroseconds"in e?t.fromTimestamp=e.fromMicroseconds.toString():"from"in e&&(t.fromTimestamp=e.from.toString());let n=await re.api().timeout(P({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:t}).then(r=>{if(Ue(r))return r.data;throw new Error(r.data?.message||r.data?.error||r.statusText||`Status: ${r.status}`,{cause:r.data?.code??r.data?.name})}).catch(r=>{throw B.addBreadcrumb(K.Tokens,"getTokenBalanceUpdates",te.Error,{message:r.message,cause:r.cause,...t}),B.captureError(r,K.Tokens),r});try{return Tl.parse(n)}catch(r){throw r instanceof pt&&B.addBreadcrumb(K.Tokens,"getTokenBalanceUpdates parse error",te.Error,{message:r.message,...r.issues?{issues:JSON.stringify(r.issues)}:{},result:JSON.stringify(n)}),r}}i(Oh,"getTokenBalanceUpdates");async function Sl(e){let t=[],n=i(()=>t.at(-1)?.nextCursor,"getNextCursor");do{let r=n(),o=await Oh(r?{walletCaip19s:e.walletCaip19s,cursor:r}:e);t.push(o)}while(n());return Al(t.flatMap(r=>r.transfers))}i(Sl,"getTokenBalanceUpdatesAll");u();l();var Uh="25.13.0",jn=`fungible-tokens-${Uh}`,xl=[jn,"token-updates"];var Cl=[jn,"portfolio-value"],Bh=[jn,"token-balance"],Kh=[jn,"infinite-token-balances"],Vh=[jn,"visibility-overrides"],st={infiniteTokenBalances:i(({walletCaip19s:e})=>[...Kh,{walletCaip19s:e}],"infiniteTokenBalances"),tokenBalance:i(({wallets:e,encodedCaip19:t,isSplCompressed:n})=>{let r=e.map(o=>typeof o=="string"?o:oe({chainId:o.networkID,address:o.address,resourceType:de.address})).sort();return[...Bh,{walletCaip19s:r,encodedCaip19:t,isSplCompressed:n}]},"tokenBalance"),tokenUpdates:i(({walletCaip19s:e,from:t})=>[...xl,{walletCaip19s:e,from:t}],"tokenUpdates"),portfolioValue:i(({walletCaip19s:e,include:t,exclude:n,isMainnet:r})=>[...Cl,{walletCaip19s:e,include:t,exclude:n,isMainnet:r}],"portfolioValue"),visibilityOverrides:i(({accountId:e})=>[...Vh,{accountId:e}],"visibilityOverrides"),tokenDetails:vr.tokenDetails};u();l();u();l();function Hh(e){let t=wr(e.decodedCaip19);return t===F.SPL?e.extraMetadata?.compression?.compressed||"queriedWalletBalances"in e&&e.queriedWalletBalances.some(n=>!n.subaccounts?.length)?F.CompressedSPL:F.SPL:t}i(Hh,"getTokenTypeFromToken");var Pl=Hh;function Vi({newUpdates:e,existingUpdates:t={}}){return e.reduce((n,r)=>n[r.encodedCaip19]?.totalQuantityString===r.totalQuantityString?n:Pl(r)===F.CompressedSPL?{...n,[`${r.encodedCaip19}-compressed`]:r}:r?{...n,[r.encodedCaip19]:r}:n,t)}i(Vi,"aggregateUpdates");u();l();function Gh(e){let t=e.match(/(.*\d{2}:\d{2}:\d{2})\.(?<fraction>\d+)Z/);if(!t||!t.groups?.fraction)throw new Error("Invalid date format");let n=new Date(e).getTime(),s=t.groups.fraction.padEnd(6,"0").slice(-3);return n*1e3+parseInt(s,10)}i(Gh,"getMicrosecondsFromTimestamp");var Hi=Gh;u();l();var Qh=D(!1),Ml=Qh;u();l();u();l();u();l();var qh=P({minutes:5}),$n=0;function NO(){if(!$n){$n=Math.floor(Math.random()*1e6);return}$n++}i(NO,"incrementTokensBalancesCacheBust");async function Nl({walletCaip19s:e,fungibleCaip19s:t,cursor:n,cacheBust:r}){let o={walletAddresses:e.join(","),includePrices:"true"};n&&(o.cursor=n),(r||$n)&&(o.cacheBust=r?.toString()||$n.toString()),t&&t.length>0&&(o.fungibleAddresses=t.sort().join(","));try{let s=await re.api().timeout(P({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:o}).then(c=>{if(Ue(c))return c.data;throw new Error(c.data?.message||c.data?.error||c.statusText||`Status: ${c.status}`,{cause:c.data?.code})}),a=gl.parse(s);return a.errors&&a.errors.length>0&&a.errors.forEach(c=>{B.addBreadcrumb(K.Tokens,"getTokenBalances_partialError",te.Info,{code:c.code,message:c.message,chainId:c.details.chainId,address:c.details.address})}),{...a,tokens:vl(a.tokens)}}catch(s){throw s instanceof Error&&(B.addBreadcrumb(K.Tokens,"getTokenBalances",te.Error,{...o,message:s.message,...typeof s.cause=="string"||typeof s.cause=="number"?{cause:s.cause}:{}}),B.captureError(s,K.Tokens)),s}}i(Nl,"getTokenBalances");function Dl({walletCaip19s:e,isEnabled:t=!0,cacheBust:n}){return{staleTime:qh,gcTime:P({days:3}),queryKey:st.infiniteTokenBalances({walletCaip19s:e}),enabled:t&&!!e.length,queryFn:i(async({pageParam:r})=>Nl({walletCaip19s:e,cursor:r,cacheBust:n}),"queryFn"),initialPageParam:"",getNextPageParam:i(r=>r?.nextCursor||void 0,"getNextPageParam")}}i(Dl,"getTokenBalancesQuery");function kl(e){let{walletCaip19s:t,encodedCaip19:n,queryOptions:r={enabled:!0}}=e;return{staleTime:P({seconds:10}),gcTime:P({days:3}),queryKey:st.tokenBalance({wallets:t,encodedCaip19:n}),enabled:r.enabled&&!!t.length,queryFn:i(async()=>(await Nl({walletCaip19s:t,fungibleCaip19s:[n]})).tokens,"queryFn")}}i(kl,"getTokenBalanceQuery");u();l();u();l();var jh=D(void 0),zr=jh;var $h=D(e=>{let t=e(zr);return t?t.addresses.map(n=>oe({chainId:n.networkID,address:n.address,resourceType:de.address})).sort():[]}),sn=$h;var Wh=al(e=>{let t=e(sn);return Dl({walletCaip19s:t})}),at=Wh;var zh=D(e=>{let{data:t}=e(at),n=t?.pages[0];return!n||!n.tokens.length?0:n.updatedAt}),Rl=zh;u();l();var Yh=it(zr,e=>e?.identifier),Tt=Yh;var Xh=1e3,Fl=5e3,Il=Math.ceil(Fl*2.25);function Ll(e){return P(e)*1e3}i(Ll,"toMicroseconds");function Jh(e){if(!e?.length)return null;let t=new Date(Date.now()-Il).toISOString();return Math.floor(Math.max(...e.map(({timestamp:n})=>Hi(n||t))))}i(Jh,"getLastTimestamp");function Zh(e){let t=Jh(e);return t?t-Ll({seconds:1}):null}i(Zh,"getNextTimestamp");var _h=sl(e=>{let t=e(nn),n=e(Rl),r=Math.floor(n-P({minutes:10})),o=e(sn),s=e(Ml),a=r>Date.now()-P({days:10}),c=st.tokenUpdates({walletCaip19s:o,from:r}),f=i(async()=>{let d=t.getQueryData(c)?.lastTimestamp;if(!d){let b=new Date(r-Il).toISOString();return{updates:{},lastTimestamp:Hi(b)}}let m=await Sl({walletCaip19s:o,fromMicroseconds:d-Ll({seconds:30})}),p=t.getQueryData(c)?.updates??{};return{updates:Vi({newUpdates:m,existingUpdates:p}),lastTimestamp:Math.max(Zh(m)??0,d)}},"queryFn");return{meta:{fetchCount:0},enabled:a&&!s&&o.length>0,queryKey:c,refetchInterval:i(d=>{let m=Number(d.meta?.fetchCount??0);return d.meta&&(d.meta.fetchCount=m+1),Math.min(Math.max(m*250,Xh),Fl)},"refetchInterval"),queryFn:f}}),ey=Wr({atomToStoreOffline:_h,offlineKey:D(e=>`${e(Tt)??""}:token-balance-updates`),namespaceKey:"fungible-tokens",ttlMs:P({days:10}),initialValue:{updates:{},lastTimestamp:0},schema:g.object({updates:g.record(g.string(),ml),lastTimestamp:g.number()})}),ty=it(ey,e=>e?.updates??{},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),Yr=ty;u();l();u();l();function Xr(e){return t=>{let n=!1,r={...t};for(let[o,s]of Object.entries(e)){let a=s?.price,c=s?.lastUpdatedAt?new Date(s.lastUpdatedAt):null;if(!a||!c)continue;let f=t[o]?.price!==a&&(!t[o]?.lastUpdatedAt||c>t[o].lastUpdatedAt);n=n||f,f&&(r[o]={price:s.price,priceChange24h:s.priceChange24h,lastUpdatedAt:c})}return n?r:t}}i(Xr,"processExtractedPriceData");u();l();var ny=D(e=>{let{data:t,status:n}=e(at);return{data:t?.pages.flatMap(r=>r.tokens),status:n}}),ry=Wr({atomToStoreOffline:ny,offlineKey:D(e=>`${e(Tt)??""}:infinite-tokens`),namespaceKey:"fungible-tokens",ttlMs:P({days:10}),initialValue:[],schema:g.array(fl)}),wt=ry;var Jr=D({}),oy=D(e=>e(wt).slice(-100).reduce((r,o)=>(o.price&&(r[o.encodedCaip19]=o.price),r),{})),iy=We((e,t)=>{let n=e(oy);!n||Object.keys(n).length===0||t(Jr,Xr(n))}),sy=D(e=>{let t=e(Yr);return Object.values(t).reduce((r,o)=>(o.price&&(r[o.encodedCaip19]=o.price),r),{})}),ay=We((e,t)=>{let n=e(sy);!n||Object.keys(n).length===0||t(Jr,Xr(n))}),cy=D(e=>(e(iy),e(ay),e(Jr)),(e,t,n)=>{t(Jr,n)}),vt=cy;u();l();u();l();var uy=it(at,e=>e.hasNextPage),an=uy;var Wn=D(1/0),Zr=D(e=>(e(ly),e(dy),e(an)?e(Wn):0),(e,t,n)=>{if(n===null){t(Wn,1/0);return}let r=Math.min(e(Wn),n);r!==e(Wn)&&t(Wn,r)}),Ol=Zr,ly=We((e,t)=>{let{hasNextPage:n}=e(at),r=e(wt),o=e(vt);if(r.length>0&&!n){t(Zr,0);return}let s=r.slice(-100).filter(a=>a.type==="fungible").map(a=>{let c=o[a.encodedCaip19]??a.price;return c?a.totalQuantity*c.price/10**a.decimals:1/0});t(Zr,Math.min(...s))}),dy=We((e,t)=>{e(Tt)&&t(Zr,1/0)});function fy(e,t){if(e.type==="native"&&t.type!=="native")return-1;if(e.type!=="native"&&t.type==="native")return 1;if(e.type==="native"&&t.type==="native")return e.name&&t.name?e.name.localeCompare(t.name):0}i(fy,"sortNativeTokensFirst");function my(e,t){if(!e&&t)return 1;if(e&&!t)return-1}i(my,"sortTokensWithValidPrice");function Ul(e,t){if(e&&t)return e.localeCompare(t);if(e&&!t)return-1;if(!e&&t)return 1}i(Ul,"sortByString");function Bl(e,t){if(e!==t)return t-e}i(Bl,"sortByNumber");function py(e){return{totalQuantity:e.totalQuantity,totalQuantityString:e.totalQuantityString}}i(py,"getUpdatedBalances");var hy=D(e=>{let t=e(wt),n=e(Yr),r=new Set(Object.keys(n)),o=t.map(s=>{let a=s.extraMetadata?.compression?.compressed?`${s.encodedCaip19}-compressed`:s.encodedCaip19,c=n[a];return c?(r.delete(a),{...s,...py(c)}):s});return r.forEach(s=>{let a=n[s];a&&o.push(a)}),o}),yy=D(e=>{let t=e(vt),n=e(hy),r=e(Ol),o=n.filter(s=>s.totalQuantity>0||s.type==="native").map(s=>({...s,livePrice:t[s.encodedCaip19]??s.price})).sort((s,a)=>{let c=s.livePrice?.price,f=a.livePrice?.price,d=my(c,f);if(d)return d;let m=s.totalQuantity/10**s.decimals,p=a.totalQuantity/10**a.decimals;if(!c&&!f){let S=fy(s,a);if(S)return S;let k=Bl(m,p);if(k)return k;let H=Ul(s.name,a.name);return H||0}let h=(c??0)*m,b=(f??0)*p,E=Bl(h,b);if(E)return E;let w=A.compareNetworkID(s.decodedCaip19.chainId,a.decodedCaip19.chainId);return w||(Ul(s.name,a.name)??0)});return r?o.filter(s=>{let a=s.livePrice?.price,c=s.totalQuantity/10**s.decimals;return(a??0)*c>=r}):o}),At=yy;u();l();function gy(e){if(e)return typeof e=="string"||typeof e=="number"?new Date(e):e}i(gy,"toDate");function by(e,{key:t,newPriceData:n}){let r=e[t];if(!n||r?.price===n?.price)return e;let o=gy(n.lastUpdatedAt);return!o||!(!r?.lastUpdatedAt||o>r.lastUpdatedAt)?e:{...e,[t]:{price:n.price,priceChange24h:n.priceChange24h??n.usd_24h_change,lastUpdatedAt:o}}}i(by,"handlePriceAtomUpdate");var _r=by;var Ey=i((e,t,n)=>{let r=e.extraMetadata?.compression?.compressed,o=t.extraMetadata?.compression?.compressed;if(r!==o)return n?r?-1:1:r?1:-1},"sortByCompressed"),Ty=i((e,t,n)=>{let r=e.legacyKey===n,o=t.legacyKey===n;if(r!==o)return r?-1:1},"sortByLegacyKey"),Kl=i(({isSplCompressed:e,legacyKey:t},n)=>n.length?n.length===1?n[0]:[...n].sort((o,s)=>{if(e!==void 0&&(o.encodedCaip19.includes("solana:")||s.encodedCaip19.includes("solana:"))){let a=Ey(o,s,e);if(a)return a}if(t){let a=Ty(o,s,t);if(a)return a}return s.totalQuantity-o.totalQuantity})[0]:null,"pickBalance"),eo=i(e=>{let t=Te(sn),n=Te(At),r=(0,cn.useMemo)(()=>n.filter(m=>m.encodedCaip19!==e.encodedCaip19?!1:e.legacyKey?m.legacyKey===e.legacyKey:!0),[n,e.encodedCaip19,e.legacyKey]),o=(0,cn.useMemo)(()=>Kl(e,r),[e.isSplCompressed,e.legacyKey,r]),s=kl({...e,walletCaip19s:t}),a=R({...s,select:i(m=>Kl(e,m),"select")}),c=a.data??null,f=o??c??null,d=An(vt);return(0,cn.useEffect)(()=>{let m=c;m&&!a.isPlaceholderData&&m.price&&d(p=>{let h=m.encodedCaip19,b=m.price;return _r(p,{key:h,newPriceData:b})})},[a.isPlaceholderData,c,d]),{...a,data:f,isPlaceholderData:o?!1:a.isPlaceholderData}},"useTokenBalance"),to=i(({networkID:e,queryOptions:t,addressType:n})=>{let r={chainId:e,slip44:A.getSlip44(e),resourceType:de.nativeToken},o=Ga(e,n),s=oe(r);return eo({encodedCaip19:s,legacyKey:o,queryOptions:t})},"useNativeTokenBalance"),wy=i(()=>{let{data:e}=Ve(),t=(0,cn.useMemo)(()=>e?.addresses.find(n=>A.isSolanaNetworkID(n.networkID)),[e]);return to({networkID:t?.networkID||rr.Mainnet,addressType:t?.addressType})},"useSolanaBalance");u();l();u();l();var vy=D(e=>{let{isLoading:t}=e(at),n=e(wt);return t&&n.length===0}),no=it(vy,e=>e);u();l();var Ay=new Map,Sy=D(null),xy=D(e=>{let t=e(Tt);if(!t)return Ay;let n=e(Sy),s=(Wt(n??null)?.value??{})[t]??[];return new Map(s.map(a=>[a.mintId,a]))}),un=xy;function Vl(){let e=Te(At),t=Te(no),n=Te(an),r=Te(un);return{isLoading:t,hasNextPage:n,fungibleTokens:e,visibilityOverrides:r}}i(Vl,"useOwnedFungibles");u();l();u();l();var Hl=L(Q());var Cy=i(({wallets:e,encodedCaip19:t,isSplCompressed:n=!1})=>{let r=X();return(0,Hl.useCallback)(()=>void r.invalidateQueries({queryKey:st.tokenBalance({wallets:e,encodedCaip19:t,isSplCompressed:n})}),[r,e,t,n])},"useInvalidateFungibleTokensBalance"),Py=Cy;u();l();u();l();function My(e){let t={message:"Failed to parse token details response"};if(e instanceof pt)try{t.zodIssuesJson=JSON.stringify(e.issues.map(n=>({path:n.path.join("."),message:n.message,code:n.code})))}catch{t.zodIssuesJson="Failed to stringify Zod issues"}else t.errorMessage=e instanceof Error?e.message:String(e);return t}i(My,"zodErrorToBreadcrumbData");var Gl=My;function Ql(e){return e.resourceType===de.nativeToken?`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.slip44}`:`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.address}`}i(Ql,"getUrlPathForDecodedCaip19");function Ny(e){return Ql(Ye(e))}i(Ny,"getUrlPathForEncodedCaip19");function Dy(e){let t=new URLSearchParams,n="encodedCaip19"in e?Ny(e.encodedCaip19):Ql(e.decodedCaip19);return e.includePrice&&t.append("includePrice","true"),e.includeFungibleDetails&&t.append("includeFungibleDetails","true"),[n,{params:t}]}i(Dy,"getUrlParams");async function Gi(e){let t=await re.api().noBearer().timeout(P({seconds:10})).get(...Dy(e)).then(n=>{if(Ue(n))return n.data;throw new Error(n.data?.message||n.data?.error||n.statusText||`Status: ${n.status}`,{cause:n.data?.code})}).catch(n=>{throw B.addBreadcrumb(K.Tokens,"getTokenDetails",te.Error,{message:n.message,cause:n.cause,..."encodedCaip19"in e&&{caip19:e.encodedCaip19},..."decodedCaip19"in e&&{caip19:oe(e.decodedCaip19)}}),B.captureError(n,K.Tokens),n});try{return Ki.parse(t)}catch(n){console.error(n);let r=Gl(n);throw"encodedCaip19"in e&&typeof e.encodedCaip19=="string"?r.caip19=e.encodedCaip19:"decodedCaip19"in e&&(r.caip19=oe(e.decodedCaip19)),B.addBreadcrumb(K.Tokens,"getTokenDetails.ParseError",te.Error,r),n}}i(Gi,"getTokenDetails");u();l();function ql({tokens:e}){return kt({tokens:e}).catch(t=>{throw B.addBreadcrumb(K.Tokens,"getTokenPrices",te.Error,{message:t.message,cause:t.cause,tokens:e.map(oe).join(",")}),B.captureError(t,K.Tokens),t})}i(ql,"getTokenPrices");u();l();u();l();var ky=D(e=>{let t=e(un);return e(At).filter(r=>Tr(t??new Map,{key:r.legacyKey??"",spamStatus:r.spamStatus}))}),jl=ky;function $l(){let e=Te(jl),t=Te(no),n=Te(an),r=Te(un);return{isLoading:t,hasNextPage:n,fungibleTokens:e,visibilityOverrides:r}}i($l,"useOwnedVisibleFungibles");u();l();var zn=L(Q());function Ry({caip19:e,includePrice:t}){let n=(0,zn.useMemo)(()=>typeof e=="string"?e:oe(e),[e]),r=Te(At),o=(0,zn.useMemo)(()=>{let c=r.find(f=>f.encodedCaip19===n);return c?{chainName:c.chainName,encodedCaip19:n,decodedCaip19:c.decodedCaip19,type:c.type,categories:[],price:c.price,symbol:c.symbol??"",name:c.name??"",decimals:c.decimals,legacyKey:c.legacyKey??n,spamStatus:c.spamStatus??"NOT_VERIFIED",logoUri:c.logoUri??null,extraMetadata:{description:"",id:"",isMutable:!0,createdDate:null,...c.extraMetadata},createdDate:null}:null},[n,t]),s=R({refetchInterval:P({seconds:t?5:30}),queryKey:st.tokenDetails({caip19:n,includePrice:t}),queryFn:i(async()=>{let c=await Gi(typeof e=="string"?{encodedCaip19:e,includeFungibleDetails:!0,includePrice:t}:{decodedCaip19:e,includeFungibleDetails:!0,includePrice:t});return wl.parse(c)},"queryFn"),...o&&{placeholderData:o}}),a=An(vt);return(0,zn.useEffect)(()=>{let c=s.data;c&&!s.isPlaceholderData&&t&&c.price&&a(f=>{let d=c.encodedCaip19,m=c.price;return _r(f,{key:d,newPriceData:m})})},[s.data,s.isPlaceholderData,a,t]),s}i(Ry,"useTokenDetails");var Qi=Ry;u();l();var $i=L(Q());u();l();var qi=new V(0),ji=i(({chainAddress:e,type:t,balance:n,decimals:r,recipient:o,gasEstimation:s,clampToZero:a=!0})=>{let{data:c,isPending:f}=Mi(e);if(!t||!n)return qi;let d=new V(n).multipliedBy(yn(r));if(!Ze(t))return d;if(!s)return;let m=new V(0);if(Gt(s))m=d.minus(new V(s.value));else if(pr(s)){let{gasLimit:p,maxFeePerGas:h,l1Fee:b=new V(0)}=s,E=p.times(h).plus(b);m=d.minus(E)}else if(Qt(s)){if(!e||f)return;let p=e.addressType,h=c?.safeToSendUtxos??[],b=ua(s.btcPerKilobyte),E=o&&bs.safeParse(o).success?o:"bc1p",S=[{value:h.reduce((H,z)=>H.plus(new V(z.value)),new V(0)).toNumber(),address:E}],k=va(p,h,S,b.toNumber(),[]);if(k.type==="error")m=new V(k.maxAmount).integerValue(V.ROUND_DOWN);else{let{inputs:H,fee:z}=k;m=H.reduce((ce,ve)=>ce.plus(new V(ve.value)),new V(0)).minus(z).integerValue(V.ROUND_DOWN)}}else if(mr(s))m=d.minus(s.gasBudget);else return Fe(s);return m.isGreaterThan(qi)?m:a?qi:m},"useTransferFungibleMaxAmount");var Fy=i(({networkID:e,addressType:t,gasEstimation:n,transactionValue:r=new V(0),recipient:o})=>{let{data:s,isLoading:a,isError:c}=to({networkID:e,addressType:t}),f=qa.get(e).nativeFungibleTokenType,d="unknown",m="",p=(0,$i.useMemo)(()=>{let b=s?.queriedWalletBalances[0]?.address;if(!b)return;let E=Ss(e,b);return{networkID:e,address:b,addressType:E}},[s?.queriedWalletBalances,e]),h=ji({chainAddress:p,type:f,balance:s?.totalQuantityString?new V(s?.totalQuantityString):void 0,decimals:s?.decimals??0,recipient:o,gasEstimation:n,clampToZero:!1});return!c&&s&&h&&(h.gte(r)?d="sufficient":d="insufficient",m=s?.symbol||""),(0,$i.useMemo)(()=>({hasSufficientFunds:d,nativeTokenSymbol:m,isLoading:a,isError:c}),[d,m,a,c])},"useHasSufficientFunds");u();l();var Xl=L(Q());u();l();var Wi=L(Q());u();l();var Wl=i(({chainAddresses:e=[]})=>{let t=Ee.tokensErrorCount(e);return R({queryKey:t,queryFn:i(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0})},"useTokensErrorCount");u();l();var Iy=i(({errors:e})=>e,"select");function zl({chainAddresses:e,queryOptions:t}){return $a({select:Iy,chainAddresses:e,queryOptions:t})}i(zl,"useTokensPartialErrors");var Yl=3,Ly=1,zi=i(({networkID:e,chainAddresses:t=[]})=>{let{data:n=[]}=zl({chainAddresses:t}),{data:r=0}=Wl({chainAddresses:t}),o=r>=Yl,{data:s=0}=ii(),a=s>=Yl,c=n.length===Ly&&n.some(m=>m.code==="TokensTrimmed"),{t:f}=Be(),d=(0,Wi.useMemo)(()=>{if(o)return f("partialErrorGeneric");let m=n.filter(h=>e?h.details.chainId===e:!0),p=m.length+(a?1:0);return p?p>1?f("partialErrorGeneric"):a?f("partialErrorTokenPrices"):c?f("partialErrorTokensTrimmed"):e?f("partialErrorTokenDetail"):f("partialErrorBalanceChainName",{chainName:A.getChainName(m[0].details.chainId)}):""},[o,n,a,e,c,f]);return(0,Wi.useMemo)(()=>({partialErrorMessage:d,shouldShowPartialError:d!==""}),[d])},"usePartialErrorBanner");function Oy(e){let{onTappingBuy:t,onTappingReceive:n,onTappingSend:r,onTappingSwap:o,account:s}=e,{shouldShowPartialError:a,partialErrorMessage:c}=zi({chainAddresses:s?.addresses});return{ctaActions:Uy({onTappingBuy:t,onTappingReceive:n,onTappingSend:r,onTappingSwap:o}),shouldShowPartialError:a,partialErrorMessage:c}}i(Oy,"useHomeViewState");function Uy(e){let{t}=Be(),n=Rs();return(0,Xl.useMemo)(()=>{let o=[];return o.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),n?o.push({text:t("commandTrade"),type:"trade",onClick:e.onTappingSwap}):o.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),o.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),o.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),o.sort((s,a)=>(xo.get(s.type)??100)-(xo.get(a.type)??100)),{primary:o,more:[]}},[t,n,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}i(Uy,"useHomeCTABarActions");u();l();var Jl=L(Q());var By=i(({networkID:e,unsignedTransaction:t,pendingActivityRows:n,accountIdentifier:r,accountSigner:o,storage:s,includeCallPayload:a})=>({accountSigner:o,accountIdentifier:r,networkID:e,unsignedTransaction:t,...a&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:Ht.Swap,display:{summary:n}},storage:s}),"buildArgs"),Ky=i(async({t:e,fungible:t,unsignedUnwrapTx:n,gasEstimation:r,storage:o,accountMetadata:s,accountSigner:a})=>{if(!n)throw new Error("Unsigned unwrap transaction is required");if(!r)throw new Error("Gas estimation is required");let{chain:c,balance:f}=t.data;if(!A.isEthereumNetworkID(c.id))throw new Error(`Chain is not supported: ${c.id}`);let d=c.id,m={topRight:{text:`+${f} ${c.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${f} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},p=hs.parse({type:ps.eip1559,chainId:A.getEVMNetworkIDValue(d),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`,...n}),h=By({storage:o,accountSigner:a,pendingActivityRows:m,includeCallPayload:!1,networkID:d,unsignedTransaction:p,accountIdentifier:s.accountIdentifier});return Er(h)},"executeUnwrapTransaction"),Vy=i(()=>{let{data:e}=Ve();return(0,Jl.useMemo)(()=>{let n=e?.type,r=e?.name??"",o=e?.identifier??"";return{accountName:r,accountType:n,accountIdentifier:o}},[e])},"useAccountMetadata"),Hy=i(e=>{let t=Ne(),n=X(),{t:r}=Be(),o=Vy(),s=Je();return Xe({async mutationFn({fungible:a,unsignedUnwrapTx:c,gasEstimation:f}){return await Ky({t:r,fungible:a,unsignedUnwrapTx:c,gasEstimation:f,accountMetadata:o,storage:t,accountSigner:s})},async onSuccess(){await n.invalidateQueries({queryKey:Ee.tokens(e)})}})},"useUnwrapTransaction");u();l();var Zl=L(Q());function Gy(e){let t=Ke(),n=X();return(0,Zl.useCallback)(async r=>{let o=await Ju(rt.AccountIdToHiddenMints)??{version:2,value:{}},a=Wt(o)?.value??{},c=a[e]??[],f=new Map(c.map(m=>[m.mintId,m]));for(let{fungibleKey:m,...p}of r)if("isHidden"in p){let{isHidden:h}=p;t.capture(h?"hideFungibleToken":"unhideFungibleToken",{data:{fungibleKey:m}}),f.set(m,{mintId:m,status:h?bn.Hidden:bn.Visible})}else{let{visibility:h}=p;f.set(m,{mintId:m,status:h})}a[e]=Array.from(f.values()),await Xu(rt.AccountIdToHiddenMints)({version:2,value:a}),await n.invalidateQueries({queryKey:Ee.hiddenMints(e)}),await n.invalidateQueries({predicate:i(m=>{let p=m.queryKey;return Array.isArray(p)&&p.length>=2&&typeof p[0]=="string"&&p[0].startsWith("fungible-tokens-")&&p[1]==="visibility-overrides"&&typeof p[2]=="object"&&p[2]!==null&&"accountId"in p[2]&&p[2].accountId===e},"predicate")})},[e,t,n])}i(Gy,"useSetVisibilityOverrides");u();l();u();l();var _l=L(Q());var Qy=i((e,t,n)=>{let r=X(),{fungibles:o}=Ot({keys:[e]}),s=o.length===1?o[0]:void 0;(0,_l.useEffect)(()=>{if(!s)return;let{type:a,data:c}=s,{balance:f,decimals:d,chain:m}=c,{id:p}=m,h=Ze(a)===!0;if(!n||!f||h||f.isEqualTo(t))return;let b=Ee.transferFungibleLoggingContext(e),E={transactionId:n,decimals:d,chainId:p,isNativeToken:h,previousBalance:f,fungibleKey:e};r.setQueryData(b,E)},[n])},"useTransferFungibleLoggingContext");u();l();var td=L(Q());u();l();function ed(e,t,n){return me.PublicKey.findProgramAddressSync([e.toBuffer(),n.toBuffer(),t.toBuffer()],ka)[0]}i(ed,"findAssociatedTokenAddress");var qy=new En("Unable to unwrap SOL. Wrapped SOL Token account does not exist."),jy=new En("Unable to unwrap SOL. Token account is not expected mint.");async function $y(e,t){let n=await e.getAccountInfo(t);if(!n)throw qy;let r=Fa.decode(n.data);return new me.PublicKey(r.mint)}i($y,"getMintOfATA");function Wy(e){if(e)return typeof e=="string"?new me.PublicKey(e):e}i(Wy,"ensurePublicKey");function zy(){let{connection:e}=In(),{data:t}=Ve(),{solanaChainAddress:n,accountIdentifier:r}=(0,td.useMemo)(()=>({solanaChainAddress:t?.addresses.find(xt),accountIdentifier:t?.identifier??""}),[t]),o=Ne(),s=Je(),{t:a}=Be();return Xe({mutationFn:i(async c=>{if(!n)return Promise.reject("solanaChainAddress not loaded");try{let{networkID:f,address:d}=n,m=new me.PublicKey(d),p=Wy(c?.tokenAccount)??ed(m,Ao,gn);if((await $y(e,p)).toBase58()!==Ao.toBase58())throw jy;let b=Zc(p,m,m,[],gn),E=new ys.Transaction().add(b),w={ownerAddress:d,networkID:f,data:{signature:""},type:Ht.UnwrapSOL,display:{summary:{topLeft:{text:a("assetDetailUnwrappingSOL")}}}},S=await $t({accountIdentifier:r,accountSigner:s,connection:e,feePayer:new me.PublicKey(d),pendingTransactionInput:w,storage:o,transaction:E,useSubmissionService:!1});return{networkID:f,id:S}}catch(f){throw f instanceof Error&&B.captureError(f,K.Tokens),f}},"mutationFn")})}i(zy,"useUnwrapSOL");u();l();var nd=P({minutes:1}),Yy=i((e,t=!0)=>{let n=Ee.solanaBalance(e);return R({enabled:!!e&&t&&xt(e),gcTime:nd,staleTime:nd,queryKey:n,async queryFn(){if(!e)throw new Error("No chain address provided");if(xt(e))return qt(e.networkID).getBalance(new me.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})},"useSolanaBalance");u();l();var rd=L(Q());var Xy=i(e=>{let{data:t}=Qs();return(0,rd.useMemo)(()=>{if(!e||!t)return;let n=e.data.chain.id,r=t.explorers[n]??po.get(n).defaultExplorer,o,s;if(Ze(e.type))s="address",o=e.data.walletAddress;else switch(e.type){case F.SuiCoin:{s="token",o=e.data.contractAddress;break}case F.ERC20:{s="address",o=e.data.contractAddress;break}case F.SPL:case F.CompressedSPL:{s="address",o=e.data.mintAddress;break}case F.BRC20:return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let a=yo({networkID:n,endpoint:s,explorerType:r,param:o});return{explorerName:ho[r],explorerUrl:a}},[e,t])},"useFungibleExplorerUrl");u();l();var od=L(Q());var Jy=i(e=>{let t=X();return(0,od.useCallback)(()=>t.invalidateQueries({queryKey:Ee.tokens(e)}),[t,e])},"useInvalidateTokens");u();l();var id=L(Q());var Zy=i((e,t)=>(0,id.useMemo)(()=>{if(e)if(Qt(e)){let n=ca(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:n.toString()})}}else return Gt(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:"spotWarning",rightSubtext:""}:void 0},[e,t]),"useNetworkFeeRow");u();l();var sd=L(Q());var _y=i(({caip19:e,fungibleCaip19:t,fungibleKeys:n,isSplCompressed:r})=>{let{fungibles:o,isLoadingTokens:s,refetch:a}=Ot({keys:n}),{data:c,refetch:f,isLoading:d}=eo({encodedCaip19:e,legacyKey:n?.[0]??null,isSplCompressed:r}),{data:m,isLoading:p}=Qi({caip19:e,includePrice:!0}),h=rg(o,r),b=(0,sd.useMemo)(()=>{if(!h)return;if(!c)return h;let w=Tn(c.totalQuantityString,c.decimals);return{...h,data:{...h.data,amount:c.totalQuantityString,balance:w,usd:c.price?.price?w.times(c.price.price).toNumber():void 0,usd_24h_change:c.price?.priceChange24h!==void 0?ad(w.times(c.price.price).toNumber(),c.price?.priceChange24h):void 0}}},[h,c]);return{derivedFungible:eg({fungible:b,fungibleCaip19:t,tokenDetails:m,tokenBalance:c}),isLoading:s||p||d,refetchFungibleBalance:a,refetchTokenBalance:f}},"useFungibleData");function eg({fungible:e,fungibleCaip19:t,tokenDetails:n,tokenBalance:r}){if(e)return e;if(!n)return;let o=Ya(n),s="address"in t?tg(t,o):ng(t,o);if(s){if(r){r.extraMetadata?.compression?.compressed&&(s.type=F.CompressedSPL);let a=Tn(r.totalQuantityString,r.decimals);s.data.balance=a,s.data.amount=r.totalQuantityString,s.data.usd=r.price?.price?a.times(r.price.price).toNumber():void 0,s.data.usd_24h_change=r.price?.priceChange24h!==void 0?ad(a.times(r.price.price).toNumber(),r.price?.priceChange24h):void 0,s.data.walletAddress=r.queriedWalletBalances.find(c=>c.quantity>0)?.address??""}return s}B.addBreadcrumb(K.Tokens,"deriveFungible",te.Error,{fungibleCaip19:JSON.stringify(t),tokenDetails:JSON.stringify(n),tokenBalance:JSON.stringify(r)}),B.captureError(new Error(`Fungible type could not be derived from ${JSON.stringify(t)}`),K.Fungibles)}i(eg,"deriveFungible");function tg(e,t){let n=So(e);if(Ze(n))throw new Error("Cannot create fake non-native fungible for native token");let r=t.address??e.address,o={amount:"0",balance:V(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:r,walletAddress:"",spamStatus:t.spamStatus};switch(n){case F.SPL:return{type:n,data:{...o,mintAddress:r,programId:"",splTokenAccountPubkey:""}};case F.CompressedSPL:return{type:n,data:{...o,mintAddress:r,programId:""}};case F.ERC20:case F.SuiCoin:return{type:n,data:{...o,contractAddress:r}};case F.BRC20:return{type:n,data:{...o,firstCreatedInscriptionId:r}};case F.HypercoreAsset:return;default:Fe(n)}}i(tg,"createFakeNonNativeFungible");function ng(e,t){let n=So(e),r={amount:"0",balance:V(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:n,walletAddress:"",spamStatus:t.spamStatus};switch(e.slip44){case ze.Solana:return{type:F.SolanaNative,data:r};case ze.Bitcoin:return{type:F.BitcoinNative,data:r};case ze.Ethereum:return{type:F.EthereumNative,data:r};case ze.Base:return{type:F.BaseNative,data:r};case ze.Monad:return{type:F.MonadNative,data:r};case ze.Arbitrum:return{type:F.ArbitrumNative,data:r};case ze.Hypercore:return{type:F.HypercoreNative,data:r};case ze.Polygon:return{type:F.PolygonNative,data:r};case ze.Sui:return{type:F.SuiNative,data:r};default:{let o=new Error("Missing native token implementation when creating fake a Fungible");throw Fe(e.slip44,o),o}}}i(ng,"createFakeNativeFungible");var rg=i((e,t)=>e?.length?[...e].sort((r,o)=>{if(t!==void 0){let s=r.type===F.CompressedSPL,a=o.type===F.CompressedSPL;if(s!==a)return t?s?-1:1:s?1:-1}return o.data.balance.minus(r.data.balance).toNumber()})[0]:void 0,"getSelectedFungible"),ad=i((e,t)=>{if(t===-100)return-1*e;let n=e/(1+t/100);return e-n},"calculatePriceDifference");u();l();u();l();var ro;(function(e){e.AF="AF",e.AX="AX",e.AL="AL",e.DZ="DZ",e.AS="AS",e.AD="AD",e.AO="AO",e.AI="AI",e.AQ="AQ",e.AG="AG",e.AR="AR",e.AM="AM",e.AW="AW",e.AU="AU",e.AT="AT",e.AZ="AZ",e.BS="BS",e.BH="BH",e.BD="BD",e.BB="BB",e.BY="BY",e.BE="BE",e.BZ="BZ",e.BJ="BJ",e.BM="BM",e.BT="BT",e.BO="BO",e.BQ="BQ",e.BA="BA",e.BW="BW",e.BV="BV",e.BR="BR",e.IO="IO",e.BN="BN",e.BG="BG",e.BF="BF",e.BI="BI",e.KH="KH",e.CM="CM",e.CA="CA",e.CV="CV",e.KY="KY",e.CF="CF",e.TD="TD",e.CL="CL",e.CX="CX",e.CC="CC",e.CO="CO",e.KM="KM",e.CK="CK",e.CR="CR",e.CI="CI",e.HR="HR",e.CU="CU",e.CW="CW",e.CY="CY",e.CZ="CZ",e.CD="CD",e.DK="DK",e.DJ="DJ",e.DM="DM",e.DO="DO",e.EC="EC",e.EG="EG",e.SV="SV",e.GQ="GQ",e.ER="ER",e.EE="EE",e.SZ="SZ",e.ET="ET",e.FK="FK",e.FO="FO",e.FJ="FJ",e.FI="FI",e.FR="FR",e.GF="GF",e.PF="PF",e.TF="TF",e.GA="GA",e.GE="GE",e.DE="DE",e.GH="GH",e.GI="GI",e.GR="GR",e.GL="GL",e.GD="GD",e.GP="GP",e.GU="GU",e.GT="GT",e.GG="GG",e.GN="GN",e.GW="GW",e.GY="GY",e.HT="HT",e.HM="HM",e.VA="VA",e.HN="HN",e.HK="HK",e.HU="HU",e.IS="IS",e.IN="IN",e.ID="ID",e.IQ="IQ",e.IE="IE",e.IR="IR",e.IM="IM",e.IL="IL",e.IT="IT",e.JM="JM",e.JP="JP",e.JE="JE",e.JO="JO",e.KZ="KZ",e.KE="KE",e.KI="KI",e.XK="XK",e.KW="KW",e.KG="KG",e.LA="LA",e.LV="LV",e.LB="LB",e.LS="LS",e.LR="LR",e.LY="LY",e.LI="LI",e.LT="LT",e.LU="LU",e.MO="MO",e.MG="MG",e.MW="MW",e.MY="MY",e.MV="MV",e.ML="ML",e.MT="MT",e.MH="MH",e.MQ="MQ",e.MR="MR",e.MU="MU",e.YT="YT",e.MX="MX",e.FM="FM",e.MD="MD",e.MC="MC",e.MN="MN",e.ME="ME",e.MS="MS",e.MA="MA",e.MZ="MZ",e.MM="MM",e.NA="NA",e.NR="NR",e.NP="NP",e.NL="NL",e.NC="NC",e.NZ="NZ",e.NI="NI",e.NE="NE",e.NG="NG",e.NU="NU",e.NF="NF",e.KP="KP",e.MP="MP",e.NO="NO",e.OM="OM",e.PK="PK",e.PW="PW",e.PA="PA",e.PG="PG",e.PY="PY",e.CN="CN",e.PE="PE",e.PH="PH",e.PN="PN",e.PL="PL",e.PT="PT",e.PR="PR",e.QA="QA",e.CG="CG",e.GM="GM",e.RE="RE",e.RO="RO",e.RU="RU",e.RW="RW",e.BL="BL",e.SH="SH",e.KN="KN",e.LC="LC",e.MF="MF",e.PM="PM",e.VC="VC",e.WS="WS",e.SM="SM",e.ST="ST",e.SA="SA",e.SN="SN",e.RS="RS",e.SC="SC",e.SL="SL",e.SG="SG",e.SX="SX",e.SK="SK",e.SI="SI",e.SB="SB",e.SO="SO",e.ZA="ZA",e.GS="GS",e.KR="KR",e.SS="SS",e.ES="ES",e.LK="LK",e.PS="PS",e.SD="SD",e.SR="SR",e.SJ="SJ",e.SE="SE",e.CH="CH",e.SY="SY",e.TW="TW",e.TJ="TJ",e.TH="TH",e.MK="MK",e.TL="TL",e.TG="TG",e.TK="TK",e.TO="TO",e.TT="TT",e.TN="TN",e.TR="TR",e.TM="TM",e.TC="TC",e.TV="TV",e.UG="UG",e.UA="UA",e.AE="AE",e.GB="GB",e.TZ="TZ",e.UM="UM",e.US="US",e.UY="UY",e.UZ="UZ",e.VU="VU",e.VE="VE",e.VN="VN",e.VG="VG",e.VI="VI",e.WF="WF",e.EH="EH",e.YE="YE",e.ZM="ZM",e.ZW="ZW"})(ro||(ro={}));var fe;(function(e){e.FAIL_SEVERE="FAIL_SEVERE",e.FAIL_HIGH="FAIL_HIGH",e.NO_ACTION="NO_ACTION",e.DATA_NOT_FOUND="DATA_NOT_FOUND"})(fe||(fe={}));var cd=g.object({action:g.nativeEnum(fe),address:ws,expirationUnixtimeInSec:g.number().nullish().default(null)}),Xi=g.object({addressScreenResults:g.array(cd)}),ud=g.object({country:g.nativeEnum(ro)}),Yn=class extends Error{static{i(this,"WalletScreenError")}constructor(t){super(t),this.name="WalletScreenError"}},Yi;(function(e){e.BURN_COLLECTIBLE="BURN_COLLECTIBLE",e.SEND_COLLECTIBLE="SEND_COLLECTIBLE",e.SEND_FUNGIBLE="SEND_FUNGIBLE",e.STAKE_FUNGIBLE="STAKE_FUNGIBLE",e.SWAP_FUNGIBLE="SWAP_FUNGIBLE",e.INSTANT_SELL="INSTANT_SELL",e.PERPS_FUNDING="PERPS_FUNDING"})(Yi||(Yi={}));u();l();var yd=L(Q());u();l();u();l();var ld="@phantom/wallet-screening",dd=`${ld}:wallet-screen-action`,og=`${ld}:wallet-screen-geo`,oo={walletScreenAction(e){return[dd,e]},walletGeo(){return[og]}};u();l();var fd=new Error("Failed to fetch wallet screen action.");async function md(e){try{let t=await re.api().post("/wallet_screen/v1",e);if(!Ue(t))throw fd;let n=t.data;return Xi.parse(n)}catch{throw fd}}i(md,"fetchWalletScreenAction");var pd=P({days:7}),hd=i(e=>{let t=e!==void 0&&A.isMainnetNetworkID(e.networkID),n=[];if(e!==void 0){let c=A.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;n=[{chainId:e.networkID,address:c,resourceType:de.address}]}let r={addresses:n},o=X(),s=oo.walletScreenAction(r),a=[s[0]];return R({enabled:t,queryKey:s,gcTime:pd,staleTime:pd,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(ig(o,a))return fe.FAIL_SEVERE;let f=await md(r);return sg(f)}})},"useWalletScreenAction"),ig=i((e,t)=>{let n=e.getQueriesData({queryKey:t,exact:!1}),r=!1;for(let[o,s]of n){let a=s;if(a&&a===fe.FAIL_SEVERE){r=!0;break}}return r},"findSevereInQueryData"),sg=i(e=>{let t=e.addressScreenResults;return t.some(n=>n.action===fe.FAIL_SEVERE)?fe.FAIL_SEVERE:t.some(n=>n.action===fe.FAIL_HIGH)?fe.FAIL_HIGH:t.some(n=>n.action===fe.NO_ACTION)?fe.NO_ACTION:fe.DATA_NOT_FOUND},"getActionFromResponse");var ag=i((e,t)=>{let n=Ke(),{data:r}=hd(e);switch((0,yd.useEffect)(()=>{r&&e&&n.capture("walletScreened",{data:{walletScreen:{action:r.toString(),surface:t},chainId:A.getChainID(e.networkID),networkId:e.networkID}})},[r,e,t,n]),r){case fe.FAIL_SEVERE:case fe.FAIL_HIGH:throw new Yn(`Transaction disabled: ${t}`);case fe.NO_ACTION:case fe.DATA_NOT_FOUND:return}},"useThrowIfFailWalletScreen");u();l();u();l();u();l();var gd=new Error("Failed to fetch wallet geo.");async function bd(){try{let e=await re.api().get("/wallet_screen/v1/geo");if(!Ue(e))throw gd;let t=e.data;return ud.parse(t).country}catch{throw gd}}i(bd,"fetchWalletGeo");var Ed=P({hours:1}),cg=i(()=>{let e=oo.walletGeo();return R({queryKey:e,staleTime:Ed,refetchInterval:Ed,queryFn:bd})},"useWalletGeo");u();l();u();l();function mt(e){return Array.isArray?Array.isArray(e):Pd(e)==="[object Array]"}i(mt,"isArray");var ug=1/0;function lg(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-ug?"-0":t}i(lg,"baseToString");function dg(e){return e==null?"":lg(e)}i(dg,"toString");function ct(e){return typeof e=="string"}i(ct,"isString");function xd(e){return typeof e=="number"}i(xd,"isNumber");function fg(e){return e===!0||e===!1||mg(e)&&Pd(e)=="[object Boolean]"}i(fg,"isBoolean");function Cd(e){return typeof e=="object"}i(Cd,"isObject");function mg(e){return Cd(e)&&e!==null}i(mg,"isObjectLike");function Oe(e){return e!=null}i(Oe,"isDefined");function Ji(e){return!e.trim().length}i(Ji,"isBlank");function Pd(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}i(Pd,"getTag");var pg="Incorrect 'index' type",hg=i(e=>`Invalid value for key ${e}`,"LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY"),yg=i(e=>`Pattern length exceeds max of ${e}.`,"PATTERN_LENGTH_TOO_LARGE"),gg=i(e=>`Missing ${e} property in key`,"MISSING_KEY_PROPERTY"),bg=i(e=>`Property 'weight' in key '${e}' must be a positive integer`,"INVALID_KEY_WEIGHT_VALUE"),Td=Object.prototype.hasOwnProperty,Zi=class{static{i(this,"KeyStore")}constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let o=Md(r);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Md(e){let t=null,n=null,r=null,o=1,s=null;if(ct(e)||mt(e))r=e,t=wd(e),n=_i(e);else{if(!Td.call(e,"name"))throw new Error(gg("name"));let a=e.name;if(r=a,Td.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(bg(a));t=wd(a),n=_i(a),s=e.getFn}return{path:t,id:n,weight:o,src:r,getFn:s}}i(Md,"createKey");function wd(e){return mt(e)?e:e.split(".")}i(wd,"createKeyPath");function _i(e){return mt(e)?e.join("."):e}i(_i,"createKeyId");function Eg(e,t){let n=[],r=!1,o=i((s,a,c)=>{if(Oe(s))if(!a[c])n.push(s);else{let f=a[c],d=s[f];if(!Oe(d))return;if(c===a.length-1&&(ct(d)||xd(d)||fg(d)))n.push(dg(d));else if(mt(d)){r=!0;for(let m=0,p=d.length;m<p;m+=1)o(d[m],a,c+1)}else a.length&&o(d,a,c+1)}},"deepGet");return o(e,ct(t)?t.split("."):t,0),r?n:n[0]}i(Eg,"get");var Tg={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},wg={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:i((e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,"sortFn")},vg={location:0,threshold:.6,distance:100},Ag={useExtendedSearch:!1,getFn:Eg,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},O={...wg,...Tg,...vg,...Ag},Sg=/[^ ]+/g;function xg(e=1,t=3){let n=new Map,r=Math.pow(10,t);return{get(o){let s=o.match(Sg).length;if(n.has(s))return n.get(s);let a=1/Math.pow(s,.5*e),c=parseFloat(Math.round(a*r)/r);return n.set(s,c),c},clear(){n.clear()}}}i(xg,"norm");var Xn=class{static{i(this,"FuseIndex")}constructor({getFn:t=O.getFn,fieldNormWeight:n=O.fieldNormWeight}={}){this.norm=xg(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ct(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){let n=this.size();ct(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Oe(t)||Ji(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((o,s)=>{let a=o.getFn?o.getFn(t):this.getFn(t,o.path);if(Oe(a)){if(mt(a)){let c=[],f=[{nestedArrIndex:-1,value:a}];for(;f.length;){let{nestedArrIndex:d,value:m}=f.pop();if(Oe(m))if(ct(m)&&!Ji(m)){let p={v:m,i:d,n:this.norm.get(m)};c.push(p)}else mt(m)&&m.forEach((p,h)=>{f.push({nestedArrIndex:h,value:p})})}r.$[s]=c}else if(ct(a)&&!Ji(a)){let c={v:a,n:this.norm.get(a)};r.$[s]=c}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function Nd(e,t,{getFn:n=O.getFn,fieldNormWeight:r=O.fieldNormWeight}={}){let o=new Xn({getFn:n,fieldNormWeight:r});return o.setKeys(e.map(Md)),o.setSources(t),o.create(),o}i(Nd,"createIndex");function Cg(e,{getFn:t=O.getFn,fieldNormWeight:n=O.fieldNormWeight}={}){let{keys:r,records:o}=e,s=new Xn({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(o),s}i(Cg,"parseIndex");function io(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:o=O.distance,ignoreLocation:s=O.ignoreLocation}={}){let a=t/e.length;if(s)return a;let c=Math.abs(r-n);return o?a+c/o:c?1:a}i(io,"computeScore$1");function Pg(e=[],t=O.minMatchCharLength){let n=[],r=-1,o=-1,s=0;for(let a=e.length;s<a;s+=1){let c=e[s];c&&r===-1?r=s:!c&&r!==-1&&(o=s-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}i(Pg,"convertMaskToIndices");var Ut=32;function Mg(e,t,n,{location:r=O.location,distance:o=O.distance,threshold:s=O.threshold,findAllMatches:a=O.findAllMatches,minMatchCharLength:c=O.minMatchCharLength,includeMatches:f=O.includeMatches,ignoreLocation:d=O.ignoreLocation}={}){if(t.length>Ut)throw new Error(yg(Ut));let m=t.length,p=e.length,h=Math.max(0,Math.min(r,p)),b=s,E=h,w=c>1||f,S=w?Array(p):[],k;for(;(k=e.indexOf(t,E))>-1;){let ee=io(t,{currentLocation:k,expectedLocation:h,distance:o,ignoreLocation:d});if(b=Math.min(ee,b),E=k+m,w){let Ce=0;for(;Ce<m;)S[k+Ce]=1,Ce+=1}}E=-1;let H=[],z=1,ae=m+p,ce=1<<m-1;for(let ee=0;ee<m;ee+=1){let Ce=0,Pe=ae;for(;Ce<Pe;)io(t,{errors:ee,currentLocation:h+Pe,expectedLocation:h,distance:o,ignoreLocation:d})<=b?Ce=Pe:ae=Pe,Pe=Math.floor((ae-Ce)/2+Ce);ae=Pe;let Re=Math.max(1,h-Pe+1),v=a?p:Math.min(h+Pe,p)+m,T=Array(v+2);T[v+1]=(1<<ee)-1;for(let x=v;x>=Re;x-=1){let M=x-1,N=n[e.charAt(M)];if(w&&(S[M]=+!!N),T[x]=(T[x+1]<<1|1)&N,ee&&(T[x]|=(H[x+1]|H[x])<<1|1|H[x+1]),T[x]&ce&&(z=io(t,{errors:ee,currentLocation:M,expectedLocation:h,distance:o,ignoreLocation:d}),z<=b)){if(b=z,E=M,E<=h)break;Re=Math.max(1,2*h-E)}}if(io(t,{errors:ee+1,currentLocation:h,expectedLocation:h,distance:o,ignoreLocation:d})>b)break;H=T}let ve={isMatch:E>=0,score:Math.max(.001,z)};if(w){let ee=Pg(S,c);ee.length?f&&(ve.indices=ee):ve.isMatch=!1}return ve}i(Mg,"search");function Ng(e){let t={};for(let n=0,r=e.length;n<r;n+=1){let o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}i(Ng,"createPatternAlphabet");var so=class{static{i(this,"BitapSearch")}constructor(t,{location:n=O.location,threshold:r=O.threshold,distance:o=O.distance,includeMatches:s=O.includeMatches,findAllMatches:a=O.findAllMatches,minMatchCharLength:c=O.minMatchCharLength,isCaseSensitive:f=O.isCaseSensitive,ignoreLocation:d=O.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:o,includeMatches:s,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:d},this.pattern=f?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let m=i((h,b)=>{this.chunks.push({pattern:h,alphabet:Ng(h),startIndex:b})},"addChunk"),p=this.pattern.length;if(p>Ut){let h=0,b=p%Ut,E=p-b;for(;h<E;)m(this.pattern.substr(h,Ut),h),h+=Ut;if(b){let w=p-Ut;m(this.pattern.substr(w),w)}}else m(this.pattern,0)}searchIn(t){let{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let E={isMatch:!0,score:0};return r&&(E.indices=[[0,t.length-1]]),E}let{location:o,distance:s,threshold:a,findAllMatches:c,minMatchCharLength:f,ignoreLocation:d}=this.options,m=[],p=0,h=!1;this.chunks.forEach(({pattern:E,alphabet:w,startIndex:S})=>{let{isMatch:k,score:H,indices:z}=Mg(t,E,w,{location:o+S,distance:s,threshold:a,findAllMatches:c,minMatchCharLength:f,includeMatches:r,ignoreLocation:d});k&&(h=!0),p+=H,k&&z&&(m=[...m,...z])});let b={isMatch:h,score:h?p/this.chunks.length:1};return h&&r&&(b.indices=m),b}},ut=class{static{i(this,"BaseMatch")}constructor(t){this.pattern=t}static isMultiMatch(t){return vd(t,this.multiRegex)}static isSingleMatch(t){return vd(t,this.singleRegex)}search(){}};function vd(e,t){let n=e.match(t);return n?n[1]:null}i(vd,"getMatch");var es=class extends ut{static{i(this,"ExactMatch")}constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},ts=class extends ut{static{i(this,"InverseExactMatch")}constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},ns=class extends ut{static{i(this,"PrefixExactMatch")}constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},rs=class extends ut{static{i(this,"InversePrefixExactMatch")}constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},os=class extends ut{static{i(this,"SuffixExactMatch")}constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},is=class extends ut{static{i(this,"InverseSuffixExactMatch")}constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},ao=class extends ut{static{i(this,"FuzzyMatch")}constructor(t,{location:n=O.location,threshold:r=O.threshold,distance:o=O.distance,includeMatches:s=O.includeMatches,findAllMatches:a=O.findAllMatches,minMatchCharLength:c=O.minMatchCharLength,isCaseSensitive:f=O.isCaseSensitive,ignoreLocation:d=O.ignoreLocation}={}){super(t),this._bitapSearch=new so(t,{location:n,threshold:r,distance:o,includeMatches:s,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},co=class extends ut{static{i(this,"IncludeMatch")}constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r,o=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,o.push([r,n-1]);let a=!!o.length;return{isMatch:a,score:a?0:1,indices:o}}},ss=[es,co,ns,rs,is,os,ts,ao],Ad=ss.length,Dg=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,kg="|";function Rg(e,t={}){return e.split(kg).map(n=>{let r=n.trim().split(Dg).filter(s=>s&&!!s.trim()),o=[];for(let s=0,a=r.length;s<a;s+=1){let c=r[s],f=!1,d=-1;for(;!f&&++d<Ad;){let m=ss[d],p=m.isMultiMatch(c);p&&(o.push(new m(p,t)),f=!0)}if(!f)for(d=-1;++d<Ad;){let m=ss[d],p=m.isSingleMatch(c);if(p){o.push(new m(p,t));break}}}return o})}i(Rg,"parseQuery");var Fg=new Set([ao.type,co.type]),as=class{static{i(this,"ExtendedSearch")}constructor(t,{isCaseSensitive:n=O.isCaseSensitive,includeMatches:r=O.includeMatches,minMatchCharLength:o=O.minMatchCharLength,ignoreLocation:s=O.ignoreLocation,findAllMatches:a=O.findAllMatches,location:c=O.location,threshold:f=O.threshold,distance:d=O.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:o,findAllMatches:a,ignoreLocation:s,location:c,threshold:f,distance:d},this.pattern=n?t:t.toLowerCase(),this.query=Rg(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){let n=this.query;if(!n)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let s=0,a=[],c=0;for(let f=0,d=n.length;f<d;f+=1){let m=n[f];a.length=0,s=0;for(let p=0,h=m.length;p<h;p+=1){let b=m[p],{isMatch:E,indices:w,score:S}=b.search(t);if(E){if(s+=1,c+=S,r){let k=b.constructor.type;Fg.has(k)?a=[...a,...w]:a.push(w)}}else{c=0,s=0,a.length=0;break}}if(s){let p={isMatch:!0,score:c/s};return r&&(p.indices=a),p}}return{isMatch:!1,score:1}}},cs=[];function Ig(...e){cs.push(...e)}i(Ig,"register");function us(e,t){for(let n=0,r=cs.length;n<r;n+=1){let o=cs[n];if(o.condition(e,t))return new o(e,t)}return new so(e,t)}i(us,"createSearcher");var uo={AND:"$and",OR:"$or"},ls={PATH:"$path",PATTERN:"$val"},ds=i(e=>!!(e[uo.AND]||e[uo.OR]),"isExpression"),Lg=i(e=>!!e[ls.PATH],"isPath"),Og=i(e=>!mt(e)&&Cd(e)&&!ds(e),"isLeaf"),Sd=i(e=>({[uo.AND]:Object.keys(e).map(t=>({[t]:e[t]}))}),"convertToExplicit");function Dd(e,t,{auto:n=!0}={}){let r=i(o=>{let s=Object.keys(o),a=Lg(o);if(!a&&s.length>1&&!ds(o))return r(Sd(o));if(Og(o)){let f=a?o[ls.PATH]:s[0],d=a?o[ls.PATTERN]:o[f];if(!ct(d))throw new Error(hg(f));let m={keyId:_i(f),pattern:d};return n&&(m.searcher=us(d,t)),m}let c={children:[],operator:s[0]};return s.forEach(f=>{let d=o[f];mt(d)&&d.forEach(m=>{c.children.push(r(m))})}),c},"next");return ds(e)||(e=Sd(e)),r(e)}i(Dd,"parse");function Ug(e,{ignoreFieldNorm:t=O.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:o,norm:s,score:a})=>{let c=o?o.weight:null;r*=Math.pow(a===0&&c?Number.EPSILON:a,(c||1)*(t?1:s))}),n.score=r})}i(Ug,"computeScore");function Bg(e,t){let n=e.matches;t.matches=[],Oe(n)&&n.forEach(r=>{if(!Oe(r.indices)||!r.indices.length)return;let{indices:o,value:s}=r,a={indices:o,value:s};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),t.matches.push(a)})}i(Bg,"transformMatches");function Kg(e,t){t.score=e.score}i(Kg,"transformScore");function Vg(e,t,{includeMatches:n=O.includeMatches,includeScore:r=O.includeScore}={}){let o=[];return n&&o.push(Bg),r&&o.push(Kg),e.map(s=>{let{idx:a}=s,c={item:t[a],refIndex:a};return o.length&&o.forEach(f=>{f(s,c)}),c})}i(Vg,"format");var Bt=class{static{i(this,"Fuse")}constructor(t,n={},r){this.options={...O,...n},this.options.useExtendedSearch,this._keyStore=new Zi(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Xn))throw new Error(pg);this._myIndex=n||Nd(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Oe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let n=[];for(let r=0,o=this._docs.length;r<o;r+=1){let s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,o-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){let{includeMatches:r,includeScore:o,shouldSort:s,sortFn:a,ignoreFieldNorm:c}=this.options,f=ct(t)?ct(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ug(f,{ignoreFieldNorm:c}),s&&f.sort(a),xd(n)&&n>-1&&(f=f.slice(0,n)),Vg(f,this._docs,{includeMatches:r,includeScore:o})}_searchStringList(t){let n=us(t,this.options),{records:r}=this._myIndex,o=[];return r.forEach(({v:s,i:a,n:c})=>{if(!Oe(s))return;let{isMatch:f,score:d,indices:m}=n.searchIn(s);f&&o.push({item:s,idx:a,matches:[{score:d,value:s,norm:c,indices:m}]})}),o}_searchLogical(t){let n=Dd(t,this.options),r=i((c,f,d)=>{if(!c.children){let{keyId:p,searcher:h}=c,b=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(f,p),searcher:h});return b&&b.length?[{idx:d,item:f,matches:b}]:[]}let m=[];for(let p=0,h=c.children.length;p<h;p+=1){let b=c.children[p],E=r(b,f,d);if(E.length)m.push(...E);else if(c.operator===uo.AND)return[]}return m},"evaluate"),o=this._myIndex.records,s={},a=[];return o.forEach(({$:c,i:f})=>{if(Oe(c)){let d=r(n,c,f);d.length&&(s[f]||(s[f]={idx:f,item:c,matches:[]},a.push(s[f])),d.forEach(({matches:m})=>{s[f].matches.push(...m)}))}}),a}_searchObjectList(t){let n=us(t,this.options),{keys:r,records:o}=this._myIndex,s=[];return o.forEach(({$:a,i:c})=>{if(!Oe(a))return;let f=[];r.forEach((d,m)=>{f.push(...this._findMatches({key:d,value:a[m],searcher:n}))}),f.length&&s.push({idx:c,item:a,matches:f})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Oe(n))return[];let o=[];if(mt(n))n.forEach(({v:s,i:a,n:c})=>{if(!Oe(s))return;let{isMatch:f,score:d,indices:m}=r.searchIn(s);f&&o.push({score:d,key:t,value:s,idx:a,norm:c,indices:m})});else{let{v:s,n:a}=n,{isMatch:c,score:f,indices:d}=r.searchIn(s);c&&o.push({score:f,key:t,value:s,norm:a,indices:d})}return o}};Bt.version="7.0.0";Bt.createIndex=Nd;Bt.parseIndex=Cg;Bt.config=O;Bt.parseQuery=Dd;Ig(as);export{It as a,tc as b,nc as c,Po as d,rc as e,Wd as f,Zc as g,D as h,dc as i,gE as j,Te as k,An as l,bE as m,nn as n,sl as o,it as p,af as q,kc as r,kt as s,oi as t,$o as u,Wo as v,Xo as w,Jo as x,Rt as y,tm as z,Rr as A,Hc as B,Gc as C,mm as D,zc as E,Ft as F,Kp as G,ci as H,ui as I,Vm as J,Hp as K,Pi as L,Fn as M,cu as N,In as O,Gp as P,Hm as Q,Ln as R,qu as S,qp as T,$p as U,Qr as V,Mi as W,_p as X,xi as Y,Ku as Z,eh as _,th as $,nh as aa,Fp as ba,oh as ca,ih as da,sh as ea,Up as fa,ah as ga,uh as ha,lh as ia,rt as ja,Zu as ka,Di as la,Ot as ma,Qy as na,ji as oa,zy as pa,ph as qa,Yy as ra,Xy as sa,hh as ta,st as ua,Py as va,ul as wa,VI as xa,dl as ya,ML as za,qh as Aa,NO as Ba,We as Ca,Wr as Da,Pl as Ea,Ml as Fa,zr as Ga,sn as Ha,at as Ia,Rl as Ja,Tt as Ka,_h as La,vt as Ma,an as Na,At as Oa,eo as Pa,wy as Qa,ql as Ra,no as Sa,Sy as Ta,un as Ua,Vl as Va,jl as Wa,$l as Xa,Qi as Ya,Fy as Za,zi as _a,Oy as $a,Jy as ab,Zy as bb,Hy as cb,_y as db,Gy as eb,Bt as fb,Yn as gb,Yi as hb,dd as ib,ag as jb,cg as kb};
//# sourceMappingURL=chunk-HZ46BFL2.js.map
