import{$a as ir,$d as $l,A as x1,Ab as hc,Ac as X,Ad as vi,Bb as M1,Bc as H,Bd as gc,C as O0,Cb as T1,D as A1,E as cc,Ec as G,F as uc,Fb as I1,H as Js,I as C0,Ib as Y0,Id as am,J as ql,Jb as Nt,Jd as cm,K as R0,Kb as pc,Kc as Hl,Kd as um,L as xe,Ld as lm,M as ee,Mb as X0,Md as fm,N as U0,O as N0,Ob as Wl,P as D0,Pb as pe,Q as L0,R as Jn,Sa as j0,Sd as dm,Td as yc,Ud as qo,Vd as hm,W as Fo,Wb as em,Wd as wi,X as k,Xd as _1,Yd as pm,Z as Ys,Za as q0,Zd as xi,_ as dr,_a as zl,_d as mm,aa as V0,ab as Ut,ae as gm,bb as lc,be as Gl,cb as ro,ce as ym,db as z0,dd as om,de as vm,eb as B,ee as vc,fb as W0,gb as H0,ge as $t,ha as Rt,hb as $0,hc as tm,hd as rt,ib as S1,ic as jo,jb as yi,jc as rm,kb as G0,kd as sm,lb as Z0,nc as nm,oa as F0,oc as mc,pa as tn,qa as rn,qd as _e,rb as E1,sd as Ae,tb as Tr,ub as Q0,v as Qs,vb as ct,vd as ft,w as b1,wb as fc,x as P0,xb as nn,y as B0,yb as dc,yc as im,z as K0,zb as J0}from"./chunk-ODNNZUPK.js";import{A as M0,C as oc,D as sc,E as ac,I as T0,J as I0,a as E0,b as v1,d as No,f as w1,h as Do}from"./chunk-UAQWDGIM.js";import{R as k1,a as Pt,m as wn,r as bi}from"./chunk-LELMSWC2.js";import{c as k0,h as vt,k as Vo}from"./chunk-L7YPSK2Y.js";import{g as p,h as Ct,i as Lo,l as _0,n as nr}from"./chunk-VAUOTJLY.js";import{a as n,d as de,e as g1,g as he,i as d,j as M,k as y1,l as en,m as Buffer,n as h}from"./chunk-NSVULBS3.js";var es=de(Mc=>{"use strict";d();h();Object.defineProperty(Mc,"__esModule",{value:!0});Mc.AppAuthError=void 0;var iA=function(){function e(t,r){this.message=t,this.extras=r}return n(e,"AppAuthError"),e}();Mc.AppAuthError=iA});var Tc=de(An=>{"use strict";d();h();Object.defineProperty(An,"__esModule",{value:!0});An.DefaultCrypto=An.textEncodeLite=An.urlSafe=An.bufferToString=void 0;var oA=y1(),Om=es(),Cm=typeof self<"u"&&!!self.crypto,sA=Cm&&!!self.crypto.subtle,sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Rm(e){for(var t=[],r=0;r<e.byteLength;r+=1){var i=e[r]%sf.length;t.push(sf[i])}return t.join("")}n(Rm,"bufferToString");An.bufferToString=Rm;function Um(e){var t=oA.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}n(Um,"urlSafe");An.urlSafe=Um;function Nm(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}n(Nm,"textEncodeLite");An.textEncodeLite=Nm;var aA=function(){function e(){}return n(e,"DefaultCrypto"),e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if(Cm)self.crypto.getRandomValues(r);else for(var i=0;i<t;i+=1)r[i]=Math.random()*sf.length|0;return Rm(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new Om.AppAuthError("Invalid code length.")):sA?new Promise(function(r,i){self.crypto.subtle.digest("SHA-256",Nm(t)).then(function(o){return r(Um(new Uint8Array(o)))},function(o){return i(o)})}):Promise.reject(new Om.AppAuthError("window.crypto.subtle is unavailable."))},e}();An.DefaultCrypto=aA});var af=de(hr=>{"use strict";d();h();Object.defineProperty(hr,"__esModule",{value:!0});hr.IS_PROFILE=hr.IS_LOG=hr.setFlag=hr.Flags=void 0;hr.Flags={IS_LOG:!0,IS_PROFILE:!1};function cA(e,t){hr.Flags[e]=t}n(cA,"setFlag");hr.setFlag=cA;hr.IS_LOG=hr.Flags.IS_LOG,hr.IS_PROFILE=hr.Flags.IS_PROFILE});var la=de(Mi=>{"use strict";d();h();var cf=Mi&&Mi.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,a;i<o;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.profile=Mi.log=void 0;var Dm=af();function uf(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Dm.Flags.IS_LOG){var i=t?t.length:0;i>0?console.log.apply(console,cf([e],t,!1)):console.log(e)}}n(uf,"log");Mi.log=uf;var uA=typeof self<"u"&&!!self.performance&&!!console.profile;function lA(e,t,r){return Dm.Flags.IS_PROFILE?fA(e,t,r):r}n(lA,"profile");Mi.profile=lA;function fA(e,t,r){var i=r.value,o=i.name;return o||(o="anonymous function"),uA?r.value=function(a){console.profile(o);var l=self.performance.now(),f=i.call.apply(i,cf([this||self],a,!1)),g=self.performance.now()-l;return console.log("".concat(o," took ").concat(g," ms")),console.profileEnd(),f}:r.value=function(a){uf("Profile start ".concat(o));var l=Date.now(),f=i.call.apply(i,cf([this||self],a,!1)),g=Date.now()-l;return uf("Profile end ".concat(o," took ").concat(g," ms.")),f},r}n(fA,"performProfile")});var lf=de(Ic=>{"use strict";d();h();Object.defineProperty(Ic,"__esModule",{value:!0});Ic.AuthorizationRequest=void 0;var dA=Tc(),hA=la(),pA=10,mA=n(function(e){return e.generateRandom(pA)},"newState"),gA=function(){function e(t,r,i){r===void 0&&(r=new dA.DefaultCrypto),i===void 0&&(i=!0),this.crypto=r,this.usePkce=i,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||mA(r),this.extras=t.extras,this.internal=t.internal}return n(e,"AuthorizationRequest"),e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),i=this.crypto.deriveChallenge(r).catch(function(o){(0,hA.log)("Unable to generate PKCE challenge. Not using PKCE",o)});return i.then(function(o){o&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=o,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();Ic.AuthorizationRequest=gA});var Lm=de(_c=>{"use strict";d();h();Object.defineProperty(_c,"__esModule",{value:!0});_c.requireValidUrl=void 0;var yA=es();function vA(e){try{return new URL(e),e}catch{throw new yA.AppAuthError("Invalid input url ".concat(e))}}n(vA,"requireValidUrl");_c.requireValidUrl=vA});var df=de(ti=>{"use strict";d();h();Object.defineProperty(ti,"__esModule",{value:!0});ti.AuthorizationRequestHandler=ti.BUILT_IN_PARAMETERS=ti.AuthorizationNotifier=void 0;var ff=la(),wA=Lm(),bA=function(){function e(){this.listener=null}return n(e,"AuthorizationNotifier"),e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,i){this.listener&&this.listener(t,r,i)},e}();ti.AuthorizationNotifier=bA;ti.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var xA=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return n(e,"AuthorizationRequestHandler"),e.prototype.buildRequestUrl=function(t,r){var i={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var o in r.extras)r.extras.hasOwnProperty(o)&&ti.BUILT_IN_PARAMETERS.indexOf(o)<0&&(i[o]=r.extras[o]);var a=this.utils.stringify(i),l=(0,wA.requireValidUrl)(t.authorizationEndpoint),f="".concat(l,"?").concat(a);return f},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,ff.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,ff.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,ff.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();ti.AuthorizationRequestHandler=xA});var hf=de(ts=>{"use strict";d();h();Object.defineProperty(ts,"__esModule",{value:!0});ts.AuthorizationError=ts.AuthorizationResponse=void 0;var AA=function(){function e(t){this.code=t.code,this.state=t.state}return n(e,"AuthorizationResponse"),e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();ts.AuthorizationResponse=AA;var SA=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return n(e,"AuthorizationError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();ts.AuthorizationError=SA});var Pc=de(_r=>{"use strict";d();h();var mf=_r&&_r.__extends||function(){var e=n(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}n(i,"__"),t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(_r,"__esModule",{value:!0});_r.TestRequestor=_r.FetchRequestor=_r.JQueryRequestor=_r.Requestor=void 0;var pf=es(),kc=function(){function e(){}return n(e,"Requestor"),e}();_r.Requestor=kc;var EA=function(e){mf(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,"JQueryRequestor"),t.prototype.xhr=function(r){var i=$.ajax(r);return new Promise(function(o,a){i.then(function(l,f,g){o(l)},function(l,f,g){a(new pf.AppAuthError(g))})})},t}(kc);_r.JQueryRequestor=EA;var MA=function(e){mf(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,"FetchRequestor"),t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new pf.AppAuthError("A URL must be provided."));var i=new URL(r.url),o={};if(o.method=r.method,o.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")o.body=r.data;else{var a=new URLSearchParams(r.data);a.forEach(function(g,x){i.searchParams.append(x,g)})}if(o.headers={},r.headers)for(var l in r.headers)r.headers.hasOwnProperty(l)&&(o.headers[l]=r.headers[l]);var f=r.dataType&&r.dataType.toLowerCase()==="json";return f&&(o.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(i.toString(),o).then(function(g){if(g.status>=200&&g.status<300){var x=g.headers.get("content-type");return f||x&&x.indexOf("application/json")!==-1?g.json():g.text()}else return Promise.reject(new pf.AppAuthError(g.status.toString(),g.statusText))})},t}(kc);_r.FetchRequestor=MA;var TA=function(e){mf(t,e);function t(r){var i=e.call(this)||this;return i.promise=r,i}return n(t,"TestRequestor"),t.prototype.xhr=function(r){return this.promise},t}(kc);_r.TestRequestor=TA});var Vm=de(Bc=>{"use strict";d();h();Object.defineProperty(Bc,"__esModule",{value:!0});Bc.AuthorizationServiceConfiguration=void 0;var IA=Pc(),_A=".well-known",kA="openid-configuration",PA=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return n(e,"AuthorizationServiceConfiguration"),e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var i="".concat(t,"/").concat(_A,"/").concat(kA),o=r||new IA.JQueryRequestor;return o.xhr({url:i,dataType:"json",method:"GET"}).then(function(a){return new e(a)})},e}();Bc.AuthorizationServiceConfiguration=PA});var Oc=de(Kc=>{"use strict";d();h();Object.defineProperty(Kc,"__esModule",{value:!0});Kc.BasicQueryStringUtils=void 0;var BA=function(){function e(){}return n(e,"BasicQueryStringUtils"),e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var i=t.split("&"),o=0;o<i.length;o+=1){var a=i[o],l=a.split("=");if(l.length>=2){var f=decodeURIComponent(l.shift()),g=l.length>0?l.join("="):null;g&&(r[f]=decodeURIComponent(g))}}return r},e.prototype.stringify=function(t){var r=[];for(var i in t)t.hasOwnProperty(i)&&t[i]&&r.push("".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(t[i])));return r.join("&")},e}();Kc.BasicQueryStringUtils=BA});var gf=de(Ti=>{"use strict";d();h();var KA=Ti&&Ti.__extends||function(){var e=n(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}n(i,"__"),t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(Ti,"__esModule",{value:!0});Ti.LocalStorageBackend=Ti.StorageBackend=void 0;var Fm=function(){function e(){}return n(e,"StorageBackend"),e}();Ti.StorageBackend=Fm;var OA=function(e){KA(t,e);function t(r){var i=e.call(this)||this;return i.storage=r||self.localStorage,i}return n(t,"LocalStorageBackend"),t.prototype.getItem=function(r){var i=this;return new Promise(function(o,a){var l=i.storage.getItem(r);o(l||null)})},t.prototype.removeItem=function(r){var i=this;return new Promise(function(o,a){i.storage.removeItem(r),o()})},t.prototype.clear=function(){var r=this;return new Promise(function(i,o){r.storage.clear(),i()})},t.prototype.setItem=function(r,i){var o=this;return new Promise(function(a,l){o.storage.setItem(r,i),a()})},t}(Fm);Ti.LocalStorageBackend=OA});var zm=de(rs=>{"use strict";d();h();var CA=rs&&rs.__extends||function(){var e=n(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}n(i,"__"),t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(rs,"__esModule",{value:!0});rs.RedirectRequestHandler=void 0;var RA=lf(),UA=df(),jm=hf(),NA=Tc(),Cc=la(),DA=Oc(),LA=gf(),yf=n(function(e){return"".concat(e,"_appauth_authorization_request")},"authorizationRequestKey"),qm=n(function(e){return"".concat(e,"_appauth_authorization_service_configuration")},"authorizationServiceConfigurationKey"),vf="appauth_current_authorization_request",VA=function(e){CA(t,e);function t(r,i,o,a){r===void 0&&(r=new LA.LocalStorageBackend),i===void 0&&(i=new DA.BasicQueryStringUtils),o===void 0&&(o=self.location),a===void 0&&(a=new NA.DefaultCrypto);var l=e.call(this,i,a)||this;return l.storageBackend=r,l.locationLike=o,l}return n(t,"RedirectRequestHandler"),t.prototype.performAuthorizationRequest=function(r,i){var o=this,a=this.crypto.generateRandom(10),l=Promise.all([this.storageBackend.setItem(vf,a),i.toJson().then(function(f){return o.storageBackend.setItem(yf(a),JSON.stringify(f))}),this.storageBackend.setItem(qm(a),JSON.stringify(r.toJson()))]);l.then(function(){var f=o.buildRequestUrl(r,i);(0,Cc.log)("Making a request to ",i,f),o.locationLike.assign(f)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(vf).then(function(i){return i?r.storageBackend.getItem(yf(i)).then(function(o){return JSON.parse(o)}).then(function(o){return new RA.AuthorizationRequest(o)}).then(function(o){var a="".concat(r.locationLike.origin).concat(r.locationLike.pathname),l=r.utils.parse(r.locationLike,!0),f=l.state,g=l.code,x=l.error;(0,Cc.log)("Potential authorization request ",a,l,f,g,x);var T=f===o.state,I=null,_=null;if(T){if(x){var O=l.error_uri,C=l.error_description;_=new jm.AuthorizationError({error:x,error_description:C,error_uri:O,state:f})}else I=new jm.AuthorizationResponse({code:g,state:f});return Promise.all([r.storageBackend.removeItem(vf),r.storageBackend.removeItem(yf(i)),r.storageBackend.removeItem(qm(i))]).then(function(){return(0,Cc.log)("Delivering authorization response"),{request:o,response:I,error:_}})}else return(0,Cc.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(UA.AuthorizationRequestHandler);rs.RedirectRequestHandler=VA});var Wm=de(Rc=>{"use strict";d();h();Object.defineProperty(Rc,"__esModule",{value:!0});Rc.RevokeTokenRequest=void 0;var FA=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return n(e,"RevokeTokenRequest"),e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();Rc.RevokeTokenRequest=FA});var Hm=de(Ii=>{"use strict";d();h();Object.defineProperty(Ii,"__esModule",{value:!0});Ii.TokenRequest=Ii.GRANT_TYPE_REFRESH_TOKEN=Ii.GRANT_TYPE_AUTHORIZATION_CODE=void 0;Ii.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";Ii.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var jA=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return n(e,"TokenRequest"),e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();Ii.TokenRequest=jA});var wf=de(Sn=>{"use strict";d();h();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.TokenError=Sn.TokenResponse=Sn.nowInSeconds=void 0;var qA=10*60*-1,zA=n(function(){return Math.round(new Date().getTime()/1e3)},"nowInSeconds");Sn.nowInSeconds=zA;var WA=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,Sn.nowInSeconds)()}return n(e,"TokenResponse"),e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=qA),this.expiresIn){var r=(0,Sn.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();Sn.TokenResponse=WA;var HA=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return n(e,"TokenError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();Sn.TokenError=HA});var Gm=de(Uc=>{"use strict";d();h();Object.defineProperty(Uc,"__esModule",{value:!0});Uc.BaseTokenRequestHandler=void 0;var $A=es(),GA=Oc(),$m=wf(),ZA=Pc(),QA=function(){function e(t,r){t===void 0&&(t=new ZA.JQueryRequestor),r===void 0&&(r=new GA.BasicQueryStringUtils),this.requestor=t,this.utils=r}return n(e,"BaseTokenRequestHandler"),e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var i=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return i.then(function(o){return!0})},e.prototype.performTokenRequest=function(t,r){var i=this,o=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return o.then(function(a){return i.isTokenResponse(a)?new $m.TokenResponse(a):Promise.reject(new $A.AppAuthError(a.error,new $m.TokenError(a)))})},e}();Uc.BaseTokenRequestHandler=QA});var Qm=de(Zm=>{"use strict";d();h();Object.defineProperty(Zm,"__esModule",{value:!0})});var bf=de(St=>{"use strict";d();h();var JA=St&&St.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:n(function(){return t[r]},"get")}),Object.defineProperty(e,i,o)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),zt=St&&St.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&JA(t,e,r)};Object.defineProperty(St,"__esModule",{value:!0});zt(lf(),St);zt(df(),St);zt(hf(),St);zt(Vm(),St);zt(Tc(),St);zt(es(),St);zt(af(),St);zt(la(),St);zt(Oc(),St);zt(zm(),St);zt(Wm(),St);zt(gf(),St);zt(Hm(),St);zt(Gm(),St);zt(wf(),St);zt(Qm(),St);zt(Pc(),St)});var By=de((c9,Py)=>{d();h();var lt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Br(e,t){if(!e)throw new Error(t)}n(Br,"assert");function at(e,t,r){if(Br(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let i=r.join(", "),o=`Expected ${e} to be an Uint8Array with length [${i}]`;Br(r.includes(t.length),o)}else{let i=`Expected ${e} to be an Uint8Array with length ${r}`;Br(t.length===r,i)}}n(at,"isUint8Array");function go(e){Br(ds(e)==="Boolean","Expected compressed to be a Boolean")}n(go,"isCompressed");function an(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),at("output",e,t),e}n(an,"getAssertedOutput");function ds(e){return Object.prototype.toString.call(e).slice(8,-1)}n(ds,"toTypeString");Py.exports=e=>({contextRandomize(t){switch(Br(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&at("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(lt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return at("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(at("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(lt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(at("private key",t,32),at("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(lt.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(at("private key",t,32),at("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(lt.TWEAK_MUL)}},publicKeyVerify(t){return at("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,i){switch(at("private key",t,32),go(r),i=an(i,r?33:65),e.publicKeyCreate(i,t)){case 0:return i;case 1:throw new Error(lt.SECKEY_INVALID);case 2:throw new Error(lt.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,i){switch(at("public key",t,[33,65]),go(r),i=an(i,r?33:65),e.publicKeyConvert(i,t)){case 0:return i;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,i){switch(at("public key",t,[33,65]),go(r),i=an(i,r?33:65),e.publicKeyNegate(i,t)){case 0:return i;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.IMPOSSIBLE_CASE);case 3:throw new Error(lt.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,i){Br(Array.isArray(t),"Expected public keys to be an Array"),Br(t.length>0,"Expected public keys array will have more than zero items");for(let o of t)at("public key",o,[33,65]);switch(go(r),i=an(i,r?33:65),e.publicKeyCombine(i,t)){case 0:return i;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.PUBKEY_COMBINE);case 3:throw new Error(lt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,i=!0,o){switch(at("public key",t,[33,65]),at("tweak",r,32),go(i),o=an(o,i?33:65),e.publicKeyTweakAdd(o,t,r)){case 0:return o;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.TWEAK_ADD)}},publicKeyTweakMul(t,r,i=!0,o){switch(at("public key",t,[33,65]),at("tweak",r,32),go(i),o=an(o,i?33:65),e.publicKeyTweakMul(o,t,r)){case 0:return o;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.TWEAK_MUL)}},signatureNormalize(t){switch(at("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(lt.SIG_PARSE)}},signatureExport(t,r){at("signature",t,64),r=an(r,72);let i={output:r,outputlen:72};switch(e.signatureExport(i,t)){case 0:return r.slice(0,i.outputlen);case 1:throw new Error(lt.SIG_PARSE);case 2:throw new Error(lt.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(at("signature",t),r=an(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(lt.SIG_PARSE);case 2:throw new Error(lt.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,i={},o){at("message",t,32),at("private key",r,32),Br(ds(i)==="Object","Expected options to be an Object"),i.data!==void 0&&at("options.data",i.data),i.noncefn!==void 0&&Br(ds(i.noncefn)==="Function","Expected options.noncefn to be a Function"),o=an(o,64);let a={signature:o,recid:null};switch(e.ecdsaSign(a,t,r,i.data,i.noncefn)){case 0:return a;case 1:throw new Error(lt.SIGN);case 2:throw new Error(lt.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,i){switch(at("signature",t,64),at("message",r,32),at("public key",i,[33,65]),e.ecdsaVerify(t,r,i)){case 0:return!0;case 3:return!1;case 1:throw new Error(lt.SIG_PARSE);case 2:throw new Error(lt.PUBKEY_PARSE)}},ecdsaRecover(t,r,i,o=!0,a){switch(at("signature",t,64),Br(ds(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),at("message",i,32),go(o),a=an(a,o?33:65),e.ecdsaRecover(a,t,r,i)){case 0:return a;case 1:throw new Error(lt.SIG_PARSE);case 2:throw new Error(lt.RECOVER);case 3:throw new Error(lt.IMPOSSIBLE_CASE)}},ecdh(t,r,i={},o){switch(at("public key",t,[33,65]),at("private key",r,32),Br(ds(i)==="Object","Expected options to be an Object"),i.data!==void 0&&at("options.data",i.data),i.hashfn!==void 0?(Br(ds(i.hashfn)==="Function","Expected options.hashfn to be a Function"),i.xbuf!==void 0&&at("options.xbuf",i.xbuf,32),i.ybuf!==void 0&&at("options.ybuf",i.ybuf,32),at("output",o)):o=an(o,32),e.ecdh(o,t,r,i.data,i.hashfn,i.xbuf,i.ybuf)){case 0:return o;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.ECDH)}}})});var Oy=de((d9,Ky)=>{d();h();var k2=O0().ec,Tn=new k2("secp256k1"),st=Tn.curve,gt=st.n.constructor;function P2(e,t){let r=new gt(t);if(r.cmp(st.p)>=0)return null;r=r.toRed(st.red);let i=r.redSqr().redIMul(r).redIAdd(st.b).redSqrt();return e===3!==i.isOdd()&&(i=i.redNeg()),Tn.keyPair({pub:{x:r,y:i}})}n(P2,"loadCompressedPublicKey");function B2(e,t,r){let i=new gt(t),o=new gt(r);if(i.cmp(st.p)>=0||o.cmp(st.p)>=0||(i=i.toRed(st.red),o=o.toRed(st.red),(e===6||e===7)&&o.isOdd()!==(e===7)))return null;let a=i.redSqr().redIMul(i);return o.redSqr().redISub(a.redIAdd(st.b)).isZero()?Tn.keyPair({pub:{x:i,y:o}}):null}n(B2,"loadUncompressedPublicKey");function Oi(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:P2(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:B2(t,e.subarray(1,33),e.subarray(33,65));default:return null}}n(Oi,"loadPublicKey");function yo(e,t){let r=t.encode(null,e.length===33);for(let i=0;i<e.length;++i)e[i]=r[i]}n(yo,"savePublicKey");Ky.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new gt(e);return t.cmp(st.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new gt(e),r=st.n.sub(t).umod(st.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new gt(t);if(r.cmp(st.n)>=0||(r.iadd(new gt(e)),r.cmp(st.n)>=0&&r.isub(st.n),r.isZero()))return 1;let i=r.toArrayLike(Uint8Array,"be",32);return e.set(i),0},privateKeyTweakMul(e,t){let r=new gt(t);if(r.cmp(st.n)>=0||r.isZero())return 1;r.imul(new gt(e)),r.cmp(st.n)>=0&&(r=r.umod(st.n));let i=r.toArrayLike(Uint8Array,"be",32);return e.set(i),0},publicKeyVerify(e){return Oi(e)===null?1:0},publicKeyCreate(e,t){let r=new gt(t);if(r.cmp(st.n)>=0||r.isZero())return 1;let i=Tn.keyFromPrivate(t).getPublic();return yo(e,i),0},publicKeyConvert(e,t){let r=Oi(t);if(r===null)return 1;let i=r.getPublic();return yo(e,i),0},publicKeyNegate(e,t){let r=Oi(t);if(r===null)return 1;let i=r.getPublic();return i.y=i.y.redNeg(),yo(e,i),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let o=0;o<t.length;++o)if(r[o]=Oi(t[o]),r[o]===null)return 1;let i=r[0].getPublic();for(let o=1;o<r.length;++o)i=i.add(r[o].pub);return i.isInfinity()?2:(yo(e,i),0)},publicKeyTweakAdd(e,t,r){let i=Oi(t);if(i===null)return 1;if(r=new gt(r),r.cmp(st.n)>=0)return 2;let o=i.getPublic().add(st.g.mul(r));return o.isInfinity()?2:(yo(e,o),0)},publicKeyTweakMul(e,t,r){let i=Oi(t);if(i===null)return 1;if(r=new gt(r),r.cmp(st.n)>=0||r.isZero())return 2;let o=i.getPublic().mul(r);return yo(e,o),0},signatureNormalize(e){let t=new gt(e.subarray(0,32)),r=new gt(e.subarray(32,64));return t.cmp(st.n)>=0||r.cmp(st.n)>=0?1:(r.cmp(Tn.nh)===1&&e.set(st.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),i=t.subarray(32,64);if(new gt(r).cmp(st.n)>=0||new gt(i).cmp(st.n)>=0)return 1;let{output:o}=e,a=o.subarray(4,37);a[0]=0,a.set(r,1);let l=33,f=0;for(;l>1&&a[f]===0&&!(a[f+1]&128);--l,++f);if(a=a.subarray(f),a[0]&128||l>1&&a[0]===0&&!(a[1]&128))return 1;let g=o.subarray(39,72);g[0]=0,g.set(i,1);let x=33,T=0;for(;x>1&&g[T]===0&&!(g[T+1]&128);--x,++T);return g=g.subarray(T),g[0]&128||x>1&&g[0]===0&&!(g[1]&128)?1:(e.outputlen=6+l+x,o[0]=48,o[1]=e.outputlen-2,o[2]=2,o[3]=a.length,o.set(a,4),o[4+l]=2,o[5+l]=g.length,o.set(g,6+l),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let i=t[5+r];if(i===0||6+r+i!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||i>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let o=t.subarray(4,4+r);if(o.length===33&&o[0]===0&&(o=o.subarray(1)),o.length>32)return 1;let a=t.subarray(6+r);if(a.length===33&&a[0]===0&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let l=new gt(o);l.cmp(st.n)>=0&&(l=new gt(0));let f=new gt(t.subarray(6+r));return f.cmp(st.n)>=0&&(f=new gt(0)),e.set(l.toArrayLike(Uint8Array,"be",32),0),e.set(f.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,i,o){if(o){let f=o;o=n(g=>{let x=f(t,r,null,i,g);if(!(x instanceof Uint8Array&&x.length===32))throw new Error("This is the way");return new gt(x)},"noncefn")}let a=new gt(r);if(a.cmp(st.n)>=0||a.isZero())return 1;let l;try{l=Tn.sign(t,r,{canonical:!0,k:o,pers:i})}catch{return 1}return e.signature.set(l.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(l.s.toArrayLike(Uint8Array,"be",32),32),e.recid=l.recoveryParam,0},ecdsaVerify(e,t,r){let i={r:e.subarray(0,32),s:e.subarray(32,64)},o=new gt(i.r),a=new gt(i.s);if(o.cmp(st.n)>=0||a.cmp(st.n)>=0)return 1;if(a.cmp(Tn.nh)===1||o.isZero()||a.isZero())return 3;let l=Oi(r);if(l===null)return 2;let f=l.getPublic();return Tn.verify(t,i,f)?0:3},ecdsaRecover(e,t,r,i){let o={r:t.slice(0,32),s:t.slice(32,64)},a=new gt(o.r),l=new gt(o.s);if(a.cmp(st.n)>=0||l.cmp(st.n)>=0)return 1;if(a.isZero()||l.isZero())return 2;let f;try{f=Tn.recoverPubKey(i,o,r)}catch{return 2}return yo(e,f),0},ecdh(e,t,r,i,o,a,l){let f=Oi(t);if(f===null)return 1;let g=new gt(r);if(g.cmp(st.n)>=0||g.isZero())return 2;let x=f.getPublic().mul(g);if(o===void 0){let T=x.encode(null,!0),I=Tn.hash().update(T).digest();for(let _=0;_<32;++_)e[_]=I[_]}else{a||(a=new Uint8Array(32));let T=x.getX().toArray("be",32);for(let C=0;C<32;++C)a[C]=T[C];l||(l=new Uint8Array(32));let I=x.getY().toArray("be",32);for(let C=0;C<32;++C)l[C]=I[C];let _=o(a,l,i);if(!(_ instanceof Uint8Array&&_.length===e.length))return 2;e.set(_)}return 0}}});var Ud=de((g9,Cy)=>{d();h();Cy.exports=By()(Oy())});var Uy=de(pu=>{"use strict";d();h();Object.defineProperty(pu,"__esModule",{value:!0});var Ry=B0();function K2(e){return new Promise(function(t,r){Ry(e,function(i,o){if(i){r(i);return}t(o)})})}n(K2,"getRandomBytes");pu.getRandomBytes=K2;function O2(e){return Ry(e)}n(O2,"getRandomBytesSync");pu.getRandomBytesSync=O2});var Vy=de(In=>{"use strict";d();h();var C2=In&&In.__awaiter||function(e,t,r,i){function o(a){return a instanceof r?a:new r(function(l){l(a)})}return n(o,"adopt"),new(r||(r=Promise))(function(a,l){function f(T){try{x(i.next(T))}catch(I){l(I)}}n(f,"fulfilled");function g(T){try{x(i.throw(T))}catch(I){l(I)}}n(g,"rejected");function x(T){T.done?a(T.value):o(T.value).then(f,g)}n(x,"step"),x((i=i.apply(e,t||[])).next())})},R2=In&&In.__generator||function(e,t){var r={label:0,sent:n(function(){if(a[0]&1)throw a[1];return a[1]},"sent"),trys:[],ops:[]},i,o,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(x){return function(T){return g([x,T])}}function g(x){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(a=x[0]&2?o.return:x[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,x[1])).done)return a;switch(o=0,a&&(x=[x[0]&2,a.value]),x[0]){case 0:case 1:a=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,o=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!a||x[1]>a[0]&&x[1]<a[3])){r.label=x[1];break}if(x[0]===6&&r.label<a[1]){r.label=a[1],a=x;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(x);break}a[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(T){x=[6,T],o=0}finally{i=a=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}};function U2(e){for(var t in e)In.hasOwnProperty(t)||(In[t]=e[t])}n(U2,"__export");Object.defineProperty(In,"__esModule",{value:!0});var Ny=Ud(),Dy=Uy(),Ly=32;function N2(){return C2(this,void 0,void 0,function(){var e;return R2(this,function(t){switch(t.label){case 0:return[4,Dy.getRandomBytes(Ly)];case 1:return e=t.sent(),Ny.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}n(N2,"createPrivateKey");In.createPrivateKey=N2;function D2(){for(;;){var e=Dy.getRandomBytesSync(Ly);if(Ny.privateKeyVerify(e))return e}}n(D2,"createPrivateKeySync");In.createPrivateKeySync=D2;U2(Ud())});var vo=de((Fy,Nd)=>{d();h();(function(e,t){"use strict";function r(A,s){if(!A)throw new Error(s||"Assertion failed")}n(r,"assert");function i(A,s){A.super_=s;var u=n(function(){},"TempCtor");u.prototype=s.prototype,A.prototype=new u,A.prototype.constructor=A}n(i,"inherits");function o(A,s,u){if(o.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(A||0,s||10,u||"be"))}n(o,"BN"),typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=E0().Buffer}catch{}o.isBN=n(function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},"isBN"),o.max=n(function(s,u){return s.cmp(u)>0?s:u},"max"),o.min=n(function(s,u){return s.cmp(u)<0?s:u},"min"),o.prototype._init=n(function(s,u,m){if(typeof s=="number")return this._initNumber(s,u,m);if(typeof s=="object")return this._initArray(s,u,m);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(u===16?this._parseHex(s,y,m):(this._parseBase(s,u,y),m==="le"&&this._initArray(this.toArray(),u,m)))},"init"),o.prototype._initNumber=n(function(s,u,m){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),u,m)},"_initNumber"),o.prototype._initArray=n(function(s,u,m){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,S,E=0;if(m==="be")for(y=s.length-1,v=0;y>=0;y-=3)S=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);else if(m==="le")for(y=0,v=0;y<s.length;y+=3)S=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);return this.strip()},"_initArray");function l(A,s){var u=A.charCodeAt(s);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}n(l,"parseHex4Bits");function f(A,s,u){var m=l(A,u);return u-1>=s&&(m|=l(A,u-1)<<4),m}n(f,"parseHexByte"),o.prototype._parseHex=n(function(s,u,m){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,S=0,E;if(m==="be")for(y=s.length-1;y>=u;y-=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8;else{var w=s.length-u;for(y=w%2===0?u+1:u;y<s.length;y+=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8}this.strip()},"_parseHex");function g(A,s,u,m){for(var y=0,v=Math.min(A.length,u),S=s;S<v;S++){var E=A.charCodeAt(S)-48;y*=m,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}n(g,"parseBase"),o.prototype._parseBase=n(function(s,u,m){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=u)y++;y--,v=v/u|0;for(var S=s.length-m,E=S%y,w=Math.min(S,S-E)+m,c=0,b=m;b<w;b+=y)c=g(s,b,b+y,u),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var D=1;for(c=g(s,b,s.length,u),b=0;b<E;b++)D*=u;this.imuln(D),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},"_parseBase"),o.prototype.copy=n(function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},"copy"),o.prototype.clone=n(function(){var s=new o(null);return this.copy(s),s},"clone"),o.prototype._expand=n(function(s){for(;this.length<s;)this.words[this.length++]=0;return this},"_expand"),o.prototype.strip=n(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),o.prototype._normSign=n(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),o.prototype.inspect=n(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=n(function(s,u){s=s||10,u=u|0||1;var m;if(s===16||s==="hex"){m="";for(var y=0,v=0,S=0;S<this.length;S++){var E=this.words[S],w=((E<<y|v)&16777215).toString(16);v=E>>>24-y&16777215,v!==0||S!==this.length-1?m=x[6-w.length]+w+m:m=w+m,y+=2,y>=26&&(y-=26,S--)}for(v!==0&&(m=v.toString(16)+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(s===(s|0)&&s>=2&&s<=36){var c=T[s],b=I[s];m="";var D=this.clone();for(D.negative=0;!D.isZero();){var V=D.modn(b).toString(s);D=D.idivn(b),D.isZero()?m=V+m:m=x[c-V.length]+V+m}for(this.isZero()&&(m="0"+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},"toString"),o.prototype.toNumber=n(function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},"toNumber"),o.prototype.toJSON=n(function(){return this.toString(16)},"toJSON"),o.prototype.toBuffer=n(function(s,u){return r(typeof a<"u"),this.toArrayLike(a,s,u)},"toBuffer"),o.prototype.toArray=n(function(s,u){return this.toArrayLike(Array,s,u)},"toArray"),o.prototype.toArrayLike=n(function(s,u,m){var y=this.byteLength(),v=m||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var S=u==="le",E=new s(v),w,c,b=this.clone();if(S){for(c=0;!b.isZero();c++)w=b.andln(255),b.iushrn(8),E[c]=w;for(;c<v;c++)E[c]=0}else{for(c=0;c<v-y;c++)E[c]=0;for(c=0;!b.isZero();c++)w=b.andln(255),b.iushrn(8),E[v-c-1]=w}return E},"toArrayLike"),Math.clz32?o.prototype._countBits=n(function(s){return 32-Math.clz32(s)},"_countBits"):o.prototype._countBits=n(function(s){var u=s,m=0;return u>=4096&&(m+=13,u>>>=13),u>=64&&(m+=7,u>>>=7),u>=8&&(m+=4,u>>>=4),u>=2&&(m+=2,u>>>=2),m+u},"_countBits"),o.prototype._zeroBits=n(function(s){if(s===0)return 26;var u=s,m=0;return u&8191||(m+=13,u>>>=13),u&127||(m+=7,u>>>=7),u&15||(m+=4,u>>>=4),u&3||(m+=2,u>>>=2),u&1||m++,m},"_zeroBits"),o.prototype.bitLength=n(function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u},"bitLength");function _(A){for(var s=new Array(A.bitLength()),u=0;u<s.length;u++){var m=u/26|0,y=u%26;s[u]=(A.words[m]&1<<y)>>>y}return s}n(_,"toBitArray"),o.prototype.zeroBits=n(function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var m=this._zeroBits(this.words[u]);if(s+=m,m!==26)break}return s},"zeroBits"),o.prototype.byteLength=n(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),o.prototype.toTwos=n(function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},"toTwos"),o.prototype.fromTwos=n(function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},"fromTwos"),o.prototype.isNeg=n(function(){return this.negative!==0},"isNeg"),o.prototype.neg=n(function(){return this.clone().ineg()},"neg"),o.prototype.ineg=n(function(){return this.isZero()||(this.negative^=1),this},"ineg"),o.prototype.iuor=n(function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},"iuor"),o.prototype.ior=n(function(s){return r((this.negative|s.negative)===0),this.iuor(s)},"ior"),o.prototype.or=n(function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},"or"),o.prototype.uor=n(function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},"uor"),o.prototype.iuand=n(function(s){var u;this.length>s.length?u=s:u=this;for(var m=0;m<u.length;m++)this.words[m]=this.words[m]&s.words[m];return this.length=u.length,this.strip()},"iuand"),o.prototype.iand=n(function(s){return r((this.negative|s.negative)===0),this.iuand(s)},"iand"),o.prototype.and=n(function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},"and"),o.prototype.uand=n(function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},"uand"),o.prototype.iuxor=n(function(s){var u,m;this.length>s.length?(u=this,m=s):(u=s,m=this);for(var y=0;y<m.length;y++)this.words[y]=u.words[y]^m.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this.strip()},"iuxor"),o.prototype.ixor=n(function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},"ixor"),o.prototype.xor=n(function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},"xor"),o.prototype.uxor=n(function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},"uxor"),o.prototype.inotn=n(function(s){r(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,m=s%26;this._expand(u),m>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},"inotn"),o.prototype.notn=n(function(s){return this.clone().inotn(s)},"notn"),o.prototype.setn=n(function(s,u){r(typeof s=="number"&&s>=0);var m=s/26|0,y=s%26;return this._expand(m+1),u?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},"setn"),o.prototype.iadd=n(function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var m,y;this.length>s.length?(m=this,y=s):(m=s,y=this);for(var v=0,S=0;S<y.length;S++)u=(m.words[S]|0)+(y.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;for(;v!==0&&S<m.length;S++)u=(m.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;if(this.length=m.length,v!==0)this.words[this.length]=v,this.length++;else if(m!==this)for(;S<m.length;S++)this.words[S]=m.words[S];return this},"iadd"),o.prototype.add=n(function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},"add"),o.prototype.isub=n(function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var m=this.cmp(s);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;m>0?(y=this,v=s):(y=s,v=this);for(var S=0,E=0;E<v.length;E++)u=(y.words[E]|0)-(v.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;for(;S!==0&&E<y.length;E++)u=(y.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;if(S===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},"isub"),o.prototype.sub=n(function(s){return this.clone().isub(s)},"sub");function O(A,s,u){u.negative=s.negative^A.negative;var m=A.length+s.length|0;u.length=m,m=m-1|0;var y=A.words[0]|0,v=s.words[0]|0,S=y*v,E=S&67108863,w=S/67108864|0;u.words[0]=E;for(var c=1;c<m;c++){for(var b=w>>>26,D=w&67108863,V=Math.min(c,s.length-1),z=Math.max(0,c-A.length+1);z<=V;z++){var J=c-z|0;y=A.words[J]|0,v=s.words[z]|0,S=y*v+D,b+=S/67108864|0,D=S&67108863}u.words[c]=D|0,w=b|0}return w!==0?u.words[c]=w|0:u.length--,u.strip()}n(O,"smallMulTo");var C=n(function(s,u,m){var y=s.words,v=u.words,S=m.words,E=0,w,c,b,D=y[0]|0,V=D&8191,z=D>>>13,J=y[1]|0,oe=J&8191,ue=J>>>13,dt=y[2]|0,fe=dt&8191,K=dt>>>13,N=y[3]|0,U=N&8191,W=N>>>13,re=y[4]|0,q=re&8191,Q=re>>>13,nt=y[5]|0,ye=nt&8191,be=nt>>>13,Mr=y[6]|0,Ie=Mr&8191,Ee=Mr>>>13,vn=y[7]|0,Me=vn&8191,Je=vn>>>13,gi=y[8]|0,Ye=gi&8191,Xe=gi>>>13,Vn=y[9]|0,ke=Vn&8191,Pe=Vn>>>13,Fn=v[0]|0,Be=Fn&8191,Ke=Fn>>>13,jn=v[1]|0,Oe=jn&8191,Ce=jn>>>13,qn=v[2]|0,Re=qn&8191,Ue=qn>>>13,zn=v[3]|0,Ne=zn&8191,De=zn>>>13,Wn=v[4]|0,Le=Wn&8191,Ve=Wn>>>13,Hn=v[5]|0,Fe=Hn&8191,je=Hn>>>13,$n=v[6]|0,qe=$n&8191,ze=$n>>>13,Gn=v[7]|0,We=Gn&8191,He=Gn>>>13,Zn=v[8]|0,$e=Zn&8191,Ge=Zn>>>13,Qn=v[9]|0,Ze=Qn&8191,Qe=Qn>>>13;m.negative=s.negative^u.negative,m.length=19,w=Math.imul(V,Be),c=Math.imul(V,Ke),c=c+Math.imul(z,Be)|0,b=Math.imul(z,Ke);var Nr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,w=Math.imul(oe,Be),c=Math.imul(oe,Ke),c=c+Math.imul(ue,Be)|0,b=Math.imul(ue,Ke),w=w+Math.imul(V,Oe)|0,c=c+Math.imul(V,Ce)|0,c=c+Math.imul(z,Oe)|0,b=b+Math.imul(z,Ce)|0;var Dr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,w=Math.imul(fe,Be),c=Math.imul(fe,Ke),c=c+Math.imul(K,Be)|0,b=Math.imul(K,Ke),w=w+Math.imul(oe,Oe)|0,c=c+Math.imul(oe,Ce)|0,c=c+Math.imul(ue,Oe)|0,b=b+Math.imul(ue,Ce)|0,w=w+Math.imul(V,Re)|0,c=c+Math.imul(V,Ue)|0,c=c+Math.imul(z,Re)|0,b=b+Math.imul(z,Ue)|0;var Lr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(U,Be),c=Math.imul(U,Ke),c=c+Math.imul(W,Be)|0,b=Math.imul(W,Ke),w=w+Math.imul(fe,Oe)|0,c=c+Math.imul(fe,Ce)|0,c=c+Math.imul(K,Oe)|0,b=b+Math.imul(K,Ce)|0,w=w+Math.imul(oe,Re)|0,c=c+Math.imul(oe,Ue)|0,c=c+Math.imul(ue,Re)|0,b=b+Math.imul(ue,Ue)|0,w=w+Math.imul(V,Ne)|0,c=c+Math.imul(V,De)|0,c=c+Math.imul(z,Ne)|0,b=b+Math.imul(z,De)|0;var Vr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(q,Be),c=Math.imul(q,Ke),c=c+Math.imul(Q,Be)|0,b=Math.imul(Q,Ke),w=w+Math.imul(U,Oe)|0,c=c+Math.imul(U,Ce)|0,c=c+Math.imul(W,Oe)|0,b=b+Math.imul(W,Ce)|0,w=w+Math.imul(fe,Re)|0,c=c+Math.imul(fe,Ue)|0,c=c+Math.imul(K,Re)|0,b=b+Math.imul(K,Ue)|0,w=w+Math.imul(oe,Ne)|0,c=c+Math.imul(oe,De)|0,c=c+Math.imul(ue,Ne)|0,b=b+Math.imul(ue,De)|0,w=w+Math.imul(V,Le)|0,c=c+Math.imul(V,Ve)|0,c=c+Math.imul(z,Le)|0,b=b+Math.imul(z,Ve)|0;var Fr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,w=Math.imul(ye,Be),c=Math.imul(ye,Ke),c=c+Math.imul(be,Be)|0,b=Math.imul(be,Ke),w=w+Math.imul(q,Oe)|0,c=c+Math.imul(q,Ce)|0,c=c+Math.imul(Q,Oe)|0,b=b+Math.imul(Q,Ce)|0,w=w+Math.imul(U,Re)|0,c=c+Math.imul(U,Ue)|0,c=c+Math.imul(W,Re)|0,b=b+Math.imul(W,Ue)|0,w=w+Math.imul(fe,Ne)|0,c=c+Math.imul(fe,De)|0,c=c+Math.imul(K,Ne)|0,b=b+Math.imul(K,De)|0,w=w+Math.imul(oe,Le)|0,c=c+Math.imul(oe,Ve)|0,c=c+Math.imul(ue,Le)|0,b=b+Math.imul(ue,Ve)|0,w=w+Math.imul(V,Fe)|0,c=c+Math.imul(V,je)|0,c=c+Math.imul(z,Fe)|0,b=b+Math.imul(z,je)|0;var jr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(Ie,Be),c=Math.imul(Ie,Ke),c=c+Math.imul(Ee,Be)|0,b=Math.imul(Ee,Ke),w=w+Math.imul(ye,Oe)|0,c=c+Math.imul(ye,Ce)|0,c=c+Math.imul(be,Oe)|0,b=b+Math.imul(be,Ce)|0,w=w+Math.imul(q,Re)|0,c=c+Math.imul(q,Ue)|0,c=c+Math.imul(Q,Re)|0,b=b+Math.imul(Q,Ue)|0,w=w+Math.imul(U,Ne)|0,c=c+Math.imul(U,De)|0,c=c+Math.imul(W,Ne)|0,b=b+Math.imul(W,De)|0,w=w+Math.imul(fe,Le)|0,c=c+Math.imul(fe,Ve)|0,c=c+Math.imul(K,Le)|0,b=b+Math.imul(K,Ve)|0,w=w+Math.imul(oe,Fe)|0,c=c+Math.imul(oe,je)|0,c=c+Math.imul(ue,Fe)|0,b=b+Math.imul(ue,je)|0,w=w+Math.imul(V,qe)|0,c=c+Math.imul(V,ze)|0,c=c+Math.imul(z,qe)|0,b=b+Math.imul(z,ze)|0;var qr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(Me,Be),c=Math.imul(Me,Ke),c=c+Math.imul(Je,Be)|0,b=Math.imul(Je,Ke),w=w+Math.imul(Ie,Oe)|0,c=c+Math.imul(Ie,Ce)|0,c=c+Math.imul(Ee,Oe)|0,b=b+Math.imul(Ee,Ce)|0,w=w+Math.imul(ye,Re)|0,c=c+Math.imul(ye,Ue)|0,c=c+Math.imul(be,Re)|0,b=b+Math.imul(be,Ue)|0,w=w+Math.imul(q,Ne)|0,c=c+Math.imul(q,De)|0,c=c+Math.imul(Q,Ne)|0,b=b+Math.imul(Q,De)|0,w=w+Math.imul(U,Le)|0,c=c+Math.imul(U,Ve)|0,c=c+Math.imul(W,Le)|0,b=b+Math.imul(W,Ve)|0,w=w+Math.imul(fe,Fe)|0,c=c+Math.imul(fe,je)|0,c=c+Math.imul(K,Fe)|0,b=b+Math.imul(K,je)|0,w=w+Math.imul(oe,qe)|0,c=c+Math.imul(oe,ze)|0,c=c+Math.imul(ue,qe)|0,b=b+Math.imul(ue,ze)|0,w=w+Math.imul(V,We)|0,c=c+Math.imul(V,He)|0,c=c+Math.imul(z,We)|0,b=b+Math.imul(z,He)|0;var zr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(Ye,Be),c=Math.imul(Ye,Ke),c=c+Math.imul(Xe,Be)|0,b=Math.imul(Xe,Ke),w=w+Math.imul(Me,Oe)|0,c=c+Math.imul(Me,Ce)|0,c=c+Math.imul(Je,Oe)|0,b=b+Math.imul(Je,Ce)|0,w=w+Math.imul(Ie,Re)|0,c=c+Math.imul(Ie,Ue)|0,c=c+Math.imul(Ee,Re)|0,b=b+Math.imul(Ee,Ue)|0,w=w+Math.imul(ye,Ne)|0,c=c+Math.imul(ye,De)|0,c=c+Math.imul(be,Ne)|0,b=b+Math.imul(be,De)|0,w=w+Math.imul(q,Le)|0,c=c+Math.imul(q,Ve)|0,c=c+Math.imul(Q,Le)|0,b=b+Math.imul(Q,Ve)|0,w=w+Math.imul(U,Fe)|0,c=c+Math.imul(U,je)|0,c=c+Math.imul(W,Fe)|0,b=b+Math.imul(W,je)|0,w=w+Math.imul(fe,qe)|0,c=c+Math.imul(fe,ze)|0,c=c+Math.imul(K,qe)|0,b=b+Math.imul(K,ze)|0,w=w+Math.imul(oe,We)|0,c=c+Math.imul(oe,He)|0,c=c+Math.imul(ue,We)|0,b=b+Math.imul(ue,He)|0,w=w+Math.imul(V,$e)|0,c=c+Math.imul(V,Ge)|0,c=c+Math.imul(z,$e)|0,b=b+Math.imul(z,Ge)|0;var Wr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(ke,Be),c=Math.imul(ke,Ke),c=c+Math.imul(Pe,Be)|0,b=Math.imul(Pe,Ke),w=w+Math.imul(Ye,Oe)|0,c=c+Math.imul(Ye,Ce)|0,c=c+Math.imul(Xe,Oe)|0,b=b+Math.imul(Xe,Ce)|0,w=w+Math.imul(Me,Re)|0,c=c+Math.imul(Me,Ue)|0,c=c+Math.imul(Je,Re)|0,b=b+Math.imul(Je,Ue)|0,w=w+Math.imul(Ie,Ne)|0,c=c+Math.imul(Ie,De)|0,c=c+Math.imul(Ee,Ne)|0,b=b+Math.imul(Ee,De)|0,w=w+Math.imul(ye,Le)|0,c=c+Math.imul(ye,Ve)|0,c=c+Math.imul(be,Le)|0,b=b+Math.imul(be,Ve)|0,w=w+Math.imul(q,Fe)|0,c=c+Math.imul(q,je)|0,c=c+Math.imul(Q,Fe)|0,b=b+Math.imul(Q,je)|0,w=w+Math.imul(U,qe)|0,c=c+Math.imul(U,ze)|0,c=c+Math.imul(W,qe)|0,b=b+Math.imul(W,ze)|0,w=w+Math.imul(fe,We)|0,c=c+Math.imul(fe,He)|0,c=c+Math.imul(K,We)|0,b=b+Math.imul(K,He)|0,w=w+Math.imul(oe,$e)|0,c=c+Math.imul(oe,Ge)|0,c=c+Math.imul(ue,$e)|0,b=b+Math.imul(ue,Ge)|0,w=w+Math.imul(V,Ze)|0,c=c+Math.imul(V,Qe)|0,c=c+Math.imul(z,Ze)|0,b=b+Math.imul(z,Qe)|0;var Hr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(ke,Oe),c=Math.imul(ke,Ce),c=c+Math.imul(Pe,Oe)|0,b=Math.imul(Pe,Ce),w=w+Math.imul(Ye,Re)|0,c=c+Math.imul(Ye,Ue)|0,c=c+Math.imul(Xe,Re)|0,b=b+Math.imul(Xe,Ue)|0,w=w+Math.imul(Me,Ne)|0,c=c+Math.imul(Me,De)|0,c=c+Math.imul(Je,Ne)|0,b=b+Math.imul(Je,De)|0,w=w+Math.imul(Ie,Le)|0,c=c+Math.imul(Ie,Ve)|0,c=c+Math.imul(Ee,Le)|0,b=b+Math.imul(Ee,Ve)|0,w=w+Math.imul(ye,Fe)|0,c=c+Math.imul(ye,je)|0,c=c+Math.imul(be,Fe)|0,b=b+Math.imul(be,je)|0,w=w+Math.imul(q,qe)|0,c=c+Math.imul(q,ze)|0,c=c+Math.imul(Q,qe)|0,b=b+Math.imul(Q,ze)|0,w=w+Math.imul(U,We)|0,c=c+Math.imul(U,He)|0,c=c+Math.imul(W,We)|0,b=b+Math.imul(W,He)|0,w=w+Math.imul(fe,$e)|0,c=c+Math.imul(fe,Ge)|0,c=c+Math.imul(K,$e)|0,b=b+Math.imul(K,Ge)|0,w=w+Math.imul(oe,Ze)|0,c=c+Math.imul(oe,Qe)|0,c=c+Math.imul(ue,Ze)|0,b=b+Math.imul(ue,Qe)|0;var $r=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ke,Re),c=Math.imul(ke,Ue),c=c+Math.imul(Pe,Re)|0,b=Math.imul(Pe,Ue),w=w+Math.imul(Ye,Ne)|0,c=c+Math.imul(Ye,De)|0,c=c+Math.imul(Xe,Ne)|0,b=b+Math.imul(Xe,De)|0,w=w+Math.imul(Me,Le)|0,c=c+Math.imul(Me,Ve)|0,c=c+Math.imul(Je,Le)|0,b=b+Math.imul(Je,Ve)|0,w=w+Math.imul(Ie,Fe)|0,c=c+Math.imul(Ie,je)|0,c=c+Math.imul(Ee,Fe)|0,b=b+Math.imul(Ee,je)|0,w=w+Math.imul(ye,qe)|0,c=c+Math.imul(ye,ze)|0,c=c+Math.imul(be,qe)|0,b=b+Math.imul(be,ze)|0,w=w+Math.imul(q,We)|0,c=c+Math.imul(q,He)|0,c=c+Math.imul(Q,We)|0,b=b+Math.imul(Q,He)|0,w=w+Math.imul(U,$e)|0,c=c+Math.imul(U,Ge)|0,c=c+Math.imul(W,$e)|0,b=b+Math.imul(W,Ge)|0,w=w+Math.imul(fe,Ze)|0,c=c+Math.imul(fe,Qe)|0,c=c+Math.imul(K,Ze)|0,b=b+Math.imul(K,Qe)|0;var Gr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(ke,Ne),c=Math.imul(ke,De),c=c+Math.imul(Pe,Ne)|0,b=Math.imul(Pe,De),w=w+Math.imul(Ye,Le)|0,c=c+Math.imul(Ye,Ve)|0,c=c+Math.imul(Xe,Le)|0,b=b+Math.imul(Xe,Ve)|0,w=w+Math.imul(Me,Fe)|0,c=c+Math.imul(Me,je)|0,c=c+Math.imul(Je,Fe)|0,b=b+Math.imul(Je,je)|0,w=w+Math.imul(Ie,qe)|0,c=c+Math.imul(Ie,ze)|0,c=c+Math.imul(Ee,qe)|0,b=b+Math.imul(Ee,ze)|0,w=w+Math.imul(ye,We)|0,c=c+Math.imul(ye,He)|0,c=c+Math.imul(be,We)|0,b=b+Math.imul(be,He)|0,w=w+Math.imul(q,$e)|0,c=c+Math.imul(q,Ge)|0,c=c+Math.imul(Q,$e)|0,b=b+Math.imul(Q,Ge)|0,w=w+Math.imul(U,Ze)|0,c=c+Math.imul(U,Qe)|0,c=c+Math.imul(W,Ze)|0,b=b+Math.imul(W,Qe)|0;var Zr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(ke,Le),c=Math.imul(ke,Ve),c=c+Math.imul(Pe,Le)|0,b=Math.imul(Pe,Ve),w=w+Math.imul(Ye,Fe)|0,c=c+Math.imul(Ye,je)|0,c=c+Math.imul(Xe,Fe)|0,b=b+Math.imul(Xe,je)|0,w=w+Math.imul(Me,qe)|0,c=c+Math.imul(Me,ze)|0,c=c+Math.imul(Je,qe)|0,b=b+Math.imul(Je,ze)|0,w=w+Math.imul(Ie,We)|0,c=c+Math.imul(Ie,He)|0,c=c+Math.imul(Ee,We)|0,b=b+Math.imul(Ee,He)|0,w=w+Math.imul(ye,$e)|0,c=c+Math.imul(ye,Ge)|0,c=c+Math.imul(be,$e)|0,b=b+Math.imul(be,Ge)|0,w=w+Math.imul(q,Ze)|0,c=c+Math.imul(q,Qe)|0,c=c+Math.imul(Q,Ze)|0,b=b+Math.imul(Q,Qe)|0;var Qr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,w=Math.imul(ke,Fe),c=Math.imul(ke,je),c=c+Math.imul(Pe,Fe)|0,b=Math.imul(Pe,je),w=w+Math.imul(Ye,qe)|0,c=c+Math.imul(Ye,ze)|0,c=c+Math.imul(Xe,qe)|0,b=b+Math.imul(Xe,ze)|0,w=w+Math.imul(Me,We)|0,c=c+Math.imul(Me,He)|0,c=c+Math.imul(Je,We)|0,b=b+Math.imul(Je,He)|0,w=w+Math.imul(Ie,$e)|0,c=c+Math.imul(Ie,Ge)|0,c=c+Math.imul(Ee,$e)|0,b=b+Math.imul(Ee,Ge)|0,w=w+Math.imul(ye,Ze)|0,c=c+Math.imul(ye,Qe)|0,c=c+Math.imul(be,Ze)|0,b=b+Math.imul(be,Qe)|0;var Jr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(ke,qe),c=Math.imul(ke,ze),c=c+Math.imul(Pe,qe)|0,b=Math.imul(Pe,ze),w=w+Math.imul(Ye,We)|0,c=c+Math.imul(Ye,He)|0,c=c+Math.imul(Xe,We)|0,b=b+Math.imul(Xe,He)|0,w=w+Math.imul(Me,$e)|0,c=c+Math.imul(Me,Ge)|0,c=c+Math.imul(Je,$e)|0,b=b+Math.imul(Je,Ge)|0,w=w+Math.imul(Ie,Ze)|0,c=c+Math.imul(Ie,Qe)|0,c=c+Math.imul(Ee,Ze)|0,b=b+Math.imul(Ee,Qe)|0;var Yr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,w=Math.imul(ke,We),c=Math.imul(ke,He),c=c+Math.imul(Pe,We)|0,b=Math.imul(Pe,He),w=w+Math.imul(Ye,$e)|0,c=c+Math.imul(Ye,Ge)|0,c=c+Math.imul(Xe,$e)|0,b=b+Math.imul(Xe,Ge)|0,w=w+Math.imul(Me,Ze)|0,c=c+Math.imul(Me,Qe)|0,c=c+Math.imul(Je,Ze)|0,b=b+Math.imul(Je,Qe)|0;var Xr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,w=Math.imul(ke,$e),c=Math.imul(ke,Ge),c=c+Math.imul(Pe,$e)|0,b=Math.imul(Pe,Ge),w=w+Math.imul(Ye,Ze)|0,c=c+Math.imul(Ye,Qe)|0,c=c+Math.imul(Xe,Ze)|0,b=b+Math.imul(Xe,Qe)|0;var eo=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(eo>>>26)|0,eo&=67108863,w=Math.imul(ke,Ze),c=Math.imul(ke,Qe),c=c+Math.imul(Pe,Ze)|0,b=Math.imul(Pe,Qe);var to=(E+w|0)+((c&8191)<<13)|0;return E=(b+(c>>>13)|0)+(to>>>26)|0,to&=67108863,S[0]=Nr,S[1]=Dr,S[2]=Lr,S[3]=Vr,S[4]=Fr,S[5]=jr,S[6]=qr,S[7]=zr,S[8]=Wr,S[9]=Hr,S[10]=$r,S[11]=Gr,S[12]=Zr,S[13]=Qr,S[14]=Jr,S[15]=Yr,S[16]=Xr,S[17]=eo,S[18]=to,E!==0&&(S[19]=E,m.length++),m},"comb10MulTo");Math.imul||(C=O);function R(A,s,u){u.negative=s.negative^A.negative,u.length=A.length+s.length;for(var m=0,y=0,v=0;v<u.length-1;v++){var S=y;y=0;for(var E=m&67108863,w=Math.min(v,s.length-1),c=Math.max(0,v-A.length+1);c<=w;c++){var b=v-c,D=A.words[b]|0,V=s.words[c]|0,z=D*V,J=z&67108863;S=S+(z/67108864|0)|0,J=J+E|0,E=J&67108863,S=S+(J>>>26)|0,y+=S>>>26,S&=67108863}u.words[v]=E,m=S,S=y}return m!==0?u.words[v]=m:u.length--,u.strip()}n(R,"bigMulTo");function j(A,s,u){var m=new F;return m.mulp(A,s,u)}n(j,"jumboMulTo"),o.prototype.mulTo=n(function(s,u){var m,y=this.length+s.length;return this.length===10&&s.length===10?m=C(this,s,u):y<63?m=O(this,s,u):y<1024?m=R(this,s,u):m=j(this,s,u),m},"mulTo");function F(A,s){this.x=A,this.y=s}n(F,"FFTM"),F.prototype.makeRBT=n(function(s){for(var u=new Array(s),m=o.prototype._countBits(s)-1,y=0;y<s;y++)u[y]=this.revBin(y,m,s);return u},"makeRBT"),F.prototype.revBin=n(function(s,u,m){if(s===0||s===m-1)return s;for(var y=0,v=0;v<u;v++)y|=(s&1)<<u-v-1,s>>=1;return y},"revBin"),F.prototype.permute=n(function(s,u,m,y,v,S){for(var E=0;E<S;E++)y[E]=u[s[E]],v[E]=m[s[E]]},"permute"),F.prototype.transform=n(function(s,u,m,y,v,S){this.permute(S,s,u,m,y,v);for(var E=1;E<v;E<<=1)for(var w=E<<1,c=Math.cos(2*Math.PI/w),b=Math.sin(2*Math.PI/w),D=0;D<v;D+=w)for(var V=c,z=b,J=0;J<E;J++){var oe=m[D+J],ue=y[D+J],dt=m[D+J+E],fe=y[D+J+E],K=V*dt-z*fe;fe=V*fe+z*dt,dt=K,m[D+J]=oe+dt,y[D+J]=ue+fe,m[D+J+E]=oe-dt,y[D+J+E]=ue-fe,J!==w&&(K=c*V-b*z,z=c*z+b*V,V=K)}},"transform"),F.prototype.guessLen13b=n(function(s,u){var m=Math.max(u,s)|1,y=m&1,v=0;for(m=m/2|0;m;m=m>>>1)v++;return 1<<v+1+y},"guessLen13b"),F.prototype.conjugate=n(function(s,u,m){if(!(m<=1))for(var y=0;y<m/2;y++){var v=s[y];s[y]=s[m-y-1],s[m-y-1]=v,v=u[y],u[y]=-u[m-y-1],u[m-y-1]=-v}},"conjugate"),F.prototype.normalize13b=n(function(s,u){for(var m=0,y=0;y<u/2;y++){var v=Math.round(s[2*y+1]/u)*8192+Math.round(s[2*y]/u)+m;s[y]=v&67108863,v<67108864?m=0:m=v/67108864|0}return s},"normalize13b"),F.prototype.convert13b=n(function(s,u,m,y){for(var v=0,S=0;S<u;S++)v=v+(s[S]|0),m[2*S]=v&8191,v=v>>>13,m[2*S+1]=v&8191,v=v>>>13;for(S=2*u;S<y;++S)m[S]=0;r(v===0),r((v&-8192)===0)},"convert13b"),F.prototype.stub=n(function(s){for(var u=new Array(s),m=0;m<s;m++)u[m]=0;return u},"stub"),F.prototype.mulp=n(function(s,u,m){var y=2*this.guessLen13b(s.length,u.length),v=this.makeRBT(y),S=this.stub(y),E=new Array(y),w=new Array(y),c=new Array(y),b=new Array(y),D=new Array(y),V=new Array(y),z=m.words;z.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(u.words,u.length,b,y),this.transform(E,S,w,c,y,v),this.transform(b,S,D,V,y,v);for(var J=0;J<y;J++){var oe=w[J]*D[J]-c[J]*V[J];c[J]=w[J]*V[J]+c[J]*D[J],w[J]=oe}return this.conjugate(w,c,y),this.transform(w,c,z,S,y,v),this.conjugate(z,S,y),this.normalize13b(z,y),m.negative=s.negative^u.negative,m.length=s.length+u.length,m.strip()},"mulp"),o.prototype.mul=n(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},"mul"),o.prototype.mulf=n(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),j(this,s,u)},"mulf"),o.prototype.imul=n(function(s){return this.clone().mulTo(s,this)},"imul"),o.prototype.imuln=n(function(s){r(typeof s=="number"),r(s<67108864);for(var u=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*s,v=(y&67108863)+(u&67108863);u>>=26,u+=y/67108864|0,u+=v>>>26,this.words[m]=v&67108863}return u!==0&&(this.words[m]=u,this.length++),this},"imuln"),o.prototype.muln=n(function(s){return this.clone().imuln(s)},"muln"),o.prototype.sqr=n(function(){return this.mul(this)},"sqr"),o.prototype.isqr=n(function(){return this.imul(this.clone())},"isqr"),o.prototype.pow=n(function(s){var u=_(s);if(u.length===0)return new o(1);for(var m=this,y=0;y<u.length&&u[y]===0;y++,m=m.sqr());if(++y<u.length)for(var v=m.sqr();y<u.length;y++,v=v.sqr())u[y]!==0&&(m=m.mul(v));return m},"pow"),o.prototype.iushln=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=67108863>>>26-u<<26-u,v;if(u!==0){var S=0;for(v=0;v<this.length;v++){var E=this.words[v]&y,w=(this.words[v]|0)-E<<u;this.words[v]=w|S,S=E>>>26-u}S&&(this.words[v]=S,this.length++)}if(m!==0){for(v=this.length-1;v>=0;v--)this.words[v+m]=this.words[v];for(v=0;v<m;v++)this.words[v]=0;this.length+=m}return this.strip()},"iushln"),o.prototype.ishln=n(function(s){return r(this.negative===0),this.iushln(s)},"ishln"),o.prototype.iushrn=n(function(s,u,m){r(typeof s=="number"&&s>=0);var y;u?y=(u-u%26)/26:y=0;var v=s%26,S=Math.min((s-v)/26,this.length),E=67108863^67108863>>>v<<v,w=m;if(y-=S,y=Math.max(0,y),w){for(var c=0;c<S;c++)w.words[c]=this.words[c];w.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var b=0;for(c=this.length-1;c>=0&&(b!==0||c>=y);c--){var D=this.words[c]|0;this.words[c]=b<<26-v|D>>>v,b=D&E}return w&&b!==0&&(w.words[w.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),o.prototype.ishrn=n(function(s,u,m){return r(this.negative===0),this.iushrn(s,u,m)},"ishrn"),o.prototype.shln=n(function(s){return this.clone().ishln(s)},"shln"),o.prototype.ushln=n(function(s){return this.clone().iushln(s)},"ushln"),o.prototype.shrn=n(function(s){return this.clone().ishrn(s)},"shrn"),o.prototype.ushrn=n(function(s){return this.clone().iushrn(s)},"ushrn"),o.prototype.testn=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return!1;var v=this.words[m];return!!(v&y)},"testn"),o.prototype.imaskn=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(u!==0&&m++,this.length=Math.min(m,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this.strip()},"imaskn"),o.prototype.maskn=n(function(s){return this.clone().imaskn(s)},"maskn"),o.prototype.iaddn=n(function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},"iaddn"),o.prototype._iaddn=n(function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},"_iaddn"),o.prototype.isubn=n(function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},"isubn"),o.prototype.addn=n(function(s){return this.clone().iaddn(s)},"addn"),o.prototype.subn=n(function(s){return this.clone().isubn(s)},"subn"),o.prototype.iabs=n(function(){return this.negative=0,this},"iabs"),o.prototype.abs=n(function(){return this.clone().iabs()},"abs"),o.prototype._ishlnsubmul=n(function(s,u,m){var y=s.length+m,v;this._expand(y);var S,E=0;for(v=0;v<s.length;v++){S=(this.words[v+m]|0)+E;var w=(s.words[v]|0)*u;S-=w&67108863,E=(S>>26)-(w/67108864|0),this.words[v+m]=S&67108863}for(;v<this.length-m;v++)S=(this.words[v+m]|0)+E,E=S>>26,this.words[v+m]=S&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,v=0;v<this.length;v++)S=-(this.words[v]|0)+E,E=S>>26,this.words[v]=S&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),o.prototype._wordDiv=n(function(s,u){var m=this.length-s.length,y=this.clone(),v=s,S=v.words[v.length-1]|0,E=this._countBits(S);m=26-E,m!==0&&(v=v.ushln(m),y.iushln(m),S=v.words[v.length-1]|0);var w=y.length-v.length,c;if(u!=="mod"){c=new o(null),c.length=w+1,c.words=new Array(c.length);for(var b=0;b<c.length;b++)c.words[b]=0}var D=y.clone()._ishlnsubmul(v,1,w);D.negative===0&&(y=D,c&&(c.words[w]=1));for(var V=w-1;V>=0;V--){var z=(y.words[v.length+V]|0)*67108864+(y.words[v.length+V-1]|0);for(z=Math.min(z/S|0,67108863),y._ishlnsubmul(v,z,V);y.negative!==0;)z--,y.negative=0,y._ishlnsubmul(v,1,V),y.isZero()||(y.negative^=1);c&&(c.words[V]=z)}return c&&c.strip(),y.strip(),u!=="div"&&m!==0&&y.iushrn(m),{div:c||null,mod:y}},"_wordDiv"),o.prototype.divmod=n(function(s,u,m){if(r(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,v,S;return this.negative!==0&&s.negative===0?(S=this.neg().divmod(s,u),u!=="mod"&&(y=S.div.neg()),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.iadd(s)),{div:y,mod:v}):this.negative===0&&s.negative!==0?(S=this.divmod(s.neg(),u),u!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),u),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.isub(s)),{div:S.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},"divmod"),o.prototype.div=n(function(s){return this.divmod(s,"div",!1).div},"div"),o.prototype.mod=n(function(s){return this.divmod(s,"mod",!1).mod},"mod"),o.prototype.umod=n(function(s){return this.divmod(s,"mod",!0).mod},"umod"),o.prototype.divRound=n(function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var m=u.div.negative!==0?u.mod.isub(s):u.mod,y=s.ushrn(1),v=s.andln(1),S=m.cmp(y);return S<0||v===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},"divRound"),o.prototype.modn=n(function(s){r(s<=67108863);for(var u=(1<<26)%s,m=0,y=this.length-1;y>=0;y--)m=(u*m+(this.words[y]|0))%s;return m},"modn"),o.prototype.idivn=n(function(s){r(s<=67108863);for(var u=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+u*67108864;this.words[m]=y/s|0,u=y%s}return this.strip()},"idivn"),o.prototype.divn=n(function(s){return this.clone().idivn(s)},"divn"),o.prototype.egcd=n(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=new o(0),E=new o(1),w=0;u.isEven()&&m.isEven();)u.iushrn(1),m.iushrn(1),++w;for(var c=m.clone(),b=u.clone();!u.isZero();){for(var D=0,V=1;!(u.words[0]&V)&&D<26;++D,V<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(b)),y.iushrn(1),v.iushrn(1);for(var z=0,J=1;!(m.words[0]&J)&&z<26;++z,J<<=1);if(z>0)for(m.iushrn(z);z-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(c),E.isub(b)),S.iushrn(1),E.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(S),v.isub(E)):(m.isub(u),S.isub(y),E.isub(v))}return{a:S,b:E,gcd:m.iushln(w)}},"egcd"),o.prototype._invmp=n(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=m.clone();u.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,w=1;!(u.words[0]&w)&&E<26;++E,w<<=1);if(E>0)for(u.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var c=0,b=1;!(m.words[0]&b)&&c<26;++c,b<<=1);if(c>0)for(m.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(S),v.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(v)):(m.isub(u),v.isub(y))}var D;return u.cmpn(1)===0?D=y:D=v,D.cmpn(0)<0&&D.iadd(s),D},"_invmp"),o.prototype.gcd=n(function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),m=s.clone();u.negative=0,m.negative=0;for(var y=0;u.isEven()&&m.isEven();y++)u.iushrn(1),m.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;m.isEven();)m.iushrn(1);var v=u.cmp(m);if(v<0){var S=u;u=m,m=S}else if(v===0||m.cmpn(1)===0)break;u.isub(m)}while(!0);return m.iushln(y)},"gcd"),o.prototype.invm=n(function(s){return this.egcd(s).a.umod(s)},"invm"),o.prototype.isEven=n(function(){return(this.words[0]&1)===0},"isEven"),o.prototype.isOdd=n(function(){return(this.words[0]&1)===1},"isOdd"),o.prototype.andln=n(function(s){return this.words[0]&s},"andln"),o.prototype.bincn=n(function(s){r(typeof s=="number");var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var v=y,S=m;v!==0&&S<this.length;S++){var E=this.words[S]|0;E+=v,v=E>>>26,E&=67108863,this.words[S]=E}return v!==0&&(this.words[S]=v,this.length++),this},"bincn"),o.prototype.isZero=n(function(){return this.length===1&&this.words[0]===0},"isZero"),o.prototype.cmpn=n(function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var m;if(this.length>1)m=1;else{u&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;m=y===s?0:y<s?-1:1}return this.negative!==0?-m|0:m},"cmpn"),o.prototype.cmp=n(function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},"cmp"),o.prototype.ucmp=n(function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,v=s.words[m]|0;if(y!==v){y<v?u=-1:y>v&&(u=1);break}}return u},"ucmp"),o.prototype.gtn=n(function(s){return this.cmpn(s)===1},"gtn"),o.prototype.gt=n(function(s){return this.cmp(s)===1},"gt"),o.prototype.gten=n(function(s){return this.cmpn(s)>=0},"gten"),o.prototype.gte=n(function(s){return this.cmp(s)>=0},"gte"),o.prototype.ltn=n(function(s){return this.cmpn(s)===-1},"ltn"),o.prototype.lt=n(function(s){return this.cmp(s)===-1},"lt"),o.prototype.lten=n(function(s){return this.cmpn(s)<=0},"lten"),o.prototype.lte=n(function(s){return this.cmp(s)<=0},"lte"),o.prototype.eqn=n(function(s){return this.cmpn(s)===0},"eqn"),o.prototype.eq=n(function(s){return this.cmp(s)===0},"eq"),o.red=n(function(s){return new Z(s)},"red"),o.prototype.toRed=n(function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},"toRed"),o.prototype.fromRed=n(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),o.prototype._forceRed=n(function(s){return this.red=s,this},"_forceRed"),o.prototype.forceRed=n(function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},"forceRed"),o.prototype.redAdd=n(function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},"redAdd"),o.prototype.redIAdd=n(function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},"redIAdd"),o.prototype.redSub=n(function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},"redSub"),o.prototype.redISub=n(function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},"redISub"),o.prototype.redShl=n(function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},"redShl"),o.prototype.redMul=n(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},"redMul"),o.prototype.redIMul=n(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},"redIMul"),o.prototype.redSqr=n(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),o.prototype.redISqr=n(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),o.prototype.redSqrt=n(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),o.prototype.redInvm=n(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),o.prototype.redNeg=n(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),o.prototype.redPow=n(function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)},"redPow");var Y={k256:null,p224:null,p192:null,p25519:null};function L(A,s){this.name=A,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}n(L,"MPrime"),L.prototype._tmp=n(function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},"_tmp"),L.prototype.ireduce=n(function(s){var u=s,m;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),m=u.bitLength();while(m>this.n);var y=m<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},"ireduce"),L.prototype.split=n(function(s,u){s.iushrn(this.n,0,u)},"split"),L.prototype.imulK=n(function(s){return s.imul(this.k)},"imulK");function ce(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(ce,"K256"),i(ce,L),ce.prototype.split=n(function(s,u){for(var m=4194303,y=Math.min(s.length,9),v=0;v<y;v++)u.words[v]=s.words[v];if(u.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var S=s.words[9];for(u.words[u.length++]=S&m,v=10;v<s.length;v++){var E=s.words[v]|0;s.words[v-10]=(E&m)<<4|S>>>22,S=E}S>>>=22,s.words[v-10]=S,S===0&&s.length>10?s.length-=10:s.length-=9},"split"),ce.prototype.imulK=n(function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,m=0;m<s.length;m++){var y=s.words[m]|0;u+=y*977,s.words[m]=u&67108863,u=y*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s},"imulK");function te(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(te,"P224"),i(te,L);function ie(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ie,"P192"),i(ie,L);function ae(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ae,"P25519"),i(ae,L),ae.prototype.imulK=n(function(s){for(var u=0,m=0;m<s.length;m++){var y=(s.words[m]|0)*19+u,v=y&67108863;y>>>=26,s.words[m]=v,u=y}return u!==0&&(s.words[s.length++]=u),s},"imulK"),o._prime=n(function(s){if(Y[s])return Y[s];var u;if(s==="k256")u=new ce;else if(s==="p224")u=new te;else if(s==="p192")u=new ie;else if(s==="p25519")u=new ae;else throw new Error("Unknown prime "+s);return Y[s]=u,u},"prime");function Z(A){if(typeof A=="string"){var s=o._prime(A);this.m=s.p,this.prime=s}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}n(Z,"Red"),Z.prototype._verify1=n(function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},"_verify1"),Z.prototype._verify2=n(function(s,u){r((s.negative|u.negative)===0,"red works only with positives"),r(s.red&&s.red===u.red,"red works only with red numbers")},"_verify2"),Z.prototype.imod=n(function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},"imod"),Z.prototype.neg=n(function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},"neg"),Z.prototype.add=n(function(s,u){this._verify2(s,u);var m=s.add(u);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},"add"),Z.prototype.iadd=n(function(s,u){this._verify2(s,u);var m=s.iadd(u);return m.cmp(this.m)>=0&&m.isub(this.m),m},"iadd"),Z.prototype.sub=n(function(s,u){this._verify2(s,u);var m=s.sub(u);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},"sub"),Z.prototype.isub=n(function(s,u){this._verify2(s,u);var m=s.isub(u);return m.cmpn(0)<0&&m.iadd(this.m),m},"isub"),Z.prototype.shl=n(function(s,u){return this._verify1(s),this.imod(s.ushln(u))},"shl"),Z.prototype.imul=n(function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},"imul"),Z.prototype.mul=n(function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},"mul"),Z.prototype.isqr=n(function(s){return this.imul(s,s.clone())},"isqr"),Z.prototype.sqr=n(function(s){return this.mul(s,s)},"sqr"),Z.prototype.sqrt=n(function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(s,m)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var S=new o(1).toRed(this),E=S.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,w).cmp(E)!==0;)c.redIAdd(E);for(var b=this.pow(c,y),D=this.pow(s,y.addn(1).iushrn(1)),V=this.pow(s,y),z=v;V.cmp(S)!==0;){for(var J=V,oe=0;J.cmp(S)!==0;oe++)J=J.redSqr();r(oe<z);var ue=this.pow(b,new o(1).iushln(z-oe-1));D=D.redMul(ue),b=ue.redSqr(),V=V.redMul(b),z=oe}return D},"sqrt"),Z.prototype.invm=n(function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},"invm"),Z.prototype.pow=n(function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var m=4,y=new Array(1<<m);y[0]=new o(1).toRed(this),y[1]=s;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],s);var S=y[0],E=0,w=0,c=u.bitLength()%26;for(c===0&&(c=26),v=u.length-1;v>=0;v--){for(var b=u.words[v],D=c-1;D>=0;D--){var V=b>>D&1;if(S!==y[0]&&(S=this.sqr(S)),V===0&&E===0){w=0;continue}E<<=1,E|=V,w++,!(w!==m&&(v!==0||D!==0))&&(S=this.mul(S,y[E]),w=0,E=0)}c=26}return S},"pow"),Z.prototype.convertTo=n(function(s){var u=s.umod(this.m);return u===s?u.clone():u},"convertTo"),Z.prototype.convertFrom=n(function(s){var u=s.clone();return u.red=null,u},"convertFrom"),o.mont=n(function(s){return new ge(s)},"mont");function ge(A){Z.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(ge,"Mont"),i(ge,Z),ge.prototype.convertTo=n(function(s){return this.imod(s.ushln(this.shift))},"convertTo"),ge.prototype.convertFrom=n(function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},"convertFrom"),ge.prototype.imul=n(function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var m=s.imul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"imul"),ge.prototype.mul=n(function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var m=s.mul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"mul"),ge.prototype.invm=n(function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)},"invm")})(typeof Nd>"u"||Nd,Fy)});var qy=de(ps=>{"use strict";d();h();Object.defineProperty(ps,"__esModule",{value:!0});var wo=vo(),L2=O0().ec,Dd=new L2("secp256k1"),hs=Dd.curve;ps.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new wo(e);if(r.ucmp(hs.n)>=0)throw new Error("couldn't export to DER format");var i=Dd.g.mul(r);return jy(i.getX(),i.getY(),t)};ps.privateKeyModInverse=function(e){var t=new wo(e);if(t.ucmp(hs.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(hs.n).toArrayLike(Buffer,"be",32)};ps.signatureImport=function(e){var t=new wo(e.r);t.ucmp(hs.n)>=0&&(t=new wo(0));var r=new wo(e.s);return r.ucmp(hs.n)>=0&&(r=new wo(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};ps.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var i=Dd.keyFromPublic(e),o=new wo(t);if(o.ucmp(hs.n)>=0||o.isZero())throw new Error("scalar was invalid (zero or overflow)");var a=i.pub.mul(o);return jy(a.getX(),a.getY(),r)};var jy=n(function(e,t,r){var i;return r?(i=Buffer.alloc(33),i[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(i,1)):(i=Buffer.alloc(65),i[0]=4,e.toArrayLike(Buffer,"be",32).copy(i,1),t.toArrayLike(Buffer,"be",32).copy(i,33)),i},"toPublicKey")});var zy=de(Ma=>{"use strict";d();h();Object.defineProperty(Ma,"__esModule",{value:!0});var{Buffer:Ea}=en(),V2=Ea.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),F2=Ea.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Ma.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var i=Ea.from(r?V2:F2);return e.copy(i,r?8:9),t.copy(i,r?181:214),i};Ma.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var i=e[r]&127;if(r+=1,i<1||i>2||t<r+i)return null;var o=e[r+i-1]|(i>1?e[r+i-2]<<8:0);return r+=i,t<r+o||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};Ma.signatureImportLax=function(e){var t=Ea.alloc(32,0),r=Ea.alloc(32,0),i=e.length,o=0;if(e[o++]!==48)return null;var a=e[o++];if(a&128&&(o+=a-128,o>i)||e[o++]!==2)return null;var l=e[o++];if(l&128){if(a=l-128,o+a>i)return null;for(;a>0&&e[o]===0;o+=1,a-=1);for(l=0;a>0;o+=1,a-=1)l=(l<<8)+e[o]}if(l>i-o)return null;var f=o;if(o+=l,e[o++]!==2)return null;var g=e[o++];if(g&128){if(a=g-128,o+a>i)return null;for(;a>0&&e[o]===0;o+=1,a-=1);for(g=0;a>0;o+=1,a-=1)g=(g<<8)+e[o]}if(g>i-o)return null;var x=o;for(o+=g;l>0&&e[f]===0;l-=1,f+=1);if(l>32)return null;var T=e.slice(f,f+l);for(T.copy(t,32-T.length);g>0&&e[x]===0;g-=1,x+=1);if(g>32)return null;var I=e.slice(x,x+g);return I.copy(r,32-I.length),{r:t,s:r}}});var gu=de(Te=>{"use strict";d();h();Object.defineProperty(Te,"__esModule",{value:!0});Te.ecdhUnsafe=Te.ecdh=Te.recover=Te.verify=Te.sign=Te.signatureImportLax=Te.signatureImport=Te.signatureExport=Te.signatureNormalize=Te.publicKeyCombine=Te.publicKeyTweakMul=Te.publicKeyTweakAdd=Te.publicKeyVerify=Te.publicKeyConvert=Te.publicKeyCreate=Te.privateKeyTweakMul=Te.privateKeyTweakAdd=Te.privateKeyModInverse=Te.privateKeyNegate=Te.privateKeyImport=Te.privateKeyExport=Te.privateKeyVerify=void 0;var Ht=Vy(),mu=qy(),Ld=zy();Te.privateKeyVerify=function(e){return e.length!==32?!1:Ht.privateKeyVerify(Uint8Array.from(e))};Te.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=mu.privateKeyExport(e,t);return Ld.privateKeyExport(e,r,t)};Te.privateKeyImport=function(e){if(e=Ld.privateKeyImport(e),e!==null&&e.length===32&&Te.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Te.privateKeyNegate=function(e){return Buffer.from(Ht.privateKeyNegate(Uint8Array.from(e)))};Te.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(mu.privateKeyModInverse(Uint8Array.from(e)))};Te.privateKeyTweakAdd=function(e,t){return Buffer.from(Ht.privateKeyTweakAdd(Uint8Array.from(e),t))};Te.privateKeyTweakMul=function(e,t){return Buffer.from(Ht.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Te.publicKeyCreate=function(e,t){return Buffer.from(Ht.publicKeyCreate(Uint8Array.from(e),t))};Te.publicKeyConvert=function(e,t){return Buffer.from(Ht.publicKeyConvert(Uint8Array.from(e),t))};Te.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:Ht.publicKeyVerify(Uint8Array.from(e))};Te.publicKeyTweakAdd=function(e,t,r){return Buffer.from(Ht.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Te.publicKeyTweakMul=function(e,t,r){return Buffer.from(Ht.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Te.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(i){r.push(Uint8Array.from(i))}),Buffer.from(Ht.publicKeyCombine(r,t))};Te.signatureNormalize=function(e){return Buffer.from(Ht.signatureNormalize(Uint8Array.from(e)))};Te.signatureExport=function(e){return Buffer.from(Ht.signatureExport(Uint8Array.from(e)))};Te.signatureImport=function(e){return Buffer.from(Ht.signatureImport(Uint8Array.from(e)))};Te.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=Ld.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return mu.signatureImport(t)};Te.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var i=void 0;if(r){if(i={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");i.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(i.noncefn=function(a,l,f,g,x){var T=f!=null?Buffer.from(f):null,I=g!=null?Buffer.from(g):null,_=Buffer.from("");return r.noncefn&&(_=r.noncefn(Buffer.from(a),Buffer.from(l),T,I,x)),new Uint8Array(_)})}var o=Ht.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),i);return{signature:Buffer.from(o.signature),recovery:o.recid}};Te.verify=function(e,t,r){return Ht.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Te.recover=function(e,t,r,i){return Buffer.from(Ht.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),i))};Te.ecdh=function(e,t){return Buffer.from(Ht.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Te.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(mu.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var Vd=de((V9,Wy)=>{d();h();Wy.exports=n(function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"},"isHexPrefixed")});var $y=de((z9,Hy)=>{d();h();var j2=Vd();Hy.exports=n(function(t){return typeof t!="string"?t:j2(t)?t.slice(2):t},"stripHexPrefix")});var bo=de((G9,Qy)=>{"use strict";d();h();var q2=Vd(),Gy=$y();function yu(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}n(yu,"padToEven");function Zy(e){var t=e.toString(16);return"0x"+t}n(Zy,"intToHex");function z2(e){var t=Zy(e);return new Buffer(yu(t.slice(2)),"hex")}n(z2,"intToBuffer");function W2(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}n(W2,"getBinarySize");function H2(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(i){return e.indexOf(i)>=0})}n(H2,"arrayContainsArray");function $2(e){var t=new Buffer(yu(Gy(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}n($2,"toUtf8");function G2(e){var t="",r=0,i=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<i;r+=2){var o=parseInt(e.substr(r,2),16);t+=String.fromCharCode(o)}return t}n(G2,"toAscii");function Z2(e){var t=new Buffer(e,"utf8");return"0x"+yu(t.toString("hex")).replace(/^0+|0+$/g,"")}n(Z2,"fromUtf8");function Q2(e){for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r),o=i.toString(16);t+=o.length<2?"0"+o:o}return"0x"+t}n(Q2,"fromAscii");function J2(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var i=[],o=0;o<e.length;o++){var a=e[o][t];if(r&&!a)a="";else if(typeof a!="string")throw new Error("invalid abi");i.push(a)}return i}n(J2,"getKeys");function Y2(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}n(Y2,"isHexString");Qy.exports={arrayContainsArray:H2,intToBuffer:z2,getBinarySize:W2,isHexPrefixed:q2,stripHexPrefix:Gy,padToEven:yu,intToHex:Zy,fromAscii:Q2,fromUtf8:Z2,toAscii:G2,toUtf8:$2,getKeys:J2,isHexString:Y2}});var vu=de(_n=>{"use strict";d();h();var X2=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_n,"__esModule",{value:!0});_n.getLength=_n.decode=_n.encode=void 0;var eM=X2(v1());function Yy(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(Yy(e[r]));var i=Buffer.concat(t);return Buffer.concat([Jy(i.length,192),i])}else{var o=zd(e);return o.length===1&&o[0]<128?o:Buffer.concat([Jy(o.length,128),o])}}n(Yy,"encode");_n.encode=Yy;function Fd(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}n(Fd,"safeParseInt");function Jy(e,t){if(e<56)return Buffer.from([e+t]);var r=qd(e),i=r.length/2,o=qd(t+55+i);return Buffer.from(o+r,"hex")}n(Jy,"encodeLength");function tM(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=zd(e),i=jd(r);if(t)return i;if(i.remainder.length!==0)throw new Error("invalid remainder");return i.data}n(tM,"decode");_n.decode=tM;function rM(e){if(!e||e.length===0)return Buffer.from([]);var t=zd(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var i=r-246,o=Fd(t.slice(1,i).toString("hex"),16);return i+o}n(rM,"getLength");_n.getLength=rM;function jd(e){var t,r,i,o,a,l=[],f=e[0];if(f<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(f<=183){if(t=f-127,f===128?i=Buffer.from([]):i=e.slice(1,t),t===2&&i[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:i,remainder:e.slice(t)}}else if(f<=191){if(r=f-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=Fd(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(i=e.slice(r,t+r),i.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:i,remainder:e.slice(t+r)}}else if(f<=247){for(t=f-191,o=e.slice(1,t);o.length;)a=jd(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(t)}}else{r=f-246,t=Fd(e.slice(1,r).toString("hex"),16);var g=r+t;if(g>e.length)throw new Error("invalid rlp: total length is larger than the data");if(o=e.slice(r,g),o.length===0)throw new Error("invalid rlp, List has a invalid length");for(;o.length;)a=jd(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(g)}}}n(jd,"_decode");function Xy(e){return e.slice(0,2)==="0x"}n(Xy,"isHexPrefixed");function nM(e){return typeof e!="string"?e:Xy(e)?e.slice(2):e}n(nM,"stripHexPrefix");function qd(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}n(qd,"intToHex");function iM(e){return e.length%2?"0"+e:e}n(iM,"padToEven");function oM(e){var t=qd(e);return Buffer.from(t,"hex")}n(oM,"intToBuffer");function zd(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return Xy(e)?Buffer.from(iM(nM(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?oM(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(eM.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}n(zd,"toBuffer")});var tv=de(It=>{"use strict";d();h();Object.defineProperty(It,"__esModule",{value:!0});It.KECCAK256_RLP=It.KECCAK256_RLP_S=It.KECCAK256_RLP_ARRAY=It.KECCAK256_RLP_ARRAY_S=It.KECCAK256_NULL=It.KECCAK256_NULL_S=It.TWO_POW256=It.MAX_INTEGER=void 0;var ev=vo(),{Buffer:Wd}=en();It.MAX_INTEGER=new ev("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);It.TWO_POW256=new ev("10000000000000000000000000000000000000000000000000000000000000000",16);It.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";It.KECCAK256_NULL=Wd.from(It.KECCAK256_NULL_S,"hex");It.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";It.KECCAK256_RLP_ARRAY=Wd.from(It.KECCAK256_RLP_ARRAY_S,"hex");It.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";It.KECCAK256_RLP=Wd.from(It.KECCAK256_RLP_S,"hex")});var gs=de(ot=>{"use strict";d();h();Object.defineProperty(ot,"__esModule",{value:!0});ot.baToJSON=ot.addHexPrefix=ot.toUnsigned=ot.fromSigned=ot.bufferToHex=ot.bufferToInt=ot.toBuffer=ot.stripZeros=ot.unpad=ot.setLengthRight=ot.setLength=ot.setLengthLeft=ot.zeros=void 0;var ms=bo(),Hd=vo();ot.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};ot.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var i=ot.zeros(t);return e=ot.toBuffer(e),r?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)};ot.setLength=ot.setLengthLeft;ot.setLengthRight=function(e,t){return ot.setLength(e,t,!0)};ot.unpad=function(e){e=ms.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};ot.stripZeros=ot.unpad;ot.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(ms.isHexString(e))e=Buffer.from(ms.padToEven(ms.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=ms.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(Hd.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};ot.bufferToInt=function(e){return new Hd(ot.toBuffer(e)).toNumber()};ot.bufferToHex=function(e){return e=ot.toBuffer(e),"0x"+e.toString("hex")};ot.fromSigned=function(e){return new Hd(e).fromTwos(256)};ot.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};ot.addHexPrefix=function(e){return typeof e!="string"||ms.isHexPrefixed(e)?e:"0x"+e};ot.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(ot.baToJSON(e[r]));return t}}});var rv=de($d=>{"use strict";d();h();Object.defineProperty($d,"__esModule",{value:!0});function sM(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}n(sM,"createHashFunction");$d.createHashFunction=sM});var ov=de((dF,iv)=>{d();h();var{Transform:aM}=K0();iv.exports=e=>class nv extends aM{static{n(this,"Keccak")}constructor(r,i,o,a,l){super(l),this._rate=r,this._capacity=i,this._delimitedSuffix=o,this._hashBitLength=a,this._options=l,this._state=new e,this._state.initialize(r,i),this._finalized=!1}_transform(r,i,o){let a=null;try{this.update(r,i)}catch(l){a=l}o(a)}_flush(r){let i=null;try{this.push(this.digest())}catch(o){i=o}r(i)}update(r,i){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,i)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let i=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(i=i.toString(r)),this._resetState(),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new nv(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var cv=de((gF,av)=>{d();h();var{Transform:cM}=K0();av.exports=e=>class sv extends cM{static{n(this,"Shake")}constructor(r,i,o,a){super(a),this._rate=r,this._capacity=i,this._delimitedSuffix=o,this._options=a,this._state=new e,this._state.initialize(r,i),this._finalized=!1}_transform(r,i,o){let a=null;try{this.update(r,i)}catch(l){a=l}o(a)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,i){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,i)),this._state.absorb(r),this}squeeze(r,i){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let o=this._state.squeeze(r);return i!==void 0&&(o=o.toString(i)),o}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new sv(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var lv=de((bF,uv)=>{d();h();var uM=ov(),lM=cv();uv.exports=function(e){let t=uM(e),r=lM(e);return function(i,o){switch(typeof i=="string"?i.toLowerCase():i){case"keccak224":return new t(1152,448,null,224,o);case"keccak256":return new t(1088,512,null,256,o);case"keccak384":return new t(832,768,null,384,o);case"keccak512":return new t(576,1024,null,512,o);case"sha3-224":return new t(1152,448,6,224,o);case"sha3-256":return new t(1088,512,6,256,o);case"sha3-384":return new t(832,768,6,384,o);case"sha3-512":return new t(576,1024,6,512,o);case"shake128":return new r(1344,256,31,o);case"shake256":return new r(1088,512,31,o);default:throw new Error("Invald algorithm: "+i)}}}});var hv=de(dv=>{d();h();var fv=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];dv.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],l=e[4]^e[14]^e[24]^e[34]^e[44],f=e[5]^e[15]^e[25]^e[35]^e[45],g=e[6]^e[16]^e[26]^e[36]^e[46],x=e[7]^e[17]^e[27]^e[37]^e[47],T=e[8]^e[18]^e[28]^e[38]^e[48],I=e[9]^e[19]^e[29]^e[39]^e[49],_=T^(o<<1|a>>>31),O=I^(a<<1|o>>>31),C=e[0]^_,R=e[1]^O,j=e[10]^_,F=e[11]^O,Y=e[20]^_,L=e[21]^O,ce=e[30]^_,te=e[31]^O,ie=e[40]^_,ae=e[41]^O;_=r^(l<<1|f>>>31),O=i^(f<<1|l>>>31);let Z=e[2]^_,ge=e[3]^O,A=e[12]^_,s=e[13]^O,u=e[22]^_,m=e[23]^O,y=e[32]^_,v=e[33]^O,S=e[42]^_,E=e[43]^O;_=o^(g<<1|x>>>31),O=a^(x<<1|g>>>31);let w=e[4]^_,c=e[5]^O,b=e[14]^_,D=e[15]^O,V=e[24]^_,z=e[25]^O,J=e[34]^_,oe=e[35]^O,ue=e[44]^_,dt=e[45]^O;_=l^(T<<1|I>>>31),O=f^(I<<1|T>>>31);let fe=e[6]^_,K=e[7]^O,N=e[16]^_,U=e[17]^O,W=e[26]^_,re=e[27]^O,q=e[36]^_,Q=e[37]^O,nt=e[46]^_,ye=e[47]^O;_=g^(r<<1|i>>>31),O=x^(i<<1|r>>>31);let be=e[8]^_,Mr=e[9]^O,Ie=e[18]^_,Ee=e[19]^O,vn=e[28]^_,Me=e[29]^O,Je=e[38]^_,gi=e[39]^O,Ye=e[48]^_,Xe=e[49]^O,Vn=C,ke=R,Pe=F<<4|j>>>28,Fn=j<<4|F>>>28,Be=Y<<3|L>>>29,Ke=L<<3|Y>>>29,jn=te<<9|ce>>>23,Oe=ce<<9|te>>>23,Ce=ie<<18|ae>>>14,qn=ae<<18|ie>>>14,Re=Z<<1|ge>>>31,Ue=ge<<1|Z>>>31,zn=s<<12|A>>>20,Ne=A<<12|s>>>20,De=u<<10|m>>>22,Wn=m<<10|u>>>22,Le=v<<13|y>>>19,Ve=y<<13|v>>>19,Hn=S<<2|E>>>30,Fe=E<<2|S>>>30,je=c<<30|w>>>2,$n=w<<30|c>>>2,qe=b<<6|D>>>26,ze=D<<6|b>>>26,Gn=z<<11|V>>>21,We=V<<11|z>>>21,He=J<<15|oe>>>17,Zn=oe<<15|J>>>17,$e=dt<<29|ue>>>3,Ge=ue<<29|dt>>>3,Qn=fe<<28|K>>>4,Ze=K<<28|fe>>>4,Qe=U<<23|N>>>9,Nr=N<<23|U>>>9,Dr=W<<25|re>>>7,Lr=re<<25|W>>>7,Vr=q<<21|Q>>>11,Fr=Q<<21|q>>>11,jr=ye<<24|nt>>>8,qr=nt<<24|ye>>>8,zr=be<<27|Mr>>>5,Wr=Mr<<27|be>>>5,Hr=Ie<<20|Ee>>>12,$r=Ee<<20|Ie>>>12,Gr=Me<<7|vn>>>25,Zr=vn<<7|Me>>>25,Qr=Je<<8|gi>>>24,Jr=gi<<8|Je>>>24,Yr=Ye<<14|Xe>>>18,Xr=Xe<<14|Ye>>>18;e[0]=Vn^~zn&Gn,e[1]=ke^~Ne&We,e[10]=Qn^~Hr&Be,e[11]=Ze^~$r&Ke,e[20]=Re^~qe&Dr,e[21]=Ue^~ze&Lr,e[30]=zr^~Pe&De,e[31]=Wr^~Fn&Wn,e[40]=je^~Qe&Gr,e[41]=$n^~Nr&Zr,e[2]=zn^~Gn&Vr,e[3]=Ne^~We&Fr,e[12]=Hr^~Be&Le,e[13]=$r^~Ke&Ve,e[22]=qe^~Dr&Qr,e[23]=ze^~Lr&Jr,e[32]=Pe^~De&He,e[33]=Fn^~Wn&Zn,e[42]=Qe^~Gr&jn,e[43]=Nr^~Zr&Oe,e[4]=Gn^~Vr&Yr,e[5]=We^~Fr&Xr,e[14]=Be^~Le&$e,e[15]=Ke^~Ve&Ge,e[24]=Dr^~Qr&Ce,e[25]=Lr^~Jr&qn,e[34]=De^~He&jr,e[35]=Wn^~Zn&qr,e[44]=Gr^~jn&Hn,e[45]=Zr^~Oe&Fe,e[6]=Vr^~Yr&Vn,e[7]=Fr^~Xr&ke,e[16]=Le^~$e&Qn,e[17]=Ve^~Ge&Ze,e[26]=Qr^~Ce&Re,e[27]=Jr^~qn&Ue,e[36]=He^~jr&zr,e[37]=Zn^~qr&Wr,e[46]=jn^~Hn&je,e[47]=Oe^~Fe&$n,e[8]=Yr^~Vn&zn,e[9]=Xr^~ke&Ne,e[18]=$e^~Qn&Hr,e[19]=Ge^~Ze&$r,e[28]=Ce^~Re&qe,e[29]=qn^~Ue&ze,e[38]=jr^~zr&Pe,e[39]=qr^~Wr&Fn,e[48]=Hn^~je&Qe,e[49]=Fe^~$n&Nr,e[0]^=fv[t*2],e[1]^=fv[t*2+1]}}});var mv=de((TF,pv)=>{d();h();var wu=hv();function ys(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}n(ys,"Keccak");ys.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};ys.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(wu.p1600(this.state),this.count=0)};ys.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&wu.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),wu.p1600(this.state),this.count=0,this.squeezing=!0};ys.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(wu.p1600(this.state),this.count=0);return t};ys.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};pv.exports=ys});var yv=de((PF,gv)=>{d();h();gv.exports=lv()(mv())});var vv=de(vs=>{"use strict";d();h();Object.defineProperty(vs,"__esModule",{value:!0});var bu=rv(),xu=yv();vs.keccak224=bu.createHashFunction(function(){return xu("keccak224")});vs.keccak256=bu.createHashFunction(function(){return xu("keccak256")});vs.keccak384=bu.createHashFunction(function(){return xu("keccak384")});vs.keccak512=bu.createHashFunction(function(){return xu("keccak512")})});var Eu=de(or=>{"use strict";d();h();Object.defineProperty(or,"__esModule",{value:!0});or.rlphash=or.ripemd160=or.sha256=or.keccak256=or.keccak=void 0;var Su=vv(),fM=Su.keccak224,dM=Su.keccak384,hM=Su.keccak256,pM=Su.keccak512,wv=x1(),mM=bo(),gM=vu(),Au=gs();or.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!mM.isHexString(e)?e=Buffer.from(e,"utf8"):e=Au.toBuffer(e),t||(t=256),t){case 224:return fM(e);case 256:return hM(e);case 384:return dM(e);case 512:return pM(e);default:throw new Error("Invald algorithm: keccak"+t)}};or.keccak256=function(e){return or.keccak(e)};or.sha256=function(e){return e=Au.toBuffer(e),wv("sha256").update(e).digest()};or.ripemd160=function(e,t){e=Au.toBuffer(e);var r=wv("rmd160").update(e).digest();return t===!0?Au.setLength(r,32):r};or.rlphash=function(e){return or.keccak(gM.encode(e))}});var bv=de(it=>{"use strict";d();h();Object.defineProperty(it,"__esModule",{value:!0});it.importPublic=it.privateToPublic=it.privateToAddress=it.publicToAddress=it.pubToAddress=it.isValidPublic=it.isValidPrivate=it.isPrecompiled=it.generateAddress2=it.generateAddress=it.isValidChecksumAddress=it.toChecksumAddress=it.isZeroAddress=it.isValidAddress=it.zeroAddress=void 0;var Gd=pm(),yM=bo(),ws=gu(),vM=vo(),cn=gs(),bs=Eu();it.zeroAddress=function(){var e=20,t=cn.zeros(e);return cn.bufferToHex(t)};it.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};it.isZeroAddress=function(e){var t=it.zeroAddress();return t===cn.addHexPrefix(e)};it.toChecksumAddress=function(e,t){e=yM.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",i=bs.keccak(r+e).toString("hex"),o="0x",a=0;a<e.length;a++)parseInt(i[a],16)>=8?o+=e[a].toUpperCase():o+=e[a];return o};it.isValidChecksumAddress=function(e,t){return it.isValidAddress(e)&&it.toChecksumAddress(e,t)===e};it.generateAddress=function(e,t){e=cn.toBuffer(e);var r=new vM(t);return r.isZero()?bs.rlphash([e,null]).slice(-20):bs.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};it.generateAddress2=function(e,t,r){var i=cn.toBuffer(e),o=cn.toBuffer(t),a=cn.toBuffer(r);Gd(i.length===20),Gd(o.length===32);var l=bs.keccak256(Buffer.concat([Buffer.from("ff","hex"),i,o,bs.keccak256(a)]));return l.slice(-20)};it.isPrecompiled=function(e){var t=cn.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};it.isValidPrivate=function(e){return ws.privateKeyVerify(e)};it.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?ws.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?ws.publicKeyVerify(e):!1};it.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=cn.toBuffer(e),t&&e.length!==64&&(e=ws.publicKeyConvert(e,!1).slice(1)),Gd(e.length===64),bs.keccak(e).slice(-20)};it.publicToAddress=it.pubToAddress;it.privateToAddress=function(e){return it.publicToAddress(it.privateToPublic(e))};it.privateToPublic=function(e){return e=cn.toBuffer(e),ws.publicKeyCreate(e,!1).slice(1)};it.importPublic=function(e){return e=cn.toBuffer(e),e.length!==64&&(e=ws.publicKeyConvert(e,!1).slice(1)),e}});var xv=de(sr=>{"use strict";d();h();Object.defineProperty(sr,"__esModule",{value:!0});sr.hashPersonalMessage=sr.isValidSignature=sr.fromRpcSig=sr.toRpcSig=sr.ecrecover=sr.ecsign=void 0;var Zd=gu(),Mu=vo(),xo=gs(),wM=Eu();sr.ecsign=function(e,t,r){var i=Zd.sign(e,t),o=i.recovery,a={r:i.signature.slice(0,32),s:i.signature.slice(32,64),v:r?o+(r*2+35):o+27};return a};sr.ecrecover=function(e,t,r,i,o){var a=Buffer.concat([xo.setLength(r,32),xo.setLength(i,32)],64),l=Qd(t,o);if(!Jd(l))throw new Error("Invalid signature v value");var f=Zd.recover(e,a,l);return Zd.publicKeyConvert(f,!1).slice(1)};sr.toRpcSig=function(e,t,r,i){var o=Qd(e,i);if(!Jd(o))throw new Error("Invalid signature v value");return xo.bufferToHex(Buffer.concat([xo.setLengthLeft(t,32),xo.setLengthLeft(r,32),xo.toBuffer(e)]))};sr.fromRpcSig=function(e){var t=xo.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};sr.isValidSignature=function(e,t,r,i,o){i===void 0&&(i=!0);var a=new Mu("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),l=new Mu("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!Jd(Qd(e,o)))return!1;var f=new Mu(t),g=new Mu(r);return!(f.isZero()||f.gt(l)||g.isZero()||g.gt(l)||i&&g.cmp(a)===1)};sr.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return wM.keccak(Buffer.concat([t,e]))};function Qd(e,t){return t?e-(2*t+35):e-27}n(Qd,"calculateSigRecovery");function Jd(e){return e===0||e===1}n(Jd,"isValidSigRecovery")});var Ev=de(Iu=>{"use strict";d();h();Object.defineProperty(Iu,"__esModule",{value:!0});Iu.defineProperties=void 0;var Av=pm(),bM=bo(),Sv=vu(),Tu=gs();Iu.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(o){if(o===void 0&&(o=!1),o){var a={};return e._fields.forEach(function(l){a[l]="0x"+e[l].toString("hex")}),a}return Tu.baToJSON(e.raw)},e.serialize=n(function(){return Sv.encode(e.raw)},"serialize"),t.forEach(function(o,a){e._fields.push(o.name);function l(){return e.raw[a]}n(l,"getter");function f(g){g=Tu.toBuffer(g),g.toString("hex")==="00"&&!o.allowZero&&(g=Buffer.allocUnsafe(0)),o.allowLess&&o.length?(g=Tu.stripZeros(g),Av(o.length>=g.length,"The field "+o.name+" must not have more "+o.length+" bytes")):!(o.allowZero&&g.length===0)&&o.length&&Av(o.length===g.length,"The field "+o.name+" must have byte length of "+o.length),e.raw[a]=g}n(f,"setter"),Object.defineProperty(e,o.name,{enumerable:!0,configurable:!0,get:l,set:f}),o.default&&(e[o.name]=o.default),o.alias&&Object.defineProperty(e,o.alias,{enumerable:!1,configurable:!0,set:f,get:l})}),r)if(typeof r=="string"&&(r=Buffer.from(bM.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=Sv.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(o,a){e[e._fields[a]]=Tu.toBuffer(o)})}else if(typeof r=="object"){var i=Object.keys(r);t.forEach(function(o){i.indexOf(o.name)!==-1&&(e[o.name]=r[o.name]),i.indexOf(o.alias)!==-1&&(e[o.alias]=r[o.alias])})}else throw new Error("invalid data")}});var Ta=de(Bt=>{"use strict";d();h();var xM=Bt&&Bt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:n(function(){return t[r]},"get")})}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),xs=Bt&&Bt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&xM(t,e,r)};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.secp256k1=Bt.rlp=Bt.BN=void 0;var AM=gu();Bt.secp256k1=AM;var SM=bo(),EM=vo();Bt.BN=EM;var MM=vu();Bt.rlp=MM;Object.assign(Bt,SM);xs(tv(),Bt);xs(bv(),Bt);xs(Eu(),Bt);xs(xv(),Bt);xs(gs(),Bt);xs(Ev(),Bt)});var Ia=de(ar=>{"use strict";d();h();Object.defineProperty(ar,"__esModule",{value:!0});ar.normalize=ar.recoverPublicKey=ar.concatSig=ar.legacyToBuffer=ar.isNullish=ar.padWithZeroes=void 0;var Kr=Ta(),Yd=bo();function Xd(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}n(Xd,"padWithZeroes");ar.padWithZeroes=Xd;function TM(e){return e==null}n(TM,"isNullish");ar.isNullish=TM;function IM(e){return typeof e=="string"&&!Yd.isHexString(e)?Buffer.from(e):Kr.toBuffer(e)}n(IM,"legacyToBuffer");ar.legacyToBuffer=IM;function _M(e,t,r){let i=Kr.fromSigned(t),o=Kr.fromSigned(r),a=Kr.bufferToInt(e),l=Xd(Kr.toUnsigned(i).toString("hex"),64),f=Xd(Kr.toUnsigned(o).toString("hex"),64),g=Yd.stripHexPrefix(Yd.intToHex(a));return Kr.addHexPrefix(l.concat(f,g))}n(_M,"concatSig");ar.concatSig=_M;function kM(e,t){let r=Kr.fromRpcSig(t);return Kr.ecrecover(e,r.v,r.r,r.s)}n(kM,"recoverPublicKey");ar.recoverPublicKey=kM;function PM(e){if(e){if(typeof e=="number"){let t=Kr.toBuffer(e);e=Kr.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return Kr.addHexPrefix(e.toLowerCase())}}n(PM,"normalize");ar.normalize=PM});var Tv=de(Ci=>{"use strict";d();h();Object.defineProperty(Ci,"__esModule",{value:!0});Ci.extractPublicKey=Ci.recoverPersonalSignature=Ci.personalSign=void 0;var As=Ta(),kn=Ia();function BM({privateKey:e,data:t}){if(kn.isNullish(t))throw new Error("Missing data parameter");if(kn.isNullish(e))throw new Error("Missing privateKey parameter");let r=kn.legacyToBuffer(t),i=As.hashPersonalMessage(r),o=As.ecsign(i,e);return kn.concatSig(As.toBuffer(o.v),o.r,o.s)}n(BM,"personalSign");Ci.personalSign=BM;function KM({data:e,signature:t}){if(kn.isNullish(e))throw new Error("Missing data parameter");if(kn.isNullish(t))throw new Error("Missing signature parameter");let r=Mv(e,t),i=As.publicToAddress(r);return As.bufferToHex(i)}n(KM,"recoverPersonalSignature");Ci.recoverPersonalSignature=KM;function OM({data:e,signature:t}){if(kn.isNullish(e))throw new Error("Missing data parameter");if(kn.isNullish(t))throw new Error("Missing signature parameter");return`0x${Mv(e,t).toString("hex")}`}n(OM,"extractPublicKey");Ci.extractPublicKey=OM;function Mv(e,t){let r=As.hashPersonalMessage(kn.legacyToBuffer(e));return kn.recoverPublicKey(r,t)}n(Mv,"getPublicKeyFor")});var _v=de((Iv,eh)=>{d();h();(function(e,t){"use strict";function r(A,s){if(!A)throw new Error(s||"Assertion failed")}n(r,"assert");function i(A,s){A.super_=s;var u=n(function(){},"TempCtor");u.prototype=s.prototype,A.prototype=new u,A.prototype.constructor=A}n(i,"inherits");function o(A,s,u){if(o.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(A||0,s||10,u||"be"))}n(o,"BN"),typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=E0().Buffer}catch{}o.isBN=n(function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},"isBN"),o.max=n(function(s,u){return s.cmp(u)>0?s:u},"max"),o.min=n(function(s,u){return s.cmp(u)<0?s:u},"min"),o.prototype._init=n(function(s,u,m){if(typeof s=="number")return this._initNumber(s,u,m);if(typeof s=="object")return this._initArray(s,u,m);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(u===16?this._parseHex(s,y,m):(this._parseBase(s,u,y),m==="le"&&this._initArray(this.toArray(),u,m)))},"init"),o.prototype._initNumber=n(function(s,u,m){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),u,m)},"_initNumber"),o.prototype._initArray=n(function(s,u,m){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,S,E=0;if(m==="be")for(y=s.length-1,v=0;y>=0;y-=3)S=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);else if(m==="le")for(y=0,v=0;y<s.length;y+=3)S=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);return this.strip()},"_initArray");function l(A,s){var u=A.charCodeAt(s);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}n(l,"parseHex4Bits");function f(A,s,u){var m=l(A,u);return u-1>=s&&(m|=l(A,u-1)<<4),m}n(f,"parseHexByte"),o.prototype._parseHex=n(function(s,u,m){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,S=0,E;if(m==="be")for(y=s.length-1;y>=u;y-=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8;else{var w=s.length-u;for(y=w%2===0?u+1:u;y<s.length;y+=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8}this.strip()},"_parseHex");function g(A,s,u,m){for(var y=0,v=Math.min(A.length,u),S=s;S<v;S++){var E=A.charCodeAt(S)-48;y*=m,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}n(g,"parseBase"),o.prototype._parseBase=n(function(s,u,m){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=u)y++;y--,v=v/u|0;for(var S=s.length-m,E=S%y,w=Math.min(S,S-E)+m,c=0,b=m;b<w;b+=y)c=g(s,b,b+y,u),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var D=1;for(c=g(s,b,s.length,u),b=0;b<E;b++)D*=u;this.imuln(D),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},"_parseBase"),o.prototype.copy=n(function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},"copy"),o.prototype.clone=n(function(){var s=new o(null);return this.copy(s),s},"clone"),o.prototype._expand=n(function(s){for(;this.length<s;)this.words[this.length++]=0;return this},"_expand"),o.prototype.strip=n(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),o.prototype._normSign=n(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),o.prototype.inspect=n(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=n(function(s,u){s=s||10,u=u|0||1;var m;if(s===16||s==="hex"){m="";for(var y=0,v=0,S=0;S<this.length;S++){var E=this.words[S],w=((E<<y|v)&16777215).toString(16);v=E>>>24-y&16777215,v!==0||S!==this.length-1?m=x[6-w.length]+w+m:m=w+m,y+=2,y>=26&&(y-=26,S--)}for(v!==0&&(m=v.toString(16)+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(s===(s|0)&&s>=2&&s<=36){var c=T[s],b=I[s];m="";var D=this.clone();for(D.negative=0;!D.isZero();){var V=D.modn(b).toString(s);D=D.idivn(b),D.isZero()?m=V+m:m=x[c-V.length]+V+m}for(this.isZero()&&(m="0"+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},"toString"),o.prototype.toNumber=n(function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},"toNumber"),o.prototype.toJSON=n(function(){return this.toString(16)},"toJSON"),o.prototype.toBuffer=n(function(s,u){return r(typeof a<"u"),this.toArrayLike(a,s,u)},"toBuffer"),o.prototype.toArray=n(function(s,u){return this.toArrayLike(Array,s,u)},"toArray"),o.prototype.toArrayLike=n(function(s,u,m){var y=this.byteLength(),v=m||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var S=u==="le",E=new s(v),w,c,b=this.clone();if(S){for(c=0;!b.isZero();c++)w=b.andln(255),b.iushrn(8),E[c]=w;for(;c<v;c++)E[c]=0}else{for(c=0;c<v-y;c++)E[c]=0;for(c=0;!b.isZero();c++)w=b.andln(255),b.iushrn(8),E[v-c-1]=w}return E},"toArrayLike"),Math.clz32?o.prototype._countBits=n(function(s){return 32-Math.clz32(s)},"_countBits"):o.prototype._countBits=n(function(s){var u=s,m=0;return u>=4096&&(m+=13,u>>>=13),u>=64&&(m+=7,u>>>=7),u>=8&&(m+=4,u>>>=4),u>=2&&(m+=2,u>>>=2),m+u},"_countBits"),o.prototype._zeroBits=n(function(s){if(s===0)return 26;var u=s,m=0;return u&8191||(m+=13,u>>>=13),u&127||(m+=7,u>>>=7),u&15||(m+=4,u>>>=4),u&3||(m+=2,u>>>=2),u&1||m++,m},"_zeroBits"),o.prototype.bitLength=n(function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u},"bitLength");function _(A){for(var s=new Array(A.bitLength()),u=0;u<s.length;u++){var m=u/26|0,y=u%26;s[u]=(A.words[m]&1<<y)>>>y}return s}n(_,"toBitArray"),o.prototype.zeroBits=n(function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var m=this._zeroBits(this.words[u]);if(s+=m,m!==26)break}return s},"zeroBits"),o.prototype.byteLength=n(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),o.prototype.toTwos=n(function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},"toTwos"),o.prototype.fromTwos=n(function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},"fromTwos"),o.prototype.isNeg=n(function(){return this.negative!==0},"isNeg"),o.prototype.neg=n(function(){return this.clone().ineg()},"neg"),o.prototype.ineg=n(function(){return this.isZero()||(this.negative^=1),this},"ineg"),o.prototype.iuor=n(function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},"iuor"),o.prototype.ior=n(function(s){return r((this.negative|s.negative)===0),this.iuor(s)},"ior"),o.prototype.or=n(function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},"or"),o.prototype.uor=n(function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},"uor"),o.prototype.iuand=n(function(s){var u;this.length>s.length?u=s:u=this;for(var m=0;m<u.length;m++)this.words[m]=this.words[m]&s.words[m];return this.length=u.length,this.strip()},"iuand"),o.prototype.iand=n(function(s){return r((this.negative|s.negative)===0),this.iuand(s)},"iand"),o.prototype.and=n(function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},"and"),o.prototype.uand=n(function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},"uand"),o.prototype.iuxor=n(function(s){var u,m;this.length>s.length?(u=this,m=s):(u=s,m=this);for(var y=0;y<m.length;y++)this.words[y]=u.words[y]^m.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this.strip()},"iuxor"),o.prototype.ixor=n(function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},"ixor"),o.prototype.xor=n(function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},"xor"),o.prototype.uxor=n(function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},"uxor"),o.prototype.inotn=n(function(s){r(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,m=s%26;this._expand(u),m>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},"inotn"),o.prototype.notn=n(function(s){return this.clone().inotn(s)},"notn"),o.prototype.setn=n(function(s,u){r(typeof s=="number"&&s>=0);var m=s/26|0,y=s%26;return this._expand(m+1),u?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},"setn"),o.prototype.iadd=n(function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var m,y;this.length>s.length?(m=this,y=s):(m=s,y=this);for(var v=0,S=0;S<y.length;S++)u=(m.words[S]|0)+(y.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;for(;v!==0&&S<m.length;S++)u=(m.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;if(this.length=m.length,v!==0)this.words[this.length]=v,this.length++;else if(m!==this)for(;S<m.length;S++)this.words[S]=m.words[S];return this},"iadd"),o.prototype.add=n(function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},"add"),o.prototype.isub=n(function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var m=this.cmp(s);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;m>0?(y=this,v=s):(y=s,v=this);for(var S=0,E=0;E<v.length;E++)u=(y.words[E]|0)-(v.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;for(;S!==0&&E<y.length;E++)u=(y.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;if(S===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},"isub"),o.prototype.sub=n(function(s){return this.clone().isub(s)},"sub");function O(A,s,u){u.negative=s.negative^A.negative;var m=A.length+s.length|0;u.length=m,m=m-1|0;var y=A.words[0]|0,v=s.words[0]|0,S=y*v,E=S&67108863,w=S/67108864|0;u.words[0]=E;for(var c=1;c<m;c++){for(var b=w>>>26,D=w&67108863,V=Math.min(c,s.length-1),z=Math.max(0,c-A.length+1);z<=V;z++){var J=c-z|0;y=A.words[J]|0,v=s.words[z]|0,S=y*v+D,b+=S/67108864|0,D=S&67108863}u.words[c]=D|0,w=b|0}return w!==0?u.words[c]=w|0:u.length--,u.strip()}n(O,"smallMulTo");var C=n(function(s,u,m){var y=s.words,v=u.words,S=m.words,E=0,w,c,b,D=y[0]|0,V=D&8191,z=D>>>13,J=y[1]|0,oe=J&8191,ue=J>>>13,dt=y[2]|0,fe=dt&8191,K=dt>>>13,N=y[3]|0,U=N&8191,W=N>>>13,re=y[4]|0,q=re&8191,Q=re>>>13,nt=y[5]|0,ye=nt&8191,be=nt>>>13,Mr=y[6]|0,Ie=Mr&8191,Ee=Mr>>>13,vn=y[7]|0,Me=vn&8191,Je=vn>>>13,gi=y[8]|0,Ye=gi&8191,Xe=gi>>>13,Vn=y[9]|0,ke=Vn&8191,Pe=Vn>>>13,Fn=v[0]|0,Be=Fn&8191,Ke=Fn>>>13,jn=v[1]|0,Oe=jn&8191,Ce=jn>>>13,qn=v[2]|0,Re=qn&8191,Ue=qn>>>13,zn=v[3]|0,Ne=zn&8191,De=zn>>>13,Wn=v[4]|0,Le=Wn&8191,Ve=Wn>>>13,Hn=v[5]|0,Fe=Hn&8191,je=Hn>>>13,$n=v[6]|0,qe=$n&8191,ze=$n>>>13,Gn=v[7]|0,We=Gn&8191,He=Gn>>>13,Zn=v[8]|0,$e=Zn&8191,Ge=Zn>>>13,Qn=v[9]|0,Ze=Qn&8191,Qe=Qn>>>13;m.negative=s.negative^u.negative,m.length=19,w=Math.imul(V,Be),c=Math.imul(V,Ke),c=c+Math.imul(z,Be)|0,b=Math.imul(z,Ke);var Nr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,w=Math.imul(oe,Be),c=Math.imul(oe,Ke),c=c+Math.imul(ue,Be)|0,b=Math.imul(ue,Ke),w=w+Math.imul(V,Oe)|0,c=c+Math.imul(V,Ce)|0,c=c+Math.imul(z,Oe)|0,b=b+Math.imul(z,Ce)|0;var Dr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,w=Math.imul(fe,Be),c=Math.imul(fe,Ke),c=c+Math.imul(K,Be)|0,b=Math.imul(K,Ke),w=w+Math.imul(oe,Oe)|0,c=c+Math.imul(oe,Ce)|0,c=c+Math.imul(ue,Oe)|0,b=b+Math.imul(ue,Ce)|0,w=w+Math.imul(V,Re)|0,c=c+Math.imul(V,Ue)|0,c=c+Math.imul(z,Re)|0,b=b+Math.imul(z,Ue)|0;var Lr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(U,Be),c=Math.imul(U,Ke),c=c+Math.imul(W,Be)|0,b=Math.imul(W,Ke),w=w+Math.imul(fe,Oe)|0,c=c+Math.imul(fe,Ce)|0,c=c+Math.imul(K,Oe)|0,b=b+Math.imul(K,Ce)|0,w=w+Math.imul(oe,Re)|0,c=c+Math.imul(oe,Ue)|0,c=c+Math.imul(ue,Re)|0,b=b+Math.imul(ue,Ue)|0,w=w+Math.imul(V,Ne)|0,c=c+Math.imul(V,De)|0,c=c+Math.imul(z,Ne)|0,b=b+Math.imul(z,De)|0;var Vr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(q,Be),c=Math.imul(q,Ke),c=c+Math.imul(Q,Be)|0,b=Math.imul(Q,Ke),w=w+Math.imul(U,Oe)|0,c=c+Math.imul(U,Ce)|0,c=c+Math.imul(W,Oe)|0,b=b+Math.imul(W,Ce)|0,w=w+Math.imul(fe,Re)|0,c=c+Math.imul(fe,Ue)|0,c=c+Math.imul(K,Re)|0,b=b+Math.imul(K,Ue)|0,w=w+Math.imul(oe,Ne)|0,c=c+Math.imul(oe,De)|0,c=c+Math.imul(ue,Ne)|0,b=b+Math.imul(ue,De)|0,w=w+Math.imul(V,Le)|0,c=c+Math.imul(V,Ve)|0,c=c+Math.imul(z,Le)|0,b=b+Math.imul(z,Ve)|0;var Fr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,w=Math.imul(ye,Be),c=Math.imul(ye,Ke),c=c+Math.imul(be,Be)|0,b=Math.imul(be,Ke),w=w+Math.imul(q,Oe)|0,c=c+Math.imul(q,Ce)|0,c=c+Math.imul(Q,Oe)|0,b=b+Math.imul(Q,Ce)|0,w=w+Math.imul(U,Re)|0,c=c+Math.imul(U,Ue)|0,c=c+Math.imul(W,Re)|0,b=b+Math.imul(W,Ue)|0,w=w+Math.imul(fe,Ne)|0,c=c+Math.imul(fe,De)|0,c=c+Math.imul(K,Ne)|0,b=b+Math.imul(K,De)|0,w=w+Math.imul(oe,Le)|0,c=c+Math.imul(oe,Ve)|0,c=c+Math.imul(ue,Le)|0,b=b+Math.imul(ue,Ve)|0,w=w+Math.imul(V,Fe)|0,c=c+Math.imul(V,je)|0,c=c+Math.imul(z,Fe)|0,b=b+Math.imul(z,je)|0;var jr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(Ie,Be),c=Math.imul(Ie,Ke),c=c+Math.imul(Ee,Be)|0,b=Math.imul(Ee,Ke),w=w+Math.imul(ye,Oe)|0,c=c+Math.imul(ye,Ce)|0,c=c+Math.imul(be,Oe)|0,b=b+Math.imul(be,Ce)|0,w=w+Math.imul(q,Re)|0,c=c+Math.imul(q,Ue)|0,c=c+Math.imul(Q,Re)|0,b=b+Math.imul(Q,Ue)|0,w=w+Math.imul(U,Ne)|0,c=c+Math.imul(U,De)|0,c=c+Math.imul(W,Ne)|0,b=b+Math.imul(W,De)|0,w=w+Math.imul(fe,Le)|0,c=c+Math.imul(fe,Ve)|0,c=c+Math.imul(K,Le)|0,b=b+Math.imul(K,Ve)|0,w=w+Math.imul(oe,Fe)|0,c=c+Math.imul(oe,je)|0,c=c+Math.imul(ue,Fe)|0,b=b+Math.imul(ue,je)|0,w=w+Math.imul(V,qe)|0,c=c+Math.imul(V,ze)|0,c=c+Math.imul(z,qe)|0,b=b+Math.imul(z,ze)|0;var qr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(Me,Be),c=Math.imul(Me,Ke),c=c+Math.imul(Je,Be)|0,b=Math.imul(Je,Ke),w=w+Math.imul(Ie,Oe)|0,c=c+Math.imul(Ie,Ce)|0,c=c+Math.imul(Ee,Oe)|0,b=b+Math.imul(Ee,Ce)|0,w=w+Math.imul(ye,Re)|0,c=c+Math.imul(ye,Ue)|0,c=c+Math.imul(be,Re)|0,b=b+Math.imul(be,Ue)|0,w=w+Math.imul(q,Ne)|0,c=c+Math.imul(q,De)|0,c=c+Math.imul(Q,Ne)|0,b=b+Math.imul(Q,De)|0,w=w+Math.imul(U,Le)|0,c=c+Math.imul(U,Ve)|0,c=c+Math.imul(W,Le)|0,b=b+Math.imul(W,Ve)|0,w=w+Math.imul(fe,Fe)|0,c=c+Math.imul(fe,je)|0,c=c+Math.imul(K,Fe)|0,b=b+Math.imul(K,je)|0,w=w+Math.imul(oe,qe)|0,c=c+Math.imul(oe,ze)|0,c=c+Math.imul(ue,qe)|0,b=b+Math.imul(ue,ze)|0,w=w+Math.imul(V,We)|0,c=c+Math.imul(V,He)|0,c=c+Math.imul(z,We)|0,b=b+Math.imul(z,He)|0;var zr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(Ye,Be),c=Math.imul(Ye,Ke),c=c+Math.imul(Xe,Be)|0,b=Math.imul(Xe,Ke),w=w+Math.imul(Me,Oe)|0,c=c+Math.imul(Me,Ce)|0,c=c+Math.imul(Je,Oe)|0,b=b+Math.imul(Je,Ce)|0,w=w+Math.imul(Ie,Re)|0,c=c+Math.imul(Ie,Ue)|0,c=c+Math.imul(Ee,Re)|0,b=b+Math.imul(Ee,Ue)|0,w=w+Math.imul(ye,Ne)|0,c=c+Math.imul(ye,De)|0,c=c+Math.imul(be,Ne)|0,b=b+Math.imul(be,De)|0,w=w+Math.imul(q,Le)|0,c=c+Math.imul(q,Ve)|0,c=c+Math.imul(Q,Le)|0,b=b+Math.imul(Q,Ve)|0,w=w+Math.imul(U,Fe)|0,c=c+Math.imul(U,je)|0,c=c+Math.imul(W,Fe)|0,b=b+Math.imul(W,je)|0,w=w+Math.imul(fe,qe)|0,c=c+Math.imul(fe,ze)|0,c=c+Math.imul(K,qe)|0,b=b+Math.imul(K,ze)|0,w=w+Math.imul(oe,We)|0,c=c+Math.imul(oe,He)|0,c=c+Math.imul(ue,We)|0,b=b+Math.imul(ue,He)|0,w=w+Math.imul(V,$e)|0,c=c+Math.imul(V,Ge)|0,c=c+Math.imul(z,$e)|0,b=b+Math.imul(z,Ge)|0;var Wr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(ke,Be),c=Math.imul(ke,Ke),c=c+Math.imul(Pe,Be)|0,b=Math.imul(Pe,Ke),w=w+Math.imul(Ye,Oe)|0,c=c+Math.imul(Ye,Ce)|0,c=c+Math.imul(Xe,Oe)|0,b=b+Math.imul(Xe,Ce)|0,w=w+Math.imul(Me,Re)|0,c=c+Math.imul(Me,Ue)|0,c=c+Math.imul(Je,Re)|0,b=b+Math.imul(Je,Ue)|0,w=w+Math.imul(Ie,Ne)|0,c=c+Math.imul(Ie,De)|0,c=c+Math.imul(Ee,Ne)|0,b=b+Math.imul(Ee,De)|0,w=w+Math.imul(ye,Le)|0,c=c+Math.imul(ye,Ve)|0,c=c+Math.imul(be,Le)|0,b=b+Math.imul(be,Ve)|0,w=w+Math.imul(q,Fe)|0,c=c+Math.imul(q,je)|0,c=c+Math.imul(Q,Fe)|0,b=b+Math.imul(Q,je)|0,w=w+Math.imul(U,qe)|0,c=c+Math.imul(U,ze)|0,c=c+Math.imul(W,qe)|0,b=b+Math.imul(W,ze)|0,w=w+Math.imul(fe,We)|0,c=c+Math.imul(fe,He)|0,c=c+Math.imul(K,We)|0,b=b+Math.imul(K,He)|0,w=w+Math.imul(oe,$e)|0,c=c+Math.imul(oe,Ge)|0,c=c+Math.imul(ue,$e)|0,b=b+Math.imul(ue,Ge)|0,w=w+Math.imul(V,Ze)|0,c=c+Math.imul(V,Qe)|0,c=c+Math.imul(z,Ze)|0,b=b+Math.imul(z,Qe)|0;var Hr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(ke,Oe),c=Math.imul(ke,Ce),c=c+Math.imul(Pe,Oe)|0,b=Math.imul(Pe,Ce),w=w+Math.imul(Ye,Re)|0,c=c+Math.imul(Ye,Ue)|0,c=c+Math.imul(Xe,Re)|0,b=b+Math.imul(Xe,Ue)|0,w=w+Math.imul(Me,Ne)|0,c=c+Math.imul(Me,De)|0,c=c+Math.imul(Je,Ne)|0,b=b+Math.imul(Je,De)|0,w=w+Math.imul(Ie,Le)|0,c=c+Math.imul(Ie,Ve)|0,c=c+Math.imul(Ee,Le)|0,b=b+Math.imul(Ee,Ve)|0,w=w+Math.imul(ye,Fe)|0,c=c+Math.imul(ye,je)|0,c=c+Math.imul(be,Fe)|0,b=b+Math.imul(be,je)|0,w=w+Math.imul(q,qe)|0,c=c+Math.imul(q,ze)|0,c=c+Math.imul(Q,qe)|0,b=b+Math.imul(Q,ze)|0,w=w+Math.imul(U,We)|0,c=c+Math.imul(U,He)|0,c=c+Math.imul(W,We)|0,b=b+Math.imul(W,He)|0,w=w+Math.imul(fe,$e)|0,c=c+Math.imul(fe,Ge)|0,c=c+Math.imul(K,$e)|0,b=b+Math.imul(K,Ge)|0,w=w+Math.imul(oe,Ze)|0,c=c+Math.imul(oe,Qe)|0,c=c+Math.imul(ue,Ze)|0,b=b+Math.imul(ue,Qe)|0;var $r=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ke,Re),c=Math.imul(ke,Ue),c=c+Math.imul(Pe,Re)|0,b=Math.imul(Pe,Ue),w=w+Math.imul(Ye,Ne)|0,c=c+Math.imul(Ye,De)|0,c=c+Math.imul(Xe,Ne)|0,b=b+Math.imul(Xe,De)|0,w=w+Math.imul(Me,Le)|0,c=c+Math.imul(Me,Ve)|0,c=c+Math.imul(Je,Le)|0,b=b+Math.imul(Je,Ve)|0,w=w+Math.imul(Ie,Fe)|0,c=c+Math.imul(Ie,je)|0,c=c+Math.imul(Ee,Fe)|0,b=b+Math.imul(Ee,je)|0,w=w+Math.imul(ye,qe)|0,c=c+Math.imul(ye,ze)|0,c=c+Math.imul(be,qe)|0,b=b+Math.imul(be,ze)|0,w=w+Math.imul(q,We)|0,c=c+Math.imul(q,He)|0,c=c+Math.imul(Q,We)|0,b=b+Math.imul(Q,He)|0,w=w+Math.imul(U,$e)|0,c=c+Math.imul(U,Ge)|0,c=c+Math.imul(W,$e)|0,b=b+Math.imul(W,Ge)|0,w=w+Math.imul(fe,Ze)|0,c=c+Math.imul(fe,Qe)|0,c=c+Math.imul(K,Ze)|0,b=b+Math.imul(K,Qe)|0;var Gr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(ke,Ne),c=Math.imul(ke,De),c=c+Math.imul(Pe,Ne)|0,b=Math.imul(Pe,De),w=w+Math.imul(Ye,Le)|0,c=c+Math.imul(Ye,Ve)|0,c=c+Math.imul(Xe,Le)|0,b=b+Math.imul(Xe,Ve)|0,w=w+Math.imul(Me,Fe)|0,c=c+Math.imul(Me,je)|0,c=c+Math.imul(Je,Fe)|0,b=b+Math.imul(Je,je)|0,w=w+Math.imul(Ie,qe)|0,c=c+Math.imul(Ie,ze)|0,c=c+Math.imul(Ee,qe)|0,b=b+Math.imul(Ee,ze)|0,w=w+Math.imul(ye,We)|0,c=c+Math.imul(ye,He)|0,c=c+Math.imul(be,We)|0,b=b+Math.imul(be,He)|0,w=w+Math.imul(q,$e)|0,c=c+Math.imul(q,Ge)|0,c=c+Math.imul(Q,$e)|0,b=b+Math.imul(Q,Ge)|0,w=w+Math.imul(U,Ze)|0,c=c+Math.imul(U,Qe)|0,c=c+Math.imul(W,Ze)|0,b=b+Math.imul(W,Qe)|0;var Zr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(ke,Le),c=Math.imul(ke,Ve),c=c+Math.imul(Pe,Le)|0,b=Math.imul(Pe,Ve),w=w+Math.imul(Ye,Fe)|0,c=c+Math.imul(Ye,je)|0,c=c+Math.imul(Xe,Fe)|0,b=b+Math.imul(Xe,je)|0,w=w+Math.imul(Me,qe)|0,c=c+Math.imul(Me,ze)|0,c=c+Math.imul(Je,qe)|0,b=b+Math.imul(Je,ze)|0,w=w+Math.imul(Ie,We)|0,c=c+Math.imul(Ie,He)|0,c=c+Math.imul(Ee,We)|0,b=b+Math.imul(Ee,He)|0,w=w+Math.imul(ye,$e)|0,c=c+Math.imul(ye,Ge)|0,c=c+Math.imul(be,$e)|0,b=b+Math.imul(be,Ge)|0,w=w+Math.imul(q,Ze)|0,c=c+Math.imul(q,Qe)|0,c=c+Math.imul(Q,Ze)|0,b=b+Math.imul(Q,Qe)|0;var Qr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,w=Math.imul(ke,Fe),c=Math.imul(ke,je),c=c+Math.imul(Pe,Fe)|0,b=Math.imul(Pe,je),w=w+Math.imul(Ye,qe)|0,c=c+Math.imul(Ye,ze)|0,c=c+Math.imul(Xe,qe)|0,b=b+Math.imul(Xe,ze)|0,w=w+Math.imul(Me,We)|0,c=c+Math.imul(Me,He)|0,c=c+Math.imul(Je,We)|0,b=b+Math.imul(Je,He)|0,w=w+Math.imul(Ie,$e)|0,c=c+Math.imul(Ie,Ge)|0,c=c+Math.imul(Ee,$e)|0,b=b+Math.imul(Ee,Ge)|0,w=w+Math.imul(ye,Ze)|0,c=c+Math.imul(ye,Qe)|0,c=c+Math.imul(be,Ze)|0,b=b+Math.imul(be,Qe)|0;var Jr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(ke,qe),c=Math.imul(ke,ze),c=c+Math.imul(Pe,qe)|0,b=Math.imul(Pe,ze),w=w+Math.imul(Ye,We)|0,c=c+Math.imul(Ye,He)|0,c=c+Math.imul(Xe,We)|0,b=b+Math.imul(Xe,He)|0,w=w+Math.imul(Me,$e)|0,c=c+Math.imul(Me,Ge)|0,c=c+Math.imul(Je,$e)|0,b=b+Math.imul(Je,Ge)|0,w=w+Math.imul(Ie,Ze)|0,c=c+Math.imul(Ie,Qe)|0,c=c+Math.imul(Ee,Ze)|0,b=b+Math.imul(Ee,Qe)|0;var Yr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,w=Math.imul(ke,We),c=Math.imul(ke,He),c=c+Math.imul(Pe,We)|0,b=Math.imul(Pe,He),w=w+Math.imul(Ye,$e)|0,c=c+Math.imul(Ye,Ge)|0,c=c+Math.imul(Xe,$e)|0,b=b+Math.imul(Xe,Ge)|0,w=w+Math.imul(Me,Ze)|0,c=c+Math.imul(Me,Qe)|0,c=c+Math.imul(Je,Ze)|0,b=b+Math.imul(Je,Qe)|0;var Xr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,w=Math.imul(ke,$e),c=Math.imul(ke,Ge),c=c+Math.imul(Pe,$e)|0,b=Math.imul(Pe,Ge),w=w+Math.imul(Ye,Ze)|0,c=c+Math.imul(Ye,Qe)|0,c=c+Math.imul(Xe,Ze)|0,b=b+Math.imul(Xe,Qe)|0;var eo=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(eo>>>26)|0,eo&=67108863,w=Math.imul(ke,Ze),c=Math.imul(ke,Qe),c=c+Math.imul(Pe,Ze)|0,b=Math.imul(Pe,Qe);var to=(E+w|0)+((c&8191)<<13)|0;return E=(b+(c>>>13)|0)+(to>>>26)|0,to&=67108863,S[0]=Nr,S[1]=Dr,S[2]=Lr,S[3]=Vr,S[4]=Fr,S[5]=jr,S[6]=qr,S[7]=zr,S[8]=Wr,S[9]=Hr,S[10]=$r,S[11]=Gr,S[12]=Zr,S[13]=Qr,S[14]=Jr,S[15]=Yr,S[16]=Xr,S[17]=eo,S[18]=to,E!==0&&(S[19]=E,m.length++),m},"comb10MulTo");Math.imul||(C=O);function R(A,s,u){u.negative=s.negative^A.negative,u.length=A.length+s.length;for(var m=0,y=0,v=0;v<u.length-1;v++){var S=y;y=0;for(var E=m&67108863,w=Math.min(v,s.length-1),c=Math.max(0,v-A.length+1);c<=w;c++){var b=v-c,D=A.words[b]|0,V=s.words[c]|0,z=D*V,J=z&67108863;S=S+(z/67108864|0)|0,J=J+E|0,E=J&67108863,S=S+(J>>>26)|0,y+=S>>>26,S&=67108863}u.words[v]=E,m=S,S=y}return m!==0?u.words[v]=m:u.length--,u.strip()}n(R,"bigMulTo");function j(A,s,u){var m=new F;return m.mulp(A,s,u)}n(j,"jumboMulTo"),o.prototype.mulTo=n(function(s,u){var m,y=this.length+s.length;return this.length===10&&s.length===10?m=C(this,s,u):y<63?m=O(this,s,u):y<1024?m=R(this,s,u):m=j(this,s,u),m},"mulTo");function F(A,s){this.x=A,this.y=s}n(F,"FFTM"),F.prototype.makeRBT=n(function(s){for(var u=new Array(s),m=o.prototype._countBits(s)-1,y=0;y<s;y++)u[y]=this.revBin(y,m,s);return u},"makeRBT"),F.prototype.revBin=n(function(s,u,m){if(s===0||s===m-1)return s;for(var y=0,v=0;v<u;v++)y|=(s&1)<<u-v-1,s>>=1;return y},"revBin"),F.prototype.permute=n(function(s,u,m,y,v,S){for(var E=0;E<S;E++)y[E]=u[s[E]],v[E]=m[s[E]]},"permute"),F.prototype.transform=n(function(s,u,m,y,v,S){this.permute(S,s,u,m,y,v);for(var E=1;E<v;E<<=1)for(var w=E<<1,c=Math.cos(2*Math.PI/w),b=Math.sin(2*Math.PI/w),D=0;D<v;D+=w)for(var V=c,z=b,J=0;J<E;J++){var oe=m[D+J],ue=y[D+J],dt=m[D+J+E],fe=y[D+J+E],K=V*dt-z*fe;fe=V*fe+z*dt,dt=K,m[D+J]=oe+dt,y[D+J]=ue+fe,m[D+J+E]=oe-dt,y[D+J+E]=ue-fe,J!==w&&(K=c*V-b*z,z=c*z+b*V,V=K)}},"transform"),F.prototype.guessLen13b=n(function(s,u){var m=Math.max(u,s)|1,y=m&1,v=0;for(m=m/2|0;m;m=m>>>1)v++;return 1<<v+1+y},"guessLen13b"),F.prototype.conjugate=n(function(s,u,m){if(!(m<=1))for(var y=0;y<m/2;y++){var v=s[y];s[y]=s[m-y-1],s[m-y-1]=v,v=u[y],u[y]=-u[m-y-1],u[m-y-1]=-v}},"conjugate"),F.prototype.normalize13b=n(function(s,u){for(var m=0,y=0;y<u/2;y++){var v=Math.round(s[2*y+1]/u)*8192+Math.round(s[2*y]/u)+m;s[y]=v&67108863,v<67108864?m=0:m=v/67108864|0}return s},"normalize13b"),F.prototype.convert13b=n(function(s,u,m,y){for(var v=0,S=0;S<u;S++)v=v+(s[S]|0),m[2*S]=v&8191,v=v>>>13,m[2*S+1]=v&8191,v=v>>>13;for(S=2*u;S<y;++S)m[S]=0;r(v===0),r((v&-8192)===0)},"convert13b"),F.prototype.stub=n(function(s){for(var u=new Array(s),m=0;m<s;m++)u[m]=0;return u},"stub"),F.prototype.mulp=n(function(s,u,m){var y=2*this.guessLen13b(s.length,u.length),v=this.makeRBT(y),S=this.stub(y),E=new Array(y),w=new Array(y),c=new Array(y),b=new Array(y),D=new Array(y),V=new Array(y),z=m.words;z.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(u.words,u.length,b,y),this.transform(E,S,w,c,y,v),this.transform(b,S,D,V,y,v);for(var J=0;J<y;J++){var oe=w[J]*D[J]-c[J]*V[J];c[J]=w[J]*V[J]+c[J]*D[J],w[J]=oe}return this.conjugate(w,c,y),this.transform(w,c,z,S,y,v),this.conjugate(z,S,y),this.normalize13b(z,y),m.negative=s.negative^u.negative,m.length=s.length+u.length,m.strip()},"mulp"),o.prototype.mul=n(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},"mul"),o.prototype.mulf=n(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),j(this,s,u)},"mulf"),o.prototype.imul=n(function(s){return this.clone().mulTo(s,this)},"imul"),o.prototype.imuln=n(function(s){r(typeof s=="number"),r(s<67108864);for(var u=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*s,v=(y&67108863)+(u&67108863);u>>=26,u+=y/67108864|0,u+=v>>>26,this.words[m]=v&67108863}return u!==0&&(this.words[m]=u,this.length++),this},"imuln"),o.prototype.muln=n(function(s){return this.clone().imuln(s)},"muln"),o.prototype.sqr=n(function(){return this.mul(this)},"sqr"),o.prototype.isqr=n(function(){return this.imul(this.clone())},"isqr"),o.prototype.pow=n(function(s){var u=_(s);if(u.length===0)return new o(1);for(var m=this,y=0;y<u.length&&u[y]===0;y++,m=m.sqr());if(++y<u.length)for(var v=m.sqr();y<u.length;y++,v=v.sqr())u[y]!==0&&(m=m.mul(v));return m},"pow"),o.prototype.iushln=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=67108863>>>26-u<<26-u,v;if(u!==0){var S=0;for(v=0;v<this.length;v++){var E=this.words[v]&y,w=(this.words[v]|0)-E<<u;this.words[v]=w|S,S=E>>>26-u}S&&(this.words[v]=S,this.length++)}if(m!==0){for(v=this.length-1;v>=0;v--)this.words[v+m]=this.words[v];for(v=0;v<m;v++)this.words[v]=0;this.length+=m}return this.strip()},"iushln"),o.prototype.ishln=n(function(s){return r(this.negative===0),this.iushln(s)},"ishln"),o.prototype.iushrn=n(function(s,u,m){r(typeof s=="number"&&s>=0);var y;u?y=(u-u%26)/26:y=0;var v=s%26,S=Math.min((s-v)/26,this.length),E=67108863^67108863>>>v<<v,w=m;if(y-=S,y=Math.max(0,y),w){for(var c=0;c<S;c++)w.words[c]=this.words[c];w.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var b=0;for(c=this.length-1;c>=0&&(b!==0||c>=y);c--){var D=this.words[c]|0;this.words[c]=b<<26-v|D>>>v,b=D&E}return w&&b!==0&&(w.words[w.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),o.prototype.ishrn=n(function(s,u,m){return r(this.negative===0),this.iushrn(s,u,m)},"ishrn"),o.prototype.shln=n(function(s){return this.clone().ishln(s)},"shln"),o.prototype.ushln=n(function(s){return this.clone().iushln(s)},"ushln"),o.prototype.shrn=n(function(s){return this.clone().ishrn(s)},"shrn"),o.prototype.ushrn=n(function(s){return this.clone().iushrn(s)},"ushrn"),o.prototype.testn=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return!1;var v=this.words[m];return!!(v&y)},"testn"),o.prototype.imaskn=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(u!==0&&m++,this.length=Math.min(m,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this.strip()},"imaskn"),o.prototype.maskn=n(function(s){return this.clone().imaskn(s)},"maskn"),o.prototype.iaddn=n(function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},"iaddn"),o.prototype._iaddn=n(function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},"_iaddn"),o.prototype.isubn=n(function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},"isubn"),o.prototype.addn=n(function(s){return this.clone().iaddn(s)},"addn"),o.prototype.subn=n(function(s){return this.clone().isubn(s)},"subn"),o.prototype.iabs=n(function(){return this.negative=0,this},"iabs"),o.prototype.abs=n(function(){return this.clone().iabs()},"abs"),o.prototype._ishlnsubmul=n(function(s,u,m){var y=s.length+m,v;this._expand(y);var S,E=0;for(v=0;v<s.length;v++){S=(this.words[v+m]|0)+E;var w=(s.words[v]|0)*u;S-=w&67108863,E=(S>>26)-(w/67108864|0),this.words[v+m]=S&67108863}for(;v<this.length-m;v++)S=(this.words[v+m]|0)+E,E=S>>26,this.words[v+m]=S&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,v=0;v<this.length;v++)S=-(this.words[v]|0)+E,E=S>>26,this.words[v]=S&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),o.prototype._wordDiv=n(function(s,u){var m=this.length-s.length,y=this.clone(),v=s,S=v.words[v.length-1]|0,E=this._countBits(S);m=26-E,m!==0&&(v=v.ushln(m),y.iushln(m),S=v.words[v.length-1]|0);var w=y.length-v.length,c;if(u!=="mod"){c=new o(null),c.length=w+1,c.words=new Array(c.length);for(var b=0;b<c.length;b++)c.words[b]=0}var D=y.clone()._ishlnsubmul(v,1,w);D.negative===0&&(y=D,c&&(c.words[w]=1));for(var V=w-1;V>=0;V--){var z=(y.words[v.length+V]|0)*67108864+(y.words[v.length+V-1]|0);for(z=Math.min(z/S|0,67108863),y._ishlnsubmul(v,z,V);y.negative!==0;)z--,y.negative=0,y._ishlnsubmul(v,1,V),y.isZero()||(y.negative^=1);c&&(c.words[V]=z)}return c&&c.strip(),y.strip(),u!=="div"&&m!==0&&y.iushrn(m),{div:c||null,mod:y}},"_wordDiv"),o.prototype.divmod=n(function(s,u,m){if(r(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,v,S;return this.negative!==0&&s.negative===0?(S=this.neg().divmod(s,u),u!=="mod"&&(y=S.div.neg()),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.iadd(s)),{div:y,mod:v}):this.negative===0&&s.negative!==0?(S=this.divmod(s.neg(),u),u!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),u),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.isub(s)),{div:S.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},"divmod"),o.prototype.div=n(function(s){return this.divmod(s,"div",!1).div},"div"),o.prototype.mod=n(function(s){return this.divmod(s,"mod",!1).mod},"mod"),o.prototype.umod=n(function(s){return this.divmod(s,"mod",!0).mod},"umod"),o.prototype.divRound=n(function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var m=u.div.negative!==0?u.mod.isub(s):u.mod,y=s.ushrn(1),v=s.andln(1),S=m.cmp(y);return S<0||v===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},"divRound"),o.prototype.modn=n(function(s){r(s<=67108863);for(var u=(1<<26)%s,m=0,y=this.length-1;y>=0;y--)m=(u*m+(this.words[y]|0))%s;return m},"modn"),o.prototype.idivn=n(function(s){r(s<=67108863);for(var u=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+u*67108864;this.words[m]=y/s|0,u=y%s}return this.strip()},"idivn"),o.prototype.divn=n(function(s){return this.clone().idivn(s)},"divn"),o.prototype.egcd=n(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=new o(0),E=new o(1),w=0;u.isEven()&&m.isEven();)u.iushrn(1),m.iushrn(1),++w;for(var c=m.clone(),b=u.clone();!u.isZero();){for(var D=0,V=1;!(u.words[0]&V)&&D<26;++D,V<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(b)),y.iushrn(1),v.iushrn(1);for(var z=0,J=1;!(m.words[0]&J)&&z<26;++z,J<<=1);if(z>0)for(m.iushrn(z);z-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(c),E.isub(b)),S.iushrn(1),E.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(S),v.isub(E)):(m.isub(u),S.isub(y),E.isub(v))}return{a:S,b:E,gcd:m.iushln(w)}},"egcd"),o.prototype._invmp=n(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=m.clone();u.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,w=1;!(u.words[0]&w)&&E<26;++E,w<<=1);if(E>0)for(u.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var c=0,b=1;!(m.words[0]&b)&&c<26;++c,b<<=1);if(c>0)for(m.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(S),v.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(v)):(m.isub(u),v.isub(y))}var D;return u.cmpn(1)===0?D=y:D=v,D.cmpn(0)<0&&D.iadd(s),D},"_invmp"),o.prototype.gcd=n(function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),m=s.clone();u.negative=0,m.negative=0;for(var y=0;u.isEven()&&m.isEven();y++)u.iushrn(1),m.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;m.isEven();)m.iushrn(1);var v=u.cmp(m);if(v<0){var S=u;u=m,m=S}else if(v===0||m.cmpn(1)===0)break;u.isub(m)}while(!0);return m.iushln(y)},"gcd"),o.prototype.invm=n(function(s){return this.egcd(s).a.umod(s)},"invm"),o.prototype.isEven=n(function(){return(this.words[0]&1)===0},"isEven"),o.prototype.isOdd=n(function(){return(this.words[0]&1)===1},"isOdd"),o.prototype.andln=n(function(s){return this.words[0]&s},"andln"),o.prototype.bincn=n(function(s){r(typeof s=="number");var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var v=y,S=m;v!==0&&S<this.length;S++){var E=this.words[S]|0;E+=v,v=E>>>26,E&=67108863,this.words[S]=E}return v!==0&&(this.words[S]=v,this.length++),this},"bincn"),o.prototype.isZero=n(function(){return this.length===1&&this.words[0]===0},"isZero"),o.prototype.cmpn=n(function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var m;if(this.length>1)m=1;else{u&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;m=y===s?0:y<s?-1:1}return this.negative!==0?-m|0:m},"cmpn"),o.prototype.cmp=n(function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},"cmp"),o.prototype.ucmp=n(function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,v=s.words[m]|0;if(y!==v){y<v?u=-1:y>v&&(u=1);break}}return u},"ucmp"),o.prototype.gtn=n(function(s){return this.cmpn(s)===1},"gtn"),o.prototype.gt=n(function(s){return this.cmp(s)===1},"gt"),o.prototype.gten=n(function(s){return this.cmpn(s)>=0},"gten"),o.prototype.gte=n(function(s){return this.cmp(s)>=0},"gte"),o.prototype.ltn=n(function(s){return this.cmpn(s)===-1},"ltn"),o.prototype.lt=n(function(s){return this.cmp(s)===-1},"lt"),o.prototype.lten=n(function(s){return this.cmpn(s)<=0},"lten"),o.prototype.lte=n(function(s){return this.cmp(s)<=0},"lte"),o.prototype.eqn=n(function(s){return this.cmpn(s)===0},"eqn"),o.prototype.eq=n(function(s){return this.cmp(s)===0},"eq"),o.red=n(function(s){return new Z(s)},"red"),o.prototype.toRed=n(function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},"toRed"),o.prototype.fromRed=n(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),o.prototype._forceRed=n(function(s){return this.red=s,this},"_forceRed"),o.prototype.forceRed=n(function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},"forceRed"),o.prototype.redAdd=n(function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},"redAdd"),o.prototype.redIAdd=n(function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},"redIAdd"),o.prototype.redSub=n(function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},"redSub"),o.prototype.redISub=n(function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},"redISub"),o.prototype.redShl=n(function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},"redShl"),o.prototype.redMul=n(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},"redMul"),o.prototype.redIMul=n(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},"redIMul"),o.prototype.redSqr=n(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),o.prototype.redISqr=n(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),o.prototype.redSqrt=n(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),o.prototype.redInvm=n(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),o.prototype.redNeg=n(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),o.prototype.redPow=n(function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)},"redPow");var Y={k256:null,p224:null,p192:null,p25519:null};function L(A,s){this.name=A,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}n(L,"MPrime"),L.prototype._tmp=n(function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},"_tmp"),L.prototype.ireduce=n(function(s){var u=s,m;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),m=u.bitLength();while(m>this.n);var y=m<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},"ireduce"),L.prototype.split=n(function(s,u){s.iushrn(this.n,0,u)},"split"),L.prototype.imulK=n(function(s){return s.imul(this.k)},"imulK");function ce(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(ce,"K256"),i(ce,L),ce.prototype.split=n(function(s,u){for(var m=4194303,y=Math.min(s.length,9),v=0;v<y;v++)u.words[v]=s.words[v];if(u.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var S=s.words[9];for(u.words[u.length++]=S&m,v=10;v<s.length;v++){var E=s.words[v]|0;s.words[v-10]=(E&m)<<4|S>>>22,S=E}S>>>=22,s.words[v-10]=S,S===0&&s.length>10?s.length-=10:s.length-=9},"split"),ce.prototype.imulK=n(function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,m=0;m<s.length;m++){var y=s.words[m]|0;u+=y*977,s.words[m]=u&67108863,u=y*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s},"imulK");function te(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(te,"P224"),i(te,L);function ie(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ie,"P192"),i(ie,L);function ae(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ae,"P25519"),i(ae,L),ae.prototype.imulK=n(function(s){for(var u=0,m=0;m<s.length;m++){var y=(s.words[m]|0)*19+u,v=y&67108863;y>>>=26,s.words[m]=v,u=y}return u!==0&&(s.words[s.length++]=u),s},"imulK"),o._prime=n(function(s){if(Y[s])return Y[s];var u;if(s==="k256")u=new ce;else if(s==="p224")u=new te;else if(s==="p192")u=new ie;else if(s==="p25519")u=new ae;else throw new Error("Unknown prime "+s);return Y[s]=u,u},"prime");function Z(A){if(typeof A=="string"){var s=o._prime(A);this.m=s.p,this.prime=s}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}n(Z,"Red"),Z.prototype._verify1=n(function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},"_verify1"),Z.prototype._verify2=n(function(s,u){r((s.negative|u.negative)===0,"red works only with positives"),r(s.red&&s.red===u.red,"red works only with red numbers")},"_verify2"),Z.prototype.imod=n(function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},"imod"),Z.prototype.neg=n(function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},"neg"),Z.prototype.add=n(function(s,u){this._verify2(s,u);var m=s.add(u);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},"add"),Z.prototype.iadd=n(function(s,u){this._verify2(s,u);var m=s.iadd(u);return m.cmp(this.m)>=0&&m.isub(this.m),m},"iadd"),Z.prototype.sub=n(function(s,u){this._verify2(s,u);var m=s.sub(u);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},"sub"),Z.prototype.isub=n(function(s,u){this._verify2(s,u);var m=s.isub(u);return m.cmpn(0)<0&&m.iadd(this.m),m},"isub"),Z.prototype.shl=n(function(s,u){return this._verify1(s),this.imod(s.ushln(u))},"shl"),Z.prototype.imul=n(function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},"imul"),Z.prototype.mul=n(function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},"mul"),Z.prototype.isqr=n(function(s){return this.imul(s,s.clone())},"isqr"),Z.prototype.sqr=n(function(s){return this.mul(s,s)},"sqr"),Z.prototype.sqrt=n(function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(s,m)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var S=new o(1).toRed(this),E=S.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,w).cmp(E)!==0;)c.redIAdd(E);for(var b=this.pow(c,y),D=this.pow(s,y.addn(1).iushrn(1)),V=this.pow(s,y),z=v;V.cmp(S)!==0;){for(var J=V,oe=0;J.cmp(S)!==0;oe++)J=J.redSqr();r(oe<z);var ue=this.pow(b,new o(1).iushln(z-oe-1));D=D.redMul(ue),b=ue.redSqr(),V=V.redMul(b),z=oe}return D},"sqrt"),Z.prototype.invm=n(function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},"invm"),Z.prototype.pow=n(function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var m=4,y=new Array(1<<m);y[0]=new o(1).toRed(this),y[1]=s;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],s);var S=y[0],E=0,w=0,c=u.bitLength()%26;for(c===0&&(c=26),v=u.length-1;v>=0;v--){for(var b=u.words[v],D=c-1;D>=0;D--){var V=b>>D&1;if(S!==y[0]&&(S=this.sqr(S)),V===0&&E===0){w=0;continue}E<<=1,E|=V,w++,!(w!==m&&(v!==0||D!==0))&&(S=this.mul(S,y[E]),w=0,E=0)}c=26}return S},"pow"),Z.prototype.convertTo=n(function(s){var u=s.umod(this.m);return u===s?u.clone():u},"convertTo"),Z.prototype.convertFrom=n(function(s){var u=s.clone();return u.red=null,u},"convertFrom"),o.mont=n(function(s){return new ge(s)},"mont");function ge(A){Z.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(ge,"Mont"),i(ge,Z),ge.prototype.convertTo=n(function(s){return this.imod(s.ushln(this.shift))},"convertTo"),ge.prototype.convertFrom=n(function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},"convertFrom"),ge.prototype.imul=n(function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var m=s.imul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"imul"),ge.prototype.mul=n(function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var m=s.mul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"mul"),ge.prototype.invm=n(function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)},"invm")})(typeof eh>"u"||eh,Iv)});var Kv=de((fj,Bv)=>{d();h();var Bn=Ta(),cr=_v(),At=n(function(){},"ABI");function _u(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}n(_u,"elementaryName");At.eventID=function(e,t){var r=e+"("+t.map(_u).join(",")+")";return Bn.keccak256(Buffer.from(r))};At.methodID=function(e,t){return At.eventID(e,t).slice(0,4)};function Ri(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}n(Ri,"parseTypeN");function th(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}n(th,"parseTypeNxM");function ka(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}n(ka,"parseTypeArray");function Ao(e){var t=typeof e;if(t==="string")return Bn.isHexPrefixed(e)?new cr(Bn.stripHexPrefix(e),16):new cr(e,10);if(t==="number")return new cr(e);if(e.toArray)return e;throw new Error("Argument is not a number")}n(Ao,"parseNumber");function Pv(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var i=t[2].split(",");return i.length===1&&i[0]===""&&(i=[]),{method:t[1],args:i}}n(Pv,"parseSignature");function Pn(e,t){var r,i,o,a;if(e==="address")return Pn("uint160",Ao(t));if(e==="bool")return Pn("uint8",t?1:0);if(e==="string")return Pn("bytes",Buffer.from(t,"utf8"));if(_a(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=ka(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);o=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(a in t)o.push(Pn(e,t[a]));if(r==="dynamic"){var l=Pn("uint256",t.length);o.unshift(l)}return Buffer.concat(o)}else{if(e==="bytes")return t=Buffer.from(t),o=Buffer.concat([Pn("uint256",t.length),t]),t.length%32!==0&&(o=Buffer.concat([o,Bn.zeros(32-t.length%32)])),o;if(e.startsWith("bytes")){if(r=Ri(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Bn.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=Ri(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(i=Ao(t),i.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+i.bitLength());if(i<0)throw new Error("Supplied uint is negative");return i.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=Ri(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(i=Ao(t),i.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+i.bitLength());return i.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=th(e),i=Ao(t),i<0)throw new Error("Supplied ufixed is negative");return Pn("uint256",i.mul(new cr(2).pow(new cr(r[1]))))}else if(e.startsWith("fixed"))return r=th(e),Pn("int256",Ao(t).mul(new cr(2).pow(new cr(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}n(Pn,"encodeSingle");function un(e,t,r){typeof e=="string"&&(e=rh(e));var i,o,a,l;if(e.name==="address")return un(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return un(e.rawType,t,r).toString()===new cr(1).toString();if(e.name==="string"){var f=un(e.rawType,t,r);return Buffer.from(f,"utf8").toString()}else if(e.isArray){for(a=[],i=e.size,e.size==="dynamic"&&(r=un("uint256",t,r).toNumber(),i=un("uint256",t,r).toNumber(),r=r+32),l=0;l<i;l++){var g=un(e.subArray,t,r);a.push(g),r+=e.subArray.memoryUsage}return a}else{if(e.name==="bytes")return r=un("uint256",t,r).toNumber(),i=un("uint256",t,r).toNumber(),t.slice(r+32,r+32+i);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(o=new cr(t.slice(r,r+32),16,"be"),o.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+o.bitLength());return o}else if(e.name.startsWith("int")){if(o=new cr(t.slice(r,r+32),16,"be").fromTwos(256),o.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+o.bitLength());return o}else if(e.name.startsWith("ufixed")){if(i=new cr(2).pow(new cr(e.size[1])),o=un("uint256",t,r),!o.mod(i).isZero())throw new Error("Decimals not supported yet");return o.div(i)}else if(e.name.startsWith("fixed")){if(i=new cr(2).pow(new cr(e.size[1])),o=un("int256",t,r),!o.mod(i).isZero())throw new Error("Decimals not supported yet");return o.div(i)}}throw new Error("Unsupported or invalid type: "+e.name)}n(un,"decodeSingle");function rh(e){var t,r;if(_a(e)){t=ka(e);var i=e.slice(0,e.lastIndexOf("["));return i=rh(i),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:i.memoryUsage*t,subArray:i},r}else{var o;switch(e){case"address":o="uint160";break;case"bool":o="uint8";break;case"string":o="bytes";break}if(r={rawType:o,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=Ri(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=th(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}n(rh,"parseType");function CM(e){return e==="string"||e==="bytes"||ka(e)==="dynamic"}n(CM,"isDynamic");function _a(e){return e.lastIndexOf("]")===e.length-1}n(_a,"isArray");At.rawEncode=function(e,t){var r=[],i=[],o=0;e.forEach(function(x){if(_a(x)){var T=ka(x);T!=="dynamic"?o+=32*T:o+=32}else o+=32});for(var a=0;a<e.length;a++){var l=_u(e[a]),f=t[a],g=Pn(l,f);CM(l)?(r.push(Pn("uint256",o)),i.push(g),o+=g.length):r.push(g)}return Buffer.concat(r.concat(i))};At.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var i=0,o=0;o<e.length;o++){var a=_u(e[o]),l=rh(a,t,i),f=un(l,t,i);i+=l.memoryUsage,r.push(f)}return r};At.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=Pv(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([At.methodID(r.method,r.args),At.rawEncode(r.args,t)])};At.simpleDecode=function(e,t){var r=Pv(e);if(!r.retargs)throw new Error("No return values in method");return At.rawDecode(r.retargs,t)};function kv(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}n(kv,"stringify");At.stringify=function(e,t){var r=[];for(var i in e){var o=e[i],a=t[i];/^[^\[]+\[.*\]$/.test(o)?a=a.map(function(l){return kv(o,l)}).join(", "):a=kv(o,a),r.push(a)}return r};At.solidityHexValue=function(e,t,r){var i,o;if(_a(e)){var a=e.replace(/\[.*?\]/,"");if(!_a(a)){var l=ka(e);if(l!=="dynamic"&&l!==0&&t.length>l)throw new Error("Elements exceed array size: "+l)}var f=t.map(function(T){return At.solidityHexValue(a,T,256)});return Buffer.concat(f)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var g=Array(r/4).join("0");return Buffer.from(t?g+"1":g+"0","hex")}else if(e==="address"){var x=20;return r&&(x=r/8),Bn.setLengthLeft(t,x)}else if(e.startsWith("bytes")){if(i=Ri(e),i<1||i>32)throw new Error("Invalid bytes<N> width: "+i);return Bn.setLengthRight(t,i)}else if(e.startsWith("uint")){if(i=Ri(e),i%8||i<8||i>256)throw new Error("Invalid uint<N> width: "+i);if(o=Ao(t),o.bitLength()>i)throw new Error("Supplied uint exceeds width: "+i+" vs "+o.bitLength());return r=r||i,o.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(i=Ri(e),i%8||i<8||i>256)throw new Error("Invalid int<N> width: "+i);if(o=Ao(t),o.bitLength()>i)throw new Error("Supplied int exceeds width: "+i+" vs "+o.bitLength());return r=r||i,o.toTwos(i).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};At.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],i=0;i<e.length;i++){var o=_u(e[i]),a=t[i];r.push(At.solidityHexValue(o,a,null))}return Buffer.concat(r)};At.soliditySHA3=function(e,t){return Bn.keccak256(At.solidityPack(e,t))};At.soliditySHA256=function(e,t){return Bn.sha256(At.solidityPack(e,t))};At.solidityRIPEMD160=function(e,t){return Bn.ripemd160(At.solidityPack(e,t),!0)};function RM(e){return e>="0"&&e<="9"}n(RM,"isNumeric");At.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(i==="s")t.push("bytes");else if(i==="b"){for(var o="bytes",a=r+1;a<e.length&&RM(e[a]);)o+=e[a]-"0",a++;r=a-1,t.push(o)}else if(i==="i")t.push("int256");else if(i==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+i)}return t};At.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(i==="bytes")t.push("s");else if(i.startsWith("bytes"))t.push("b"+Ri(i));else if(i==="int256")t.push("i");else if(i==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+i)}return t.join("")};Bv.exports=At});var Cv=de((mj,Ov)=>{d();h();Ov.exports=Kv()});var Lv=de(Vt=>{"use strict";d();h();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.recoverTypedSignature=Vt.signTypedData=Vt.typedSignatureHash=Vt.TypedDataUtils=Vt.TYPED_MESSAGE_SCHEMA=Vt.SignTypedDataVersion=void 0;var Or=Ta(),Pa=Cv(),So=Ia(),Yt;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(Yt=Vt.SignTypedDataVersion||(Vt.SignTypedDataVersion={}));Vt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Ss(e,t){if(Object.keys(Yt).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}n(Ss,"validateVersion");function Rv(e,t,r,i,o){if(Ss(o,[Yt.V3,Yt.V4]),e[r]!==void 0)return["bytes32",o===Yt.V4&&i==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Or.keccak(ih(r,i,e,o))];if(i===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",Or.keccak(i)];if(r==="string")return typeof i=="string"&&(i=Buffer.from(i,"utf8")),["bytes32",Or.keccak(i)];if(r.lastIndexOf("]")===r.length-1){if(o===Yt.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let a=r.slice(0,r.lastIndexOf("[")),l=i.map(f=>Rv(e,t,a,f,o));return["bytes32",Or.keccak(Pa.rawEncode(l.map(([f])=>f),l.map(([,f])=>f)))]}return[r,i]}n(Rv,"encodeField");function ih(e,t,r,i){Ss(i,[Yt.V3,Yt.V4]);let o=["bytes32"],a=[Nv(e,r)];for(let l of r[e]){if(i===Yt.V3&&t[l.name]===void 0)continue;let[f,g]=Rv(r,l.name,l.type,t[l.name],i);o.push(f),a.push(g)}return Pa.rawEncode(o,a)}n(ih,"encodeData");function Uv(e,t){let r="",i=oh(e,t);i.delete(e);let o=[e,...Array.from(i).sort()];for(let a of o){if(!t[a])throw new Error(`No type definition specified: ${a}`);r+=`${a}(${t[a].map(({name:f,type:g})=>`${g} ${f}`).join(",")})`}return r}n(Uv,"encodeType");function oh(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let i of t[e])oh(i.type,t,r);return r}n(oh,"findTypeDependencies");function nh(e,t,r,i){return Ss(i,[Yt.V3,Yt.V4]),Or.keccak(ih(e,t,r,i))}n(nh,"hashStruct");function Nv(e,t){return Or.keccak(Uv(e,t))}n(Nv,"hashType");function Dv(e){let t={};for(let r in Vt.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}n(Dv,"sanitizeData");function UM(e,t){Ss(t,[Yt.V3,Yt.V4]);let r=Dv(e),i=[Buffer.from("1901","hex")];return i.push(nh("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&i.push(nh(r.primaryType,r.message,r.types,t)),Or.keccak(Buffer.concat(i))}n(UM,"eip712Hash");Vt.TypedDataUtils={encodeData:ih,encodeType:Uv,findTypeDependencies:oh,hashStruct:nh,hashType:Nv,sanitizeData:Dv,eip712Hash:UM};function NM(e){let t=sh(e);return Or.bufferToHex(t)}n(NM,"typedSignatureHash");Vt.typedSignatureHash=NM;function sh(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(a){return a.type!=="bytes"?a.value:So.legacyToBuffer(a.value)}),i=e.map(function(a){return a.type}),o=e.map(function(a){if(!a.name)throw t;return`${a.type} ${a.name}`});return Pa.soliditySHA3(["bytes32","bytes32"],[Pa.soliditySHA3(new Array(e.length).fill("string"),o),Pa.soliditySHA3(i,r)])}n(sh,"_typedSignatureHash");function DM({privateKey:e,data:t,version:r}){if(Ss(r),So.isNullish(t))throw new Error("Missing data parameter");if(So.isNullish(e))throw new Error("Missing private key parameter");let i=r===Yt.V1?sh(t):Vt.TypedDataUtils.eip712Hash(t,r),o=Or.ecsign(i,e);return So.concatSig(Or.toBuffer(o.v),o.r,o.s)}n(DM,"signTypedData");Vt.signTypedData=DM;function LM({data:e,signature:t,version:r}){if(Ss(r),So.isNullish(e))throw new Error("Missing data parameter");if(So.isNullish(t))throw new Error("Missing signature parameter");let i=r===Yt.V1?sh(e):Vt.TypedDataUtils.eip712Hash(e,r),o=So.recoverPublicKey(i,t),a=Or.publicToAddress(o);return Or.bufferToHex(a)}n(LM,"recoverTypedSignature");Vt.recoverTypedSignature=LM});var Fv=de((Vv,ku)=>{d();h();(function(e,t){"use strict";typeof ku<"u"&&ku.exports?ku.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(Vv,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return n(t,"validateBase64"),e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var i,o=unescape(encodeURIComponent(r)),a=new Uint8Array(o.length);for(i=0;i<o.length;i++)a[i]=o.charCodeAt(i);return a},e.encodeUTF8=function(r){var i,o=[];for(i=0;i<r.length;i++)o.push(String.fromCharCode(r[i]));return decodeURIComponent(escape(o.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var i,o=[],a=r.length;for(i=0;i<a;i++)o.push(String.fromCharCode(r[i]));return btoa(o.join(""))},e.decodeBase64=function(r){t(r);var i,o=atob(r),a=new Uint8Array(o.length);for(i=0;i<o.length;i++)a[i]=o.charCodeAt(i);return a}),e})});var Hv=de(Ft=>{"use strict";d();h();var VM=Ft&&Ft.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:n(function(){return t[r]},"get")})}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),FM=Ft&&Ft.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),jv=Ft&&Ft.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&VM(t,e,r);return FM(t,e),t};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.getEncryptionPublicKey=Ft.decryptSafely=Ft.decrypt=Ft.encryptSafely=Ft.encrypt=void 0;var Eo=jv(yi()),ln=jv(Fv()),Kn=Ia();function qv({publicKey:e,data:t,version:r}){if(Kn.isNullish(e))throw new Error("Missing publicKey parameter");if(Kn.isNullish(t))throw new Error("Missing data parameter");if(Kn.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let i=Eo.box.keyPair(),o;try{o=ln.decodeBase64(e)}catch{throw new Error("Bad public key")}let a=ln.decodeUTF8(t),l=Eo.randomBytes(Eo.box.nonceLength),f=Eo.box(a,l,o,i.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:ln.encodeBase64(l),ephemPublicKey:ln.encodeBase64(i.publicKey),ciphertext:ln.encodeBase64(f)}}default:throw new Error("Encryption type/version not supported")}}n(qv,"encrypt");Ft.encrypt=qv;function jM({publicKey:e,data:t,version:r}){if(Kn.isNullish(e))throw new Error("Missing publicKey parameter");if(Kn.isNullish(t))throw new Error("Missing data parameter");if(Kn.isNullish(r))throw new Error("Missing version parameter");let i=2**11,o=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let a={data:t,padding:""},f=Buffer.byteLength(JSON.stringify(a),"utf-8")%i,g=0;f>0&&(g=i-f-o),a.padding="0".repeat(g);let x=JSON.stringify(a);return qv({publicKey:e,data:x,version:r})}n(jM,"encryptSafely");Ft.encryptSafely=jM;function zv({encryptedData:e,privateKey:t}){if(Kn.isNullish(e))throw new Error("Missing encryptedData parameter");if(Kn.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=Wv(t),i=Eo.box.keyPair.fromSecretKey(r).secretKey,o=ln.decodeBase64(e.nonce),a=ln.decodeBase64(e.ciphertext),l=ln.decodeBase64(e.ephemPublicKey),f=Eo.box.open(a,o,l,i),g;try{g=ln.encodeUTF8(f)}catch{throw new Error("Decryption failed.")}if(g)return g;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}n(zv,"decrypt");Ft.decrypt=zv;function qM({encryptedData:e,privateKey:t}){if(Kn.isNullish(e))throw new Error("Missing encryptedData parameter");if(Kn.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(zv({encryptedData:e,privateKey:t})).data}n(qM,"decryptSafely");Ft.decryptSafely=qM;function zM(e){let t=Wv(e),r=Eo.box.keyPair.fromSecretKey(t).publicKey;return ln.encodeBase64(r)}n(zM,"getEncryptionPublicKey");Ft.getEncryptionPublicKey=zM;function Wv(e){let t=Buffer.from(e,"hex").toString("base64");return ln.decodeBase64(t)}n(Wv,"nacl_decodeHex")});var ch=de(vr=>{"use strict";d();h();var WM=vr&&vr.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:n(function(){return t[r]},"get")})}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),ah=vr&&vr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&WM(t,e,r)};Object.defineProperty(vr,"__esModule",{value:!0});vr.normalize=vr.concatSig=void 0;ah(Tv(),vr);ah(Lv(),vr);ah(Hv(),vr);var $v=Ia();Object.defineProperty(vr,"concatSig",{enumerable:!0,get:n(function(){return $v.concatSig},"get")});Object.defineProperty(vr,"normalize",{enumerable:!0,get:n(function(){return $v.normalize},"get")})});var Cb=de(Rs=>{"use strict";d();h();Object.defineProperty(Rs,"__esModule",{value:!0});Rs.testnet=Rs.bitcoin=void 0;Rs.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Rs.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var Rb=de(yt=>{"use strict";d();h();Object.defineProperty(yt,"__esModule",{value:!0});yt.maybe=yt.Boolean=yt.Array=yt.Buffer256bit=yt.Network=yt.typeforce=void 0;yt.typeforce=T1();yt.Network=yt.typeforce.compile({messagePrefix:yt.typeforce.oneOf(yt.typeforce.Buffer,yt.typeforce.String),bip32:{public:yt.typeforce.UInt32,private:yt.typeforce.UInt32},pubKeyHash:yt.typeforce.UInt8,scriptHash:yt.typeforce.UInt8,wif:yt.typeforce.UInt8});yt.Buffer256bit=yt.typeforce.BufferN(32);yt.Array=yt.typeforce.Array;yt.Boolean=yt.typeforce.Boolean;yt.maybe=yt.typeforce.maybe});var Ub=de(dl=>{"use strict";d();h();Object.defineProperty(dl,"__esModule",{value:!0});dl.testEcc=void 0;var we=n(e=>Buffer.from(e,"hex"),"h");function K_(e){bt(e.isPoint(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),bt(!e.isPoint(we("030000000000000000000000000000000000000000000000000000000000000005"))),bt(e.isPrivate(we("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),bt(e.isPrivate(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),bt(!e.isPrivate(we("0000000000000000000000000000000000000000000000000000000000000000"))),bt(!e.isPrivate(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),bt(!e.isPrivate(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),bt(Buffer.from(e.privateAdd(we("0000000000000000000000000000000000000000000000000000000000000001"),we("0000000000000000000000000000000000000000000000000000000000000000"))).equals(we("0000000000000000000000000000000000000000000000000000000000000001"))),bt(e.privateAdd(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),we("0000000000000000000000000000000000000000000000000000000000000003"))===null),bt(Buffer.from(e.privateAdd(we("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),we("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(we("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),bt(Buffer.from(e.privateNegate(we("0000000000000000000000000000000000000000000000000000000000000001"))).equals(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),bt(Buffer.from(e.privateNegate(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(we("0000000000000000000000000000000000000000000000000000000000000003"))),bt(Buffer.from(e.privateNegate(we("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(we("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),bt(Buffer.from(e.pointCompress(we("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),bt(Buffer.from(e.pointCompress(we("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(we("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),bt(Buffer.from(e.pointCompress(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),bt(Buffer.from(e.pointCompress(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(we("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),bt(Buffer.from(e.pointFromScalar(we("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(we("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),bt(e.xOnlyPointAddTweak(we("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(we("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),we("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));bt(Buffer.from(t.xOnlyPubkey).equals(we("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(we("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),we("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),bt(Buffer.from(t.xOnlyPubkey).equals(we("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),bt(Buffer.from(e.sign(we("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(we("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),bt(e.verify(we("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),we("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),we("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&bt(Buffer.from(e.signSchnorr(we("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),we("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),we("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(we("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&bt(e.verifySchnorr(we("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),we("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),we("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}n(K_,"testEcc");dl.testEcc=K_;function bt(e){if(!e)throw new Error("ecc library invalid")}n(bt,"assert")});var Db=de(Us=>{"use strict";d();h();Object.defineProperty(Us,"__esModule",{value:!0});Us.ECPairFactory=Us.networks=void 0;var _p=Cb();Us.networks=_p;var Xt=Rb(),O_=B0(),Nb=E1(),C_=Ub(),Ip=Xt.typeforce.maybe(Xt.typeforce.compile({compressed:Xt.maybe(Xt.Boolean),network:Xt.maybe(Xt.Network)})),R_=n(e=>e.length===32?e:e.slice(1,33),"toXOnly");function U_(e){(0,C_.testEcc)(e);function t(f){return e.isPoint(f)}n(t,"isPoint");function r(f,g){if(Xt.typeforce(Xt.Buffer256bit,f),!e.isPrivate(f))throw new TypeError("Private key not in range [1, n)");return Xt.typeforce(Ip,g),new l(f,void 0,g)}n(r,"fromPrivateKey");function i(f,g){return Xt.typeforce(e.isPoint,f),Xt.typeforce(Ip,g),new l(void 0,f,g)}n(i,"fromPublicKey");function o(f,g){let x=Nb.decode(f),T=x.version;if(Xt.Array(g)){if(g=g.filter(I=>T===I.wif).pop(),!g)throw new Error("Unknown network version")}else if(g=g||_p.bitcoin,T!==g.wif)throw new Error("Invalid network version");return r(x.privateKey,{compressed:x.compressed,network:g})}n(o,"fromWIF");function a(f){Xt.typeforce(Ip,f),f===void 0&&(f={});let g=f.rng||O_,x;do x=g(32),Xt.typeforce(Xt.Buffer256bit,x);while(!e.isPrivate(x));return r(x,f)}n(a,"makeRandom");class l{static{n(this,"ECPair")}__D;__Q;compressed;network;lowR;constructor(g,x,T){this.__D=g,this.__Q=x,this.lowR=!1,T===void 0&&(T={}),this.compressed=T.compressed===void 0?!0:T.compressed,this.network=T.network||_p.bitcoin,x!==void 0&&(this.__Q=Buffer.from(e.pointCompress(x,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let g=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(g)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return Nb.encode(this.network.wif,this.__D,this.compressed)}tweak(g){return this.privateKey?this.tweakFromPrivateKey(g):this.tweakFromPublicKey(g)}sign(g,x){if(!this.__D)throw new Error("Missing private key");if(x===void 0&&(x=this.lowR),x===!1)return Buffer.from(e.sign(g,this.__D));{let T=e.sign(g,this.__D),I=Buffer.alloc(32,0),_=0;for(;T[0]>127;)_++,I.writeUIntLE(_,0,6),T=e.sign(g,this.__D,I);return Buffer.from(T)}}signSchnorr(g){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(g,this.privateKey))}verify(g,x){return e.verify(g,this.publicKey,x)}verifySchnorr(g,x){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(g,this.publicKey.subarray(1,33),x)}tweakFromPublicKey(g){let x=R_(this.publicKey),T=e.xOnlyPointAddTweak(x,g);if(!T||T.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let I=Buffer.from([T.parity===0?2:3]);return i(Buffer.concat([I,T.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(g){let T=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,I=e.privateAdd(T,g);if(!I)throw new Error("Invalid tweaked private key!");return r(Buffer.from(I),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:i,fromWIF:o,makeRandom:a}}n(U_,"ECPairFactory");Us.ECPairFactory=U_});var Lb=de(Qi=>{"use strict";d();h();Object.defineProperty(Qi,"__esModule",{value:!0});Qi.networks=Qi.ECPairFactory=Qi.default=void 0;var kp=Db();Object.defineProperty(Qi,"default",{enumerable:!0,get:n(function(){return kp.ECPairFactory},"get")});Object.defineProperty(Qi,"ECPairFactory",{enumerable:!0,get:n(function(){return kp.ECPairFactory},"get")});Object.defineProperty(Qi,"networks",{enumerable:!0,get:n(function(){return kp.networks},"get")})});d();h();d();h();var zo;(function(e){e.Image="image",e.Emoji="emoji",e.ReadOnlyDefault="read-only-default",e.Default="default"})(zo||(zo={}));var wm=p.object({type:p.nativeEnum(zo),imageUrl:p.string().optional(),unicode:p.string().optional()}),Wo;(function(e){e.Ledger="ledger"})(Wo||(Wo={}));var Ho;(function(e){e.BLE="ble"})(Ho||(Ho={}));var P1=p.object({version:p.literal(1),connectionType:p.nativeEnum(Ho),deviceType:p.nativeEnum(Wo),id:p.string().min(1),name:p.string().optional(),model:p.string().optional()}),B1=p.object({value:p.number(),timestamp:p.number()}),K1=p.object({name:p.string(),icon:wm.optional(),connectedDevices:P1.array().optional()}),O1=p.object({balance:B1.optional()});var C1=100,R1={unicode:void 0,imageUrl:void 0,type:zo.Default},Zl={version:1,isDeveloperMode:!1};var $o=tn.Solana.Devnet,Go=tn.Ethereum.Sepolia,Ql=tn.Sui.Testnet;function Xs(){return{version:1,setting:{[k.Solana]:$o,[k.EVM]:Go,[k.Sui]:Ql}}}n(Xs,"getDefaultNetworkSetting");function Jt(e){return e.map(t=>rn[t].defaultDerivationPathType)}n(Jt,"getDefaultDerivationPathTypesForAddressTypes");var U1={[ee.Bip44RootSolana]:ee.Bip44RootEthereum,[ee.Bip44ChangeSolana]:ee.Bip44Ethereum,[ee.Bip44Solana]:ee.Bip44EthereumSecondary,[ee.DeprecatedSolana]:ee.Bip44EthereumTertiary,[ee.Bip44RootEthereum]:null,[ee.Bip44Ethereum]:null,[ee.Bip44EthereumSecondary]:null,[ee.Bip44EthereumTertiary]:null,[ee.BitcoinTaproot]:null,[ee.BitcoinNativeSegwit]:null,[ee.BitcoinNestedSegwit]:null,[ee.BitcoinLegacy]:null,[ee.Bip44Sui]:null},Yn={[ee.Bip44RootSolana]:-1,[ee.Bip44RootEthereum]:-1,[ee.BitcoinTaproot]:0,[ee.BitcoinNativeSegwit]:0,[ee.BitcoinNestedSegwit]:0,[ee.BitcoinLegacy]:0,[ee.Bip44ChangeSolana]:0,[ee.Bip44Ethereum]:0,[ee.Bip44Solana]:1,[ee.Bip44EthereumSecondary]:1,[ee.DeprecatedSolana]:2,[ee.Bip44EthereumTertiary]:2,[ee.Bip44Sui]:0},N1="https://help.phantom.com/hc/en-us/articles/4406563212819";var D1="https://help.phantom.com/hc/en-us/articles/21872962238355";d();h();d();h();d();h();var Zo=he(Pt());var bm=(0,Zo.createContext)(null);function L1({children:e,vault:t}){return Zo.default.createElement(bm.Provider,{value:t},e)}n(L1,"VaultProxyProvider");function mt(){let e=(0,Zo.useContext)(bm);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}n(mt,"useVaultProxy");var Sm=he(Pt());d();h();d();h();d();h();var wc=n((e,t)=>{try{let r=jo(e,t);switch(r){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return rn.getDisplayName(r);default:return}}catch(r){G.addBreadcrumb(H.Account,"Failed to get address badge",X.Error,{...r instanceof Error&&{error:r.message},networkId:e,address:t});return}},"getAddressBadge");var xm={badge:n((e,t,r)=>t.filter(pc).length<=1?"":wc(e,r)??"","badge"),showAddressTypeExplainer:n(e=>e.filter(pc).length>1,"showAddressTypeExplainer"),addressTooltipNetworkName:n((e,t,r)=>r.filter(pc).length>=2?wc(e,t)??pe.getChainName(e):pe.getChainName(e),"addressTooltipNetworkName")};d();h();var Am={badge:n(()=>"Lite","badge")};var V1=new mc({[dr.Solana]:{},[dr.Ethereum]:{},[dr.Polygon]:{},[dr.Base]:{},[dr.Arbitrum]:{},[dr.Monad]:{},[dr.Bitcoin]:xm,[dr.Sui]:{},[dr.Hypercore]:{},[dr.Hyperevm]:Am}),Ai=nm(V1);function F1({children:e}){let t=mt(),r=Ai.supportedChains.map(o=>[o,Ai.get(o)]),i=new mc(Object.fromEntries(r));return Sm.default.createElement(dm,{effects:{deriveAddresses:n(async()=>{await t.deriveAddresses()},"deriveAddresses")},registry:i},e)}n(F1,"AccountsChainDependencyProvider");d();h();var P;(function(e){e.Seed="seed",e.PrivateKey="privateKey",e.Ledger="ledger",e.SeedVault="seedVault",e.ReadOnly="readOnly",e.Seedless="seedless",e.KMSVault="kmsVault"})(P||(P={}));var j1=p.object({derivationIndex:p.number(),addresses:p.array(p.object({pathType:p.union([N0,D0]),value:p.string()})),publicKeys:p.array(p.object({pathType:U0,value:p.string()}))}),bn=class extends Error{static{n(this,"VaultFetchAccountInvalidIdentifier")}message="No account exists in storage for identifier"},Si=class extends Error{static{n(this,"VaultFetchAccountUndefinedBitcoinAddressError")}message="No account exists in storage for identifier"},Ei=class extends Error{static{n(this,"VaultExportSecretsInvalidAddressType")}message="Address type not found or incompatible with account"},ea=class extends Error{static{n(this,"VaultExportSecretsHardwareWallet")}message="Hardware wallet account does not have known secr*ts"},ta=class extends Error{static{n(this,"VaultExportSecretsReadOnlyAccount")}message="Read only account does not have known secr*ts"},ra=class extends Error{static{n(this,"VaultImportReadOnlyAccount")}message="Invalid configuration for read only account"},no=class extends Error{static{n(this,"VaultImportSeedDuplicate")}message="Seed already exists in storage"},Xn=class extends Error{static{n(this,"VaultFetchSeedInvalidIdentifier")}message="No seed exists in storage for identifier"},na=class extends Error{static{n(this,"VaultImportSeedInvalidDerivationIndex")}message="The derivation index is missing or invalid"},ia=class extends Error{static{n(this,"VaultImportPrivateKeyDuplicate")}message="Private key already exists in storage"},io=class extends Error{static{n(this,"VaultFetchPrivateKeyInvalidIdentifier")}message="No private key exists in storage for identifier"};var xn=class extends Error{static{n(this,"VaultImportAccountDuplicate")}message;constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},bc=class extends Error{static{n(this,"VaultSeedlessAccountAlreadyExists")}message="Vault already stores a seedless account"},q1=p.union([p.literal("unonboarded"),p.literal("unable-to-load-accounts")]),z1=p.union([p.literal("invalid-identifier"),p.literal("fetch-integrity-storage-error"),p.literal("fetch-entropy-storage-error"),p.literal("fetch-pk-storage-error"),p.literal("invalid-entropy"),p.literal("invalid-entropy-bip-39"),p.literal("invalid-checksum-bits"),p.literal("invalid-entropy-bits"),p.literal("invalid-checksum"),p.literal("invalid-entropy-length-less-than-twelve"),p.literal("invalid-entropy-length-more-than-twenty-four"),p.literal("invalid-entropy-length-wrong-word"),p.literal("invalid-pk-address-type"),p.literal("invalid-pk-identifier"),p.literal("invalid-pk"),p.literal("internal-error")]),W1=p.literal("safely-onboarded"),H1=p.union([p.object({status:q1,isOnboarded:p.literal(!1),reonboardingNeeded:p.literal(!1)}),p.object({status:z1,isOnboarded:p.literal(!0),reonboardingNeeded:p.literal(!0)}),p.object({status:W1,isOnboarded:p.literal(!0),reonboardingNeeded:p.literal(!1)})]);d();h();var oa=n((e,t=5)=>{let r=e.length,i=e.startsWith("0x")?t+2:t;return`${e.substring(0,i)}...${e.substring(r-t,r)}`},"formatHashMedium");d();h();d();h();var $1=n(e=>e.includes(".")||e.includes("@")?!1:T0.safeParse(e).success||M0.safeParse(e).success||X0.safeParse(e).success||I0.safeParse(e).success,"isAddress"),Em=n((e,t=5)=>$1(e)?oa(e,t):e,"formatIfNotHandle");var G1=n((e,t,r,i=4)=>{let o=t?t.name:r,a=Em(e,i);return o?`${o} (${a})`:a},"formatAddress");d();h();var Z1=n(e=>`${e.substring(0,5)}...`,"formatAddressShort");d();h();d();h();var Gt="@phantom/accounts",sa=`${Gt}:account-identifier`,aa=`${Gt}:selected-account`,Qo=`${Gt}:all-accounts`,Jl=`${Gt}:all-seeds`,Q1=`${Gt}:all-secrets`,J1=`${Gt}:account-balance`,tt={accountBalance(e){return[J1,{identifier:e}]},allAccountBalances(){return[`${Gt}:all-account-balances`]},allAccounts(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[Qo,{chainAvailabilityQueryObject:t}]},allSeeds(e){return[Jl,e]},allSecretIdentifiers(){return[Q1]},developerMode(){return[`${Gt}:developer-mode`]},accountIdentifier(e){return[sa,{identifier:e}]},selectedAccount(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[aa,t]},selectedAccountIdentifier(){return[`${Gt}:selected-account-identifier`]},selectedNetworkSetting(){return[`${Gt}:selected-network-setting`]},trustedApps(){return[`${Gt}:trusted-apps`]},migratedWithInvalidChecksum(){return[`${Gt}:migrated-with-invalid-checksum`]},syncUserAccounts(){return[`${Gt}:sync-user-accounts`]},accountsEligibleToClaim(e,t,r){return[`${Gt}:are-accounts-eligible-to-claim`,{username:e,selectedAccountIdentifier:t,solanaAddresses:r}]},patchProfileAddresses(e){return[`${Gt}:patch-profile-addresses`,e]},canUseCash(){return[`${Gt}:can-use-cash`]}};var ut=n(async e=>{await e.invalidateQueries({queryKey:[Jl]}),await e.invalidateQueries({queryKey:[Qo],predicate:n(t=>t.queryKey[0]===Qo,"predicate")}),await e.invalidateQueries({queryKey:[sa]}),await xc(e)},"invalidateAllAccounts"),xc=n(async e=>{await e.invalidateQueries({predicate:n(t=>typeof t.queryKey[0]=="string"&&t.queryKey[0]===aa,"predicate")}),await e.invalidateQueries({queryKey:tt.selectedAccountIdentifier()})},"invalidateSelectedAccount");hm(ut);d();h();var Jo=he(Pt());var Mm=(0,Jo.createContext)(null);function Y1({children:e,authRepository:t}){return Jo.default.createElement(Mm.Provider,{value:t},e)}n(Y1,"AuthProvider");function Ir(){let e=(0,Jo.useContext)(Mm);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}n(Ir,"useAuthRepository");function oo(){return Ir().useUser()}n(oo,"useUser");d();h();d();h();var tf=he(en());d();h();d();h();var X1="https://time.phantom.app/utc",eA=p.number().int().positive();async function so(){let e=await Ac();return Math.floor(e/1e3)}n(so,"time");async function Ac(){let e;try{let t=await vt.noBearer().get(X1);if(t.status!==200)throw new Error("Failed to fetch time from server");e=eA.parse(t.data)}catch{e=Date.now()}return e}n(Ac,"timeMs");d();h();var ca="https://phantom.app",ua="https://api.phantom.app/oauth2/auth",Sc={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},Tm="/login/start",Im="/oauth2/token";var Yl;(function(e){e.Apple="apple",e.Google="google"})(Yl||(Yl={}));var Xl=xi({minutes:60}),ef=Xl-xi({minutes:15}),ao="/v1/authentication-keys";var tA=60,rA=n(()=>Math.floor(Date.now()/1e3),"clientTime");async function Yo(e=!0){let t={alg:"ES256",type:"JWT"},r=e?await so():rA(),i={iss:ca,aud:ua,nbf:r,exp:r+tA,iat:r};return{header:t,payload:i}}n(Yo,"generateUnsignedClientJWT");function Xo(e){let t=ct(tf.Buffer.from(JSON.stringify(e.header))),r=ct(tf.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}n(Xo,"encodeSignedJwt");d();h();var _m=p.object({alg:p.string(),type:p.string(),kid:p.string()}),km=p.object({sub:p.string(),iss:p.string(),aud:p.string(),nbf:p.number(),exp:p.number(),iat:p.number()}),rf=p.object({header:_m,payload:km,signature:p.string()}),Pm=p.object({alg:p.string(),type:p.string()}),Bm=p.object({iss:p.string(),aud:p.string(),nbf:p.number(),exp:p.number(),iat:p.number()}),nf=p.object({header:Pm,payload:Bm}),of=p.object({id_token:p.string(),access_token:p.string(),refresh_token:p.string(),scope:p.string(),token_type:p.string(),expires_in:p.number().gte(0)}),nA=p.object({redirectTo:p.string()}),Km=p.object({at_hash:p.string(),aud:p.array(p.string()),auth_time:p.number(),exp:p.number(),iat:p.number(),iss:p.string(),jti:p.string(),rat:p.number(),sid:p.string(),sub:p.string(),email:p.string().optional()}),Ec=p.object({authenticationKeys:p.array(p.object({createdAt:p.string().datetime().nullish().default(null),updatedAt:p.string().datetime().nullish().default(null),id:p.string().uuid(),publicKey:p.string(),userId:p.string().uuid()})).optional()}),ei;(function(e){e.User="user",e.UserID="userID",e.AccessToken="accessToken",e.Email="email",e.LoggedOut="loggedOut"})(ei||(ei={}));d();h();var co=he(bf());d();h();var ns=he(bf()),Jm=he(yi());var Ym={generateRandom:n(e=>{let t=(0,Jm.randomBytes)(e);return(0,ns.bufferToString)(t)},"generateRandom"),async deriveChallenge(e){let t=vi((0,ns.textEncodeLite)(e));return(0,ns.urlSafe)(t)}};d();h();var kr=n(()=>{let e=nr();return e===Ct.Staging?Lo.staging:e===Ct.Production?Lo.prod:M.BASE_AUTH_ENDPOINT||Lo.staging},"getAuthBaseEndpoint"),xf=n(()=>`${kr()}${Tm}`,"getAuthLoginEndpoint"),Nc=n(()=>`${kr()}${Im}`,"getAuthTokenEndpoint");var Xm=new co.BasicQueryStringUtils;async function Dc(e,t){let{url:r,codeVerifier:i}=await YA(e.getClientID(),e.redirectURL,t),o=t.type==="email",a=await e.fetchAuthorizationCode(e.redirectURL,r,o);return await eg({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:Nc(),code:a,codeVerifier:i})}n(Dc,"authenticate");async function YA(e,t,r){let i=xf(),o,a=["openid","offline_access","user","incognito","seedless"],l;switch(r.type){case"key":{o={type:"key",jwt:Xo(r.clientJWT)};break}case"email":{o={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},l=r.prompt,a.push("email");break}case"session":{o={type:"session",existingAccessToken:r.existingAccessToken};break}}let g=await new co.AuthorizationRequest({client_id:e,redirect_uri:t,scope:a.join(" "),response_type:"code"},Ym).toJson(),x;switch(o.type){case"key":x=`jwt:${ct(Buffer.from(o.jwt,"utf8"))}`;break;case"email":x=`sso:${o.provider}`,o.existingAccessToken&&(x=`${x}:${o.existingAccessToken}`);break;case"session":x=`session:${o.existingAccessToken}`;break}let T={redirect_uri:g.redirect_uri,client_id:g.client_id,response_type:g.response_type,state:g.state??"",scope:g.scope,login_hint:x};l&&(T.prompt=l);let I=g.extras?.code_challenge,_=g.extras?.code_challenge_method,O=g.internal?.code_verifier;if(I&&_&&(T.code_challenge=I,T.code_challenge_method=_),!I||!_||!O)throw new Error("Missing code challenge or code verifier for PKCE.");let C=Xm.stringify(T);return{url:`${i}?${C}`,codeVerifier:O}}n(YA,"createAuthorizationCodeRequest");async function eg(e){let{grantType:t,tokenEndpoint:r,clientID:i,redirectURI:o}=e,a;t==="authorization_code"?a=new co.TokenRequest({client_id:i,redirect_uri:o,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):a=new co.TokenRequest({client_id:i,redirect_uri:o,grant_type:t,refresh_token:e.refreshToken});let l=await vt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(_0()).noBearer().post(r,Xm.stringify(a.toStringMap()));XA(l,t);let f=of.safeParse(l.data);if(!f.success)throw new Error("Invalid OAuth2Token response.");let{data:g}=f,x=await so();return{idToken:g.id_token,accessToken:g.access_token,refreshToken:g.refresh_token,scope:g.scope,tokenType:g.token_type,expiresAt:(x+g.expires_in)*1e3}}n(eg,"performTokenRequest");async function Lc(e,t){return await eg({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:Nc(),refreshToken:t})}n(Lc,"refresh");function XA(e,t){if([401,400].includes(e.status)){let r="";if(e.status===401)switch(r="Token Request Unauthorized (401): ",t){case"authorization_code":r+="Authorization code is expired or invalid.";break;case"refresh_token":r+="Refresh token is expired or invalid.";break;default:r+=`Unknown grant type [${t}]. `}if(e.status===400)switch(r="Bad Token Request (400): ",t){case"authorization_code":r="for [authorization_code]. Possible causes: 1. The authorization code is expired or invalid. 2. Redirect URI mismatch. 3. Code verifier mismatch (if using PKCE).";break;case"refresh_token":r="for [refresh_token]. Possible causes: 1. The refresh token is expired, invalid, or revoked. 2. Client ID mismatch. 3. Missing or malformed refresh token in the request.";break;default:r=`for unknown grant type [${t}]. Check the payload and OAuth provider documentation.`}throw new Error(r)}}n(XA,"handleBadRequest");d();h();d();h();d();h();var fa=class{static{n(this,"BaseEventEmitter")}subscribers={};subscribe(t,r){return this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(r),()=>{this.subscribers[t].splice(this.subscribers[t].indexOf(r),1)}}emitEvent(t,...r){(this.subscribers[t]??[]).forEach(o=>o(...r))}};var Vc=class extends fa{static{n(this,"AuthEventEmitter")}emit(t){t&&(this.emitEvent(ei.User,t),this.emitEvent(ei.UserID,t.userID),this.emitEvent(ei.AccessToken,t.accessToken),t.email&&this.emitEvent(ei.Email,t.email))}emitLoggedOut(){this.emitEvent(ei.LoggedOut)}};d();h();d();h();function ri(e,t="expected value not found"){if(e==null)throw new Error(t);return e}n(ri,"expect");function tg(e,t="expected value not found"){if(!e)throw new Error(t)}n(tg,"assert");var Fc=n(async(e,t)=>{let r=kr(),i=ri(e.signer,"Signer is required for key-based auth."),o=await i.getAuthenticationPublicKey(t),a=await Yo(e.isServerTimeEnabled()),l=await i.sign(a,t),f=await vt.noBearer().get(`${r}${ao}`,{params:{token:Xo(l)}});if(!Vo(f))throw new Error(`Failed to get authentication keys: response is not okay (status ${f.status})`);let g=f.data;return(Ec.parse(g).authenticationKeys??[]).some(I=>I.publicKey===o)},"isExistingAuthFactor");d();h();d();h();var rg=n(async e=>{try{let t=await vt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).bearer(e).get(`${kr()}/userinfo`);return Vo(t)}catch{return!1}},"isValidToken");d();h();d();h();var da=".phantom.auth",jc=`${da}.tokens`,qc=`${da}.tokens.staging`,ha=`${da}.custom-environments`,ng=`${da}.authentication-factors`,eS=`${da}.email-provider`;async function zc(e){let t=nr();return t===Ct.Production?await e.get(jc):t===Ct.Staging?await e.get(qc):(await e.get(ha))?.[t]??null}n(zc,"getAuthTokens");async function is(e,t){let r=nr();r===Ct.Production?await e.set(jc,t):r===Ct.Staging?await e.set(qc,t):await e.update(ha,i=>({...i,[r]:t}))}n(is,"setAuthTokens");async function ig(e){let t=nr();if(t===Ct.Production)await e.remove(jc);else if(t===Ct.Staging)await e.remove(qc);else{let r=!1;await e.update(ha,i=>{if(!i||!(t in i))return i??null;let o={...i};return delete o[t],Object.keys(o).length===0&&(r=!0),o}),r&&await e.remove(ha)}}n(ig,"clearAuthTokens");d();h();var uo=n(e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let i=nn(t[1]).toString("utf-8"),o=JSON.parse(i);r=Km.parse(o)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}},"authTokensToUser");d();h();var og="@phantom/auth",pr={user:["auth",`${og}:user`],authFactors:["auth",`${og}:user-auth-factors`]};d();h();var Wc=n(async(e,t,r)=>{let{storage:i,authConfig:o}=e,a,{type:l}=r;switch(l){case"key":{let g=ri(e.signer,"Signer is required for key-based auth."),x=await Yo(e.isServerTimeEnabled()),T=await g.sign(x,r.secretIdentifier);a=await Dc(o,{type:l,clientJWT:T});break}case"email":{a=await Dc(o,{type:l,prompt:r.prompt,provider:r.provider});break}case"session":{a=await Dc(o,{type:l,existingAccessToken:r.accessToken});break}}G.addBreadcrumb(H.Auth,"\u2705 Login succeeded!",X.Debug),await is(i,a);let f=uo(a);return await e.queryClient.setQueryData(pr.user,f),t.emit(f),f},"logIn");var sg={queryKey:pr.user,gcTime:ef,staleTime:xi({minutes:5})},os=n(async(e,t,r)=>{let i=r?.skipAutoLogin??!1;return await e.queryClient.fetchQuery({...sg,queryFn:n(()=>cg(e,t,i),"queryFn")})},"getUser"),ag=n((e,t)=>ft({...sg,queryFn:n(async()=>{let r=await cg(e,t,!1);if(!r)throw new Error("Unable to log in.");return r},"queryFn"),retryOnMount:!1}),"useUser"),cg=n(async(e,t,r)=>e.runExclusive(async()=>{let i=await tS(e);if(i)return t.emit(i),i;if(r||!e.signer)return null;let o=await rS(e,t);return t.emit(o),o}),"queryFn");async function tS({storage:e,authConfig:t,isLocalTokenValidityCheckEnabled:r,isServerTimeEnabled:i}){let o=await zc(e);if(!o)return null;let a=i()?await so():Math.floor(Date.now()/1e3),l=Math.floor(o.expiresAt/1e3),f=(Xl-ef)/1e3,g=l-f,x=a<g;if(x&&!r()&&(x=await rg(o.accessToken)),x)return G.addBreadcrumb(H.Auth,`\u267B\uFE0F Access token still valid => Expires at ${o.expiresAt}`,X.Debug),uo(o);if(o.refreshToken)try{let T=await Lc(t,o.refreshToken);return G.addBreadcrumb(H.Auth,`\u2705 Refreshed auth token => Expires at ${T.expiresAt}`,X.Debug),await is(e,T),uo(T)}catch(T){return G.addBreadcrumb("Error refreshing auth token.",H.Auth,X.Error),G.captureError(T,H.Auth),null}return null}n(tS,"getOrRefreshUser");async function rS(e,t){let i=await ri(e.signer,"Unable to log in with key-based auth. Signer is not available.").getAllSecretIdentifiers();if(i.length===0)return G.addBreadcrumb(H.Auth,"Unable to log in with key-based auth. Vault is not yet onboarded or has no secrets that can perform key-based auth.",X.Info),null;let o;try{for(let a of i)if(await Fc(e,a)){o=a;break}}catch(a){throw G.addBreadcrumb(H.Auth,"Unable to log in with key-based auth. Error checking auth factors.",X.Error),a}o||(o=i[0],G.addBreadcrumb(H.Auth,"No auth factor found, creating new user with first secret identifier.",X.Debug));try{return await Wc(e,t,{type:"key",secretIdentifier:o})}catch(a){throw G.addBreadcrumb(H.Auth,"Unable to log in with key-based auth. Error performing auth.",X.Error),a}}n(rS,"autoLoginWithKeyBasedAuth");d();h();var Af=n(async e=>{await e.removeQueries({queryKey:pr.user})},"removeUser"),Sf=n(async e=>{await e.resetQueries({queryKey:pr.user})},"resetUser"),lo=n(async e=>{await e.invalidateQueries({queryKey:pr.user})},"invalidateUser"),ni=n(async e=>{await e.invalidateQueries({queryKey:pr.authFactors})},"invalidateUserAuthFactors");var nS=n(e=>{let t=new Vc,r={getUser:n(i=>os(e,t,i),"getUser"),useUser:n(()=>ag(e,t),"useUser"),refreshTokens:n(()=>iS(e),"refreshTokens"),logIn:n(i=>Wc(e,t,i),"logIn"),isExistingAuthFactor:n(i=>Fc(e,i),"isExistingAuthFactor"),getAuthenticationKeys:n(()=>oS(e,t),"getAuthenticationKeys"),getLocalAuthenticationPublicKeys:n(()=>aS(e),"getLocalAuthenticationPublicKeys"),addAuthFactor:n(i=>cS(e,t,i),"addAuthFactor"),deleteAuthFactor:n(i=>uS(e,t,i),"deleteAuthFactor"),deleteAllAuthFactors:n(()=>lS(e,t),"deleteAllAuthFactors"),subscribe:n((i,o)=>t.subscribe(i,o),"subscribe"),logOut:n(()=>fS(e,t),"logOut")};return k0(async(i={})=>{let{refresh:o=!1,skipAutoLogin:a=!1}=i;return o&&await lo(e.queryClient),(await r.getUser({skipAutoLogin:a}))?.accessToken??null}),r},"createAuthRepository"),iS=n(async e=>{let t=await zc(e.storage);if(!t)return!1;let r=await Lc(e.authConfig,t.refreshToken);return await is(e.storage,r),await e.queryClient.setQueryData(pr.user,uo(r)),!0},"refreshTokens"),oS=n(async(e,t)=>({authenticationPublicKeys:(await sS(e,t)).map(i=>i.publicKey)}),"getAuthenticationKeys"),sS=n(async(e,t)=>{let r=kr(),i=await os(e,t);if(!i)throw new Error("User not authenticated.");let{data:o}=await vt.bearer(i.accessToken).get(`${r}${ao}`),a=Ec.safeParse(o);if(!a.success)throw new Error("Unable to parse auth factors response.");return a.data.authenticationKeys??[]},"getAuthenticationKeysInternal"),aS=n(async e=>{try{let t=ri(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),i={};for(let o of r)i[o]=await t.getAuthenticationPublicKey(o);return i}catch{return{}}},"getLocalAuthenticationPublicKeys"),cS=n(async(e,t,{secretIdentifier:r})=>{let i=kr(),o=ri(e.signer,"Signer is required for key-based auth."),a=await os(e,t);if(!a)throw new Error("User not authenticated.");G.addBreadcrumb(H.Auth,`Adding auth factor: ${r}`,X.Info);let l=await Yo(e.isServerTimeEnabled()),f=await o.sign(l,r);await vt.bearer(a.accessToken).post(`${i}${ao}`,{jwt:Xo(f)})},"addAuthFactor"),uS=n(async(e,t,{authenticationPublicKey:r})=>{let i=kr(),o=await os(e,t);if(!o)throw new Error("User not authenticated.");G.addBreadcrumb(H.Auth,`Deleting auth factor: ${r}`,X.Info),await vt.bearer(o.accessToken).delete(`${i}${ao}/${encodeURIComponent(r)}`)},"deleteAuthFactor"),lS=n(async(e,t)=>{let r=kr(),i=e.storage,o=await os(e,t);if(!o)throw new Error("User not authenticated.");G.addBreadcrumb(H.Auth,"Deleting all auth factors",X.Info),await vt.bearer(o.accessToken).delete(`${r}${ao}`),await i.remove(ng)},"deleteAllAuthFactors"),fS=n(async({storage:e},t)=>{await ig(e),t.emitLoggedOut()},"logOut");d();h();var dS=n((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let i=r.searchParams.get("code");if(!i)throw new Error("No authorization code");return i},"parseAuthCode");d();h();var hS=n((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let i=r.searchParams.get("error"),o=r.searchParams.get("error_description");if(i)throw new Error(`${i}: ${o}`,{cause:i});return!1},"redirectHasErrorParam");d();h();var pS=n(()=>nr()===Ct.Production?Sc.prod:Sc.staging,"getAuthClientID");d();h();var mS=n(()=>{let e=Ir(),{data:t}=oo(),r=pr.authFactors;return ft({queryKey:r,queryFn:n(async()=>{let o=await e.getLocalAuthenticationPublicKeys();if(Object.keys(o).length===0)return{};let a=[];try{if(t){let{authenticationPublicKeys:f=[]}=await e.getAuthenticationKeys();a=f}}catch(f){t&&f instanceof Error&&G.addBreadcrumb(H.Auth,`Unable to fetch existing AuthFactors for user (${t?.userID}): ${f.message}`,X.Error)}let l={};for(let[f,g]of Object.entries(o)){let x=a.includes(g);!x&&await e.isExistingAuthFactor(f)||(l[f]={authenticationPublicKey:g,isExistingAuthFactor:x})}return t&&Object.keys(l).length===0&&G.addBreadcrumb(H.Auth,`Unable to build AuthFactors map: 
- user: ${t?.userID}
- locally available auth factors: ${Object.keys(o).length}
- auth factors registered with user: ${a.length}`,X.Error),l},"queryFn"),retryOnMount:!1})},"useEligibleAuthFactors");d();h();d();h();var pa=n(()=>{let{data:e}=oo();return!!e},"useIsLoggedIn");function gS(e,t){let r=pa(),i;return e.enabled===void 0?i=r:typeof e.enabled=="function"?i=n(o=>(tg(typeof e.enabled=="function","expected enabled to be a function"),r&&e.enabled(o)),"enabled"):typeof e.enabled=="boolean"?i=r&&e.enabled:xe(e.enabled),ft({...e,enabled:i},t)}n(gS,"useAuthQuery");d();h();var yS=n(()=>{let e=_e(),t=Ir(),r=n(async({secretIdentifier:i})=>{await t.addAuthFactor({secretIdentifier:i}),await ni(e)},"mutationFn");return Ae({mutationFn:n(async i=>{try{return await r(i)}catch(o){G.addBreadcrumb(H.Auth,`Could not add auth factor: ${i.secretIdentifier}`,X.Error);let a;throw o instanceof Error?a=o:a=new Error(`Could not add auth factor: ${i.secretIdentifier}`),G.captureError(a,H.Auth),a}},"mutationFn")})},"useAddAuthFactor");d();h();var vS=n(()=>{let e=_e(),t=Ir(),r=n(async({authenticationPublicKey:i})=>{await t.deleteAuthFactor({authenticationPublicKey:i}),await ni(e)},"mutationFn");return Ae({mutationFn:n(async i=>{try{return await r(i)}catch(o){G.addBreadcrumb(H.Auth,"Could not remove auth factor!",X.Error);let a;throw o instanceof Error?a=o:a=new Error("Could not remove auth factor!"),G.captureError(a,H.Auth),a}},"mutationFn")})},"useRemoveAuthFactor");d();h();var wS=n(()=>{let{data:e}=oo();return e?.accessToken},"useAccessToken");d();h();var _i=he(Pt());d();h();var ma=class{static{n(this,"AccountAnalytics")}#e;#t;#r;constructor(t,r,i){this.#e=t,this.#t=r,this.#r=i}identifyAccount=n(async(t,r,i)=>{let o=!!r.addresses.find(C=>pe.isSolanaNetworkID(C.networkID)),a=!!r.addresses.find(C=>pe.isEthereumNetworkID(C.networkID)),l=!!r.addresses.find(C=>pe.isBitcoinNetworkID(C.networkID)),f=!!r.addresses.find(C=>pe.isSuiNetworkID(C.networkID)),g={hasSolanaAddress:o,hasEthereumAddress:a,hasBitcoinAddress:l,hasSuiAddress:f},x=i.enabledChainIDs.map(C=>pe[C].name).join(", "),T=new Set;for(let C of t)switch(C.type){case P.Seed:case P.Seedless:T.add(C.seedIdentifier);break;case P.ReadOnly:case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.KMSVault:break;default:xe(C);break}let{id:I,type:_}=await this.getIdentifyID(r),O=await this.getUsername();switch(r.type){case P.Seed:case P.Seedless:this.#e.identify(I,{...g,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(T),accountID:r.identifier,isReadOnly:!1,enabledChains:x,idType:_,username:O});break;case P.ReadOnly:this.#e.identify(I,{...g,accountType:r.type,isReadOnly:!0,enabledChains:x,idType:_,username:O});break;case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.KMSVault:this.#e.identify(I,{...g,accountType:r.type,rootIds:Array.from(T),accountID:r.identifier,isReadOnly:!1,enabledChains:x,idType:_,username:O});break;default:xe(r)}},"identifyAccount");getIdentifyID=n(async t=>{let r=await this.#t.getUser().catch(()=>{});return r?{type:"userID",id:r.userID}:{type:"accountID",id:t.identifier}},"getIdentifyID");getUsername=n(async()=>{let t=await this.#r.getUserProfile().catch(()=>{});if(t)return t.username},"getUsername");onAppSessionStart=n(t=>{let r=new Map;for(let i of t){if(i.type===P.ReadOnly)continue;let{addresses:o,identifier:a}=i;for(let l of o){let f=pe.getChainName(l.networkID),g={type:i.type,accountId:a,id:l.address};if(!r.get(f))r.set(f,[g]);else{let x=r.get(f)??[];r.set(f,[...x,g])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})},"onAppSessionStart")};var ug=(0,_i.createContext)(null);function bS({children:e,accountAnalytics:t}){return _i.default.createElement(ug.Provider,{value:t},e)}n(bS,"AccountAnalyticsProvider");function xS(){let e={capture:n(async()=>{},"capture"),addUserProperties:n(async()=>{},"addUserProperties"),identify:n(async()=>{},"identify"),getDeviceId:n(async()=>"","getDeviceId"),setDeviceId:n(()=>{},"setDeviceId"),setAnalyticsOptedOut:n(async()=>{},"setAnalyticsOptedOut"),setDisplayLanguage:n(async()=>{},"setDisplayLanguage"),screen:n(()=>{},"screen"),page:n(()=>{},"page"),rudderClient:null},t={getUser:n(async()=>{throw new Error("No user available")},"getUser")},r={getUserProfile:n(async()=>{throw new Error("No user profile available")},"getUserProfile")};return new ma(e,t,r)}n(xS,"createNoOpAccountAnalytics");function Ef(){let e=(0,_i.useContext)(ug),t=(0,_i.useMemo)(()=>xS(),[]);return e||t}n(Ef,"useAccountAnalytics");d();h();d();h();d();h();function Wt(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(M.NODE_ENV!=="production"){var o=kS[e],a=o?typeof o=="function"?o.apply(null,r):o:"unknown error nr: "+e;throw Error("[Immer] "+a)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(l){return"'"+l+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}n(Wt,"n");function ss(e){return!!e&&!!e[mr]}n(ss,"r");function ho(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===PS}(e)||Array.isArray(e)||!!e[yg]||!!e.constructor[yg]||Cf(e)||Rf(e))}n(ho,"t");function ya(e,t,r){r===void 0&&(r=!1),cs(e)===0?(r?Object.keys:Vf)(e).forEach(function(i){r&&typeof i=="symbol"||t(i,e[i],e)}):e.forEach(function(i,o){return t(o,i,e)})}n(ya,"i");function cs(e){var t=e[mr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Cf(e)?2:Rf(e)?3:0}n(cs,"o");function kf(e,t){return cs(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}n(kf,"u");function AS(e,t){return cs(e)===2?e.get(t):e[t]}n(AS,"a");function vg(e,t,r){var i=cs(e);i===2?e.set(t,r):i===3?(e.delete(t),e.add(r)):e[t]=r}n(vg,"f");function SS(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}n(SS,"c");function Cf(e){return IS&&e instanceof Map}n(Cf,"s");function Rf(e){return _S&&e instanceof Set}n(Rf,"v");function fo(e){return e.o||e.t}n(fo,"p");function Uf(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=BS(e);delete t[mr];for(var r=Vf(t),i=0;i<r.length;i++){var o=r[i],a=t[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}n(Uf,"l");function Nf(e,t){return t===void 0&&(t=!1),Df(e)||ss(e)||!ho(e)||(cs(e)>1&&(e.set=e.add=e.clear=e.delete=ES),Object.freeze(e),t&&ya(e,function(r,i){return Nf(i,!0)},!0)),e}n(Nf,"d");function ES(){Wt(2)}n(ES,"h");function Df(e){return e==null||typeof e!="object"||Object.isFrozen(e)}n(Df,"y");function En(e){var t=KS[e];return t||Wt(18,e),t}n(En,"b");function lg(){return M.NODE_ENV==="production"||as||Wt(0),as}n(lg,"_");function Mf(e,t){t&&(En("Patches"),e.u=[],e.s=[],e.v=t)}n(Mf,"j");function Hc(e){Pf(e),e.p.forEach(MS),e.p=null}n(Hc,"O");function Pf(e){e===as&&(as=e.l)}n(Pf,"g");function fg(e){return as={p:[],l:as,h:e,m:!0,_:0}}n(fg,"w");function MS(e){var t=e[mr];t.i===0||t.i===1?t.j():t.O=!0}n(MS,"S");function Tf(e,t){t._=t.p.length;var r=t.p[0],i=e!==void 0&&e!==r;return t.h.g||En("ES5").S(t,e,i),i?(r[mr].P&&(Hc(t),Wt(4)),ho(e)&&(e=$c(t,e),t.l||Gc(t,e)),t.u&&En("Patches").M(r[mr].t,e,t.u,t.s)):e=$c(t,r,[]),Hc(t),t.u&&t.v(t.u,t.s),e!==wg?e:void 0}n(Tf,"P");function $c(e,t,r){if(Df(t))return t;var i=t[mr];if(!i)return ya(t,function(a,l){return dg(e,i,t,a,l,r)},!0),t;if(i.A!==e)return t;if(!i.P)return Gc(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var o=i.i===4||i.i===5?i.o=Uf(i.k):i.o;ya(i.i===3?new Set(o):o,function(a,l){return dg(e,i,o,a,l,r)}),Gc(e,o,!1),r&&e.u&&En("Patches").R(i,r,e.u,e.s)}return i.o}n($c,"M");function dg(e,t,r,i,o,a){if(M.NODE_ENV!=="production"&&o===r&&Wt(5),ss(o)){var l=$c(e,o,a&&t&&t.i!==3&&!kf(t.D,i)?a.concat(i):void 0);if(vg(r,i,l),!ss(l))return;e.m=!1}if(ho(o)&&!Df(o)){if(!e.h.F&&e._<1)return;$c(e,o),t&&t.A.l||Gc(e,o)}}n(dg,"A");function Gc(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&Nf(t,r)}n(Gc,"x");function If(e,t){var r=e[mr];return(r?fo(r):e)[t]}n(If,"z");function hg(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var i=Object.getOwnPropertyDescriptor(r,t);if(i)return i;r=Object.getPrototypeOf(r)}}n(hg,"I");function Bf(e){e.P||(e.P=!0,e.l&&Bf(e.l))}n(Bf,"k");function _f(e){e.o||(e.o=Uf(e.t))}n(_f,"E");function Kf(e,t,r){var i=Cf(t)?En("MapSet").N(t,r):Rf(t)?En("MapSet").T(t,r):e.g?function(o,a){var l=Array.isArray(o),f={i:l?1:0,A:a?a.A:lg(),P:!1,I:!1,D:{},l:a,t:o,k:null,o:null,j:null,C:!1},g=f,x=Of;l&&(g=[f],x=ga);var T=Proxy.revocable(g,x),I=T.revoke,_=T.proxy;return f.k=_,f.j=I,_}(t,r):En("ES5").J(t,r);return(r?r.A:lg()).p.push(i),i}n(Kf,"R");function TS(e){return ss(e)||Wt(22,e),n(function t(r){if(!ho(r))return r;var i,o=r[mr],a=cs(r);if(o){if(!o.P&&(o.i<4||!En("ES5").K(o)))return o.t;o.I=!0,i=pg(r,a),o.I=!1}else i=pg(r,a);return ya(i,function(l,f){o&&AS(o.t,l)===f||vg(i,l,t(f))}),a===3?new Set(i):i},"n")(e)}n(TS,"D");function pg(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Uf(e)}n(pg,"F");var mg,as,Lf=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",IS=typeof Map<"u",_S=typeof Set<"u",gg=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",wg=Lf?Symbol.for("immer-nothing"):((mg={})["immer-nothing"]=!0,mg),yg=Lf?Symbol.for("immer-draftable"):"__$immer_draftable",mr=Lf?Symbol.for("immer-state"):"__$immer_state";var kS={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},PS=""+Object.prototype.constructor,Vf=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,BS=Object.getOwnPropertyDescriptors||function(e){var t={};return Vf(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},KS={},Of={get:n(function(e,t){if(t===mr)return e;var r=fo(e);if(!kf(r,t))return function(o,a,l){var f,g=hg(a,l);return g?"value"in g?g.value:(f=g.get)===null||f===void 0?void 0:f.call(o.k):void 0}(e,r,t);var i=r[t];return e.I||!ho(i)?i:i===If(e.t,t)?(_f(e),e.o[t]=Kf(e.A.h,i,e)):i},"get"),has:n(function(e,t){return t in fo(e)},"has"),ownKeys:n(function(e){return Reflect.ownKeys(fo(e))},"ownKeys"),set:n(function(e,t,r){var i=hg(fo(e),t);if(i?.set)return i.set.call(e.k,r),!0;if(!e.P){var o=If(fo(e),t),a=o?.[mr];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(SS(r,o)&&(r!==void 0||kf(e.t,t)))return!0;_f(e),Bf(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},"set"),deleteProperty:n(function(e,t){return If(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,_f(e),Bf(e)):delete e.D[t],e.o&&delete e.o[t],!0},"deleteProperty"),getOwnPropertyDescriptor:n(function(e,t){var r=fo(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:i.enumerable,value:r[t]}},"getOwnPropertyDescriptor"),defineProperty:n(function(){Wt(11)},"defineProperty"),getPrototypeOf:n(function(e){return Object.getPrototypeOf(e.t)},"getPrototypeOf"),setPrototypeOf:n(function(){Wt(12)},"setPrototypeOf")},ga={};ya(Of,function(e,t){ga[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ga.deleteProperty=function(e,t){return M.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Wt(13),ga.set.call(this,e,t,void 0)},ga.set=function(e,t,r){return M.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Wt(14),Of.set.call(this,e[0],t,r,e[0])};var OS=function(){function e(r){var i=this;this.g=gg,this.F=!0,this.produce=function(o,a,l){if(typeof o=="function"&&typeof a!="function"){var f=a;a=o;var g=i;return function(R){var j=this;R===void 0&&(R=f);for(var F=arguments.length,Y=Array(F>1?F-1:0),L=1;L<F;L++)Y[L-1]=arguments[L];return g.produce(R,function(ce){var te;return(te=a).call.apply(te,[j,ce].concat(Y))})}}var x;if(typeof a!="function"&&Wt(6),l!==void 0&&typeof l!="function"&&Wt(7),ho(o)){var T=fg(i),I=Kf(i,o,void 0),_=!0;try{x=a(I),_=!1}finally{_?Hc(T):Pf(T)}return typeof Promise<"u"&&x instanceof Promise?x.then(function(R){return Mf(T,l),Tf(R,T)},function(R){throw Hc(T),R}):(Mf(T,l),Tf(x,T))}if(!o||typeof o!="object"){if((x=a(o))===void 0&&(x=o),x===wg&&(x=void 0),i.F&&Nf(x,!0),l){var O=[],C=[];En("Patches").M(o,x,O,C),l(O,C)}return x}Wt(21,o)},this.produceWithPatches=function(o,a){if(typeof o=="function")return function(x){for(var T=arguments.length,I=Array(T>1?T-1:0),_=1;_<T;_++)I[_-1]=arguments[_];return i.produceWithPatches(x,function(O){return o.apply(void 0,[O].concat(I))})};var l,f,g=i.produce(o,a,function(x,T){l=x,f=T});return typeof Promise<"u"&&g instanceof Promise?g.then(function(x){return[x,l,f]}):[g,l,f]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}n(e,"e");var t=e.prototype;return t.createDraft=function(r){ho(r)||Wt(8),ss(r)&&(r=TS(r));var i=fg(this),o=Kf(this,r,void 0);return o[mr].C=!0,Pf(i),o},t.finishDraft=function(r,i){var o=r&&r[mr];M.NODE_ENV!=="production"&&(o&&o.C||Wt(9),o.I&&Wt(10));var a=o.A;return Mf(a,i),Tf(void 0,a)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!gg&&Wt(20),this.g=r},t.applyPatches=function(r,i){var o;for(o=i.length-1;o>=0;o--){var a=i[o];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}o>-1&&(i=i.slice(o+1));var l=En("Patches").$;return ss(r)?l(r,i):this.produce(r,function(f){return l(f,i)})},e}(),gr=new OS,Ff=gr.produce,sC=gr.produceWithPatches.bind(gr),aC=gr.setAutoFreeze.bind(gr),cC=gr.setUseProxies.bind(gr),uC=gr.applyPatches.bind(gr),lC=gr.createDraft.bind(gr),fC=gr.finishDraft.bind(gr),dC=Ff;d();h();var et;(function(e){e.TermsHaveBeenAcknowledgedLastSeenVersion="termsHaveBeenAcknowledgedLastSeenVersion",e.NotificationsHaveBeenAcknowledgedLastSeenVersion="notificationsHaveBeenAcknowledgedLastSeenVersion",e.NetworkSetting="networkSetting",e.DeveloperMode="developerMode",e.SelectedAccount=".phantom-labs.account.selectedAccount",e.AccountsMetadata=".phantom-labs.account.accountMetadata",e.AccountsBalanceMetadata=".phantom-labs.account.accountMetadata.balance",e.MigratedWithInvalidChecksum=".phantom-labs.account.migratedWithInvalidChecksum",e.AccountMetas="accountMetas"})(et||(et={}));var CS=[et.AccountsMetadata,et.DeveloperMode,et.NetworkSetting,et.SelectedAccount,et.TermsHaveBeenAcknowledgedLastSeenVersion,et.NotificationsHaveBeenAcknowledgedLastSeenVersion];var yC=new Error("Failed to clear selected account index");async function jf(e){try{let t=await e.get(et.SelectedAccount);return t?.version===2?t.identifier:null}catch{throw RS}}n(jf,"getSelectedAccountIdentifier");var RS=new Error("Failed to get selected account identifier");async function Pr(e,t){try{let r={version:2,identifier:t};return await e.set(et.SelectedAccount,r)}catch{throw US}}n(Pr,"setSelectedAccountIdentifier");var US=new Error("Failed to set selected account identifier");var bg=new Error("Failed to add user account metadata to storage"),qf=new Error("Could not find account metadata in storage");async function xg(e,t,r){let i=await e.get(et.AccountsMetadata);if(!i)throw qf;let o=i.accounts[t];o?o.name=r:(o={name:r},i.accounts[t]=o),await e.set(et.AccountsMetadata,i)}n(xg,"setMultiChainAccountName");async function Ag(e,t,r){let i=await e.get(et.AccountsMetadata);if(!i)throw qf;let o=i.accounts[t];o?o.icon=r:(o={icon:r,name:wn.t("onboardingImportAccountsAccountName",{walletIndex:""})},i.accounts[t]=o),await e.set(et.AccountsMetadata,i)}n(Ag,"setMultiChainAccountIcon");async function Sg(e,t,r){let i=await e.get(et.AccountsBalanceMetadata);i||(i={version:1,accounts:{}});let o=i.accounts[t];o?o.balance=r:(o={balance:r},i.accounts[t]=o),await e.set(et.AccountsBalanceMetadata,i)}n(Sg,"setAccountBalance");async function ki(e,t,r){try{let i=await e.get(et.AccountsMetadata);i?i.accounts[t]=r:i={version:1,accounts:{[t]:r}},await e.set(et.AccountsMetadata,i)}catch{throw bg}}n(ki,"addMultiChainAccountMetadata");async function Eg(e,t){try{let r=await e.get(et.AccountsMetadata);r?r.accounts=Ff(r.accounts,i=>{for(let[o,a]of Object.entries(t))i[o]||(i[o]={name:""}),i[o].name=a.name,i[o].icon=a.icon??i[o].icon,i[o].connectedDevices=a.connectedDevices??i[o].connectedDevices}):r={version:1,accounts:{...t}},await e.set(et.AccountsMetadata,r)}catch{throw bg}}n(Eg,"addAccountMetadataBatch");async function Mg(e,t){let r=await e.get(et.AccountsBalanceMetadata);r||(r={version:1,accounts:{}});let i=r.accounts[t];return i||(i={}),i}n(Mg,"getMultiChainAccountBalanceMetadata");async function Tg(e,t){let r=await e.get(et.AccountsMetadata);r||(r={version:1,accounts:{}});let i=r.accounts[t];return i||(i={name:wn.t("onboardingImportAccountsAccountName",{walletIndex:""})}),{...i}}n(Tg,"getMultiChainAccountMetadata");async function Ig(e){let t=await e.get(et.AccountsBalanceMetadata);return t?t.accounts:{}}n(Ig,"getAllMultiChainAccountBalanceMetadata");async function _g(e){let t=await e.get(et.AccountsMetadata),r={},i=new Set([...Object.keys(t?.accounts||{})]);for(let o of i){let a=t?.accounts[o]||{name:wn.t("onboardingImportAccountsAccountName",{walletIndex:""})};r[o]={...a}}return r}n(_g,"getAllMultiChainAccountMetadata");async function NS(e,t){let r=await e.get(et.AccountsBalanceMetadata);r&&(delete r.accounts[t],await e.set(et.AccountsBalanceMetadata,r))}n(NS,"removeMultiChainAccountBalanceMetadata");async function Zc(e,t){let r=await e.get(et.AccountsMetadata);if(!r)throw qf;delete r.accounts[t],await e.set(et.AccountsMetadata,r),await NS(e,t)}n(Zc,"removeMultiChainAccountMetadata");var DS={...om(et.AccountsMetadata,[Qo,sa,aa,...tt.selectedAccountIdentifier()])};d();h();var KC=p.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."}),zf;(function(e){e.UnableToCreateBip39Dependency="Unable to create bip39 dependency",e.FailedToFetchBip39Mnemonic="Failed to fetch bip39 mn*monic from storage",e.FailedToParseBip39Mnemonic="Failed to parse bip39 mn*monic as JSON object",e.FailedToDecryptBip39Mnemonic="Failed to decrypt bip39 mn*monic",e.FailedToConstructBip39Entropy="Failed to construct bip39 mn*monic from entropy",e.FailedToFetchDeprecatedMnemonic="Failed to fetch deprecated mn*monic from storage",e.FailedToParseDeprecatedMnemonic="Failed to parse deprecated mn*monic as JSON object",e.FailedToDecryptDeprecatedMnemonic="Failed to decrypt deprecated mn*monic",e.FailedToParseRawDeprecatedMnemonic="Failed to parse deprecated mn*monic from raw JSON",e.FailedToCreateDeprecatedMnemonicString="Failed to create deprecated m*monic from a string",e.FailedToCreateDeprecatedMnemonicStringArray="Failed to create deprecated mn*monic from a string array",e.FailedToCreateDeprecatedMnemonicObjectUint8Array="Failed to create deprecated mn*monic from an object or uint8array",e.FailedToFetchAccountMetas="Failed to fetch account metas from storage",e.NoSeed="No legacy se*d available"})(zf||(zf={}));var Wf;(function(e){e.InvalidChecksum="Se*d has invalid checksum",e.InvalidEntropy="Se*d has invalid entropy",e.LessThan12Words="Se*d has less than twelve words",e.InvalidWordCount="Se*d has invalid world count",e.InvalidWords="Se*d has invalid words",e.InternalError="Unknown error fetching se*d"})(Wf||(Wf={}));var Hf;(function(e){e.PrivateKey="privateKey",e.Mnemonic="mnemonic",e.Seedless="seedless"})(Hf||(Hf={}));d();h();var LS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let g=e.chains[f];if(g)switch(g.chainType){case k.EVM:case k.Solana:{o.push({networkID:a,addressType:f,address:g.address});break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.addresses[a]});break}case k.Sui:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getSeedAccountAddresses"),VS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let g=e.chains[f];if(g)switch(g.chainType){case k.EVM:case k.Solana:{o.push({networkID:a,addressType:f,address:g.address});break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.addresses[a]});break}case k.Sui:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getLedgerAccountAddresses"),FS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l))for(let f of pe[l].addressTypes)r.includes(f)&&e.chainType===f&&o.push({networkID:a,addressType:f,address:e.address})}return o},"getSolanaSeedVaultAccountAddresses"),jS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let g=e.chains[f];if(g)switch(g.chainType){case k.EVM:case k.Solana:{o.push({networkID:a,addressType:f,address:g.address});break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.addresses[a]});break}case k.Sui:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getKMSVaultAccountAddresses"),qS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l)){for(let f of pe[l].addressTypes)if(r.includes(f)&&e.chainType===f)switch(e.chainType){case k.EVM:case k.Solana:{o.push({networkID:a,addressType:f,address:e.address});break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:e.publicKey,address:e.addresses[a]});break}case k.Sui:{o.push({networkID:a,addressType:f,publicKey:e.publicKey,address:e.address});break}default:xe(e)}}}return o},"getPrivateKeyAccountAddresses"),zS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l)){for(let f of pe[l].addressTypes)if(r.includes(f))for(let[g,x]of Object.entries(e.addresses))g===f&&o.push({networkID:a,addressType:f,address:x})}}return o},"getReadOnlyAccountAddresses"),Qc=n((e,t,r,i,o,a)=>{let l;switch(a?l=Object.values(o.setting):l=t,l=l.sort((f,g)=>pe.compareNetworkID(f,g)),e.type){case P.Seedless:case P.Seed:return LS(e,l,r,i);case P.Ledger:return VS(e,l,r,i);case P.SeedVault:return FS(e,l,r,i);case P.KMSVault:return jS(e,l,r,i);case P.PrivateKey:return qS(e,l,r,i);case P.ReadOnly:return zS(e,l,r,i)}},"convertVaultAccountToChainAddresses");d();h();var kg=he(en());var $f=n(()=>({addresses:new Set,publicKeys:new Set}),"createEmptyIdentifiers"),us=n((e,t)=>{t&&(t instanceof Uint8Array?e.publicKeys.add(kg.Buffer.from(t).toString("base64")):typeof t=="string"&&e.publicKeys.add(t))},"addPublicKey"),WS=n((e,t)=>{if(!e||typeof e!="object")return;let r=e,{chainType:i}=r;if(i)switch(i){case k.Solana:case k.EVM:{let o=r,a;typeof o.address=="string"?a=o.address:typeof o.publicKey=="string"&&(a=o.publicKey),a&&t.addresses.add(a);break}case k.Sui:{let o=r.address;typeof o=="string"&&t.addresses.add(o),us(t,r.publicKey);break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let o=r.addresses??{};Object.values(o).forEach(a=>{a&&t.addresses.add(a)}),us(t,r.publicKey);break}default:break}},"addChainAddressToSnapshot"),Pg=n((e,t)=>{t.addresses.forEach(r=>e.addresses.add(r)),t.publicKeys.forEach(r=>e.publicKeys.add(r))},"mergeSnapshots"),Jc=n(e=>{let t=$f();return e&&Object.values(e).forEach(r=>{WS(r,t)}),t},"collectIdentifiersFromChains"),Bg=n(e=>{let t=$f();switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:case P.KMSVault:{Pg(t,Jc(e.chains));break}case P.PrivateKey:{"addresses"in e?(Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),us(t,e.publicKey)):"address"in e&&"publicKey"in e&&e.chainType===k.Sui?(t.addresses.add(e.address),us(t,e.publicKey)):"address"in e&&t.addresses.add(e.address);break}case P.SeedVault:{t.addresses.add(e.address);break}case P.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultAccount"),Gf=n(e=>{let t=$f();switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:case P.KMSVault:{Pg(t,Jc(e.chains));break}case P.PrivateKey:{switch(e.chainType){case k.Solana:case k.EVM:{t.addresses.add(e.publicKey);break}case k.Sui:{t.addresses.add(e.address),us(t,e.publicKey);break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),us(t,e.publicKey);break}}break}case P.SeedVault:{t.addresses.add(e.publicKey);break}case P.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultStorageAccount");d();h();var HS=n(({index:e,offsetIndex:t})=>({name:wn.t("onboardingImportAccountsAccountName",{walletIndex:t+e+1})}),"createAccountMetadata");d();h();var Zf=n(e=>{switch(e){case ee.BitcoinTaproot:case ee.BitcoinNativeSegwit:case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:case ee.Bip44ChangeSolana:case ee.Bip44Ethereum:return!0;case ee.Bip44Solana:case ee.DeprecatedSolana:case ee.Bip44RootSolana:case ee.Bip44RootEthereum:case ee.Bip44EthereumSecondary:case ee.Bip44EthereumTertiary:case ee.Bip44Sui:return!1}},"isRecommendedDerivationPathType");d();h();var $S=n(({pathType:e,index:t})=>{switch(e){case ee.Bip44RootEthereum:case ee.Bip44RootSolana:return"root-derivation-path-group";case ee.Bip44ChangeSolana:case ee.Bip44Ethereum:case ee.Bip44Sui:case ee.BitcoinTaproot:case ee.BitcoinNativeSegwit:case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:return`recommended-group:index-${t}`;case ee.Bip44EthereumSecondary:case ee.Bip44Solana:return`secondary-group:index-${t}`;case ee.Bip44EthereumTertiary:case ee.DeprecatedSolana:return`tertiary-group:index-${t}`}},"getDerivationPathGroupKey");d();h();var GS=n(e=>e==null?!1:[P.Ledger,P.SeedVault].includes(e),"isHardwareWalletAccountType");d();h();d();h();var ls="Trying to find a selected account, but there no accounts in the vault.",va="Missing ChainAvailability.",Kg=n((e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,"NoAccountFoundFromIdentifierErrorMsg"),Qf=new Error("The current account group has no valid bitcoin address"),Jf=new Error("The current account group has no valid EIP-155 address"),Yf=new Error("The current account group has no valid solana address"),Xf=new Error("The current account group has no valid sui address"),Og=new Error("The current account group has no valid address or the the chain type was unsupported"),yR=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),vR=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");function Cg(e,t){let i=(e?.addresses??[]).find(({addressType:o})=>o===t);if(!e?.addresses||!i)switch(t){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:throw Qf;case k.EVM:throw Jf;case k.Solana:throw Yf;case k.Sui:throw Xf;default:throw Og}return i}n(Cg,"getChainAddressByAccount");function ZS(e,t){return Cg(e,t)?.address}n(ZS,"getAddressByAccount");function QS(e){switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:return e.chains?Object.entries(e.chains).map(([t,r])=>({addressType:t,address:"address"in r?r.address:Object.values(r.addresses)[0]})):[];case P.PrivateKey:return e.chainType===k.BitcoinTaproot||e.chainType===k.BitcoinNativeSegwit||e.chainType===k.BitcoinNestedSegwit||e.chainType===k.BitcoinLegacy?Object.entries(e.addresses).map(([t,r])=>({addressType:e.chainType,address:r})):[{addressType:e.chainType,address:"address"in e?e.address:""}];case P.ReadOnly:return Object.entries(e.addresses).map(([t,r])=>({addressType:t,address:r||""}));case P.SeedVault:return[{addressType:"solana",address:e.address}];default:return[]}}n(QS,"getAddressesFromAccount");function ii(e){return e?QS(e).filter(r=>r.address):[]}n(ii,"getWalletAddressesFromAccount");d();h();var JS=n(e=>{let t=e.toString();return oa(t)},"formatAddressValue");d();h();function YS(e){let t=e.endsWith(".sol"),r=e==="@",i=e.startsWith("@")&&e.length>1;return[t,r,i]}n(YS,"parseBonfidaHandle");d();h();function XS(e){return[e.endsWith(".eth")]}n(XS,"parseENSHandle");d();h();var eE=n(async(e,t,r)=>{let o=(await e.fetchAllAccounts()).find(l=>{switch(l.type){case P.Seed:case P.Seedless:return l.seedIdentifier===r;case P.PrivateKey:return l.privateKeyIdentifier===r;case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:return!1;default:xe(l)}});if(!o)throw new Error("Unable to find account to sign client JWT with.");let a=await e.sign(o.identifier,{isJWT:!0,data:t});if(a.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in a)||!a.signedJWT)throw new Error("No JWT from vault signing.");return a.signedJWT},"signClientJWT");d();h();var tE=n(async e=>[...(await e.fetchAllAccounts()).reduce((o,a)=>{switch(a.type){case P.Seed:case P.Seedless:{o.add(a.seedIdentifier);break}case P.PrivateKey:{o.add(a.privateKeyIdentifier);break}case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:break;default:xe(a);break}return o},new Set)],"getAllSecretIdentifiers");d();h();var rE=n((e,t)=>e.filter(r=>{switch(r.type){case P.Seed:case P.Seedless:return r.seedIdentifier===t;case P.PrivateKey:return r.privateKeyIdentifier===t;case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:return!1;default:xe(r);return}}),"getAccountsForSecretId");d();h();function nE(e){return Ai.get(e).networkNameOverride?.(e)??pe.getNetworkName(e,!0)}n(nE,"getBadgedNetworkName");d();h();function iE(){return{version:1,setting:{[k.Solana]:$o,[k.EVM]:Go,[k.Sui]:Ql}}}n(iE,"getDefaultNetworkSetting");d();h();d();h();d();h();function Rg(e){switch(e){case k.Solana:return{curve:"Ed25519",addressFormat:"Solana"};case k.EVM:return{curve:"Secp256k1",addressFormat:"Ethereum"};case k.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case k.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case k.BitcoinNestedSegwit:case k.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin address format ${e}.`);case k.Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported chain type: ${e}`)}}n(Rg,"getKMSCurveAndFormatForChainType");function Ug(e){switch(e){case ee.Bip44RootSolana:case ee.Bip44Solana:case ee.Bip44ChangeSolana:case ee.DeprecatedSolana:return{curve:"Ed25519",addressFormat:"Solana"};case ee.Bip44RootEthereum:case ee.Bip44Ethereum:case ee.Bip44EthereumSecondary:case ee.Bip44EthereumTertiary:return{curve:"Secp256k1",addressFormat:"Ethereum"};case ee.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case ee.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin derivation path ${e}.`);case ee.Bip44Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported derivation path type: ${e}`)}}n(Ug,"getKMSCurveAndFormatForPathType");function Yc(e,t=0){let r=[];for(let i of e)try{let o=Ug(i),a=Jn({pathType:i,index:t});r.push({curve:o.curve,derivationPath:a,addressFormat:o.addressFormat})}catch{continue}return r}n(Yc,"convertDerivationPathTypesToKMSInfo");async function oE(e,t=0){let r=qo().enabledAddressTypes,i=Jt(r);return Yc(i,t)}n(oE,"getKMSDerivationPathsForIndex");var sE=new Set([k.Solana,k.EVM,k.Sui,k.BitcoinNativeSegwit,k.BitcoinTaproot]);async function aE(e,t=0){let i=(await qo()).enabledAddressTypes.filter(a=>sE.has(a));return Jt(i).map(a=>({chainType:rn.getAddressType(a),derivationIndex:t,pathType:a}))}n(aE,"getDefaultKMSVaultChainConfigs");async function Xc(e,t=0){let r=await aE(e,t),i=r.map(l=>l.pathType),o=Yc(i,t),a=r.map(({chainType:l,pathType:f})=>{let{addressFormat:g}=Rg(l);return{chainType:l,pathType:f,derivationPath:Jn({pathType:f,index:t}),addressFormat:g}});return{derivations:o,conversionMetadata:a}}n(Xc,"getDefaultKMSVaultDerivationsAndMetadata");d();h();var Dt="vault";function po(e,t=Dt){return`kms:${e}:${t}`}n(po,"getKMSVaultIdentifier");d();h();d();h();d();h();d();h();d();h();var oi=class e extends Error{static{n(this,"KMSRpcError")}response;method;errorCode;requestId;constructor(t,r){let i=r.data,o=i?.error||"Unknown error",a=i?.requestId,l=`KMS RPC call failed: ${t} returned ${r.status} ${r.statusText} - ${o}${a?` (requestId: ${a})`:""}`;super(l),this.name="KMSRpcError",this.response=r,this.method=t,this.requestId=a,Object.setPrototypeOf(this,e.prototype)}};var cE="00000000-0000-0000-0000-000000000000",uE="/v1/wallets/kms/rpc";async function Se(e,t,r,i){let o={method:t,params:r,timestampMs:await Ac()},a=JSON.stringify(o),l;try{let T=await e.getPublicKey(),I=await e.signRpcPayload(o);l=ct(Buffer.from(JSON.stringify({publicKey:T,signature:I,kind:"PKI"}),"utf-8"))}catch(T){throw new Error(`[KMS] Failed to authenticate rpc call: ${T instanceof Error?T.message:"Unknown error"}`)}let f=M.WALLET_SERVICE_API_URL,x=await(f?vt.api("custom",f):vt.api()).noBearer().post(uE,a,{headers:{"Content-Type":"application/json","X-Phantom-Stamp":l,"X-App-Id":cE},validateStatus:!1});if(!Vo(x))throw new oi(t,x);return i.parse(x.data)}n(Se,"rpcCall");d();h();d();h();var td=p.enum(["Ed25519","Secp256k1"]),rd=p.enum(["Ethereum","Solana","BitcoinSegwit","Sui","BitcoinTaproot"]),Et=p.object({curve:td,derivationPath:p.string(),addressFormat:rd}),Pi=Et.extend({address:p.string(),publicKey:p.string().regex(fc)}),Ng=p.object({walletId:p.string(),walletName:p.string(),tags:p.array(p.string())}),aU=p.object({error:p.string(),requestId:p.string().optional()}),lE=p.object({kind:p.literal("RLP_ENCODED"),bytes:p.string()}),fE=p.object({kind:p.literal("PSBT"),bytes:p.string()}),nd=p.union([p.array(p.number().int().min(0)),p.string(),lE,fE]),tu=p.object({envelope:p.string(),publicKey:p.string(),proof:p.string().optional()}),Mn=p.enum(["Ed25519","Secp256r1","Secp256k1","Secp256k1Keccak256"]),cU=p.object({publicKey:p.array(p.number().int().min(0)),algorithm:Mn}),uU=p.discriminatedUnion("authenticatorKind",[p.object({authenticatorKind:p.literal("keypair"),publicKey:p.array(p.number().int().min(0)),algorithm:Mn}),p.object({authenticatorKind:p.literal("passkey")}),p.object({authenticatorKind:p.literal("oidc")})]),id=p.discriminatedUnion("authenticatorKind",[p.object({authenticatorKind:p.literal("keypair"),publicKey:p.string(),algorithm:Mn,authenticatorName:p.string()}),p.object({authenticatorKind:p.literal("passkey"),authenticatorName:p.string()}),p.object({authenticatorKind:p.literal("oidc"),authenticatorName:p.string(),jwksUrl:p.string().url(),idTokenClaims:p.object({sub:p.string(),iss:p.string(),aud:p.string().nullish().default(null)})})]),dE=p.discriminatedUnion("authenticatorKind",[p.object({authenticatorKind:p.literal("keypair"),publicKey:p.string(),algorithm:Mn,authenticatorName:p.string(),id:p.string(),createdAtMs:p.number()}),p.object({authenticatorKind:p.literal("passkey"),authenticatorName:p.string(),id:p.string(),createdAtMs:p.number()}),p.object({authenticatorKind:p.literal("oidc"),authenticatorName:p.string(),jwksUrl:p.string().url(),idTokenClaims:p.object({sub:p.string(),iss:p.string(),aud:p.string().nullish().default(null)}),id:p.string(),createdAtMs:p.number()})]),hE=p.object({type:p.literal("CEL"),preset:p.literal("LEGACY_USER_ROLE")}),pE=p.enum(["ALLOW","DENY"]),mE=p.object({expression:p.string().min(1).max(4096),outcome:pE,comment:p.string().min(0).max(200)}),ed=p.lazy(()=>p.union([p.null(),p.boolean(),p.string(),p.number().finite(),p.array(ed),p.record(ed)])),gE=p.object({name:p.string().min(1).max(50),value:ed,comment:p.string().min(0).max(200)}),yE=p.object({type:p.literal("CEL"),rules:p.array(mE),constants:p.array(gE)}),vE=p.object({usdCentsLimitPerDay:p.number(),memoryAccount:p.string(),memoryId:p.number(),memoryBump:p.number()}),wE=p.object({ethereumMessage:p.boolean(),ethereumTx:p.boolean(),ethereumTypedData:p.boolean(),rawPayload:p.boolean(),solanaTx:p.boolean(),utf8Message:p.boolean()}),bE=p.object({type:p.literal("CEL"),preset:p.literal("DAPP_CONNECTION_USER"),walletId:p.string(),usdLimit:vE.nullish().default(null),allowedMethods:wE.nullish().default(null),solanaProgramAllowlist:p.array(p.string()).nullish().default(null)}),xE=p.union([yE,hE,bE]),AE=p.object({type:p.literal("ROOT")}),wa=p.union([AE,xE]),Dg=p.enum(["ADMIN","USER"]),ru=p.object({username:p.string(),role:Dg.or(wa).optional(),traits:p.object({appId:p.string().optional()}).optional(),authenticators:p.array(id),policy:wa.optional(),expiresInMs:p.number().optional()}),Lg=p.object({username:p.string(),role:Dg.optional(),authenticators:p.array(dE),traits:p.record(p.string()).optional().default({}),expiresAtMs:p.number().nullish().default(null),createdAtMs:p.number().nullish().default(null)}),SE=Lg.extend({policy:wa.optional()}),EE=p.union([SE,Lg]),Zt=p.object({organizationId:p.string(),organizationName:p.string(),parentOrganizationId:p.string().nullish().default(null),tags:p.array(p.string()),users:p.array(EE)}),ME=p.discriminatedUnion("rule",[p.object({rule:p.literal("SystemInstructionLamportsThreshold"),min:p.number().int().min(0).nullish().default(null),max:p.number().int().min(0).nullish().default(null)}),p.object({rule:p.literal("SystemInstructionRecipientAllowlist"),allowlist:p.array(p.string())})]),TE=p.union([p.object({In:p.array(p.number().int().min(0))}),p.object({Exact:p.number().int().min(0)}),p.literal("Any")]),eu=p.object({programId:p.string(),discriminator:TE,validate:p.array(ME).optional()}),lU=p.object({max:p.number().int().min(0)}),fU=p.object({maxComputeUnitPrice:p.number().int().min(0).nullish().default(null),maxComputeUnits:p.number().int().min(0).nullish().default(null)}),dU=p.object({allowlist:p.array(eu)}),hU=p.object({allowlist:p.array(eu).optional()}),pU=p.null().default(null),IE=p.discriminatedUnion("rule",[p.object({rule:p.literal("NoSignerAccountUsage"),allowlist:p.array(eu).optional()}),p.object({rule:p.literal("BundleSizeLimit"),max:p.number().int().min(0)}),p.object({rule:p.literal("ComputeBudgetLimit"),maxComputeUnitPrice:p.number().int().min(0).nullish().default(null),maxComputeUnits:p.number().int().min(0).nullish().default(null)}),p.object({rule:p.literal("NoAddressLookupTables")}),p.object({rule:p.literal("InstructionAllowlist"),allowlist:p.array(eu)}),p.object({rule:p.literal("AllowAll")})]),_E=p.object({rules:p.array(IE)}),kE=p.object({version:p.literal("v0"),solana:_E.nullish().default(null)}),ba=kE,PE=p.enum(["owner","signaturePayload","signatureTransaction"]),BE=p.object({version:p.literal("v0"),scopes:p.array(PE),derivationAllowlist:p.array(Et).nullish().default(null)}),xa=BE;d();h();function Bi(e,t){return e.users.find(r=>r.authenticators.some(i=>i.authenticatorKind!=="keypair"?!1:dc(i.publicKey)===t))}n(Bi,"getByPublicKey");var KE=p.object({organizationName:p.string(),tags:p.array(p.string()).optional(),users:p.array(ru)}),Vg=p.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:n(t=>Bi(e.result,t),"getByPublicKey")}));function od(e,t){return Se(e.authenticator,"createOrganization",t,Vg)}n(od,"createOrganization");d();h();var OE=p.object({organizationId:p.string()}),Fg=p.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:n(t=>Bi(e.result,t),"getByPublicKey")}));function sd(e,t){return Se(e.authenticator,"getOrganization",t,Fg)}n(sd,"getOrganization");d();h();var CE=p.object({organizationId:p.string(),user:ru,replaceExpirable:p.boolean().optional()}),jg=p.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:n(t=>Bi(e.result,t),"getByPublicKey")}));function ad(e,t){return Se(e.authenticator,"addUserToOrganization",t,jg)}n(ad,"addUserToOrganization");d();h();var RE=p.object({organizationId:p.string(),username:p.string()}),qg=p.object({result:Zt});function cd(e,t){return Se(e.authenticator,"deleteUserFromOrganization",t,qg)}n(cd,"deleteUserFromOrganization");d();h();var UE=p.object({organizationId:p.string(),username:p.string(),newPolicy:wa.optional(),addTraits:p.record(p.string()).optional(),removeTraits:p.record(p.string()).optional()}),zg=p.object({result:Zt});function ud(e,t){return Se(e.authenticator,"updateUserInOrganization",t,zg)}n(ud,"updateUserInOrganization");d();h();var NE=p.object({organizationId:p.string(),username:p.string(),authenticator:id}),Wg=p.object({result:p.discriminatedUnion("authenticatorKind",[p.object({authenticatorKind:p.literal("keypair"),publicKey:p.string(),algorithm:Mn,authenticatorName:p.string(),id:p.string(),createdAtMs:p.number()}),p.object({authenticatorKind:p.literal("passkey"),authenticatorName:p.string(),id:p.string(),createdAtMs:p.number()}),p.object({authenticatorKind:p.literal("oidc"),authenticatorName:p.string(),jwksUrl:p.string().url(),idTokenClaims:p.object({sub:p.string(),iss:p.string(),aud:p.string().nullish().default(null)}),id:p.string(),createdAtMs:p.number()})])});function ld(e,t){return Se(e.authenticator,"createAuthenticator",t,Wg)}n(ld,"createAuthenticator");d();h();var DE=p.object({organizationId:p.string(),username:p.string(),authenticatorId:p.string()}),Hg=p.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:n(t=>Bi(e.result,t),"getByPublicKey")}));function fd(e,t){return Se(e.authenticator,"deleteAuthenticator",t,Hg)}n(fd,"deleteAuthenticator");d();h();var LE=p.object({walletName:p.string(),organizationId:p.string(),mnemonicLength:p.number().int().min(0).default(24).optional(),accounts:p.array(Et).optional()}),$g=p.object({result:p.object({walletId:p.string(),walletName:p.string(),accounts:p.array(p.object({curve:td,derivationPath:p.string(),addressFormat:rd,publicKey:p.string()}))})});function dd(e,t){return Se(e.authenticator,"createWallet",t,$g)}n(dd,"createWallet");d();h();var VE=p.object({organizationId:p.string(),limit:p.number().int().min(0).optional(),offset:p.number().int().min(0).optional()}),Gg=p.object({result:p.object({wallets:p.array(Ng),totalCount:p.number().int().min(0),limit:p.number().int().min(0),offset:p.number().int().min(0)})});function hd(e,t){return Se(e.authenticator,"getOrganizationWallets",t,Gg)}n(hd,"getOrganizationWallets");d();h();var FE=p.object({walletName:p.string(),organizationId:p.string(),tag:p.string(),mnemonicLength:p.number().int().min(0).default(24).optional(),accounts:p.array(Et).optional()}),Zg=p.object({result:p.object({walletId:p.string(),walletName:p.string(),accounts:p.array(Pi)})});function pd(e,t){return Se(e.authenticator,"getOrCreateWalletWithTag",t,Zg)}n(pd,"getOrCreateWalletWithTag");d();h();var jE=p.object({organizationId:p.string(),tag:p.string(),accounts:p.array(Et).optional()}),Qg=p.object({result:p.object({walletId:p.string(),walletName:p.string(),accounts:p.array(Pi)})});function md(e,t){return Se(e.authenticator,"getWalletWithTag",t,Qg)}n(md,"getWalletWithTag");d();h();var qE=p.object({organizationId:p.string(),walletId:p.string(),publicKey:p.string()}),Jg=p.object({result:p.object({encrypted_bundle:p.string()})});function gd(e,t){return Se(e.authenticator,"exportWallet",t,Jg)}n(gd,"exportWallet");d();h();var zE=p.object({ownerOrganizationId:p.string(),targetOrganizationId:p.string(),walletId:p.string(),policy:xa,transactionPolicy:ba.nullish().default(null)}),Yg=p.object({result:p.object({organizationId:p.string(),walletId:p.string(),organizationPolicy:xa,transactionPolicy:ba.nullish().default(null)})});function yd(e,t){return Se(e.authenticator,"grantOrganizationAccess",t,Yg)}n(yd,"grantOrganizationAccess");d();h();var WE=p.object({ownerOrganizationId:p.string(),targetOrganizationId:p.string(),walletId:p.string()}),Xg=p.object({result:p.object({organizationId:p.string(),walletId:p.string(),organizationPolicy:xa,transactionPolicy:ba.nullish().default(null)})});function vd(e,t){return Se(e.authenticator,"revokeOrganizationAccess",t,Xg)}n(vd,"revokeOrganizationAccess");d();h();var HE=p.object({organizationId:p.string()}),ey=p.object({result:tu,signature:p.string().optional()});function wd(e,t){return Se(e.authenticator,"initWalletImport",t,ey)}n(wd,"initWalletImport");d();h();var $E=p.object({organizationId:p.string(),importEnvelope:tu,encryptedSecret:p.string().regex(fc),walletName:p.string(),accounts:p.array(Et),mnemonicLength:p.number().int().min(0).default(24).optional(),tags:p.array(p.string()).optional()}),ty=p.object({result:p.object({walletId:p.string(),walletName:p.string(),accounts:p.array(Pi)})});function bd(e,t){return Se(e.authenticator,"completeImportWallet",t,ty)}n(bd,"completeImportWallet");d();h();var GE=p.object({publicKey:p.string()}),ry=p.object({result:Zt});function xd(e,t){return Se(e.authenticator,"getOrCreatePhantomOrganization",t,ry)}n(xd,"getOrCreatePhantomOrganization");d();h();var ZE=p.object({}),ny=p.object({result:Zt});function Ad(e,t){return Se(e.authenticator,"getPhantomOrganization",t,ny)}n(Ad,"getPhantomOrganization");d();h();var QE=p.object({payload:p.union([p.array(p.number().int().min(0)),p.string()]),organizationId:p.string(),walletId:p.string(),derivationInfo:Et,algorithm:Mn}),iy=p.object({result:p.object({signature:p.string(),address:p.string(),publicKey:p.string()})});function Sd(e,t){let r=Array.isArray(t.payload)?ct(Buffer.from(t.payload)):t.payload;return Se(e.authenticator,"signRawPayload",{...t,payload:r},iy)}n(Sd,"signRawPayload");d();h();var JE=p.object({transaction:nd,organizationId:p.string(),walletId:p.string(),derivationInfo:Et.nullish().default(null),policyName:p.string().nullish().default(null)}),oy=p.object({result:p.object({transaction:nd,address:p.string(),publicKey:p.string()})});function Ed(e,t){return Se(e.authenticator,"signTransaction",t,oy)}n(Ed,"signTransaction");d();h();var YE=p.object({message:p.string(),organizationId:p.string(),walletId:p.string(),derivationInfo:Et,algorithm:Mn,policyName:p.string().optional()}),sy=p.object({result:p.object({signature:p.string(),address:p.string(),publicKey:p.string()})});function Md(e,t){return Se(e.authenticator,"signUtf8Message",t,sy)}n(Md,"signUtf8Message");d();h();var XE=p.object({message:p.string(),organizationId:p.string(),walletId:p.string(),derivationInfo:Et.nullish().default(null),policyName:p.string().optional()}),ay=p.object({result:p.object({signature:p.string(),address:p.string(),publicKey:p.string()})});function Td(e,t){return Se(e.authenticator,"ethereumSignMessage",t,ay)}n(Td,"ethereumSignMessage");d();h();var cy=p.union([oc,sc,ac]),e2=p.object({typedData:cy,organizationId:p.string(),walletId:p.string(),derivationInfo:Et.nullish().default(null),policyName:p.string().optional()}),uy=p.object({result:p.object({signature:p.string(),address:p.string(),publicKey:p.string()})});function Id(e,t){return Se(e.authenticator,"ethereumSignTypedData",t,uy)}n(Id,"ethereumSignTypedData");d();h();var t2=p.object({organizationId:p.string(),walletId:p.string(),accounts:p.array(Et)}),ly=p.object({result:p.array(Pi)});function _d(e,t){return Se(e.authenticator,"getAccounts",t,ly)}n(_d,"getAccounts");var Aa;(function(e){e.RLP_ENCODED="RLP_ENCODED",e.PSBT="PSBT",e.EIP_1559="EIP_1559"})(Aa||(Aa={}));function kd(e){return{createOrganization:n(t=>od(e,t),"createOrganization"),getOrganization:n(t=>sd(e,t),"getOrganization"),createAuthenticator:n(t=>ld(e,t),"createAuthenticator"),deleteAuthenticator:n(t=>fd(e,t),"deleteAuthenticator"),deleteUserFromOrganization:n(t=>cd(e,t),"deleteUserFromOrganization"),createWallet:n(t=>dd(e,t),"createWallet"),getOrganizationWallets:n(t=>hd(e,t),"getOrganizationWallets"),getOrCreateWalletWithTag:n(t=>pd(e,t),"getOrCreateWalletWithTag"),getWalletWithTag:n(t=>md(e,t),"getWalletWithTag"),exportWallet:n(t=>gd(e,t),"exportWallet"),grantOrganizationAccess:n(t=>yd(e,t),"grantOrganizationAccess"),revokeOrganizationAccess:n(t=>vd(e,t),"revokeOrganizationAccess"),initWalletImport:n(t=>wd(e,t),"initWalletImport"),completeImportWallet:n(t=>bd(e,t),"completeImportWallet"),getOrCreatePhantomOrganization:n(async()=>{let t=await e.authenticator.getPublicKey();return xd(e,{publicKey:t})},"getOrCreatePhantomOrganization"),getPhantomOrganization:n(t=>Ad(e,t),"getPhantomOrganization"),getAuthenticatorPublicKey:n(()=>e.authenticator.getPublicKey(),"getAuthenticatorPublicKey"),signRawPayload:n(t=>Sd(e,t),"signRawPayload"),signTransaction:n(t=>Ed(e,t),"signTransaction"),signUtf8Message:n(t=>Md(e,t),"signUtf8Message"),ethereumSignMessage:n(t=>Td(e,t),"ethereumSignMessage"),ethereumSignTypedData:n(t=>Id(e,t),"ethereumSignTypedData"),getAccounts:n(t=>_d(e,t),"getAccounts"),addUserToOrganization:n(t=>ad(e,t),"addUserToOrganization"),updateUserInOrganization:n(t=>ud(e,t),"updateUserInOrganization")}}n(kd,"createKMS");d();h();var n2=["createOrganization","getOrganization","getOrCreatePhantomOrganization","getPhantomOrganization","addUserToOrganization","deleteUserFromOrganization","updateUserInOrganization","createAuthenticator","deleteAuthenticator","createWallet","getOrganizationWallets","getOrCreateWalletWithTag","getWalletWithTag","exportWallet","grantOrganizationAccess","revokeOrganizationAccess","initWalletImport","completeImportWallet","signRawPayload","signTransaction","signUtf8Message","ethereumSignMessage","ethereumSignTypedData","getAccounts"],fy=p.enum(n2),i2=p.object({method:fy,params:p.record(p.unknown()),timestampMs:p.number().int().positive()});function Pd(e){return i2.parse(e)}n(Pd,"validateKMSRpcPayload");d();h();function o2(e){switch(e){case"Solana":case"Sui":return"Ed25519";case"Ethereum":case"BitcoinSegwit":case"BitcoinTaproot":return"Secp256k1";default:return xe(e)}}n(o2,"getExpectedCurve");function s2(e,t){for(let{curve:r,addressFormat:i}of e){let o=o2(i);if(r!==o)throw new Error(`KMS ${t} request expected curve ${o} for address format ${i}, received ${r}.`)}}n(s2,"validateRequestedAccounts");function dy(e){let t=e.response.data;return String(t?.error||"").toLowerCase()}n(dy,"getErrorMessage");function a2(e){return e.response.status===404||e.response.status===400&&dy(e).includes("organization is required")}n(a2,"isOrgMissing");function c2(e){return e.response.status===404||e.response.status===400&&dy(e).includes("wallet does not exist")}n(c2,"isWalletMissing");async function Bd(e,t,r){s2(r,"getWalletWithTag");let i;try{({result:i}=await e.getPhantomOrganization({}))}catch(o){if(o instanceof oi&&a2(o))return null;throw o}try{let{result:o}=await e.getWalletWithTag({organizationId:i.organizationId,tag:t,accounts:r});return{organizationId:i.organizationId,walletId:o.walletId,walletName:o.walletName,accounts:o.accounts}}catch(o){if(o instanceof oi&&c2(o))return null;throw o}}n(Bd,"getKMSWalletByTagIfExists");d();h();var u2="wallet: Validation error: Wallet does not exist",l2="Resource not found: Wallet";function f2(e){if(!(e instanceof oi))return!1;let t=e.response.status,r=e.response.data?.error||"";return t===400&&r.startsWith(u2)||t===404&&r.startsWith(l2)}n(f2,"isWalletNotFoundError");d();h();d();h();var nu=Object.values(Rt);function hy(e){switch(e.chainType){case k.Solana:case k.EVM:{let t=d2(e.chainType,e.address,e.publicKey);return{chainType:e.chainType,pathType:e.pathType,address:t}}case k.Sui:{let t=e.address??Nt({publicKey:e.publicKey,addressType:e.chainType});return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,address:t}}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,addresses:h2(e.chainType,e.publicKey,e.addresses)};default:return xe(e)}}n(hy,"normalizeChainAddress");function d2(e,t,r){if(t)return t;if(r)return Nt({publicKey:r,addressType:e});throw new Error(`Expected address or publicKey for chain type ${e}`)}n(d2,"getAddressForEvmOrSolana");function h2(e,t,r){return r?p2(e,t,r):m2(e,t)}n(h2,"getBitcoinAddresses");function p2(e,t,r){let i={...r};for(let o of nu)i[o]||(i[o]=Nt({publicKey:t,addressType:e,networkID:o}));return i}n(p2,"fillMissingBitcoinAddresses");function m2(e,t){return nu.reduce((r,i)=>(r[i]=Nt({publicKey:t,addressType:e,networkID:i}),r),{})}n(m2,"deriveAllBitcoinAddresses");function py(e){let t=hy(e);switch(t.chainType){case k.Solana:case k.EVM:return t;case k.Sui:return t;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return t;default:return xe(t)}}n(py,"buildVaultChainAddress");function my(e){let t=hy(e);switch(t.chainType){case k.Solana:case k.EVM:return{chainType:t.chainType,publicKey:t.address,pathType:t.pathType};case k.Sui:return{chainType:t.chainType,publicKey:t.publicKey,address:t.address,pathType:t.pathType};case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return{chainType:t.chainType,publicKey:t.publicKey,addresses:t.addresses,pathType:t.pathType};default:return xe(t)}}n(my,"buildVaultStorageChainAddress");function gy(e,t){return`${e}:${t}`}n(gy,"descriptorKey");function iu(e,t){let r={},i=new Map;for(let o of t){let a=gy(o.addressFormat,o.derivationPath);if(i.has(a))throw new Error(`Duplicate KMS account request for ${a}`);i.set(a,{descriptor:o,used:!1})}for(let o of e){let{addressFormat:a,derivationPath:l,address:f,publicKey:g}=o,x=gy(a,l),T=i.get(x);if(!T)continue;if(T.used)throw new Error(`KMS returned duplicate account data for format=${a}, derivationPath=${l}.`);T.used=!0;let{chainType:I,pathType:_}=T.descriptor;r[I]=py(g2({chainType:I,pathType:_,address:f,publicKey:g}))}for(let{descriptor:o,used:a}of i.values())if(!a)throw new Error(`KMS did not return data for requested chain ${o.chainType} with path ${o.derivationPath}`);return{chains:r}}n(iu,"convertKMSWalletToVaultAccountParams");function g2({chainType:e,pathType:t,address:r,publicKey:i}){switch(e){case k.Solana:return{chainType:e,pathType:t,address:r};case k.EVM:return{chainType:e,pathType:t,address:r};case k.Sui:{if(!i)throw new Error("KMS response missing required public key for Sui account conversion.");let o=nn(i);return{chainType:e,pathType:t,address:r,publicKey:o}}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{if(!i)throw new Error("KMS response missing required public key for Bitcoin account conversion.");let o=nn(i),a=r?{[Rt.Mainnet]:r}:void 0;return{chainType:e,pathType:t,publicKey:o,addresses:a}}default:throw new Error(`Unsupported chain type ${e} returned from KMS conversion.`)}}n(g2,"createChainAddressInput");d();h();var y2="cash",v2="cash",w2={pathType:ee.Bip44ChangeSolana,index:0};async function yy(e){G.addBreadcrumb(H.Cash,"Getting user's Cash account from KMS",X.Debug);let t;try{let{result:r}=await e.getOrCreatePhantomOrganization();t=r.organizationId}catch(r){G.addBreadcrumb(H.Cash,"[KMS] Error getting user's Phantom Org",X.Error);let i=r instanceof Error?r:new Error("[KMS] Failed to get user's Phantom Org");throw G.captureError(i,H.Cash),i}try{let{result:{walletId:r,walletName:i,accounts:o}}=await e.getOrCreateWalletWithTag({organizationId:t,walletName:y2,tag:v2,mnemonicLength:24,accounts:[{derivationPath:Jn(w2),curve:"Ed25519",addressFormat:"Solana"}]});if(o.length===0)throw new Error("No Cash account found");return G.addBreadcrumb(H.Cash,`[KMS] Successfully got user's Cash wallet, address: ${o[0].address}`,X.Debug),{organizationId:t,walletId:r,walletName:i,account:o[0]}}catch(r){G.addBreadcrumb(H.Cash,"[KMS] Error getting user's Cash wallet",X.Error);let i=r instanceof Error?r:new Error("[KMS] Failed to get user's Cash wallet");throw G.captureError(i,H.Cash),i}}n(yy,"getCashKMSAccount");d();h();d();h();function ou(e,t,r,i){let o=po(t,r);return e.find(a=>a.type===P.KMSVault&&a.identifier===o&&(!a.apiEnvironment||a.apiEnvironment===i))}n(ou,"findExistingKMSVaultAccount");function su(e,t,r){let o=Jc(t).addresses;return e.some(a=>{if(a.type===P.KMSVault||"apiEnvironment"in a&&a.apiEnvironment&&a.apiEnvironment!==r)return!1;let l=Bg(a);for(let f of l.addresses)if(o.has(f))return!0;return!1})}n(su,"hasMatchingNonKMSAccount");function vy(e){let t=e+1;return wn.t("onboardingImportAccountsAccountName",{walletIndex:t})}n(vy,"generateKMSAccountName");async function au(e,t,r,i,o,a,l,f){G.addBreadcrumb(H.Account,"Adding KMS vault account to local storage",X.Info);let g=await e.addKMSVaultAccount({organizationId:r,walletId:i,tag:o,derivationIndex:0,chains:a,apiEnvironment:f});G.addBreadcrumb(H.Account,"Added KMS vault account to vault storage",X.Info);let x=vy(l.length);return await ki(t,g.identifier,{name:x,icon:void 0}),G.addBreadcrumb(H.Account,`Set account metadata with name: ${x}`,X.Info),g}n(au,"addKMSVaultAccountWithMetadata");async function b2(e,t,r){try{G.addBreadcrumb(H.Account,"Starting KMS vault account sync (read-only)",X.Info);let i=await e.fetchAllAccounts();if(i.some(_=>_.type===P.Seedless))return G.addBreadcrumb(H.Account,"KMS vault sync skipped: user has seedless accounts (will migrate separately)",X.Info),{success:!1,action:"skipped_seedless",message:"Sync skipped for seedless accounts"};let a=e.getKMSInstance(),{derivations:l,conversionMetadata:f}=await Xc(t,0);G.addBreadcrumb(H.Account,`Checking for KMS vault with tag "${Dt}"`,X.Info);let g=await Bd(a,Dt,l);if(!g)return G.addBreadcrumb(H.Account,"KMS vault account not found remotely",X.Info),{success:!1,action:"not_found",message:"Vault account not found in KMS"};G.addBreadcrumb(H.Account,`Found KMS vault: ${g.walletId}`,X.Info);let{chains:x}=iu(g.accounts,f),T=nr()===Ct.Production?"production":"staging";return ou(i,g.walletId,Dt,T)?(G.addBreadcrumb(H.Account,"Upserting missing chains for existing KMS vault account",X.Info),await e.upsertKMSVaultChains({organizationId:g.organizationId,walletId:g.walletId,tag:Dt,derivationIndex:0,chains:x}),await ut(r),{success:!0,action:"already_synced",message:"Account already synced (updated chains)",walletId:g.walletId}):su(i,x,T)?(G.addBreadcrumb(H.Account,"KMS vault sync skipped: matching non-KMS local account found by address",X.Info),{success:!0,action:"already_synced",message:"Matching non-KMS local account detected by address; skipping duplicate",walletId:g.walletId}):(G.addBreadcrumb(H.Account,"Adding KMS vault account to local storage",X.Info),await au(e,t,g.organizationId,g.walletId,Dt,x,i,T),await ut(r),G.addBreadcrumb(H.Account,"Successfully synced KMS vault account to local storage",X.Info),{success:!0,action:"synced",message:"Account synced successfully",walletId:g.walletId})}catch(i){return G.captureError(i,H.Account),{success:!1,action:"error",message:i.message}}}n(b2,"syncKMSVaultAccount");d();h();async function x2(e,t,r,i){try{G.addBreadcrumb(H.Account,"Storing KMS vault account from existing data",X.Info);let o=await t.fetchAllAccounts(),{conversionMetadata:a}=await Xc(r,0),{chains:l}=iu(e.accounts,a),f=nr()===Ct.Production?"production":"staging",g=ou(o,e.walletId,Dt,f);if(g)return G.addBreadcrumb(H.Account,"KMS vault account already exists locally",X.Info),await t.upsertKMSVaultChains({organizationId:e.organizationId,walletId:e.walletId,tag:Dt,derivationIndex:0,chains:l}),i&&await ut(i),{isNewAccount:!1,account:g,message:"Account already exists (chains updated if needed)"};if(su(o,l,f))return G.addBreadcrumb(H.Account,"KMS vault account matches existing non-KMS account by address - skipping",X.Info),{isNewAccount:!1,account:null,message:"Matching non-KMS account detected by address"};G.addBreadcrumb(H.Account,"Adding new KMS vault account to local storage",X.Info);let x=await au(t,r,e.organizationId,e.walletId,Dt,l,o,f);return i&&await ut(i),G.addBreadcrumb(H.Account,"Successfully stored new KMS vault account",X.Info),{isNewAccount:!0,account:x,message:"Account created successfully"}}catch(o){return G.captureError(o,H.Account),{isNewAccount:!1,account:null,message:o.message}}}n(x2,"storeKMSVaultAccountFromData");d();h();d();h();d();h();function Kd(e,t){return e in t}n(Kd,"hasKey");var Sa=he(_1());function A2(e){return e=(0,Sa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{switch(t.chainType){case k.EVM:case k.Solana:break;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:case k.Sui:{mo(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:xe(t)}break}case P.ReadOnly:break;case P.Ledger:case P.Seedless:case P.Seed:case P.KMSVault:for(let r of Object.keys(t.chains)){let i=t.chains[r];if(i)switch(i.chainType){case k.EVM:case k.Solana:break;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:case k.Sui:{mo(i.publicKey)&&(i.publicKey=new Uint8Array(Buffer.from(i.publicKey)));break}default:xe(i)}}break;case P.SeedVault:break;default:xe(t)}}),e}n(A2,"deserializeVaultAccount");function S2(e){return e=(0,Sa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{switch(t.chainType){case k.EVM:case k.Solana:break;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:case k.Sui:{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:xe(t)}break}case P.ReadOnly:break;case P.Ledger:case P.Seedless:case P.Seed:case P.KMSVault:for(let r of Object.keys(t.chains)){let i=t.chains[r];if(i)switch(i.chainType){case k.EVM:case k.Solana:break;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:case k.Sui:{i.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(i.publicKey).toJSON());break}default:xe(i)}}break;case P.SeedVault:break;default:xe(t)}}),e}n(S2,"serializeVaultAccount");function wy(e){return e=(0,Sa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{t.version===1&&mo(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case P.ReadOnly:break;case P.KMSVault:case P.Ledger:case P.Seed:case P.Seedless:for(let r of Object.keys(t.chains))if(t.version===1&&mo(t.chains[r]?.publicKey)){let i=t.chains[r];i&&(i.publicKey=new Uint8Array(Buffer.from(i.publicKey)))}break;case P.SeedVault:break;default:xe(t)}}),e}n(wy,"deserializeVaultStorageAccount");function by(e){return e=(0,Sa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case P.ReadOnly:break;case P.KMSVault:case P.Ledger:case P.Seed:case P.Seedless:for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case P.SeedVault:break;default:xe(t)}}),e}n(by,"serializeVaultStorageAccount");function mo(e){return!!e&&typeof e=="object"&&Kd("type",e)&&typeof e.type=="string"&&Kd("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}n(mo,"isSerializedBuffer");d();h();var yr=".phantom-labs.vault";var uu=`${yr}.accounts`,fs=`${yr}.secrets`,lu=n(e=>`${yr}.privateKey.${e}`,"privateKeyStorageKey"),fu=n(e=>`${yr}.seed.${e}`,"seedStorageKey"),du=n(e=>`${yr}.seedless.${e}`,"seedlessStorageKey"),cu=`${yr}.integrityCheck`;async function ht(e){return(await ky(e))?.accounts??[]}n(ht,"fetchAllAccounts");async function Sy(e){let t=await sn(e),r=new Set(t.seedIdentifiers),i=await ht(e);for(let a of i)a.type===P.Seed&&r.add(a.seedIdentifier);let o=[];for(let a of r)o.push({identifier:a});return o}n(Sy,"fetchAllSeedMeta");async function hu(e){let t=await sn(e),r=new Set(t.seedlessIdentifiers),i=await ht(e);for(let a of i)a.type===P.Seedless&&r.add(a.seedIdentifier);let o=[];for(let a of r)o.push({identifier:a});return o}n(hu,"fetchAllSeedlessMeta");async function sn(e){let t=await e.generalStorage.get(fs);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}n(sn,"fetchSecretIdentifiers");async function Ey(e,t){let r=fu(t),i=await e.secretsStorage.getSecureValue(r);if(i===null){let o=du(t);i=await e.secretsStorage.getSecureValue(o)}if(i==null)throw new Xn;return mo(i.entropy)?i.entropy=new Uint8Array(Buffer.from(i.entropy)):i.entropy=new Uint8Array(Object.values(i.entropy)),i}n(Ey,"fetchEntropy");async function Ki(e,t){let r=lu(t),i=await e.secretsStorage.getSecureValue(r);if(i==null)throw new io;return mo(i.privateKey)?i.privateKey=new Uint8Array(Buffer.from(i.privateKey)):i.privateKey=new Uint8Array(Object.values(i.privateKey)),i}n(Ki,"fetchPrivateKey");async function Lt(e,t,r=!0){let i=await ky(e);if(!i)i={version:1,accounts:[t]};else{let o=i.accounts,a=M2(o,t);if(a.length>0){if(!r)throw new xn(a[0].type,t.type);let l=Ay(t.type);for(let g of a)if(Ay(g.type)>=l)throw new xn(g.type,t.type);let f=a.map(g=>g.identifier);return o=o.filter(g=>!f.includes(g.identifier)),o.push(t),await on(e,o),await Od(e)}else o.push(t);i.accounts=o}return on(e,i.accounts)}n(Lt,"storeAccount");async function on(e,t){let r={version:1,accounts:t};return e.generalStorage.set(uu,by(r))}n(on,"storeAccounts");async function My(e,t){let r=lu(t.identifier);await e.secretsStorage.setSecureValue(r,t),await _2(e,t.identifier)}n(My,"storePrivateKey");async function Ty(e,t){let r=fu(t.identifier);await e.secretsStorage.setSecureValue(r,t),await T2(e,t.identifier)}n(Ty,"storeSeed");async function Iy(e,t){let r=du(t.identifier);await e.secretsStorage.setSecureValue(r,t),await I2(e,t.identifier)}n(Iy,"storeSeedlessSeed");async function Od(e){let t=await ht(e),r=new Set,i=new Set;for(let f of t)switch(f.type){case P.Seed:case P.Seedless:r.add(f.seedIdentifier);break;case P.PrivateKey:i.add(f.privateKeyIdentifier);break;case P.Ledger:case P.ReadOnly:case P.SeedVault:case P.KMSVault:break;default:xe(f)}let o=await sn(e),a={seedIdentifiers:o.seedIdentifiers.filter(f=>r.has(f)),seedlessIdentifiers:o.seedlessIdentifiers.filter(f=>r.has(f)),privateKeyIdentifiers:o.privateKeyIdentifiers.filter(f=>i.has(f))},l={seedIdentifiers:o.seedIdentifiers.filter(f=>!r.has(f)),seedlessIdentifiers:o.seedlessIdentifiers.filter(f=>!r.has(f)),privateKeyIdentifiers:o.privateKeyIdentifiers.filter(f=>!i.has(f))};await e.generalStorage.set(fs,{version:1,...a}),await e.secretsStorage.removeSecureValue([...l.seedIdentifiers.map(f=>fu(f)),...l.seedlessIdentifiers.map(f=>du(f)),...l.privateKeyIdentifiers.map(f=>lu(f))])}n(Od,"removeDanglingSecrets");async function Cd(e,t){t?await e.secretsStorage.setSecureValue(cu,t):await e.secretsStorage.removeSecureValue(cu)}n(Cd,"storeIntegrityCheck");async function Rd(e){return e.secretsStorage.getSecureValue(cu)}n(Rd,"fetchIntegrityCheck");async function _y(e){await e.secureCache.clear(),await e.generalStorage.remove(uu);let t=await sn(e),r=t.privateKeyIdentifiers.map(a=>lu(a)),i=t.seedIdentifiers.map(a=>fu(a)),o=t.seedlessIdentifiers.map(a=>du(a));await e.secretsStorage.removeSecureValue([...r,...o,...i]),await e.generalStorage.remove(fs),await e.secretsStorage.removeSecureValue(cu)}n(_y,"clearVault");async function ky(e){let t=await e.generalStorage.get(uu);return t?(t=wy(t),t=await E2(e,t),t):null}n(ky,"fetchStorageAccounts");async function E2(e,t){let r=!1;return t.accounts.forEach(i=>{switch(i.type){case P.PrivateKey:{r=xy(i)||r;break}case P.ReadOnly:break;case P.Ledger:case P.Seed:case P.Seedless:Object.values(i.chains).forEach(o=>{r=xy(o)||r});break;case P.SeedVault:case P.KMSVault:break;default:xe(i)}}),r&&await on(e,t.accounts),t}n(E2,"computeBitcoinAddressesIfNeeded");function xy(e){let t=!1;switch(e.chainType){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{Object.values(Rt).forEach(r=>{if(e.addresses&&e.addresses[r])return;let i=Nt({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:i},t=!0});break}default:}return t}n(xy,"computeBitcoinAddressesForChain");function M2(e,t){let r=Gf(t),i=[];for(let o of e){let a=Gf(o),l=Array.from(r.addresses).some(g=>a.addresses.has(g)),f=Array.from(r.publicKeys).some(g=>a.publicKeys.has(g));(l||f)&&i.push(o)}return i}n(M2,"existingAccountsMatchingAccount");async function T2(e,t){let r=await sn(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set(fs,{version:1,...r})}n(T2,"storeSecretIdentifierForSeed");async function I2(e,t){let r=await sn(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set(fs,{version:1,...r})}n(I2,"storeSecretIdentifierForSeedless");async function _2(e,t){let r=await sn(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set(fs,{version:1,...r})}n(_2,"storeSecretIdentifierForPrivateKey");function Ay(e){switch(e){case P.ReadOnly:return 1;case P.PrivateKey:return 2;case P.Seedless:case P.Seed:return 3;case P.Ledger:return 4;case P.SeedVault:return 5;case P.KMSVault:return 6;default:return 0}}n(Ay,"accountTypeOverridePriority");d();h();d();h();var Ba=he(en()),Cn=he(ch());d();h();d();h();var HM=p.array(p.object({address:p.string(),signingIndexes:p.array(p.number()),sigHash:p.number().optional(),isScriptSpend:p.boolean().optional()})),Gv=p.object({chainType:Ys,signingType:p.literal("transaction"),message:p.string().min(1),inputsToSign:HM.optional(),finalize:p.boolean()}),$M=p.object({chainType:Ys,signingType:p.literal("message"),message:p.instanceof(Uint8Array)}),GM=Gv.or($M),Zv=p.object({chainType:p.literal(k.Sui),signingType:p.literal("transaction"),transaction:p.instanceof(Uint8Array)}),Qv=p.object({chainType:p.literal(k.Sui),signingType:p.literal("personalMessage"),message:p.instanceof(Uint8Array)}),ZM=Zv.or(Qv),Jv=p.object({chainType:p.literal(k.Solana),signingType:p.literal("transaction"),message:p.union([p.string().min(1),p.instanceof(Uint8Array)])}),Yv=p.object({chainType:p.literal(k.Solana),signingType:p.literal("message"),message:p.string().min(1)}),Xv=Jv.or(Yv),ew=p.object({chainType:p.literal(k.EVM),signingType:p.literal("transaction"),message:p.string().min(1)}),uh=p.object({chainType:p.literal(k.EVM),signingType:p.literal("message"),message:p.string().min(1)}),lh=p.object({chainType:p.literal(k.EVM),signingType:p.literal("typedData"),version:p.literal(1),data:oc}),fh=p.object({chainType:p.literal(k.EVM),signingType:p.literal("typedData"),version:p.literal(3),data:sc}),dh=p.object({chainType:p.literal(k.EVM),signingType:p.literal("typedData"),version:p.literal(4),data:ac}),QM=ew.or(uh).or(lh).or(fh).or(dh),JM=p.object({isJWT:p.literal(!0),data:nf}),On=p.object({policyName:p.string().optional()}),YM=Jv.merge(On),XM=Yv.merge(On),Nj=YM.or(XM),eT=ew.merge(On),tT=uh.merge(On),rT=lh.merge(On),nT=fh.merge(On),iT=dh.merge(On),Dj=eT.or(tT).or(rT).or(nT).or(iT),Lj=Gv.merge(On),Vj=p.union([Zv.merge(On),Qv.merge(On)]),oT=p.object({isKMSPKIAuthenticator:p.literal(!0),payload:p.custom()}),Fj=p.object({organizationId:p.string(),walletId:p.string(),derivationPath:p.string()}),tw=p.object({isCash:p.literal(!0),data:Xv}),sT=tw.extend({isCashKMS:p.literal(!0)}),aT=uh.extend({isAgentWallet:p.literal(!0)}),cT=lh.extend({isAgentWallet:p.literal(!0)}),uT=fh.extend({isAgentWallet:p.literal(!0)}),lT=dh.extend({isAgentWallet:p.literal(!0)}),fT=p.union([aT,cT,uT,lT]),dT=p.object({status:p.literal("success"),signature:p.string()}),rw=p.object({status:p.literal("success"),signature:p.string()}),hT=p.object({status:p.literal("success"),signature:p.string(),message:p.instanceof(Uint8Array).optional()}),pT=p.object({status:p.literal("success"),signature:p.string()}),mT=p.object({status:p.literal("success"),signature:p.string(),signedJWT:rf.optional()}),gT=p.object({status:p.literal("success"),signature:p.string()}),yT=rw;var hh=Xv.or(QM).or(GM).or(ZM).or(JM).or(oT).or(fT).or(tw).or(sT),se;(function(e){e.InvalidInput="invalidInput",e.InvalidAccountId="invalidAccountId",e.InvalidAddressType="invalidAddressType",e.InvalidMessageEncoding="invalidMessageEncoding",e.InvalidDerivationPath="invalidDerivationPath",e.InvalidRpcPayload="invalidRpcPayload",e.LedgerAppNotOpen="ledgerAppNotOpen",e.LedgerNotConnected="ledgerNotConnected",e.LedgerNeedPermission="ledgerNeedPermission",e.LedgerRejectAction="ledgerRejectAction",e.LedgerUnknownSignError="ledgerUnknownSignError",e.UnsupportedOperation="unsupportedOperation",e.InternalError="internalError",e.ExpiredTokenError="expiredToken",e.BeforeIATError="beforeTimeOfIssuance",e.InvalidClaimError="invalidClaim"})(se||(se={}));var vT=p.object({status:p.literal("error"),type:p.nativeEnum(se),message:p.string()}),wT=p.union([mT,gT,yT,hT,dT,rw,pT,vT]),Mt;(function(e){e.KeyPair="keyPair",e.Ledger="ledger",e.SeedVault="seedVault",e.KMS="kms"})(Mt||(Mt={}));var bT={[se.InvalidInput]:{message:"Invalid input"},[se.InvalidAccountId]:{message:"Invalid account identifier."},[se.InvalidAddressType]:{message:"Invalid chain type."},[se.InvalidMessageEncoding]:{message:"Invalid message encoding."},[se.InvalidDerivationPath]:{message:"Invalid derivation path."},[se.InvalidRpcPayload]:{message:"Invalid KMS RPC payload."},[se.LedgerAppNotOpen]:{message:"Ledger App not open."},[se.LedgerNotConnected]:{message:"Ledger not connected."},[se.LedgerNeedPermission]:{message:"Need permission to connect to Ledger."},[se.LedgerRejectAction]:{message:"Ledger user rejected action."},[se.LedgerUnknownSignError]:{message:"Ledger unknown sign error."},[se.UnsupportedOperation]:{message:"Unsupported operation."},[se.InternalError]:{message:"Internal error."},[se.ExpiredTokenError]:{message:"Token is expired"},[se.BeforeIATError]:{message:"Received token before issuance time"},[se.InvalidClaimError]:{message:"Claim is invalid"}},ve=n((e,t)=>({status:"error",type:e,message:t??bT[e].message}),"createVaultSignerError");var nw=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Ba.Buffer.from(e.privateKey.slice()),i=Cn.SignTypedDataVersion.V1,{data:o}=t,a=(0,Cn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=Ba.Buffer.from(e.privateKey.slice()),i=Cn.SignTypedDataVersion.V3,o=t.data,a=(0,Cn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=Ba.Buffer.from(e.privateKey.slice()),i=Cn.SignTypedDataVersion.V4,o=t.data,a=(0,Cn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,i=Ba.Buffer.from(e.privateKey);try{let o=(0,Cn.personalSign)({privateKey:i,data:r});return Promise.resolve({status:"success",signature:o})}finally{i.fill(0)}}}}catch(r){return console.error(r),Promise.resolve(ve(se.InvalidMessageEncoding))}},"sign")}),"createAgentWalletKeypairSigner");d();h();var ur=he(en());var iw=he(Y0()),ph=he(I1());var mh=n(e=>e.length===32?e:e.slice(1,33),"toXOnly");function xT(e){return ur.Buffer.concat([(0,ph.encode)(e.byteLength),e])}n(xT,"encodeVarString");function AT(e){let{sha256:t}=iw.crypto,i=t(ur.Buffer.from("BIP0322-signed-message"));return t(ur.Buffer.concat([i,i,ur.Buffer.from(e)])).toString("hex")}n(AT,"bip0322Hash");var ST=n((e,t)=>{switch(e){case k.BitcoinTaproot:return R0.getPublicKey(t);case k.BitcoinNestedSegwit:return ql(t,!0);case k.BitcoinNativeSegwit:return ql(t,!0);default:throw new Error("Unsupported Address Type")}},"getSigningPk"),ET=n((e,t)=>{let r=mm;switch(e){case k.BitcoinTaproot:return ym(t,void 0,r);case k.BitcoinNativeSegwit:return Gl(t,r);case k.BitcoinNestedSegwit:{let i=Gl(t,r);return gm(i,r)}default:throw new Error("Unsupported Address Type")}},"getSignerScript");function MT(e,t,r,i){let o=vc.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(a=>{let l=jo(Rt.Mainnet,a.address),f=e[l];if(!f)throw new Error("missing private key for ("+l+")");let{publicKey:g,privateKey:x}=f;a.signingIndexes.forEach(T=>{let I=o.getInput(T),_=I.witnessUtxo?.script&&vm.decode(I.witnessUtxo.script);if(!a.isScriptSpend&&!I.tapInternalKey&&_?.type==="tr"&&o.updateInput(T,{tapInternalKey:mh(ur.Buffer.from(g))}),a.sigHash)try{o.signIdx(x,T,[a.sigHash],Js(32))}catch{o.signIdx(x,T,void 0,Js(32))}else o.signIdx(x,T,void 0,Js(32));if(i)try{o.finalizeIdx(T)}catch{}})})}catch(a){throw console.error(a),new Error(`Error signing PSBT ${a.toString()}`)}return Promise.resolve(o.toPSBT(0))}n(MT,"signPsbt");var ow=n(()=>({type:Mt.KeyPair,sign:n(async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,i=ur.Buffer.from(t.message).toString("utf8"),o=e[t.chainType]?.privateKey;if(!o)throw new Error("missing private key for ("+t.chainType+")");let a=ur.Buffer.from(o).toString("hex"),l=ST(r,a),f=ET(r,l),g=ur.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),x=0,T=4294967295,I=0,_=$l.encode(["OP_0",ur.Buffer.from(AT(i),"hex")]),O=new vc({allowUnknownOutputs:!0,version:x});O.addOutput({amount:BigInt(0),script:f.script}),O.addInput({txid:g,index:T,sequence:I,finalScriptSig:_});let C=new vc({allowUnknownOutputs:!0,version:x});C.addInput({txid:O.id,index:0,sequence:I,tapInternalKey:r===k.BitcoinTaproot?l:void 0,witnessUtxo:{script:f.script,amount:BigInt(0)},redeemScript:f.redeemScript}),C.addOutput({script:$l.encode(["RETURN"]),amount:BigInt(0)}),C.sign(ur.Buffer.from(a,"hex"),void 0,Js(32)),C.finalize();let R,j=C.getInput(0);if(j.finalScriptWitness?.length){let F=(0,ph.encode)(j.finalScriptWitness?.length);R=ur.Buffer.concat([F,...j.finalScriptWitness.map(Y=>xT(Y))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:R.toString("hex"),message:C.toBytes()}}case"transaction":{let r=await MT(e,t.inputsToSign??[],ur.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:ur.Buffer.from(r).toString("hex")}}}}catch{return ve(se.InternalError)}},"sign")}),"createBitcoinKeyPairSigner");d();h();var aw=he(No()),cw=he(yi());d();h();var sw=he(No());function Pu(e,t,r){if(r!==k.Solana)return ve(se.InvalidAddressType);if(e instanceof Uint8Array)return e;try{return t==="transaction"?sw.default.decode(e):Buffer.from(e,"utf8")}catch(i){return ve(se.InvalidMessageEncoding,`Failed to decode message: ${i instanceof Error?i.message:"Unknown error"}`)}}n(Pu,"decodeSolanaMessage");var uw=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{let r=t.data,i=Pu(r.message,r.signingType,r.chainType);if("status"in i)return Promise.resolve(i);let o=aw.default.encode(cw.default.sign.detached(i,e.privateKey));return Promise.resolve({status:"success",signature:o})},"sign")}),"createCashVaultSigner");d();h();var Es=he(en()),lw=he(w1());var Rn=he(ch()),fw=he(Do());var dw=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Es.Buffer.from(e.privateKey.slice()),i=Rn.SignTypedDataVersion.V1,{data:o}=t,a=(0,Rn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=Es.Buffer.from(e.privateKey.slice()),i=Rn.SignTypedDataVersion.V3,o=t.data,a=(0,Rn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=Es.Buffer.from(e.privateKey.slice()),i=Rn.SignTypedDataVersion.V4,o=t.data,a=(0,Rn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,i=(0,Rn.personalSign)({privateKey:Es.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:i})}case"transaction":{let r=Es.Buffer.from(t.message.replace("0x",""),"hex"),i=new j0(e.privateKey),o=`0x${(0,fw.keccak256)(r)}`,a=(0,lw.joinSignature)(i.signDigest(o));return Promise.resolve({status:"success",signature:a})}}}catch(r){return console.error(r),Promise.resolve(ve(se.InvalidMessageEncoding))}},"sign")}),"createEthereumKeyPairSigner");d();h();var Po=he(en());d();h();d();h();d();h();d();h();function hw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}n(hw,"number");function TT(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}n(TT,"isBytes");function gh(e,...t){if(!TT(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}n(gh,"bytes");function pw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");hw(e.outputLen),hw(e.blockLen)}n(pw,"hash");function Ms(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}n(Ms,"exists");function mw(e,t){gh(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}n(mw,"output");d();h();d();h();var Bu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function gw(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}n(gw,"isBytes");var Ku=n(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView"),fn=n((e,t)=>e<<32-t|e>>>t,"rotr"),IT=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!IT)throw new Error("Non little-endian hardware is not supported");function _T(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}n(_T,"utf8ToBytes");function Ka(e){if(typeof e=="string"&&(e=_T(e)),!gw(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}n(Ka,"toBytes");function yw(...e){let t=0;for(let i=0;i<e.length;i++){let o=e[i];if(!gw(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t);for(let i=0,o=0;i<e.length;i++){let a=e[i];r.set(a,o),o+=a.length}return r}n(yw,"concatBytes");var Ts=class{static{n(this,"Hash")}clone(){return this._cloneInto()}},Fq={}.toString;function vw(e){let t=n(i=>e().update(Ka(i)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}n(vw,"wrapConstructor");function ww(e=32){if(Bu&&typeof Bu.getRandomValues=="function")return Bu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}n(ww,"randomBytes");var Ou=class extends Ts{static{n(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,pw(t);let i=Ka(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(i.length>o?t.create().update(i).digest():i);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(t){return Ms(this),this.iHash.update(t),this}digestInto(t){Ms(this),gh(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:i,finished:o,destroyed:a,blockLen:l,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=l,t.outputLen=f,t.oHash=r._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},yh=n((e,t,r)=>new Ou(e,t).update(r).digest(),"hmac");yh.create=(e,t)=>new Ou(e,t);d();h();d();h();var xh={};g1(xh,{bitGet:()=>RT,bitLen:()=>CT,bitMask:()=>Oa,bitSet:()=>UT,bytesToHex:()=>Mo,bytesToNumberBE:()=>ai,bytesToNumberLE:()=>Ru,concatBytes:()=>Is,createHmacDrbg:()=>bh,ensureBytes:()=>wr,equalBytes:()=>KT,hexToBytes:()=>To,hexToNumber:()=>wh,isBytes:()=>dn,numberToBytesBE:()=>Ui,numberToBytesLE:()=>Uu,numberToHexUnpadded:()=>Sw,numberToVarBytesBE:()=>BT,utf8ToBytes:()=>OT,validateObject:()=>Ni});d();h();var Aw=BigInt(0),Cu=BigInt(1),kT=BigInt(2);function dn(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}n(dn,"isBytes");var PT=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Mo(e){if(!dn(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=PT[e[r]];return t}n(Mo,"bytesToHex");function Sw(e){let t=e.toString(16);return t.length&1?`0${t}`:t}n(Sw,"numberToHexUnpadded");function wh(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}n(wh,"hexToNumber");var si={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function bw(e){if(e>=si._0&&e<=si._9)return e-si._0;if(e>=si._A&&e<=si._F)return e-(si._A-10);if(e>=si._a&&e<=si._f)return e-(si._a-10)}n(bw,"asciiToBase16");function To(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let o=0,a=0;o<r;o++,a+=2){let l=bw(e.charCodeAt(a)),f=bw(e.charCodeAt(a+1));if(l===void 0||f===void 0){let g=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+a)}i[o]=l*16+f}return i}n(To,"hexToBytes");function ai(e){return wh(Mo(e))}n(ai,"bytesToNumberBE");function Ru(e){if(!dn(e))throw new Error("Uint8Array expected");return wh(Mo(Uint8Array.from(e).reverse()))}n(Ru,"bytesToNumberLE");function Ui(e,t){return To(e.toString(16).padStart(t*2,"0"))}n(Ui,"numberToBytesBE");function Uu(e,t){return Ui(e,t).reverse()}n(Uu,"numberToBytesLE");function BT(e){return To(Sw(e))}n(BT,"numberToVarBytesBE");function wr(e,t,r){let i;if(typeof t=="string")try{i=To(t)}catch(a){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${a}`)}else if(dn(t))i=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=i.length;if(typeof r=="number"&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return i}n(wr,"ensureBytes");function Is(...e){let t=0;for(let o=0;o<e.length;o++){let a=e[o];if(!dn(a))throw new Error("Uint8Array expected");t+=a.length}let r=new Uint8Array(t),i=0;for(let o=0;o<e.length;o++){let a=e[o];r.set(a,i),i+=a.length}return r}n(Is,"concatBytes");function KT(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return r===0}n(KT,"equalBytes");function OT(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}n(OT,"utf8ToBytes");function CT(e){let t;for(t=0;e>Aw;e>>=Cu,t+=1);return t}n(CT,"bitLen");function RT(e,t){return e>>BigInt(t)&Cu}n(RT,"bitGet");var UT=n((e,t,r)=>e|(r?Cu:Aw)<<BigInt(t),"bitSet"),Oa=n(e=>(kT<<BigInt(e-1))-Cu,"bitMask"),vh=n(e=>new Uint8Array(e),"u8n"),xw=n(e=>Uint8Array.from(e),"u8fr");function bh(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let i=vh(e),o=vh(e),a=0,l=n(()=>{i.fill(1),o.fill(0),a=0},"reset"),f=n((...I)=>r(o,i,...I),"h"),g=n((I=vh())=>{o=f(xw([0]),I),i=f(),I.length!==0&&(o=f(xw([1]),I),i=f())},"reseed"),x=n(()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let I=0,_=[];for(;I<t;){i=f();let O=i.slice();_.push(O),I+=i.length}return Is(..._)},"gen");return n((I,_)=>{l(),g(I);let O;for(;!(O=_(x()));)g();return l(),O},"genUntil")}n(bh,"createHmacDrbg");var NT={bigint:n(e=>typeof e=="bigint","bigint"),function:n(e=>typeof e=="function","function"),boolean:n(e=>typeof e=="boolean","boolean"),string:n(e=>typeof e=="string","string"),stringOrUint8Array:n(e=>typeof e=="string"||dn(e),"stringOrUint8Array"),isSafeInteger:n(e=>Number.isSafeInteger(e),"isSafeInteger"),array:n(e=>Array.isArray(e),"array"),field:n((e,t)=>t.Fp.isValid(e),"field"),hash:n(e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen),"hash")};function Ni(e,t,r={}){let i=n((o,a,l)=>{let f=NT[a];if(typeof f!="function")throw new Error(`Invalid validator "${a}", expected function`);let g=e[o];if(!(l&&g===void 0)&&!f(g,e))throw new Error(`Invalid param ${String(o)}=${g} (${typeof g}), expected ${a}`)},"checkField");for(let[o,a]of Object.entries(t))i(o,a,!1);for(let[o,a]of Object.entries(r))i(o,a,!0);return e}n(Ni,"validateObject");var Kt=BigInt(0),Tt=BigInt(1),Io=BigInt(2),DT=BigInt(3),Ah=BigInt(4),Ew=BigInt(5),Mw=BigInt(8),LT=BigInt(9),VT=BigInt(16);function Qt(e,t){let r=e%t;return r>=Kt?r:t+r}n(Qt,"mod");function FT(e,t,r){if(r<=Kt||t<Kt)throw new Error("Expected power/modulo > 0");if(r===Tt)return Kt;let i=Tt;for(;t>Kt;)t&Tt&&(i=i*e%r),e=e*e%r,t>>=Tt;return i}n(FT,"pow");function br(e,t,r){let i=e;for(;t-- >Kt;)i*=i,i%=r;return i}n(br,"pow2");function Nu(e,t){if(e===Kt||t<=Kt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Qt(e,t),i=t,o=Kt,a=Tt,l=Tt,f=Kt;for(;r!==Kt;){let x=i/r,T=i%r,I=o-l*x,_=a-f*x;i=r,r=T,o=l,a=f,l=I,f=_}if(i!==Tt)throw new Error("invert: does not exist");return Qt(o,t)}n(Nu,"invert");function jT(e){let t=(e-Tt)/Io,r,i,o;for(r=e-Tt,i=0;r%Io===Kt;r/=Io,i++);for(o=Io;o<e&&FT(o,t,e)!==e-Tt;o++);if(i===1){let l=(e+Tt)/Ah;return n(function(g,x){let T=g.pow(x,l);if(!g.eql(g.sqr(T),x))throw new Error("Cannot find square root");return T},"tonelliFast")}let a=(r+Tt)/Io;return n(function(f,g){if(f.pow(g,t)===f.neg(f.ONE))throw new Error("Cannot find square root");let x=i,T=f.pow(f.mul(f.ONE,o),r),I=f.pow(g,a),_=f.pow(g,r);for(;!f.eql(_,f.ONE);){if(f.eql(_,f.ZERO))return f.ZERO;let O=1;for(let R=f.sqr(_);O<x&&!f.eql(R,f.ONE);O++)R=f.sqr(R);let C=f.pow(T,Tt<<BigInt(x-O-1));T=f.sqr(C),I=f.mul(I,C),_=f.mul(_,T),x=O}return I},"tonelliSlow")}n(jT,"tonelliShanks");function qT(e){if(e%Ah===DT){let t=(e+Tt)/Ah;return n(function(i,o){let a=i.pow(o,t);if(!i.eql(i.sqr(a),o))throw new Error("Cannot find square root");return a},"sqrt3mod4")}if(e%Mw===Ew){let t=(e-Ew)/Mw;return n(function(i,o){let a=i.mul(o,Io),l=i.pow(a,t),f=i.mul(o,l),g=i.mul(i.mul(f,Io),l),x=i.mul(f,i.sub(g,i.ONE));if(!i.eql(i.sqr(x),o))throw new Error("Cannot find square root");return x},"sqrt5mod8")}return e%VT,jT(e)}n(qT,"FpSqrt");var zT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Sh(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=zT.reduce((i,o)=>(i[o]="function",i),t);return Ni(e,r)}n(Sh,"validateField");function WT(e,t,r){if(r<Kt)throw new Error("Expected power > 0");if(r===Kt)return e.ONE;if(r===Tt)return t;let i=e.ONE,o=t;for(;r>Kt;)r&Tt&&(i=e.mul(i,o)),o=e.sqr(o),r>>=Tt;return i}n(WT,"FpPow");function HT(e,t){let r=new Array(t.length),i=t.reduce((a,l,f)=>e.is0(l)?a:(r[f]=a,e.mul(a,l)),e.ONE),o=e.inv(i);return t.reduceRight((a,l,f)=>e.is0(l)?a:(r[f]=e.mul(a,r[f]),e.mul(a,l)),o),r}n(HT,"FpInvertBatch");function Eh(e,t){let r=t!==void 0?t:e.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}n(Eh,"nLength");function Du(e,t,r=!1,i={}){if(e<=Kt)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:a}=Eh(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");let l=qT(e),f=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:Oa(o),ZERO:Kt,ONE:Tt,create:n(g=>Qt(g,e),"create"),isValid:n(g=>{if(typeof g!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof g}`);return Kt<=g&&g<e},"isValid"),is0:n(g=>g===Kt,"is0"),isOdd:n(g=>(g&Tt)===Tt,"isOdd"),neg:n(g=>Qt(-g,e),"neg"),eql:n((g,x)=>g===x,"eql"),sqr:n(g=>Qt(g*g,e),"sqr"),add:n((g,x)=>Qt(g+x,e),"add"),sub:n((g,x)=>Qt(g-x,e),"sub"),mul:n((g,x)=>Qt(g*x,e),"mul"),pow:n((g,x)=>WT(f,g,x),"pow"),div:n((g,x)=>Qt(g*Nu(x,e),e),"div"),sqrN:n(g=>g*g,"sqrN"),addN:n((g,x)=>g+x,"addN"),subN:n((g,x)=>g-x,"subN"),mulN:n((g,x)=>g*x,"mulN"),inv:n(g=>Nu(g,e),"inv"),sqrt:i.sqrt||(g=>l(f,g)),invertBatch:n(g=>HT(f,g),"invertBatch"),cmov:n((g,x,T)=>T?x:g,"cmov"),toBytes:n(g=>r?Uu(g,a):Ui(g,a),"toBytes"),fromBytes:n(g=>{if(g.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${g.length}`);return r?Ru(g):ai(g)},"fromBytes")});return Object.freeze(f)}n(Du,"Field");function Tw(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}n(Tw,"getFieldBytesLength");function Mh(e){let t=Tw(e);return t+Math.ceil(t/2)}n(Mh,"getMinHashLength");function Lu(e,t,r=!1){let i=e.length,o=Tw(t),a=Mh(t);if(i<16||i<a||i>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${i}`);let l=r?ai(e):Ru(e),f=Qt(l,t-Tt)+Tt;return r?Uu(f,o):Ui(f,o)}n(Lu,"mapHashToField");d();h();var $T=BigInt(0),Th=BigInt(1);function _w(e,t){let r=n((o,a)=>{let l=a.negate();return o?l:a},"constTimeNegate"),i=n(o=>{let a=Math.ceil(t/o)+1,l=2**(o-1);return{windows:a,windowSize:l}},"opts");return{constTimeNegate:r,unsafeLadder(o,a){let l=e.ZERO,f=o;for(;a>$T;)a&Th&&(l=l.add(f)),f=f.double(),a>>=Th;return l},precomputeWindow(o,a){let{windows:l,windowSize:f}=i(a),g=[],x=o,T=x;for(let I=0;I<l;I++){T=x,g.push(T);for(let _=1;_<f;_++)T=T.add(x),g.push(T);x=T.double()}return g},wNAF(o,a,l){let{windows:f,windowSize:g}=i(o),x=e.ZERO,T=e.BASE,I=BigInt(2**o-1),_=2**o,O=BigInt(o);for(let C=0;C<f;C++){let R=C*g,j=Number(l&I);l>>=O,j>g&&(j-=_,l+=Th);let F=R,Y=R+Math.abs(j)-1,L=C%2!==0,ce=j<0;j===0?T=T.add(r(L,a[F])):x=x.add(r(ce,a[Y]))}return{p:x,f:T}},wNAFCached(o,a,l,f){let g=o._WINDOW_SIZE||1,x=a.get(o);return x||(x=this.precomputeWindow(o,g),g!==1&&a.set(o,f(x))),this.wNAF(g,x,l)}}}n(_w,"wNAF");function Ih(e){return Sh(e.Fp),Ni(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Eh(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}n(Ih,"validateBasic");function GT(e){let t=Ih(e);Ni(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:o}=t;if(r){if(!i.eql(o,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}n(GT,"validatePointOpts");var{bytesToNumberBE:ZT,hexToBytes:QT}=xh,_o={Err:class extends Error{static{n(this,"DERErr")}constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=_o;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],i=e.subarray(2,r+2);if(!r||i.length!==r)throw new t("Invalid signature integer: wrong length");if(i[0]&128)throw new t("Invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:ZT(i),l:e.subarray(r+2)}},toSig(e){let{Err:t}=_o,r=typeof e=="string"?QT(e):e;if(!dn(r))throw new Error("ui8a expected");let i=r.length;if(i<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==i-2)throw new t("Invalid signature: incorrect length");let{d:o,l:a}=_o._parseInt(r.subarray(2)),{d:l,l:f}=_o._parseInt(a);if(f.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:l}},hexFromSig(e){let t=n(x=>Number.parseInt(x[0],16)&8?"00"+x:x,"slice"),r=n(x=>{let T=x.toString(16);return T.length&1?`0${T}`:T},"h"),i=t(r(e.s)),o=t(r(e.r)),a=i.length/2,l=o.length/2,f=r(a),g=r(l);return`30${r(l+a+4)}02${g}${o}02${f}${i}`}},ci=BigInt(0),Cr=BigInt(1),pz=BigInt(2),kw=BigInt(3),mz=BigInt(4);function JT(e){let t=GT(e),{Fp:r}=t,i=t.toBytes||((C,R,j)=>{let F=R.toAffine();return Is(Uint8Array.from([4]),r.toBytes(F.x),r.toBytes(F.y))}),o=t.fromBytes||(C=>{let R=C.subarray(1),j=r.fromBytes(R.subarray(0,r.BYTES)),F=r.fromBytes(R.subarray(r.BYTES,2*r.BYTES));return{x:j,y:F}});function a(C){let{a:R,b:j}=t,F=r.sqr(C),Y=r.mul(F,C);return r.add(r.add(Y,r.mul(C,R)),j)}if(n(a,"weierstrassEquation"),!r.eql(r.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function l(C){return typeof C=="bigint"&&ci<C&&C<t.n}n(l,"isWithinCurveOrder");function f(C){if(!l(C))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}n(f,"assertGE");function g(C){let{allowedPrivateKeyLengths:R,nByteLength:j,wrapPrivateKey:F,n:Y}=t;if(R&&typeof C!="bigint"){if(dn(C)&&(C=Mo(C)),typeof C!="string"||!R.includes(C.length))throw new Error("Invalid key");C=C.padStart(j*2,"0")}let L;try{L=typeof C=="bigint"?C:ai(wr("private key",C,j))}catch{throw new Error(`private key must be ${j} bytes, hex or bigint, not ${typeof C}`)}return F&&(L=Qt(L,Y)),f(L),L}n(g,"normPrivateKeyToScalar");let x=new Map;function T(C){if(!(C instanceof I))throw new Error("ProjectivePoint expected")}n(T,"assertPrjPoint");class I{static{n(this,"Point")}constructor(R,j,F){if(this.px=R,this.py=j,this.pz=F,R==null||!r.isValid(R))throw new Error("x required");if(j==null||!r.isValid(j))throw new Error("y required");if(F==null||!r.isValid(F))throw new Error("z required")}static fromAffine(R){let{x:j,y:F}=R||{};if(!R||!r.isValid(j)||!r.isValid(F))throw new Error("invalid affine point");if(R instanceof I)throw new Error("projective point not allowed");let Y=n(L=>r.eql(L,r.ZERO),"is0");return Y(j)&&Y(F)?I.ZERO:new I(j,F,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(R){let j=r.invertBatch(R.map(F=>F.pz));return R.map((F,Y)=>F.toAffine(j[Y])).map(I.fromAffine)}static fromHex(R){let j=I.fromAffine(o(wr("pointHex",R)));return j.assertValidity(),j}static fromPrivateKey(R){return I.BASE.multiply(g(R))}_setWindowSize(R){this._WINDOW_SIZE=R,x.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:R,y:j}=this.toAffine();if(!r.isValid(R)||!r.isValid(j))throw new Error("bad point: x or y not FE");let F=r.sqr(j),Y=a(R);if(!r.eql(F,Y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:R}=this.toAffine();if(r.isOdd)return!r.isOdd(R);throw new Error("Field doesn't support isOdd")}equals(R){T(R);let{px:j,py:F,pz:Y}=this,{px:L,py:ce,pz:te}=R,ie=r.eql(r.mul(j,te),r.mul(L,Y)),ae=r.eql(r.mul(F,te),r.mul(ce,Y));return ie&&ae}negate(){return new I(this.px,r.neg(this.py),this.pz)}double(){let{a:R,b:j}=t,F=r.mul(j,kw),{px:Y,py:L,pz:ce}=this,te=r.ZERO,ie=r.ZERO,ae=r.ZERO,Z=r.mul(Y,Y),ge=r.mul(L,L),A=r.mul(ce,ce),s=r.mul(Y,L);return s=r.add(s,s),ae=r.mul(Y,ce),ae=r.add(ae,ae),te=r.mul(R,ae),ie=r.mul(F,A),ie=r.add(te,ie),te=r.sub(ge,ie),ie=r.add(ge,ie),ie=r.mul(te,ie),te=r.mul(s,te),ae=r.mul(F,ae),A=r.mul(R,A),s=r.sub(Z,A),s=r.mul(R,s),s=r.add(s,ae),ae=r.add(Z,Z),Z=r.add(ae,Z),Z=r.add(Z,A),Z=r.mul(Z,s),ie=r.add(ie,Z),A=r.mul(L,ce),A=r.add(A,A),Z=r.mul(A,s),te=r.sub(te,Z),ae=r.mul(A,ge),ae=r.add(ae,ae),ae=r.add(ae,ae),new I(te,ie,ae)}add(R){T(R);let{px:j,py:F,pz:Y}=this,{px:L,py:ce,pz:te}=R,ie=r.ZERO,ae=r.ZERO,Z=r.ZERO,ge=t.a,A=r.mul(t.b,kw),s=r.mul(j,L),u=r.mul(F,ce),m=r.mul(Y,te),y=r.add(j,F),v=r.add(L,ce);y=r.mul(y,v),v=r.add(s,u),y=r.sub(y,v),v=r.add(j,Y);let S=r.add(L,te);return v=r.mul(v,S),S=r.add(s,m),v=r.sub(v,S),S=r.add(F,Y),ie=r.add(ce,te),S=r.mul(S,ie),ie=r.add(u,m),S=r.sub(S,ie),Z=r.mul(ge,v),ie=r.mul(A,m),Z=r.add(ie,Z),ie=r.sub(u,Z),Z=r.add(u,Z),ae=r.mul(ie,Z),u=r.add(s,s),u=r.add(u,s),m=r.mul(ge,m),v=r.mul(A,v),u=r.add(u,m),m=r.sub(s,m),m=r.mul(ge,m),v=r.add(v,m),s=r.mul(u,v),ae=r.add(ae,s),s=r.mul(S,v),ie=r.mul(y,ie),ie=r.sub(ie,s),s=r.mul(y,u),Z=r.mul(S,Z),Z=r.add(Z,s),new I(ie,ae,Z)}subtract(R){return this.add(R.negate())}is0(){return this.equals(I.ZERO)}wNAF(R){return O.wNAFCached(this,x,R,j=>{let F=r.invertBatch(j.map(Y=>Y.pz));return j.map((Y,L)=>Y.toAffine(F[L])).map(I.fromAffine)})}multiplyUnsafe(R){let j=I.ZERO;if(R===ci)return j;if(f(R),R===Cr)return this;let{endo:F}=t;if(!F)return O.unsafeLadder(this,R);let{k1neg:Y,k1:L,k2neg:ce,k2:te}=F.splitScalar(R),ie=j,ae=j,Z=this;for(;L>ci||te>ci;)L&Cr&&(ie=ie.add(Z)),te&Cr&&(ae=ae.add(Z)),Z=Z.double(),L>>=Cr,te>>=Cr;return Y&&(ie=ie.negate()),ce&&(ae=ae.negate()),ae=new I(r.mul(ae.px,F.beta),ae.py,ae.pz),ie.add(ae)}multiply(R){f(R);let j=R,F,Y,{endo:L}=t;if(L){let{k1neg:ce,k1:te,k2neg:ie,k2:ae}=L.splitScalar(j),{p:Z,f:ge}=this.wNAF(te),{p:A,f:s}=this.wNAF(ae);Z=O.constTimeNegate(ce,Z),A=O.constTimeNegate(ie,A),A=new I(r.mul(A.px,L.beta),A.py,A.pz),F=Z.add(A),Y=ge.add(s)}else{let{p:ce,f:te}=this.wNAF(j);F=ce,Y=te}return I.normalizeZ([F,Y])[0]}multiplyAndAddUnsafe(R,j,F){let Y=I.BASE,L=n((te,ie)=>ie===ci||ie===Cr||!te.equals(Y)?te.multiplyUnsafe(ie):te.multiply(ie),"mul"),ce=L(this,j).add(L(R,F));return ce.is0()?void 0:ce}toAffine(R){let{px:j,py:F,pz:Y}=this,L=this.is0();R==null&&(R=L?r.ONE:r.inv(Y));let ce=r.mul(j,R),te=r.mul(F,R),ie=r.mul(Y,R);if(L)return{x:r.ZERO,y:r.ZERO};if(!r.eql(ie,r.ONE))throw new Error("invZ was invalid");return{x:ce,y:te}}isTorsionFree(){let{h:R,isTorsionFree:j}=t;if(R===Cr)return!0;if(j)return j(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:R,clearCofactor:j}=t;return R===Cr?this:j?j(I,this):this.multiplyUnsafe(t.h)}toRawBytes(R=!0){return this.assertValidity(),i(I,this,R)}toHex(R=!0){return Mo(this.toRawBytes(R))}}I.BASE=new I(t.Gx,t.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO);let _=t.nBitLength,O=_w(I,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:I,normPrivateKeyToScalar:g,weierstrassEquation:a,isWithinCurveOrder:l}}n(JT,"weierstrassPoints");function YT(e){let t=Ih(e);return Ni(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}n(YT,"validateOpts");function Pw(e){let t=YT(e),{Fp:r,n:i}=t,o=r.BYTES+1,a=2*r.BYTES+1;function l(v){return ci<v&&v<r.ORDER}n(l,"isValidFieldElement");function f(v){return Qt(v,i)}n(f,"modN");function g(v){return Nu(v,i)}n(g,"invN");let{ProjectivePoint:x,normPrivateKeyToScalar:T,weierstrassEquation:I,isWithinCurveOrder:_}=JT({...t,toBytes(v,S,E){let w=S.toAffine(),c=r.toBytes(w.x),b=Is;return E?b(Uint8Array.from([S.hasEvenY()?2:3]),c):b(Uint8Array.from([4]),c,r.toBytes(w.y))},fromBytes(v){let S=v.length,E=v[0],w=v.subarray(1);if(S===o&&(E===2||E===3)){let c=ai(w);if(!l(c))throw new Error("Point is not on curve");let b=I(c),D=r.sqrt(b),V=(D&Cr)===Cr;return(E&1)===1!==V&&(D=r.neg(D)),{x:c,y:D}}else if(S===a&&E===4){let c=r.fromBytes(w.subarray(0,r.BYTES)),b=r.fromBytes(w.subarray(r.BYTES,2*r.BYTES));return{x:c,y:b}}else throw new Error(`Point of length ${S} was invalid. Expected ${o} compressed bytes or ${a} uncompressed bytes`)}}),O=n(v=>Mo(Ui(v,t.nByteLength)),"numToNByteStr");function C(v){let S=i>>Cr;return v>S}n(C,"isBiggerThanHalfOrder");function R(v){return C(v)?f(-v):v}n(R,"normalizeS");let j=n((v,S,E)=>ai(v.slice(S,E)),"slcNum");class F{static{n(this,"Signature")}constructor(S,E,w){this.r=S,this.s=E,this.recovery=w,this.assertValidity()}static fromCompact(S){let E=t.nByteLength;return S=wr("compactSignature",S,E*2),new F(j(S,0,E),j(S,E,2*E))}static fromDER(S){let{r:E,s:w}=_o.toSig(wr("DER",S));return new F(E,w)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new F(this.r,this.s,S)}recoverPublicKey(S){let{r:E,s:w,recovery:c}=this,b=ae(wr("msgHash",S));if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");let D=c===2||c===3?E+t.n:E;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let V=c&1?"03":"02",z=x.fromHex(V+O(D)),J=g(D),oe=f(-b*J),ue=f(w*J),dt=x.BASE.multiplyAndAddUnsafe(z,oe,ue);if(!dt)throw new Error("point at infinify");return dt.assertValidity(),dt}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new F(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return To(this.toDERHex())}toDERHex(){return _o.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return To(this.toCompactHex())}toCompactHex(){return O(this.r)+O(this.s)}}let Y={isValidPrivateKey(v){try{return T(v),!0}catch{return!1}},normPrivateKeyToScalar:T,randomPrivateKey:n(()=>{let v=Mh(t.n);return Lu(t.randomBytes(v),t.n)},"randomPrivateKey"),precompute(v=8,S=x.BASE){return S._setWindowSize(v),S.multiply(BigInt(3)),S}};function L(v,S=!0){return x.fromPrivateKey(v).toRawBytes(S)}n(L,"getPublicKey");function ce(v){let S=dn(v),E=typeof v=="string",w=(S||E)&&v.length;return S?w===o||w===a:E?w===2*o||w===2*a:v instanceof x}n(ce,"isProbPub");function te(v,S,E=!0){if(ce(v))throw new Error("first arg must be private key");if(!ce(S))throw new Error("second arg must be public key");return x.fromHex(S).multiply(T(v)).toRawBytes(E)}n(te,"getSharedSecret");let ie=t.bits2int||function(v){let S=ai(v),E=v.length*8-t.nBitLength;return E>0?S>>BigInt(E):S},ae=t.bits2int_modN||function(v){return f(ie(v))},Z=Oa(t.nBitLength);function ge(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(ci<=v&&v<Z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Ui(v,t.nByteLength)}n(ge,"int2octets");function A(v,S,E=s){if(["recovered","canonical"].some(K=>K in E))throw new Error("sign() legacy options not supported");let{hash:w,randomBytes:c}=t,{lowS:b,prehash:D,extraEntropy:V}=E;b==null&&(b=!0),v=wr("msgHash",v),D&&(v=wr("prehashed msgHash",w(v)));let z=ae(v),J=T(S),oe=[ge(J),ge(z)];if(V!=null){let K=V===!0?c(r.BYTES):V;oe.push(wr("extraEntropy",K))}let ue=Is(...oe),dt=z;function fe(K){let N=ie(K);if(!_(N))return;let U=g(N),W=x.BASE.multiply(N).toAffine(),re=f(W.x);if(re===ci)return;let q=f(U*f(dt+re*J));if(q===ci)return;let Q=(W.x===re?0:2)|Number(W.y&Cr),nt=q;return b&&C(q)&&(nt=R(q),Q^=1),new F(re,nt,Q)}return n(fe,"k2sig"),{seed:ue,k2sig:fe}}n(A,"prepSig");let s={lowS:t.lowS,prehash:!1},u={lowS:t.lowS,prehash:!1};function m(v,S,E=s){let{seed:w,k2sig:c}=A(v,S,E),b=t;return bh(b.hash.outputLen,b.nByteLength,b.hmac)(w,c)}n(m,"sign"),x.BASE._setWindowSize(8);function y(v,S,E,w=u){let c=v;if(S=wr("msgHash",S),E=wr("publicKey",E),"strict"in w)throw new Error("options.strict was renamed to lowS");let{lowS:b,prehash:D}=w,V,z;try{if(typeof c=="string"||dn(c))try{V=F.fromDER(c)}catch(W){if(!(W instanceof _o.Err))throw W;V=F.fromCompact(c)}else if(typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint"){let{r:W,s:re}=c;V=new F(W,re)}else throw new Error("PARSE");z=x.fromHex(E)}catch(W){if(W.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(b&&V.hasHighS())return!1;D&&(S=t.hash(S));let{r:J,s:oe}=V,ue=ae(S),dt=g(oe),fe=f(ue*dt),K=f(J*dt),N=x.BASE.multiplyAndAddUnsafe(z,fe,K)?.toAffine();return N?f(N.x)===J:!1}return n(y,"verify"),{CURVE:t,getPublicKey:L,getSharedSecret:te,sign:m,verify:y,ProjectivePoint:x,Signature:F,utils:Y}}n(Pw,"weierstrass");function XT(e){return{hash:e,hmac:n((t,...r)=>yh(e,t,yw(...r)),"hmac"),randomBytes:ww}}n(XT,"getHash");function Vu(e,t){let r=n(i=>Pw({...e,...XT(i)}),"create");return Object.freeze({...r(t),create:r})}n(Vu,"createCurve");d();h();d();h();function eI(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);let o=BigInt(32),a=BigInt(4294967295),l=Number(r>>o&a),f=Number(r&a),g=i?4:0,x=i?0:4;e.setUint32(t+g,l,i),e.setUint32(t+x,f,i)}n(eI,"setBigUint64");var Fu=class extends Ts{static{n(this,"SHA2")}constructor(t,r,i,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ku(this.buffer)}update(t){Ms(this);let{view:r,buffer:i,blockLen:o}=this;t=Ka(t);let a=t.length;for(let l=0;l<a;){let f=Math.min(o-this.pos,a-l);if(f===o){let g=Ku(t);for(;o<=a-l;l+=o)this.process(g,l);continue}i.set(t.subarray(l,l+f),this.pos),this.pos+=f,l+=f,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ms(this),mw(t,this),this.finished=!0;let{buffer:r,view:i,blockLen:o,isLE:a}=this,{pos:l}=this;r[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(i,0),l=0);for(let I=l;I<o;I++)r[I]=0;eI(i,o-8,BigInt(this.length*8),a),this.process(i,0);let f=Ku(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let x=g/4,T=this.get();if(x>T.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<x;I++)f.setUint32(4*I,T[I],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:i,length:o,finished:a,destroyed:l,pos:f}=this;return t.length=o,t.pos=f,t.finished=a,t.destroyed=l,o%r&&t.buffer.set(i),t}};var tI=n((e,t,r)=>e&t^~e&r,"Chi"),rI=n((e,t,r)=>e&t^e&r^t&r,"Maj"),nI=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Di=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Li=new Uint32Array(64),_h=class extends Fu{static{n(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=Di[0]|0,this.B=Di[1]|0,this.C=Di[2]|0,this.D=Di[3]|0,this.E=Di[4]|0,this.F=Di[5]|0,this.G=Di[6]|0,this.H=Di[7]|0}get(){let{A:t,B:r,C:i,D:o,E:a,F:l,G:f,H:g}=this;return[t,r,i,o,a,l,f,g]}set(t,r,i,o,a,l,f,g){this.A=t|0,this.B=r|0,this.C=i|0,this.D=o|0,this.E=a|0,this.F=l|0,this.G=f|0,this.H=g|0}process(t,r){for(let I=0;I<16;I++,r+=4)Li[I]=t.getUint32(r,!1);for(let I=16;I<64;I++){let _=Li[I-15],O=Li[I-2],C=fn(_,7)^fn(_,18)^_>>>3,R=fn(O,17)^fn(O,19)^O>>>10;Li[I]=R+Li[I-7]+C+Li[I-16]|0}let{A:i,B:o,C:a,D:l,E:f,F:g,G:x,H:T}=this;for(let I=0;I<64;I++){let _=fn(f,6)^fn(f,11)^fn(f,25),O=T+_+tI(f,g,x)+nI[I]+Li[I]|0,R=(fn(i,2)^fn(i,13)^fn(i,22))+rI(i,o,a)|0;T=x,x=g,g=f,f=l+O|0,l=a,a=o,o=i,i=O+R|0}i=i+this.A|0,o=o+this.B|0,a=a+this.C|0,l=l+this.D|0,f=f+this.E|0,g=g+this.F|0,x=x+this.G|0,T=T+this.H|0,this.set(i,o,a,l,f,g,x,T)}roundClean(){Li.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var ju=vw(()=>new _h);var Bw=Du(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),iI=Bw.create(BigInt("-3")),oI=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),ko=Vu({a:iI,b:oI,Fp:Bw,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},ju);var Kw=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{if(!t.isJWT)return Promise.resolve(ve(se.InvalidAddressType));if(t.data.payload.iss!==ca)return Promise.resolve(ve(se.InvalidClaimError));if(t.data.payload.aud!==ua)return Promise.resolve(ve(se.InvalidClaimError));let r={...t.data.header,kid:ct(Po.Buffer.from(e.publicKey))},i={...t.data.payload,sub:ct(Po.Buffer.from(e.publicKey))},o=ct(Po.Buffer.from(JSON.stringify(r)))+"."+ct(Po.Buffer.from(JSON.stringify(i))),l=ko.sign(Po.Buffer.from(o).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),f=ct(Po.Buffer.from(l)),g={header:r,payload:i,signature:f};return Promise.resolve({status:"success",signature:f,signedJWT:g})},"sign")}),"createJWTKeypairSigner");d();h();d();h();d();h();var Ow=he(No());async function kh(e,t,r){let i=Pu(r.message,r.signingType,r.chainType);if("status"in i)return i;try{let o={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Solana"};if(r.signingType==="transaction"){let a=Qs.VersionedMessage.deserialize(i),f=new Qs.VersionedTransaction(a).serialize(),g=ct(f),{result:{transaction:x}}=await e.signTransaction({transaction:g,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,policyName:r.policyName??null}),T;if(typeof x=="string")T=new Uint8Array(nn(x));else if(Array.isArray(x))T=new Uint8Array(x);else throw new Error("Unexpected transaction format from KMS");let I=Qs.VersionedTransaction.deserialize(T);if(!I.signatures||I.signatures.length===0)throw new Error("Signed transaction has no signatures");return{status:"success",signature:Ow.default.encode(I.signatures[0])}}else{let a=new TextDecoder().decode(i),{result:{signature:l}}=await e.signUtf8Message({message:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,algorithm:"Ed25519",policyName:r.policyName});return{status:"success",signature:dc(l)}}}catch(o){return ve(se.InternalError,`KMS Solana signing failed: ${o instanceof Error?o.message:"Unknown error"}`)}}n(kh,"signSolana");d();h();var qu=he(en());async function Oh(e,t,r){try{let i={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:"Ethereum"};switch(r.signingType){case"transaction":{let{result:{transaction:o}}=await e.signTransaction({transaction:{kind:Aa.RLP_ENCODED,bytes:r.message},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,policyName:r.policyName});if(typeof o!="string")return ve(se.InternalError,"KMS returned non-string Ethereum signed transaction");try{let a=Uw(o)?o.slice(2):o,l=a.length%2===0?a:`0${a}`,f=uc(l);return{status:"success",signature:aI(f)}}catch(a){return ve(se.InternalError,`Failed to parse signed Ethereum transaction from KMS: ${a instanceof Error?a.message:"Unknown error"}`)}}case"message":{let o=sI(r.message),a=ct(o),{result:{signature:l}}=await e.ethereumSignMessage({message:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,policyName:r.policyName});return{status:"success",signature:Cw(l)}}case"typedData":{let{result:{signature:o}}=await e.ethereumSignTypedData({typedData:r.data,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,policyName:r.policyName});return{status:"success",signature:Cw(o)}}}}catch(i){return ve(se.InternalError,`KMS EVM signing failed: ${i instanceof Error?i.message:"Unknown error"}`)}}n(Oh,"signEVM");function Cw(e){let t=nn(e);return`0x${qu.Buffer.from(t).toString("hex")}`}n(Cw,"base64UrlSignatureToHex");function sI(e){if(Uw(e)){let t=e.slice(2),r=t.length%2===0?t:`0${t}`;return qu.Buffer.from(r,"hex")}return qu.Buffer.from(e,"utf8")}n(sI,"normalizePersonalSignPayload");function Uw(e){return e.length<3||!(e.startsWith("0x")||e.startsWith("0X"))||e.length%2!==0?!1:/^[0-9a-fA-F]+$/.test(e.slice(2))}n(Uw,"looksLikeHex");function Rw(e){if(e.length===32)return e;if(e.length>32){let r=0;for(;r<e.length-32&&e[r]===0;)r++;let i=e.subarray(r);if(i.length===32)return i;if(i.length>32)throw new Error("Unexpected r/s length > 32 bytes");let o=new Uint8Array(32);return o.set(i,32-i.length),o}let t=new Uint8Array(32);return t.set(e,32-e.length),t}n(Rw,"leftPadTo32");function Bh(e,t){let r=e[t];if(r<=127)return{item:{kind:"bytes",data:e.subarray(t,t+1)},nextOffset:t+1};if(r<=183){let x=r-128,T=t+1,I=T+x;return{item:{kind:"bytes",data:e.subarray(T,I)},nextOffset:I}}if(r<=191){let x=r-183,T=Kh(e,t+1,x),I=t+1+x,_=I+T;return{item:{kind:"bytes",data:e.subarray(I,_)},nextOffset:_}}if(r<=247){let x=r-192,T=t+1,I=T+x,_=[],O=T;for(;O<I;){let C=Bh(e,O);_.push(C.item),O=C.nextOffset}return{item:{kind:"list",items:_},nextOffset:I}}let i=r-247,o=Kh(e,t+1,i),a=t+1+i,l=a+o,f=[],g=a;for(;g<l;){let x=Bh(e,g);f.push(x.item),g=x.nextOffset}return{item:{kind:"list",items:f},nextOffset:l}}n(Bh,"decodeRlpAt");function Kh(e,t,r){let i=0;for(let o=0;o<r;o++)i=i<<8|e[t+o];return i>>>0}n(Kh,"readBigEndian");function Ph(e){if(e.kind!=="bytes")throw new Error("Expected RLP bytes");return e.data}n(Ph,"rlpItemToBytes");function aI(e){if(e.length===0)throw new Error("Empty transaction bytes");let t=e[0];if(t!==1&&t!==2)throw new Error("Expected EIP-2718 typed transaction (0x01 or 0x02)");let{item:r}=Bh(e,1);if(r.kind!=="list")throw new Error("Expected typed tx payload as RLP list");let i=r.items;if(i.length<3)throw new Error("Typed tx payload too short");let o=Ph(i[i.length-3]),a=Ph(i[i.length-2]),l=Ph(i[i.length-1]),g=27+(o.length===0?0:Kh(o,0,o.length)&1),x=Rw(a),T=Rw(l),I=new Uint8Array(65);return I.set(x,0),I.set(T,32),I[64]=g,`0x${cc(I)}`}n(aI,"extractSignatureFromEip2718");d();h();d();h();d();h();d();h();d();h();d();h();var Vi=32;function Nw(e){return cI(e)&&uI(e)===Vi}n(Nw,"isValidSuiAddress");function Un(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Vi*2,"0")}`}n(Un,"normalizeSuiAddress");function cI(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}n(cI,"isHex");function uI(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}n(uI,"getHexByteLength");d();h();var lI=/^vector<(.+)>$/,fI=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Ca=class e{static{n(this,"TypeTagSerializer")}static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let i=t.match(lI);if(i)return{vector:e.parseFromStr(i[1],r)};let o=t.match(fI);if(o)return{struct:{address:r?Un(o[1]):o[1],module:o[2],name:o[3],typeParams:o[5]===void 0?[]:e.parseStructTypeArgs(o[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return z0(t).map(i=>e.parseFromStr(i,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,i=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}};function dI(e){return B.u64({name:"unsafe_u64",...e}).transform({input:n(t=>t,"input"),output:n(t=>Number(t),"output")})}n(dI,"unsafe_u64");function hI(e){return B.enum("Option",{None:null,Some:e})}n(hI,"optionEnum");var wt=B.bytes(Vi).transform({validate:n(e=>{let t=typeof e=="string"?e:ro(e);if(!t||!Nw(Un(t)))throw new Error(`Invalid Sui address ${t}`)},"validate"),input:n(e=>typeof e=="string"?lc(Un(e)):e,"input"),output:n(e=>Un(ro(e)),"output")}),xr=B.vector(B.u8()).transform({name:"ObjectDigest",input:n(e=>zl(e),"input"),output:n(e=>q0(new Uint8Array(e)),"output"),validate:n(e=>{if(zl(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),lr=B.struct("SuiObjectRef",{objectId:wt,version:B.u64(),digest:xr}),Ch=B.struct("SharedObjectRef",{objectId:wt,initialSharedVersion:B.u64(),mutable:B.bool()}),Rh=B.enum("ObjectArg",{ImmOrOwnedObject:lr,SharedObject:Ch,Receiving:lr}),Uh=B.enum("CallArg",{Pure:B.struct("Pure",{bytes:B.vector(B.u8()).transform({input:n(e=>typeof e=="string"?ir(e):e,"input"),output:n(e=>Ut(new Uint8Array(e)),"output")})}),Object:Rh}),Nh=B.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:B.lazy(()=>Nh),struct:B.lazy(()=>qh),u16:null,u32:null,u256:null}),zu=Nh.transform({input:n(e=>typeof e=="string"?Ca.parseFromStr(e,!0):e,"input"),output:n(e=>Ca.tagToString(e),"output")}),hn=B.enum("Argument",{GasCoin:null,Input:B.u16(),Result:B.u16(),NestedResult:B.tuple([B.u16(),B.u16()])}),Dh=B.struct("ProgrammableMoveCall",{package:wt,module:B.string(),function:B.string(),typeArguments:B.vector(zu),arguments:B.vector(hn)}),Lh=B.enum("Command",{MoveCall:Dh,TransferObjects:B.struct("TransferObjects",{objects:B.vector(hn),address:hn}),SplitCoins:B.struct("SplitCoins",{coin:hn,amounts:B.vector(hn)}),MergeCoins:B.struct("MergeCoins",{destination:hn,sources:B.vector(hn)}),Publish:B.struct("Publish",{modules:B.vector(B.vector(B.u8()).transform({input:n(e=>typeof e=="string"?ir(e):e,"input"),output:n(e=>Ut(new Uint8Array(e)),"output")})),dependencies:B.vector(wt)}),MakeMoveVec:B.struct("MakeMoveVec",{type:hI(zu).transform({input:n(e=>e===null?{None:!0}:{Some:e},"input"),output:n(e=>e.Some??null,"output")}),elements:B.vector(hn)}),Upgrade:B.struct("Upgrade",{modules:B.vector(B.vector(B.u8()).transform({input:n(e=>typeof e=="string"?ir(e):e,"input"),output:n(e=>Ut(new Uint8Array(e)),"output")})),dependencies:B.vector(wt),package:wt,ticket:hn})}),Vh=B.struct("ProgrammableTransaction",{inputs:B.vector(Uh),commands:B.vector(Lh)}),Fh=B.enum("TransactionKind",{ProgrammableTransaction:Vh,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),jh=B.enum("TransactionExpiration",{None:null,Epoch:dI()}),qh=B.struct("StructTag",{address:wt,module:B.string(),name:B.string(),typeParams:B.vector(Nh)}),zh=B.struct("GasData",{payment:B.vector(lr),owner:wt,price:B.u64(),budget:B.u64()}),Wh=B.struct("TransactionDataV1",{kind:Fh,sender:wt,gasData:zh,expiration:jh}),Hh=B.enum("TransactionData",{V1:Wh}),$h=B.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Gh=B.enum("IntentVersion",{V0:null}),Zh=B.enum("AppId",{Sui:null}),Qh=B.struct("Intent",{scope:$h,version:Gh,appId:Zh});function Jh(e){return B.struct(`IntentMessage<${e.name}>`,{intent:Qh,value:e})}n(Jh,"IntentMessage");var Yh=B.enum("CompressedSignature",{ED25519:B.fixedArray(64,B.u8()),Secp256k1:B.fixedArray(64,B.u8()),Secp256r1:B.fixedArray(64,B.u8()),ZkLogin:B.vector(B.u8())}),Xh=B.enum("PublicKey",{ED25519:B.fixedArray(32,B.u8()),Secp256k1:B.fixedArray(33,B.u8()),Secp256r1:B.fixedArray(33,B.u8()),ZkLogin:B.vector(B.u8())}),ep=B.struct("MultiSigPkMap",{pubKey:Xh,weight:B.u8()}),tp=B.struct("MultiSigPublicKey",{pk_map:B.vector(ep),threshold:B.u16()}),Dw=B.struct("MultiSig",{sigs:B.vector(Yh),bitmap:B.u16(),multisig_pk:tp}),pI=B.vector(B.u8()).transform({input:n(e=>typeof e=="string"?ir(e):e,"input"),output:n(e=>Ut(new Uint8Array(e)),"output")}),rp=B.struct("SenderSignedTransaction",{intentMessage:Jh(Hh),txSignatures:B.vector(pI)}),Lw=B.vector(rp,{name:"SenderSignedData"});d();h();var mI=B.enum("PackageUpgradeError",{UnableToFetchPackage:B.struct("UnableToFetchPackage",{packageId:wt}),NotAPackage:B.struct("NotAPackage",{objectId:wt}),IncompatibleUpgrade:null,DigestDoesNotMatch:B.struct("DigestDoesNotMatch",{digest:B.vector(B.u8())}),UnknownUpgradePolicy:B.struct("UnknownUpgradePolicy",{policy:B.u8()}),PackageIDDoesNotMatch:B.struct("PackageIDDoesNotMatch",{packageId:wt,ticketId:wt})}),gI=B.struct("ModuleId",{address:wt,name:B.string()}),Vw=B.struct("MoveLocation",{module:gI,function:B.u16(),instruction:B.u16(),functionName:B.option(B.string())}),yI=B.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:B.struct("IndexOutOfBounds",{idx:B.u16()}),SecondaryIndexOutOfBounds:B.struct("SecondaryIndexOutOfBounds",{resultIdx:B.u16(),secondaryIdx:B.u16()}),InvalidResultArity:B.struct("InvalidResultArity",{resultIdx:B.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),vI=B.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),wI=B.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:B.struct("MoveObjectTooBig",{objectSize:B.u64(),maxObjectSize:B.u64()}),MovePackageTooBig:B.struct("MovePackageTooBig",{objectSize:B.u64(),maxObjectSize:B.u64()}),CircularObjectOwnership:B.struct("CircularObjectOwnership",{object:wt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:B.option(Vw),MoveAbort:B.tuple([Vw,B.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:B.struct("CommandArgumentError",{argIdx:B.u16(),kind:yI}),TypeArgumentError:B.struct("TypeArgumentError",{argumentIdx:B.u16(),kind:vI}),UnusedValueWithoutDrop:B.struct("UnusedValueWithoutDrop",{resultIdx:B.u16(),secondaryIdx:B.u16()}),InvalidPublicFunctionReturnType:B.struct("InvalidPublicFunctionReturnType",{idx:B.u16()}),InvalidTransferObject:null,EffectsTooLarge:B.struct("EffectsTooLarge",{currentSize:B.u64(),maxSize:B.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:B.struct("PackageUpgradeError",{upgradeError:mI}),WrittenObjectsTooLarge:B.struct("WrittenObjectsTooLarge",{currentSize:B.u64(),maxSize:B.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:B.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:B.vector(wt)}),AddressDeniedForCoin:B.struct("AddressDeniedForCoin",{address:wt,coinType:B.string()}),CoinTypeGlobalPause:B.struct("CoinTypeGlobalPause",{coinType:B.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Fw=B.enum("ExecutionStatus",{Success:null,Failed:B.struct("ExecutionFailed",{error:wI,command:B.option(B.u64())})}),jw=B.struct("GasCostSummary",{computationCost:B.u64(),storageCost:B.u64(),storageRebate:B.u64(),nonRefundableStorageFee:B.u64()}),_s=B.enum("Owner",{AddressOwner:wt,ObjectOwner:wt,Shared:B.struct("Shared",{initialSharedVersion:B.u64()}),Immutable:null}),bI=B.struct("TransactionEffectsV1",{status:Fw,executedEpoch:B.u64(),gasUsed:jw,modifiedAtVersions:B.vector(B.tuple([wt,B.u64()])),sharedObjects:B.vector(lr),transactionDigest:xr,created:B.vector(B.tuple([lr,_s])),mutated:B.vector(B.tuple([lr,_s])),unwrapped:B.vector(B.tuple([lr,_s])),deleted:B.vector(lr),unwrappedThenDeleted:B.vector(lr),wrapped:B.vector(lr),gasObject:B.tuple([lr,_s]),eventsDigest:B.option(xr),dependencies:B.vector(xr)}),np=B.tuple([B.u64(),xr]),xI=B.enum("ObjectIn",{NotExist:null,Exist:B.tuple([np,_s])}),AI=B.enum("ObjectOut",{NotExist:null,ObjectWrite:B.tuple([xr,_s]),PackageWrite:np}),SI=B.enum("IDOperation",{None:null,Created:null,Deleted:null}),EI=B.struct("EffectsObjectChange",{inputState:xI,outputState:AI,idOperation:SI}),MI=B.enum("UnchangedSharedKind",{ReadOnlyRoot:np,MutateDeleted:B.u64(),ReadDeleted:B.u64(),Cancelled:B.u64(),PerEpochConfig:null}),TI=B.struct("TransactionEffectsV2",{status:Fw,executedEpoch:B.u64(),gasUsed:jw,transactionDigest:xr,gasObjectIndex:B.option(B.u32()),eventsDigest:B.option(xr),dependencies:B.vector(xr),lamportVersion:B.u64(),changedObjects:B.vector(B.tuple([wt,EI])),unchangedSharedObjects:B.vector(B.tuple([wt,MI])),auxDataDigest:B.option(xr)}),qw=B.enum("TransactionEffects",{V1:bI,V2:TI});var ui={...B,U8:B.u8(),U16:B.u16(),U32:B.u32(),U64:B.u64(),U128:B.u128(),U256:B.u256(),ULEB128:B.uleb128(),Bool:B.bool(),String:B.string(),Address:wt,AppId:Zh,Argument:hn,CallArg:Uh,CompressedSignature:Yh,GasData:zh,Intent:Qh,IntentMessage:Jh,IntentScope:$h,IntentVersion:Gh,MultiSig:Dw,MultiSigPkMap:ep,MultiSigPublicKey:tp,ObjectArg:Rh,ObjectDigest:xr,ProgrammableMoveCall:Dh,ProgrammableTransaction:Vh,PublicKey:Xh,SenderSignedData:Lw,SenderSignedTransaction:rp,SharedObjectRef:Ch,StructTag:qh,SuiObjectRef:lr,Command:Lh,TransactionData:Hh,TransactionDataV1:Wh,TransactionExpiration:jh,TransactionKind:Fh,TypeTag:zu,TransactionEffects:qw};d();h();d();h();d();h();d();h();function ks(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}n(ks,"number");function II(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}n(II,"isBytes");function Ps(e,...t){if(!II(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}n(Ps,"bytes");function zw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ks(e.outputLen),ks(e.blockLen)}n(zw,"hash");function li(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}n(li,"exists");function Wu(e,t){Ps(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}n(Wu,"output");d();h();var Bs=n(e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),"u32"),Hu=n(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView");var ji=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Hw=n(e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,"byteSwap"),pn=ji?e=>e:e=>Hw(e);function Bo(e){for(let t=0;t<e.length;t++)e[t]=Hw(e[t])}n(Bo,"byteSwap32");var _I=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $u(e){Ps(e);let t="";for(let r=0;r<e.length;r++)t+=_I[e[r]];return t}n($u,"bytesToHex");var fi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ww(e){if(e>=fi._0&&e<=fi._9)return e-fi._0;if(e>=fi._A&&e<=fi._F)return e-(fi._A-10);if(e>=fi._a&&e<=fi._f)return e-(fi._a-10)}n(Ww,"asciiToBase16");function $w(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let o=0,a=0;o<r;o++,a+=2){let l=Ww(e.charCodeAt(a)),f=Ww(e.charCodeAt(a+1));if(l===void 0||f===void 0){let g=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+a)}i[o]=l*16+f}return i}n($w,"hexToBytes");function kI(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}n(kI,"utf8ToBytes");function Rr(e){return typeof e=="string"&&(e=kI(e)),Ps(e),e}n(Rr,"toBytes");var Fi=class{static{n(this,"Hash")}clone(){return this._cloneInto()}},QW={}.toString;function Gw(e){let t=n(i=>e().update(Rr(i)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}n(Gw,"wrapConstructor");function Zw(e){let t=n((i,o)=>e(o).update(Rr(i)).digest(),"hashC"),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=i=>e(i),t}n(Zw,"wrapConstructorWithOpts");var Qw=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),Gu=class extends Fi{static{n(this,"BLAKE")}constructor(t,r,i={},o,a,l){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,ks(t),ks(r),ks(o),r<0||r>o)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>o))throw new Error(`key must be up 1..${o} byte long or undefined`);if(i.salt!==void 0&&i.salt.length!==a)throw new Error(`salt must be ${a} byte long or undefined`);if(i.personalization!==void 0&&i.personalization.length!==l)throw new Error(`personalization must be ${l} byte long or undefined`);this.buffer32=Bs(this.buffer=new Uint8Array(t))}update(t){li(this);let{blockLen:r,buffer:i,buffer32:o}=this;t=Rr(t);let a=t.length,l=t.byteOffset,f=t.buffer;for(let g=0;g<a;){this.pos===r&&(ji||Bo(o),this.compress(o,0,!1),ji||Bo(o),this.pos=0);let x=Math.min(r-this.pos,a-g),T=l+g;if(x===r&&!(T%4)&&g+x<a){let I=new Uint32Array(f,T,Math.floor((a-g)/4));ji||Bo(I);for(let _=0;g+r<a;_+=o.length,g+=r)this.length+=r,this.compress(I,_,!1);ji||Bo(I);continue}i.set(t.subarray(g,g+x),this.pos),this.pos+=x,this.length+=x,g+=x}return this}digestInto(t){li(this),Wu(t,this);let{pos:r,buffer32:i}=this;this.finished=!0,this.buffer.subarray(r).fill(0),ji||Bo(i),this.compress(i,0,!0),ji||Bo(i);let o=Bs(t);this.get().forEach((a,l)=>o[l]=pn(a))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){let{buffer:r,length:i,finished:o,destroyed:a,outputLen:l,pos:f}=this;return t||(t=new this.constructor({dkLen:l})),t.set(...this.get()),t.length=i,t.finished=o,t.destroyed=a,t.outputLen=l,t.buffer.set(r),t.pos=f,t}};d();h();var Zu=BigInt(4294967295),ip=BigInt(32);function Jw(e,t=!1){return t?{h:Number(e&Zu),l:Number(e>>ip&Zu)}:{h:Number(e>>ip&Zu)|0,l:Number(e&Zu)|0}}n(Jw,"fromBig");function PI(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:a,l}=Jw(e[o],t);[r[o],i[o]]=[a,l]}return[r,i]}n(PI,"split");var BI=n((e,t)=>BigInt(e>>>0)<<ip|BigInt(t>>>0),"toBig"),KI=n((e,t,r)=>e>>>r,"shrSH"),OI=n((e,t,r)=>e<<32-r|t>>>r,"shrSL"),CI=n((e,t,r)=>e>>>r|t<<32-r,"rotrSH"),RI=n((e,t,r)=>e<<32-r|t>>>r,"rotrSL"),UI=n((e,t,r)=>e<<64-r|t>>>r-32,"rotrBH"),NI=n((e,t,r)=>e>>>r-32|t<<64-r,"rotrBL"),DI=n((e,t)=>t,"rotr32H"),LI=n((e,t)=>e,"rotr32L"),VI=n((e,t,r)=>e<<r|t>>>32-r,"rotlSH"),FI=n((e,t,r)=>t<<r|e>>>32-r,"rotlSL"),jI=n((e,t,r)=>t<<r-32|e>>>64-r,"rotlBH"),qI=n((e,t,r)=>e<<r-32|t>>>64-r,"rotlBL");function zI(e,t,r,i){let o=(t>>>0)+(i>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}n(zI,"add");var WI=n((e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),"add3L"),HI=n((e,t,r,i)=>t+r+i+(e/2**32|0)|0,"add3H"),$I=n((e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),"add4L"),GI=n((e,t,r,i,o)=>t+r+i+o+(e/2**32|0)|0,"add4H"),ZI=n((e,t,r,i,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(o>>>0),"add5L"),QI=n((e,t,r,i,o,a)=>t+r+i+o+a+(e/2**32|0)|0,"add5H");var JI={fromBig:Jw,split:PI,toBig:BI,shrSH:KI,shrSL:OI,rotrSH:CI,rotrSL:RI,rotrBH:UI,rotrBL:NI,rotr32H:DI,rotr32L:LI,rotlSH:VI,rotlSL:FI,rotlBH:jI,rotlBL:qI,add:zI,add3L:WI,add3H:HI,add4L:$I,add4H:GI,add5H:QI,add5L:ZI},me=JI;var Ot=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ne=new Uint32Array(32);function qi(e,t,r,i,o,a){let l=o[a],f=o[a+1],g=ne[2*e],x=ne[2*e+1],T=ne[2*t],I=ne[2*t+1],_=ne[2*r],O=ne[2*r+1],C=ne[2*i],R=ne[2*i+1],j=me.add3L(g,T,l);x=me.add3H(j,x,I,f),g=j|0,{Dh:R,Dl:C}={Dh:R^x,Dl:C^g},{Dh:R,Dl:C}={Dh:me.rotr32H(R,C),Dl:me.rotr32L(R,C)},{h:O,l:_}=me.add(O,_,R,C),{Bh:I,Bl:T}={Bh:I^O,Bl:T^_},{Bh:I,Bl:T}={Bh:me.rotrSH(I,T,24),Bl:me.rotrSL(I,T,24)},ne[2*e]=g,ne[2*e+1]=x,ne[2*t]=T,ne[2*t+1]=I,ne[2*r]=_,ne[2*r+1]=O,ne[2*i]=C,ne[2*i+1]=R}n(qi,"G1b");function zi(e,t,r,i,o,a){let l=o[a],f=o[a+1],g=ne[2*e],x=ne[2*e+1],T=ne[2*t],I=ne[2*t+1],_=ne[2*r],O=ne[2*r+1],C=ne[2*i],R=ne[2*i+1],j=me.add3L(g,T,l);x=me.add3H(j,x,I,f),g=j|0,{Dh:R,Dl:C}={Dh:R^x,Dl:C^g},{Dh:R,Dl:C}={Dh:me.rotrSH(R,C,16),Dl:me.rotrSL(R,C,16)},{h:O,l:_}=me.add(O,_,R,C),{Bh:I,Bl:T}={Bh:I^O,Bl:T^_},{Bh:I,Bl:T}={Bh:me.rotrBH(I,T,63),Bl:me.rotrBL(I,T,63)},ne[2*e]=g,ne[2*e+1]=x,ne[2*t]=T,ne[2*t+1]=I,ne[2*r]=_,ne[2*r+1]=O,ne[2*i]=C,ne[2*i+1]=R}n(zi,"G2b");var op=class extends Gu{static{n(this,"BLAKE2b")}constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Ot[0]|0,this.v0h=Ot[1]|0,this.v1l=Ot[2]|0,this.v1h=Ot[3]|0,this.v2l=Ot[4]|0,this.v2h=Ot[5]|0,this.v3l=Ot[6]|0,this.v3h=Ot[7]|0,this.v4l=Ot[8]|0,this.v4h=Ot[9]|0,this.v5l=Ot[10]|0,this.v5h=Ot[11]|0,this.v6l=Ot[12]|0,this.v6h=Ot[13]|0,this.v7l=Ot[14]|0,this.v7h=Ot[15]|0;let r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,t.salt){let i=Bs(Rr(t.salt));this.v4l^=pn(i[0]),this.v4h^=pn(i[1]),this.v5l^=pn(i[2]),this.v5h^=pn(i[3])}if(t.personalization){let i=Bs(Rr(t.personalization));this.v6l^=pn(i[0]),this.v6h^=pn(i[1]),this.v7l^=pn(i[2]),this.v7h^=pn(i[3])}if(t.key){let i=new Uint8Array(this.blockLen);i.set(Rr(t.key)),this.update(i)}}get(){let{v0l:t,v0h:r,v1l:i,v1h:o,v2l:a,v2h:l,v3l:f,v3h:g,v4l:x,v4h:T,v5l:I,v5h:_,v6l:O,v6h:C,v7l:R,v7h:j}=this;return[t,r,i,o,a,l,f,g,x,T,I,_,O,C,R,j]}set(t,r,i,o,a,l,f,g,x,T,I,_,O,C,R,j){this.v0l=t|0,this.v0h=r|0,this.v1l=i|0,this.v1h=o|0,this.v2l=a|0,this.v2h=l|0,this.v3l=f|0,this.v3h=g|0,this.v4l=x|0,this.v4h=T|0,this.v5l=I|0,this.v5h=_|0,this.v6l=O|0,this.v6h=C|0,this.v7l=R|0,this.v7h=j|0}compress(t,r,i){this.get().forEach((g,x)=>ne[x]=g),ne.set(Ot,16);let{h:o,l:a}=me.fromBig(BigInt(this.length));ne[24]=Ot[8]^a,ne[25]=Ot[9]^o,i&&(ne[28]=~ne[28],ne[29]=~ne[29]);let l=0,f=Qw;for(let g=0;g<12;g++)qi(0,4,8,12,t,r+2*f[l++]),zi(0,4,8,12,t,r+2*f[l++]),qi(1,5,9,13,t,r+2*f[l++]),zi(1,5,9,13,t,r+2*f[l++]),qi(2,6,10,14,t,r+2*f[l++]),zi(2,6,10,14,t,r+2*f[l++]),qi(3,7,11,15,t,r+2*f[l++]),zi(3,7,11,15,t,r+2*f[l++]),qi(0,5,10,15,t,r+2*f[l++]),zi(0,5,10,15,t,r+2*f[l++]),qi(1,6,11,12,t,r+2*f[l++]),zi(1,6,11,12,t,r+2*f[l++]),qi(2,7,8,13,t,r+2*f[l++]),zi(2,7,8,13,t,r+2*f[l++]),qi(3,4,9,14,t,r+2*f[l++]),zi(3,4,9,14,t,r+2*f[l++]);this.v0l^=ne[0]^ne[16],this.v0h^=ne[1]^ne[17],this.v1l^=ne[2]^ne[18],this.v1h^=ne[3]^ne[19],this.v2l^=ne[4]^ne[20],this.v2h^=ne[5]^ne[21],this.v3l^=ne[6]^ne[22],this.v3h^=ne[7]^ne[23],this.v4l^=ne[8]^ne[24],this.v4h^=ne[9]^ne[25],this.v5l^=ne[10]^ne[26],this.v5h^=ne[11]^ne[27],this.v6l^=ne[12]^ne[28],this.v6h^=ne[13]^ne[29],this.v7l^=ne[14]^ne[30],this.v7h^=ne[15]^ne[31],ne.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Ko=Zw(e=>new op(e));d();h();d();h();function Oo(e,t){return ui.IntentMessage(ui.fixedArray(t.length,ui.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}n(Oo,"messageWithIntent");function sp(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}n(sp,"bytesEqual");var Ks=class{static{n(this,"PublicKey")}equals(t){return sp(this.toRawBytes(),t.toRawBytes())}toBase64(){return Ut(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return Ut(t)}verifyWithIntent(t,r,i){let o=Oo(i,t),a=Ko(o,{dkLen:32});return this.verify(a,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(ui.vector(ui.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Un($u(Ko(this.toSuiBytes(),{dkLen:32})).slice(0,Vi*2))}};d();h();var di={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},Yw={ED25519:32,Secp256k1:33,Secp256r1:33},Qu={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};d();h();var Xw=n(e=>{throw TypeError(e)},"__typeError"),eb=n((e,t,r)=>t.has(e)||Xw("Cannot "+r),"__accessCheck"),Ju=n((e,t,r)=>(eb(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),Yu=n((e,t,r)=>t.has(e)?Xw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),Xu=n((e,t,r,i)=>(eb(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),"__privateSet"),el,tl,rl,nl,ap=class extends Error{static{n(this,"SuiGraphQLRequestError")}},il=class{static{n(this,"SuiGraphQLClient")}constructor({url:t,fetch:r=fetch,headers:i={},queries:o={}}){Yu(this,el),Yu(this,tl),Yu(this,rl),Yu(this,nl),Xu(this,el,t),Xu(this,tl,o),Xu(this,rl,i),Xu(this,nl,(...a)=>r(...a))}async query(t){let r=await Ju(this,nl).call(this,Ju(this,el),{method:"POST",headers:{"Content-Type":"application/json",...Ju(this,rl)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):W0(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new ap(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:Ju(this,tl)[t]})}};el=new WeakMap;tl=new WeakMap;rl=new WeakMap;nl=new WeakMap;d();h();var tb=H0();d();h();function YI(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let i=r.toString(2).padStart(6,"0");return Array.from(i).map(Number)}n(YI,"base64UrlCharTo6Bits");function XI(e){let t=[];for(let r=0;r<e.length;r++){let i=e.charAt(r),o=YI(i);t=t.concat(o)}return t}n(XI,"base64UrlStringToBitVector");function e_(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=XI(e),i=t%4;if(i!==0)if(i===1)r=r.slice(2);else if(i===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let o=(t+e.length-1)%4;if(o!==3)if(o===2)r=r.slice(0,r.length-2);else if(o===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let a=new Uint8Array(Math.floor(r.length/8)),l=0;for(let f=0;f<r.length;f+=8){let g=r.slice(f,f+8),x=parseInt(g.join(""),2);a[l++]=x}return new TextDecoder().decode(a)}n(e_,"decodeBase64URL");function t_(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}n(t_,"verifyExtendedClaim");function rb(e,t){let r=e_(e.value,e.indexMod4),[i,o]=t_(r);if(i!==t)throw new Error(`Invalid field name: found ${i} expected ${t}`);return o}n(rb,"extractClaimValue");d();h();d();h();var nb=B.struct("ZkLoginSignature",{inputs:B.struct("ZkLoginSignatureInputs",{proofPoints:B.struct("ZkLoginSignatureInputsProofPoints",{a:B.vector(B.string()),b:B.vector(B.vector(B.string())),c:B.vector(B.string())}),issBase64Details:B.struct("ZkLoginSignatureInputsClaim",{value:B.string(),indexMod4:B.u8()}),headerBase64:B.string(),addressSeed:B.string()}),maxEpoch:B.u64(),userSignature:B.vector(B.u8())});function ib(e){return nb.parse(typeof e=="string"?ir(e):e)}n(ib,"parseZkLoginSignature");d();h();function r_(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}n(r_,"findFirstNonZeroIndex");function ol(e,t){let r=e.toString(16);return $w(r.padStart(t*2,"0").slice(-t*2))}n(ol,"toPaddedBigEndianBytes");function cp(e,t){let r=ol(e,t),i=r_(r);return i===-1?new Uint8Array([0]):r.slice(i)}n(cp,"toBigEndianBytes");var ab=n(e=>{throw TypeError(e)},"__typeError"),cb=n((e,t,r)=>t.has(e)||ab("Cannot "+r),"__accessCheck"),hi=n((e,t,r)=>(cb(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),up=n((e,t,r)=>t.has(e)?ab("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),Os=n((e,t,r,i)=>(cb(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),"__privateSet"),mn,Ra,Ua,n_=class lp extends Ks{static{n(this,"_ZkLoginPublicIdentifier")}constructor(t,{client:r}={}){super(),up(this,mn),up(this,Ra),up(this,Ua),Os(this,Ra,r),typeof t=="string"?Os(this,mn,ir(t)):t instanceof Uint8Array?Os(this,mn,t):Os(this,mn,Uint8Array.from(t)),Os(this,Ua,hi(this,mn).length!==hi(this,mn)[0]+1+32),hi(this,Ua)&&Os(this,mn,ob(hi(this,mn)))}equals(t){return super.equals(t)}toSuiAddress(){if(hi(this,Ua)){let t=ob(hi(this,mn),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),Un($u(Ko(r,{dkLen:32})).slice(0,Vi*2))}return super.toSuiAddress()}toRawBytes(){return hi(this,mn)}flag(){return di.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let i=sl(r),o=new lp(i.publicKey).toSuiAddress();return sb({address:o,bytes:Ut(t),signature:i.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:hi(this,Ra)})}verifyTransaction(t,r){let i=sl(r),o=new lp(i.publicKey).toSuiAddress();return sb({address:o,bytes:Ut(t),signature:i.serializedSignature,intentScope:"TRANSACTION_DATA",client:hi(this,Ra)})}};mn=new WeakMap;Ra=new WeakMap;Ua=new WeakMap;var i_=n_;function o_(e,t,r){let i=r?.legacyAddress?cp(e,32):ol(e,32),o=new TextEncoder().encode(t),a=new Uint8Array(1+o.length+i.length);return a.set([o.length],0),a.set(o,1),a.set(i,1+o.length),new i_(a,r)}n(o_,"toZkLoginPublicIdentifier");var s_=tb(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function ob(e,t=!1){let r=e[0]+1,i=BigInt(`0x${ro(e.slice(r))}`),o=t?cp(i,32):ol(i,32),a=new Uint8Array(r+o.length);return a.set(e.slice(0,r),0),a.set(o,r),a}n(ob,"normalizeZkLoginPublicKeyBytes");async function sb({address:e,bytes:t,signature:r,intentScope:i,client:o=new il({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let a=await o.query({query:s_,variables:{bytes:t,signature:r,intentScope:i,author:e}});return a.data?.verifyZkloginSignature.success===!0&&a.data?.verifyZkloginSignature.errors.length===0}n(sb,"graphqlVerifyZkLoginSignature");function sl(e){let t=typeof e=="string"?ir(e):e;if(t[0]!==di.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:i,maxEpoch:o,userSignature:a}=ib(r),{issBase64Details:l,addressSeed:f}=i,g=rb(l,"iss"),x=o_(BigInt(f),g);return{serializedSignature:Ut(t),signatureScheme:"ZkLogin",zkLogin:{inputs:i,maxEpoch:o,userSignature:a,iss:g,addressSeed:BigInt(f)},signature:t,publicKey:x.toRawBytes()}}n(sl,"parseSerializedZkLoginSignature");function ub({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let i=r.toRawBytes(),o=new Uint8Array(1+e.length+i.length);return o.set([di[t]]),o.set(e,1),o.set(i,1+e.length),Ut(o)}n(ub,"toSerializedSignature");function lb(e){let t=ir(e),r=Qu[t[0]];switch(r){case"MultiSig":let i=ui.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:i,bytes:t};case"ZkLogin":return sl(e);case"ED25519":case"Secp256k1":case"Secp256r1":let o=Yw[r],a=t.slice(1,t.length-o),l=t.slice(1+a.length);return{serializedSignature:e,signatureScheme:r,signature:a,publicKey:l,bytes:t};default:throw new Error("Unsupported signature scheme")}}n(lb,"parseSerializedSignature");d();h();function fp(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}n(fp,"isValidHardenedPath");function a_(e){return $0(e,"")}n(a_,"mnemonicToSeed");function fb(e){return ro(a_(e))}n(fb,"mnemonicToSeedHex");d();h();var Na=he(S1(),1);var Da=32;var db="suiprivkey",dp=class{static{n(this,"Signer")}async signWithIntent(t,r){let i=Oo(r,t),o=Ko(i,{dkLen:32});return{signature:ub({signature:await this.sign(o),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:Ut(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(B.vector(B.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:Ut(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},al=class extends dp{static{n(this,"Keypair")}};function hb(e){let{prefix:t,words:r}=Na.bech32.decode(e);if(t!==db)throw new Error("invalid private key prefix");let i=new Uint8Array(Na.bech32.fromWords(r)),o=i.slice(1);return{schema:Qu[i[0]],secretKey:o}}n(hb,"decodeSuiPrivateKey");function pb(e,t){if(e.length!==Da)throw new Error("Invalid bytes length");let r=di[t],i=new Uint8Array(e.length+1);return i.set([r]),i.set(e,1),Na.bech32.encode(db,Na.bech32.toWords(i))}n(pb,"encodeSuiPrivateKey");async function hp(e,t,r){try{let i={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Sui"};switch(r.signingType){case"transaction":{let o=Oo("TransactionData",r.transaction),a=ct(o),{result:{signature:l}}=await e.signRawPayload({payload:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,algorithm:"Ed25519"});return{status:"success",signature:l}}case"personalMessage":{let o=new TextDecoder().decode(r.message),{result:{signature:a}}=await e.signUtf8Message({message:o,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,algorithm:"Ed25519"});return{status:"success",signature:a}}}return ve(se.UnsupportedOperation,`Unsupported Sui signingType: ${r.signingType}`)}catch(i){return ve(se.InternalError,`KMS Sui signing failed: ${i instanceof Error?i.message:"Unknown error"}`)}}n(hp,"signSui");d();h();async function pp(e,t,r){try{if(r.signingType!=="transaction")return ve(se.UnsupportedOperation,"KMS does not support Bitcoin message signing");let i=null;switch(r.chainType){case k.BitcoinTaproot:i="BitcoinTaproot";break;case k.BitcoinNativeSegwit:i="BitcoinSegwit";break}if(!i)return ve(se.UnsupportedOperation,`KMS does not yet support Bitcoin address type: ${r.chainType}`);let o={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:i},a=r.message,l=J0(a),f=l.length%2===0?l:`0${l}`,g=uc(f),x=ct(g),{result:{transaction:T}}=await e.signTransaction({transaction:{kind:"PSBT",bytes:x},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,policyName:void 0}),I;if(typeof T=="string")I=nn(T);else if(Array.isArray(T))I=new Uint8Array(T);else return ve(se.InternalError,"Unexpected Bitcoin transaction response format from KMS");return{status:"success",signature:cc(I)}}catch(i){return ve(se.InternalError,`KMS Bitcoin signing failed: ${i instanceof Error?i.message:"Unknown error"}`)}}n(pp,"signBitcoin");var mb=n(()=>({type:Mt.KMS,sign:n(async(e,t,r)=>{switch(r.chainType){case k.Solana:return kh(e,t,r);case k.EVM:return Oh(e,t,r);case k.Sui:return hp(e,t,r);case k.BitcoinTaproot:case k.BitcoinNativeSegwit:return pp(e,t,r);default:return ve(se.UnsupportedOperation,`KMS signer does not support chain type: ${r.chainType}`)}},"sign")}),"createKMSSigner");d();h();var gb=n(()=>({type:Mt.KeyPair,sign:n(async(e,t)=>{if(!t.isKMSPKIAuthenticator)return ve(se.InvalidAddressType);try{let r=Pd(t.payload),i=JSON.stringify(r),o=Buffer.from(i).toString("hex"),l=ko.sign(o,e.privateKey,{prehash:!0}).toCompactRawBytes();return{status:"success",signature:ct(l)}}catch(r){if(r instanceof p.ZodError)return ve(se.InvalidRpcPayload,`Invalid KMS RPC payload: ${r.message}`);let i=r instanceof Error?r.message:"Failed to authenticate KMS RPC request";return ve(se.InternalError,i)}},"sign")}),"createKMSPKIAuthenticatorSigner");d();h();var yb=he(en());var mp=he(No()),vb=he(yi());var wb=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{if(t.chainType!==k.Solana)return Promise.resolve(ve(se.InvalidAddressType));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=mp.default.decode(t.message):r=yb.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(ve(se.InvalidMessageEncoding))}let i=mp.default.encode(vb.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:i})},"sign")}),"createSolanaKeyPairSigner");d();h();d();h();d();h();var Co=he(yi(),1);d();h();d();h();var cl=class extends Fi{static{n(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,zw(t);let i=Rr(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(i.length>o?t.create().update(i).digest():i);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(t){return li(this),this.iHash.update(t),this}digestInto(t){li(this),Ps(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:i,finished:o,destroyed:a,blockLen:l,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=l,t.outputLen=f,t.oHash=r._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ul=n((e,t,r)=>new cl(e,t).update(r).digest(),"hmac");ul.create=(e,t)=>new cl(e,t);d();h();d();h();function c_(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);let o=BigInt(32),a=BigInt(4294967295),l=Number(r>>o&a),f=Number(r&a),g=i?4:0,x=i?0:4;e.setUint32(t+g,l,i),e.setUint32(t+x,f,i)}n(c_,"setBigUint64");var ll=class extends Fi{static{n(this,"HashMD")}constructor(t,r,i,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Hu(this.buffer)}update(t){li(this);let{view:r,buffer:i,blockLen:o}=this;t=Rr(t);let a=t.length;for(let l=0;l<a;){let f=Math.min(o-this.pos,a-l);if(f===o){let g=Hu(t);for(;o<=a-l;l+=o)this.process(g,l);continue}i.set(t.subarray(l,l+f),this.pos),this.pos+=f,l+=f,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){li(this),Wu(t,this),this.finished=!0;let{buffer:r,view:i,blockLen:o,isLE:a}=this,{pos:l}=this;r[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(i,0),l=0);for(let I=l;I<o;I++)r[I]=0;c_(i,o-8,BigInt(this.length*8),a),this.process(i,0);let f=Hu(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let x=g/4,T=this.get();if(x>T.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<x;I++)f.setUint32(4*I,T[I],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:i,length:o,finished:a,destroyed:l,pos:f}=this;return t.length=o,t.pos=f,t.finished=a,t.destroyed=l,o%r&&t.buffer.set(i),t}};var[u_,l_]=me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Wi=new Uint32Array(80),Hi=new Uint32Array(80),gp=class extends ll{static{n(this,"SHA512")}constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:f,Dl:g,Eh:x,El:T,Fh:I,Fl:_,Gh:O,Gl:C,Hh:R,Hl:j}=this;return[t,r,i,o,a,l,f,g,x,T,I,_,O,C,R,j]}set(t,r,i,o,a,l,f,g,x,T,I,_,O,C,R,j){this.Ah=t|0,this.Al=r|0,this.Bh=i|0,this.Bl=o|0,this.Ch=a|0,this.Cl=l|0,this.Dh=f|0,this.Dl=g|0,this.Eh=x|0,this.El=T|0,this.Fh=I|0,this.Fl=_|0,this.Gh=O|0,this.Gl=C|0,this.Hh=R|0,this.Hl=j|0}process(t,r){for(let L=0;L<16;L++,r+=4)Wi[L]=t.getUint32(r),Hi[L]=t.getUint32(r+=4);for(let L=16;L<80;L++){let ce=Wi[L-15]|0,te=Hi[L-15]|0,ie=me.rotrSH(ce,te,1)^me.rotrSH(ce,te,8)^me.shrSH(ce,te,7),ae=me.rotrSL(ce,te,1)^me.rotrSL(ce,te,8)^me.shrSL(ce,te,7),Z=Wi[L-2]|0,ge=Hi[L-2]|0,A=me.rotrSH(Z,ge,19)^me.rotrBH(Z,ge,61)^me.shrSH(Z,ge,6),s=me.rotrSL(Z,ge,19)^me.rotrBL(Z,ge,61)^me.shrSL(Z,ge,6),u=me.add4L(ae,s,Hi[L-7],Hi[L-16]),m=me.add4H(u,ie,A,Wi[L-7],Wi[L-16]);Wi[L]=m|0,Hi[L]=u|0}let{Ah:i,Al:o,Bh:a,Bl:l,Ch:f,Cl:g,Dh:x,Dl:T,Eh:I,El:_,Fh:O,Fl:C,Gh:R,Gl:j,Hh:F,Hl:Y}=this;for(let L=0;L<80;L++){let ce=me.rotrSH(I,_,14)^me.rotrSH(I,_,18)^me.rotrBH(I,_,41),te=me.rotrSL(I,_,14)^me.rotrSL(I,_,18)^me.rotrBL(I,_,41),ie=I&O^~I&R,ae=_&C^~_&j,Z=me.add5L(Y,te,ae,l_[L],Hi[L]),ge=me.add5H(Z,F,ce,ie,u_[L],Wi[L]),A=Z|0,s=me.rotrSH(i,o,28)^me.rotrBH(i,o,34)^me.rotrBH(i,o,39),u=me.rotrSL(i,o,28)^me.rotrBL(i,o,34)^me.rotrBL(i,o,39),m=i&a^i&f^a&f,y=o&l^o&g^l&g;F=R|0,Y=j|0,R=O|0,j=C|0,O=I|0,C=_|0,{h:I,l:_}=me.add(x|0,T|0,ge|0,A|0),x=f|0,T=g|0,f=a|0,g=l|0,a=i|0,l=o|0;let v=me.add3L(A,u,y);i=me.add3H(v,ge,s,m),o=v|0}({h:i,l:o}=me.add(this.Ah|0,this.Al|0,i|0,o|0)),{h:a,l}=me.add(this.Bh|0,this.Bl|0,a|0,l|0),{h:f,l:g}=me.add(this.Ch|0,this.Cl|0,f|0,g|0),{h:x,l:T}=me.add(this.Dh|0,this.Dl|0,x|0,T|0),{h:I,l:_}=me.add(this.Eh|0,this.El|0,I|0,_|0),{h:O,l:C}=me.add(this.Fh|0,this.Fl|0,O|0,C|0),{h:R,l:j}=me.add(this.Gh|0,this.Gl|0,R|0,j|0),{h:F,l:Y}=me.add(this.Hh|0,this.Hl|0,F|0,Y|0),this.set(i,o,a,l,f,g,x,T,I,_,O,C,R,j,F,Y)}roundClean(){Wi.fill(0),Hi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var yp=Gw(()=>new gp);var f_=he(yi(),1);var d_="ed25519 seed",h_=2147483648,p_=new RegExp("^m(\\/[0-9]+')+$"),bb=n(e=>e.replace("'",""),"replaceDerive"),m_=n(e=>{let r=ul.create(yp,d_).update(lc(e)).digest(),i=r.slice(0,32),o=r.slice(32);return{key:i,chainCode:o}},"getMasterKeyFromSeed"),g_=n(({key:e,chainCode:t},r)=>{let i=new ArrayBuffer(4);new DataView(i).setUint32(0,r);let a=new Uint8Array(1+e.length+i.byteLength);a.set(new Uint8Array(1).fill(0)),a.set(e,1),a.set(new Uint8Array(i,0,i.byteLength),e.length+1);let l=ul.create(yp,t).update(a).digest(),f=l.slice(0,32),g=l.slice(32);return{key:f,chainCode:g}},"CKDPriv");var y_=n(e=>p_.test(e)?!e.split("/").slice(1).map(bb).some(isNaN):!1,"isValidPath"),vp=n((e,t,r=h_)=>{if(!y_(e))throw new Error("Invalid derivation path");let{key:i,chainCode:o}=m_(t);return e.split("/").slice(1).map(bb).map(l=>parseInt(l,10)).reduce((l,f)=>g_(l,f+r),{key:i,chainCode:o})},"derivePath");d();h();var xb=he(yi(),1);var wp=32,La=class extends Ks{static{n(this,"Ed25519PublicKey")}constructor(t){if(super(),typeof t=="string"?this.data=ir(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==wp)throw new Error(`Invalid public key input. Expected ${wp} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return di.ED25519}async verify(t,r){let i;if(typeof r=="string"){let o=lb(r);if(o.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!sp(this.toRawBytes(),o.publicKey))throw new Error("Signature does not match public key");i=o.signature}else i=r;return xb.default.sign.detached.verify(t,i,this.toRawBytes())}};La.SIZE=wp;var bp="m/44'/784'/0'/0'/0'",Va=class e extends al{static{n(this,"Ed25519Keypair")}constructor(t){super(),t?this.keypair=t:this.keypair=Co.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(Co.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let a=hb(t);if(a.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${a.schema}`);return this.fromSecretKey(a.secretKey,r)}let i=t.length;if(i!==Da)throw new Error(`Wrong secretKey size. Expected ${Da} bytes, got ${i}.`);let o=Co.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let l=new TextEncoder().encode("sui validation"),f=Co.default.sign.detached(l,o.secretKey);if(!Co.default.sign.detached.verify(l,f,o.publicKey))throw new Error("provided secretKey is invalid")}return new e(o)}getPublicKey(){return new La(this.keypair.publicKey)}getSecretKey(){return pb(this.keypair.secretKey.slice(0,Da),this.getKeyScheme())}async sign(t){return Co.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=bp),!fp(r))throw new Error("Invalid derivation path");let{key:i}=vp(r,fb(t));return e.fromSecretKey(i)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=bp),!fp(r))throw new Error("Invalid derivation path");let{key:i}=vp(r,t);return e.fromSecretKey(i)}};var Ab=n(()=>({type:Mt.KeyPair,sign:n(async(e,t)=>{let r=Va.fromSecretKey(e.privateKey);try{let i;switch(t.signingType){case"personalMessage":{i=await r.signPersonalMessage(t.message);break}case"transaction":{i=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:i.signature})}catch(i){return console.error(i),Promise.resolve(ve(se.InvalidMessageEncoding))}},"sign")}),"createSuiKeyPairSigner");d();h();var fl=class{static{n(this,"MultiChainVaultSigner")}#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);if("isKMSPKIAuthenticator"in r)return this.#e.keyPair.KMSPKIAuthenticator.sign(t,r);if("isAgentWallet"in r)return this.#e.keyPair.Agent.sign(t,r);if("isCash"in r)return this.#e.keyPair.Cash.sign(t,r);let i=r.chainType;switch(i){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return this.#e.keyPair[i].sign(t,r);case k.EVM:return this.#e.keyPair[i].sign(t,r);case k.Solana:return this.#e.keyPair[i].sign(t,r);case k.Sui:return this.#e.keyPair[i].sign(t,r)}}async signWithHardware(t,r,i){return this.#e.ledger.sign(t,r,i)}async signWithSolanaSeedVault(t,r,i){return this.#e.seedVault.sign(t,r,i)}async signWithKMS(t,r,i){return this.#e.kms.sign(t,r,i)}};d();h();var Sb=n(e=>hh.safeParse(e).success,"isVaultSignerParams");d();h();var v_=n(e=>({getSeed:n(t=>w_(e,t),"getSeed"),setSeed:n((t,r)=>b_(e,t,r),"setSeed"),getClientJWTSigner:n((t,r)=>x_(e,t,r),"getClientJWTSigner"),setClientJWTSigner:n((t,r,i)=>A_(e,t,r,i),"setClientJWTSigner"),removeSeeds:n(t=>Eb(e,t),"removeSeeds"),removeClientJWTKeypairs:n(t=>Mb(e,t),"removeClientJWTKeypairs"),clear:n(async()=>{await Eb(e,"all"),await Mb(e,"all")},"clear")}),"createVaultCache"),$i=`${yr}.cache.secrets`,xp=n(e=>`${yr}.cache.seed.${e}`,"seedCacheKey"),Ap=n(e=>`${yr}.cache.client-jwt.${e}`,"clientJWTKeypairKey"),w_=n(async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let i=xp(r),o=null;try{o=await t.getSecureValue(i)}catch{}if(!o)return null;let{bytes:a,encoding:l}=o.seed;return new Uint8Array(Buffer.from(a,l))},"getSeed"),b_=n(async({isEnabled:e,generalStorage:t,secretsStorage:r},i,o)=>{if(!e())return;let a=xp(i);await r.setSecureValue(a,{version:1,identifier:i,seed:{bytes:Buffer.from(o).toString("base64"),encoding:"base64"}});let l=await t.get($i);if(!l)l={version:1,seedIdentifiers:[i],clientJWTKeypairIdentifiers:[]};else{let f=new Set(l.seedIdentifiers);f.add(i),l.seedIdentifiers=Array.from(f)}await t.set($i,l)},"setSeed"),Eb=n(async({generalStorage:e,secretsStorage:t},r)=>{let i=await e.get($i);if(!i)return;let o=r==="all"?i.seedIdentifiers:r,a=new Set(o),l=i.seedIdentifiers.filter(f=>a.has(f));await t.removeSecureValue(l.map(xp)),await e.set($i,{version:1,seedIdentifiers:i.seedIdentifiers.filter(f=>!a.has(f)),clientJWTKeypairIdentifiers:i.clientJWTKeypairIdentifiers??[]})},"removeSeeds"),x_=n(async({isEnabled:e,secretsStorage:t},r,i)=>{if(!e())return null;let o=Ap(r),a=null;try{a=await t.getSecureValue(o)}catch{}if(!a||!a.keyPairs[i])return null;let l=a.keyPairs[i],f=new Uint8Array(Buffer.from(l.p256pubkey.bytes,l.p256pubkey.encoding)),g=new Uint8Array(Buffer.from(l.p256privkey.bytes,l.p256privkey.encoding));return{p256pubkey:f,p256privkey:g}},"getClientJWTSigner"),A_=n(async({isEnabled:e,generalStorage:t,secretsStorage:r},i,o,a)=>{if(!e())return;let l=Ap(i),f=await r.getSecureValue(l)??{version:1,identifier:i,keyPairs:{}};f.keyPairs[o]={p256pubkey:{bytes:ct(Buffer.from(a.p256pubkey)),encoding:"base64"},p256privkey:{bytes:ct(Buffer.from(a.p256privkey)),encoding:"base64"}},await r.setSecureValue(l,f);let g=await t.get($i);if(!g)g={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[i]};else{let x=new Set(g.clientJWTKeypairIdentifiers??[]);x.add(i),g.clientJWTKeypairIdentifiers=Array.from(x)}await t.set($i,g)},"setClientJWTSigner"),Mb=n(async({generalStorage:e,secretsStorage:t},r)=>{let i=await e.get($i);if(!i||!i.clientJWTKeypairIdentifiers||i.clientJWTKeypairIdentifiers.length===0)return;let o=r==="all"?i.clientJWTKeypairIdentifiers:r,a=new Set(o);await t.removeSecureValue(o.map(Ap)),await e.set($i,{version:1,seedIdentifiers:i.seedIdentifiers,clientJWTKeypairIdentifiers:i.clientJWTKeypairIdentifiers.filter(l=>!a.has(l))})},"removeClientJWTKeypairs");d();h();d();h();d();h();function S_(e){switch(e.chainType){case k.Solana:case k.EVM:case k.Sui:case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return;default:xe(e)}}n(S_,"assertSupportedKMSChain");function Sp(e){switch(S_(e),e.chainType){case k.Solana:case k.EVM:return{chainType:e.chainType,publicKey:e.address,pathType:e.pathType};case k.Sui:return{chainType:e.chainType,publicKey:e.publicKey,address:e.address,pathType:e.pathType};case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:t,...r}=e;return{...r,addresses:{...t}}}default:return xe(e)}}n(Sp,"buildVaultStorageKMSChainAddress");function Tb(e){let t={};for(let[,r]of Object.entries(e)){let i=Sp(r);t[r.chainType]=i}return t}n(Tb,"buildVaultStorageKMSChainAddresses");async function Ib(e,{organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a,apiEnvironment:l}){if(G.addBreadcrumb(H.Account,`[addKMSVaultAccount] ENTRY: walletId=${r}`,X.Info),i!==Dt)throw new Error(`KMS vault accounts must use tag "${Dt}", received "${i}".`);let f=Tb(a),g=po(r,i),x={version:1,type:P.KMSVault,identifier:g,derivationIndex:o,kms:{organizationId:t,walletId:r,tag:i},chains:f,...l&&{apiEnvironment:l}};return await Lt(e,x),x}n(Ib,"addKMSVaultAccount");d();h();function E_(e,t){let r=!1,i={...e};for(let[o,a]of Object.entries(t)){let l=o,f=Sp(a),g=e[l];if(!g){i[l]=f,r=!0;continue}switch(f.chainType){case k.Solana:case k.EVM:case k.Sui:continue;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let x=g,T=f,I=x.addresses?{...x.addresses}:{};for(let _ of nu){let O=T.addresses?.[_];O&&I[_]!==O&&(I[_]=O,r=!0)}i[l]={...x,addresses:I};break}default:xe(f)}}return{merged:i,changed:r}}n(E_,"deepMergeChains");async function _b(e,{organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a}){if(i!==Dt)throw new Error(`KMS vault accounts must use tag "${Dt}", received "${i}".`);let l=po(r,i),f=await ht(e),g=f.findIndex(C=>C.type===P.KMSVault&&C.identifier===l);if(g===-1)throw new Error(`KMSVault account not found for identifier ${l}`);let x=f[g];if(x.kms.organizationId!==t||x.kms.walletId!==r||x.kms.tag!==i||x.derivationIndex!==o)throw new Error(`KMS vault metadata mismatch for identifier ${l} (existing data retained, incoming rejected).`);let{merged:T,changed:I}=E_(x.chains,a);if(!I)return x;let _={...x,chains:T},O=[...f];return O[g]=_,await on(e,O),_}n(_b,"upsertKMSVaultChains");d();h();d();h();d();h();d();h();async function kb(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}n(kb,"mnemonicToSeed");d();h();var Pb=he(en());var M_=he(yi());d();h();var Ep=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],eJ=new Set(Ep);var T_=n((e,t,r,i,o)=>{let a;switch(o){case"rmd160":case"md5":case"sha":throw new Error(`${o} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${o} is supported by noble, but we don't need it for bip39`);case"sha256":a=vi;break;case"sha512":a=C0;break}return gc(a,e,t,{c:r,dkLen:i})},"pbkdf2Noble"),I_=n((e,t,r)=>{for(;e.length<r;)e=t+e;return e},"lpad"),Bb=n(e=>e.map(t=>I_(t.toString(2),"0",8)).join(""),"bytesToBinary"),__=n(e=>parseInt(e,2),"binaryToByte"),k_=n(e=>{let r=e.length*8/32,i=vi(e);return Bb(Array.from(i)).slice(0,r)},"deriveChecksumBits"),pi;(function(e){e.InvalidChecksum="InvalidChecksum",e.InvalidChecksumBits="InvalidChecksumBits",e.InvalidEntropy="InvalidEntropy",e.InvalidEntropyBits="InvalidEntropyBits",e.LessThanTwelve="LessThanTwelve",e.ExactlyTwelveOrTwentyFour="ExactlyTwelveOrTwentyFour",e.MoreThanTwentyFour="MoreThanTwentyFour",e.WrongWord="WrongWord"})(pi||(pi={}));var Mp=n(async e=>{let t=Ep;if(e.length<16)throw new Error(pi.LessThanTwelve);if(e.length>32)throw new Error(pi.MoreThanTwentyFour);if(e.length%4!==0)throw new Error(pi.WrongWord);let r,i;try{r=Bb(Array.from(e))}catch{throw new Error(pi.InvalidEntropyBits)}try{i=k_(e)}catch{throw new Error(pi.InvalidChecksumBits)}let a=(r+i).match(/(.{1,11})/g);if(!a)throw new Error(pi.InvalidChecksum);let l=a.map(x=>{let T=__(x);return t[T]}),f=Pb.Buffer.from(l.join(" "));return{seed:await kb({mnemonic:f,pbkdf2:T_}),mnemonic:f}},"entropyToSeedAndMnemonic");d();h();async function Gi(e,t){let r=await Ey(e,t);if(!r)throw new Xn;let i=Tr.from(r.entropy);return r.entropy.fill(0),i}n(Gi,"exportEntropy");async function jt(e,t){let r,i=await e.secureCache.getSeed(t);if(i)r=i;else{let a=await Gi(e,t),{seed:l}=await a.foldAsync(Mp);r=l,await e.secureCache.setSeed(t,r)}let o=Tr.from(r);return r.fill(0),o}n(jt,"exportSeed");d();h();var Tp=he(Do());function Cs(e){return e.fold(Tp.keccak256)}n(Cs,"identifierForSeed");function Zi(e,t,r){let i=Yn[r];return Tp.keccak256(`${e}:${t}:${i}`)}n(Zi,"identifierForSeedAccount");function Nn(e,t,r,i){let o={};for(let a of i){let{publicKey:l}=e.keypairGenerator.generateKeypairFromSeed(t,r,a),f=rn.getAddressType(a),g=P_({addressType:f,derivationPathType:a,publicKey:l});o[f]=my(g)}return o}n(Nn,"storageChainAddresses");function P_({addressType:e,derivationPathType:t,publicKey:r}){switch(e){case k.Solana:case k.EVM:case k.Sui:case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return{chainType:e,pathType:t,publicKey:r};default:return xe(e)}}n(P_,"toChainAddressInput");async function Kb(e,t){let r=new Set,i=await ht(e);for(let a of i)a.type===P.Seed&&a.seedIdentifier===t&&Yn[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let o=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){o=a;break}return Ob(e,t,o)}n(Kb,"addAccountForExistingSeed");async function Ob(e,t,r){try{return await B_(e,t,r)}catch(i){if(i instanceof xn)return await Ob(e,t,r+1);throw i}}n(Ob,"addAccountForSeedWithDerivationIndex");async function B_(e,t,r){let i=await jt(e,t),o=(await e.fetchChainAvailability()).enabledAddressTypes,a=Jt(o),l=await Zi(t,r,a[0]),f={version:1,type:P.Seed,identifier:l,seedIdentifier:t,derivationIndex:r,chains:Nn(e,i,r,a)};return await Lt(e,f,!1),f}n(B_,"_addAccountForExistingSeed");d();h();var Vb=he(M1());var Fb=he(Y0()),jb=he(Lb()),qb=he(Do());function N_(e,t,r){let i=Yn[r];return qb.keccak256(`${e}:${t}:${i}`)}n(N_,"_identifierForLedgerAccount");async function zb(e,t,r){let i=[];for(let o of r){if(o.addresses.length===0&&o.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let a=o.addresses[0]?.pathType||o.publicKeys[0]?.pathType,l=N_(t,o.derivationIndex,a);Fb.initEccLib(Vb);let f=(0,jb.ECPairFactory)(Vb),g={...o.addresses.reduce((T,I)=>{let _=rn.getAddressType(I.pathType);switch(_){case k.EVM:case k.Solana:{T[_]={chainType:_,pathType:I.pathType,publicKey:I.value};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:throw new Error("Bitcoin accounts should be using public key not computed addresses");case k.Sui:throw new Wl("add ledger account");default:xe(_)}return T},{}),...o.publicKeys.reduce((T,I)=>{let _=rn.getAddressType(I.pathType);switch(_){case k.EVM:case k.Solana:throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let O=f.fromPublicKey(Buffer.from(I.value,"hex")),C=new Uint8Array(O.publicKey);T[_]={chainType:_,pathType:I.pathType,publicKey:C,addresses:Object.values(Rt).reduce((R,j)=>({...R,[j]:Nt({publicKey:C,addressType:_,networkID:j})}),{})};break}case k.Sui:throw new Wl("add ledger account");default:xe(_)}return T},{})},x={version:1,type:P.Ledger,identifier:l,ledgerGroupIdentifier:t,derivationIndex:o.derivationIndex,chains:g};i.push(x),await Lt(e,x)}return i}n(zb,"addLedgerAccounts");d();h();var Wb=he(Do());function D_(e){return Wb.keccak256(e)}n(D_,"_identifierForPrivateKey");async function Hb(e,t,r,i){let o=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),a=await sn(e),l=D_(o.publicKey);if((a?.privateKeyIdentifiers??[]).includes(l))throw new ia;let x={version:1,identifier:l,name:i,chainType:t,privateKey:Buffer.from(o.privateKey)},T=l,I;switch(t){case k.EVM:case k.Solana:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:Nt({publicKey:o.publicKey,addressType:t}),chainType:t};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:o.publicKey,addresses:Object.values(Rt).reduce((_,O)=>({..._,[O]:Nt({publicKey:o.publicKey,addressType:t,networkID:O})}),{}),chainType:t};break}case k.Sui:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:o.publicKey,address:Nt({publicKey:o.publicKey,addressType:t}),chainType:t};break}default:xe(t)}if(!I)throw new Error("unable to create a private key account based on the address type");return await Lt(e,I),await My(e,x),I}n(Hb,"addPrivateKeyAccount");d();h();var $b=he(Do());function L_(e){return $b.keccak256(e)}n(L_,"_identifierForReadOnlyAccount");async function Gb(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new ra;let i=L_(r),o={version:1,type:P.ReadOnly,identifier:i,addresses:t};return await Lt(e,o),o}n(Gb,"addReadonlyAccount");d();h();async function Zb(e,t){let r=new Set,i=await ht(e);for(let a of i)a.type===P.Seedless&&a.seedIdentifier===t&&Yn[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let o=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){o=a;break}return Qb(e,t,o)}n(Zb,"addAccountForExistingSeedless");async function Qb(e,t,r){try{return await V_(e,t,r)}catch(i){if(i instanceof xn)return await Qb(e,t,r+1);throw i}}n(Qb,"addAccountForSeedWithDerivationIndex");async function V_(e,t,r){let i=await jt(e,t),o=(await e.fetchChainAvailability()).enabledAddressTypes,a=Jt(o),l=await Zi(t,r,a[0]),f={version:1,type:P.Seedless,identifier:l,seedIdentifier:t,derivationIndex:r,chains:Nn(e,i,r,a)};return await Lt(e,f,!1),f}n(V_,"_addAccountForExistingSeed");d();h();d();h();d();h();async function Ns(e,t){let r=await sn(e),i=Cs(t),o=r?.seedIdentifiers??[],a=r?.seedlessIdentifiers??[];return o.concat(a).includes(i)}n(Ns,"isExistingSeed");async function hl(e,t,r,i){if((await hu(e)).length>0)throw new bc;if(i.length===0)throw new na;if(await Ns(e,t))throw new no;let l=Cs(t),f=t.fold(T=>({version:1,identifier:l,name:r,entropy:new Uint8Array(T)}));await Iy(e,f);let g=[],x=await jt(e,l);for(let T of i){let I=Zi(l,T.derivationIndex,T.derivationPathTypes[0]),_=Nn(e,x,T.derivationIndex,T.derivationPathTypes),O={version:1,type:P.Seedless,identifier:I,seedIdentifier:l,derivationIndex:T.derivationIndex,chains:_};await Lt(e,O),g.push(O)}return g}n(hl,"addSeedlessWithMultipleAccounts");async function Jb(e,t,r){let i=(await e.fetchChainAvailability()).enabledAddressTypes,o=0,a=Jt(i);return(await hl(e,t,r,[{name:r,derivationIndex:o,derivationPathTypes:a}]))[0]}n(Jb,"addSeedlessWithDefaultAccount");d();h();d();h();async function pl(e,t,r,i,o=!1){let a=await Ns(e,t);if(!o&&a)throw new no;let l=Cs(t),f=t.fold(T=>({version:1,identifier:l,name:r,entropy:new Uint8Array(T)}));await Ty(e,f);let g=[],x=await jt(e,l);for(let T of i){let I=await Zi(l,T.derivationIndex,T.derivationPathTypes[0]),_=Nn(e,x,T.derivationIndex,T.derivationPathTypes),O={version:1,type:P.Seed,identifier:I,seedIdentifier:l,derivationIndex:T.derivationIndex,chains:_};await Lt(e,O),g.push(O)}return g}n(pl,"addSeedWithMultipleAccounts");async function Yb(e,t,r){let i=(await e.fetchChainAvailability()).enabledAddressTypes,o=0,a=Jt(i);return(await pl(e,t,r,[{name:r,derivationIndex:o,derivationPathTypes:a}]))[0]}n(Yb,"addSeedWithDefaultAccount");d();h();var Xb=he(Do());function F_(e){return Xb.keccak256(e)}n(F_,"_identifierForSolanaSeedVaultAccount");async function ex(e,t){let r=[];for(let{publicKey:i,derivationPath:o,authToken:a}of t){let l=F_(i),f={version:1,type:P.SeedVault,identifier:l,derivationPath:o,authToken:a,publicKey:i,chainType:k.Solana};r.push(f),await Lt(e,f)}return r}n(ex,"addSolanaSeedVaultAccounts");d();h();d();h();async function ml(e,t,r){let o=(await ht(e)).find(a=>a.identifier===t);if(!o)throw new bn;switch(o.type){case P.Seed:case P.Seedless:{let a=o.chains[r]?.pathType;if(!a)throw new Ei;let l=await jt(e,o.seedIdentifier),f=e.keypairGenerator.generateKeypairFromSeed(l,o.derivationIndex,a);return Tr.from(f.privateKey)}case P.PrivateKey:{let a=await Ki(e,o.privateKeyIdentifier);if(a.chainType!==r)throw new Ei;let l=e.keypairGenerator.generateKeypairFromPrivateKey(Tr.from(a.privateKey),r);return Tr.from(l.privateKey)}case P.Ledger:case P.SeedVault:case P.KMSVault:throw new ea;case P.ReadOnly:throw new ta;default:(a=>{throw new Error("invalid account type")})(o)}}n(ml,"exportPrivateKey");d();h();d();h();d();h();var ja=new Error("Unknown error"),gl=new Error("Invalid entropy length"),Fa=new Error("Invalid mn*monic sentence length"),Kp=new Error("Invalid checksum"),tx=new RangeError("Invalid mn*monic word"),Bp=new RangeError("Invalid wordlist"),Op=new RangeError("Invalid wordlist index"),Ur=n((e,t)=>{if(!e)throw t},"assert");function Ji(e){Ur(e>=128,gl),Ur(e<=256,gl),Ur(e%32===0,gl)}n(Ji,"assertEntropyLengthIsValid");function qa(e){Ur(e>=12,Fa),Ur(e<=24,Fa),Ur(e%3===0,Fa)}n(qa,"assertMnemonicSentenceLengthIsValid");function Ds(e){Ur(e.length===2048,Bp),Ur(e.every(t=>typeof t=="string"),Bp)}n(Ds,"assertWordlistIsValid");function Cp(e,t){return qa(e),t(e*4/3)}n(Cp,"generateEntropy");async function yl(e,t){let r=e.length*8;Ji(r);let i=r/32,o=await t(e),[a]=o,l=8-i,f=a>>>l<<l>>>0,g=new Uint8Array(e.length+1);return g.set(e,0),g[g.length-1]=f,g}n(yl,"deriveBits");function vl(e){let t=(e.length-1)*8;Ji(t);let r=t/32,i=(t+r)/11,o=new ArrayBuffer(i*4),a=new DataView(o),l=0,f=0,g=0;for(let x of e)if(g+=8,f|=x<<32-g,f>>>=0,g>=11){let T=f>>>21;Ur(T>=0&&T<=2047,Op),a.setUint32(l*4,T,!0),l++,f<<=11,f>>>=0,g-=11}return Ur(l===i,Fa),new Uint32Array(o)}n(vl,"mapBitsToIndexes");function rx(e){let t=e.length;qa(t);let r=11,i=e.length*r,o=new ArrayBuffer(Math.ceil(i/8)),a=new DataView(o),l=new DataView(e.buffer),f=e.length,g=0,x=0,T=0,I=8;for(let _=0;_<f;_++){let O=l.getUint32(_*4,!0);Ur(O<2048,Op);let C=r;for(;C>0;){let R=32-C,j=C>=I?I:C;g|=O>>32-R-j&(1<<j)-1,x+=j,g<<=I-j,g>>>=0,C-=j,I-=j,I<=0&&(I=8),x%8===0&&(a.setUint8(T,g),T++,g=0)}}return f%8!==0&&a.setUint8(T,g),new Uint8Array(o)}n(rx,"mapIndexesToBits");function Rp(e){qa(e.length);let t=rx(e),r=t.slice(0,t.length-1);return t.fill(0),r}n(Rp,"indexesToEntropy");async function Ls(e,t){let r=e.length*8;Ji(r);let i=await yl(e,t),o=vl(i);return i.fill(0),o}n(Ls,"entropyToIndexes");function Up(e,t){Ds(t);let r=new Set(t),i=new Uint32Array(24),o=0,a="";for(let f=0;f<e.length;f++){let g=e[f],x=g===32,T=f===e.length-1;if(T&&(a+=String.fromCharCode(g)),x||T){Ur(r.has(a),tx);let I=0;for(let _ of t){if(a===_)break;I++}i[o++]=I,a=""}else a+=String.fromCharCode(g)}qa(o);let l=i.slice(0,o);return i.fill(0),l}n(Up,"mnemonicToIndexes");async function Vs(e,t,r){let i=await Ls(e,r),o=new Uint8Array(i.reduce((l,f)=>l+t[f].length+1,-1)),a=0;for(let l of i){a>0&&(o[a++]=32);let f=t[l];for(let g of f)o[a++]=g.charCodeAt(0)}return i.fill(0),o}n(Vs,"entropyToMnemonic");var Pp=Uint8Array.of(109,110,101,109,111,110,105,99);async function Ro(e,t,r,i,o){let a=await Vs(e,r,i),l=new Uint8Array(Pp.length+t.length);l.set(Pp,0),l.set(t,Pp.length);let f=await o(a,l,2048,64,"sha512");return l.fill(0),a.fill(0),f}n(Ro,"entropyToSeed");d();h();var Fs=he(A1(),1);d();h();var za=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function Np(e){switch(e){case"english":return za}}n(Np,"getWordlist");function Dp(e){return t=>new e(t)}n(Dp,"createFromEntropy");function Lp(e,t){return async r=>{let i=null,o=null,a=null,l=null,f=null;try{o=Rp(r),a=await yl(o,t),l=vl(a);let g=r[r.length-1],x=l[l.length-1];if(g!==x)throw Kp;f=e.fromEntropy(o)}catch(g){g instanceof Error?i=g:(console.error(g),i=ja)}finally{if(o?.fill(0),a?.fill(0),l?.fill(0),i)throw i;return f}}}n(Lp,"createFromIndexes");function Vp(e,t){return async r=>{let i=null,o=null,a=null;try{o=Up(r,t),a=await e.fromIndexes(o)}catch(l){l instanceof Error?i=l:(console.error(l),i=ja)}finally{if(o?.fill(0),i)throw i;return a}}}n(Vp,"createFromMnemonic");function Fp(e,t){return r=>{let i=null,o=null,a=null;try{o=Cp(r,t),a=e.fromEntropy(o)}catch(l){l instanceof Error?i=l:(console.error(l),i=ja)}finally{if(o?.fill(0),i)throw i;return a}}}n(Fp,"createFromSentenceLength");var jp=class{static{n(this,"Bip39Factory")}static async webCrypto(t){let r=typeof t=="string"?await Np(t):t;Ds(r);let i=n(l=>self.crypto.getRandomValues(new Uint8Array(l)),"random"),o=n(async l=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",l)),"sha256"),a=n(async(l,f,g,x,T)=>{let I="SHA-"+T.substring(3),_=await self.crypto.subtle.importKey("raw",l,"PBKDF2",!1,["deriveBits"]),O=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:f,iterations:g,hash:I},_,x*8);return new Uint8Array(O)},"pbkdf2");return class Wa{static{n(this,"WebCryptoBip39")}static fromEntropy=Dp(Wa);static fromIndexes=Lp(Wa,o);static fromMnemonic=Vp(Wa,r);static fromSentenceLength=Fp(Wa,i);static wordlist=r;#e;constructor(f){Ji(f.length*8),this.#e=f.slice()}deriveSeed=n((f=new Uint8Array)=>Ro(this.#e,f,r,o,a),"deriveSeed");getEntropy=n(()=>this.#e.slice(),"getEntropy");getIndexes=n(()=>Ls(this.#e,o),"getIndexes");getMnemonic=n(()=>Vs(this.#e,r,o),"getMnemonic");getSentenceLength=n(()=>{let f=this.#e.length*8,g=f/32;return(f+g)/11},"getSentenceLength")}}static async nodeCrypto(t){let r=typeof t=="string"?await Np(t):t;Ds(r);let i=n(l=>new Uint8Array((0,Fs.randomBytes)(l).buffer),"random"),o=n(l=>new Uint8Array((0,Fs.createHash)("sha256").update(l).digest().buffer),"sha256"),a=n((...l)=>new Promise((f,g)=>{(0,Fs.pbkdf2)(...l,(x,T)=>{if(x)return g(x);f(new Uint8Array(T.buffer))})}),"pbkdf2");return class Ha{static{n(this,"NodeCryptoBip39")}static fromEntropy=Dp(Ha);static fromIndexes=Lp(Ha,o);static fromMnemonic=Vp(Ha,r);static fromSentenceLength=Fp(Ha,i);static wordlist=r;#e;constructor(f){Ji(f.length*8),this.#e=f.slice()}deriveSeed=n((f=new Uint8Array)=>Ro(this.#e,f,r,o,a),"deriveSeed");getEntropy=n(()=>this.#e.slice(),"getEntropy");getIndexes=n(()=>Ls(this.#e,o),"getIndexes");getMnemonic=n(()=>Vs(this.#e,r,o),"getMnemonic");getSentenceLength=n(()=>{let f=this.#e.length*8,g=f/32;return(f+g)/11},"getSentenceLength")}}static async customCrypto(t,r){let i=typeof t=="string"?await Np(t):t;Ds(i);let{random:o,sha256:a,pbkdf2:l}=r;return class $a{static{n(this,"CustomCryptoBip39")}static fromEntropy=Dp($a);static fromIndexes=Lp($a,a);static fromMnemonic=Vp($a,i);static fromSentenceLength=Fp($a,o);static wordlist=i;#e;constructor(g){Ji(g.length*8),this.#e=g.slice()}deriveSeed=n((g=new Uint8Array)=>Ro(this.#e,g,i,a,l),"deriveSeed");getEntropy=n(()=>this.#e.slice(),"getEntropy");getIndexes=n(()=>Ls(this.#e,a),"getIndexes");getMnemonic=n(()=>Vs(this.#e,i,a),"getMnemonic");getSentenceLength=n(()=>{let g=this.#e.length*8,x=g/32;return(g+x)/11},"getSentenceLength")}}};async function nx(e,t){let r,i=await e.secureCache.getSeed(t);if(i)r=i;else{let a=await Gi(e,t);try{r=await a.foldAsync(async f=>Ro(f,new Uint8Array,za,vi,(g,x,T,I)=>gc(vi,g,x,{c:T,dkLen:I})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let o=Tr.from(r);return r.fill(0),o}n(nx,"exportSeedV2");var j_=new Xn,q_=new Ei,z_=new io,pt={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function sx(e){let t;try{if(t=await ht(e),t.length===0)return pt.unonboarded}catch{return pt.unableToLoadAccounts}return W_(e,t)}n(sx,"checkVaultIntegrity");var W_=n(async(e,t)=>{let r=await H_(e,t);if(r.status!=="safely-onboarded")return r;try{let l=await Rd(e);if(l?.version===3&&l?.isSafelyOnboarded)return pt.safelyOnboarded}catch{return pt.fetchIntegrityStorageError}let i=await ox(e,t,P.Seed),o=await ox(e,t,P.Seedless),a=await G_(e,t);return i.status!=="safely-onboarded"?i:o.status!=="safely-onboarded"?o:a.status!=="safely-onboarded"?a:(await Cd(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),pt.safelyOnboarded)},"checkAndValidateAllSecrets"),H_=n(async(e,t)=>{try{if((await Rd(e))?.isSafelyOnboarded)return pt.safelyOnboarded}catch{return pt.fetchIntegrityStorageError}let r=await ix(e,t,P.Seed),i=await ix(e,t,P.Seedless);return r.status!=="safely-onboarded"?r:i.status!=="safely-onboarded"?i:(await Cd(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),pt.safelyOnboarded)},"checkForExistingEntropy"),ix=n(async(e,t,r)=>{let i=new Set;for(let o of t)o.type===r&&i.add(o.seedIdentifier);for(let o of i)try{await Gi(e,o)}catch(a){if(a instanceof Error){if(a.message===j_.message)return pt.invalidIdentifier;if(a.message.match(/ExpoSecureStorage/))return pt.fetchEntropyStorageError}return pt.internalError}return pt.safelyOnboarded},"checkExistingEntropy"),$_=n(e=>{if(!(e instanceof Error))return pt.invalidEntropy;let t=[[/ExpoSecureStorage/,pt.fetchEntropyStorageError],[/InvalidEntropyBip39/,pt.invalidEntropyBip39],[/LessThanTwelve/,pt.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,pt.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,pt.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,pt.invalidChecksumBits],[/InvalidEntropyBits/,pt.invalidEntropyBits],[/InvalidChecksum/,pt.invalidChecksum]];for(let[r,i]of t)if(e.message.match(r))return i;return pt.invalidEntropy},"getCheckValidEntropyErrorResult"),ox=n(async(e,t,r)=>{let i=new Set;for(let o of t)o.type===r&&i.add(o.seedIdentifier);for(let o of i)try{await nx(e,o)}catch(a){return $_(a)}return pt.safelyOnboarded},"checkValidEntropy"),G_=n(async(e,t)=>{for(let r of t)if(r.type===P.PrivateKey)try{await ml(e,r.identifier,r.chainType)}catch(i){if(i instanceof Error){if(i.message===q_.message)return pt.invalidPkAddressType;if(i.message===z_.message)return pt.invalidPkIdentifier;if(i.message.match(/ExpoSecureStorage/))return pt.fetchPkStorageError}return pt.invalidPk}return pt.safelyOnboarded},"checkValidPrivateKeys");d();h();async function ax(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,i=await ht(e);if(i.length===0)return r;let o=new Map;for(let a of i){if(a.type!==P.Seed&&a.type!==P.Seedless)continue;let l=o.get(a.seedIdentifier);l?l.push(a):o.set(a.seedIdentifier,[a])}for(let[a,l]of o){let f;for(let g of l)if(!(g.chains&&!Zf(Object.values(g.chains)[0].pathType)))for(let x of t){if(g.chains[x])continue;f||(f=await jt(e,a));let I=Jt([x]),_=Nn(e,f,g.derivationIndex,I);g.chains={...g.chains,..._},r=!0}}return r&&await on(e,i),r}n(ax,"deriveAddresses");d();h();d();h();d();h();d();h();var lx=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),cx=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Z_=BigInt(1),qp=BigInt(2),ux=n((e,t)=>(e+t/qp)/t,"divNearest");function Q_(e){let t=lx,r=BigInt(3),i=BigInt(6),o=BigInt(11),a=BigInt(22),l=BigInt(23),f=BigInt(44),g=BigInt(88),x=e*e*e%t,T=x*x*e%t,I=br(T,r,t)*T%t,_=br(I,r,t)*T%t,O=br(_,qp,t)*x%t,C=br(O,o,t)*O%t,R=br(C,a,t)*C%t,j=br(R,f,t)*R%t,F=br(j,g,t)*j%t,Y=br(F,f,t)*R%t,L=br(Y,r,t)*T%t,ce=br(L,l,t)*C%t,te=br(ce,i,t)*x%t,ie=br(te,qp,t);if(!zp.eql(zp.sqr(ie),e))throw new Error("Cannot find square root");return ie}n(Q_,"sqrtMod");var zp=Du(lx,void 0,void 0,{sqrt:Q_}),wl=Vu({a:BigInt(0),b:BigInt(7),Fp:zp,n:cx,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n(e=>{let t=cx,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-Z_*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,l=BigInt("0x100000000000000000000000000000000"),f=ux(a*e,t),g=ux(-i*e,t),x=Qt(e-f*r-g*o,t),T=Qt(-f*i-g*a,t),I=x>l,_=T>l;if(I&&(x=t-x),_&&(T=t-T),x>l||T>l)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:I,k1:x,k2neg:_,k2:T}},"splitScalar")}},ju),Hee=BigInt(0);var $ee=wl.ProjectivePoint;async function fx(){let e=wl.utils.randomPrivateKey();return{publicKey:wl.getPublicKey(e),privateKey:e}}n(fx,"deriveAgentKeypair");var dx=n(e=>`${yr}.perps.agent.keypair.${e}`,"agentWalletStorageKey"),bl=n(async(e,t,r=!1)=>{let i=await J_(e,t);if(i&&!r)return i;let o=await fx();return await Y_(e,o,t),o},"exportAgentWalletKeypair"),J_=n(async(e,t)=>{let r=dx(t),i=null;try{i=await e.secretsStorage.getSecureValue(r)}catch{}if(!i)return null;let o=i.keyPair,a=new Uint8Array(Buffer.from(o.publicKey.bytes,o.publicKey.encoding)),l=new Uint8Array(Buffer.from(o.privateKey.bytes,o.privateKey.encoding));return{publicKey:a,privateKey:l}},"getAgentWalletFromStorage"),Y_=n(async(e,t,r)=>{let i=dx(r),o={publicKey:{bytes:Buffer.from(t.publicKey).toString("base64"),encoding:"base64"},privateKey:{bytes:Buffer.from(t.privateKey).toString("base64"),encoding:"base64"}},a={version:1,identifier:r,keyPair:o};await e.secretsStorage.setSecureValue(i,a)},"setAgentWalletInStorage");var hx=n(async(e,t,r=!1)=>{let{publicKey:i}=await bl(e,t,r);return Nt({publicKey:i,addressType:k.EVM})},"getAgentAddress");d();h();d();h();var Wp="m/23001'/0'";async function js(e,t){let r;switch(t.type){case P.Seedless:case P.Seed:r=t.seedIdentifier;break;case P.PrivateKey:r=t.privateKeyIdentifier;break}let i=await e.secureCache.getClientJWTSigner(r,Wp);if(i)return{publicKey:i.p256pubkey,privateKey:i.p256privkey};let o;switch(t.type){case P.Seedless:case P.Seed:{o=(await jt(e,t.seedIdentifier)).fold(l=>new Fo(l));break}case P.PrivateKey:{let a=await Ki(e,t.privateKeyIdentifier);o=new Fo(a.privateKey);break}}try{let a=o.derivePath({ellipticCurve:"ed25519",derivationPath:Wp,bytesInPrivateKey:64}),l=Lu(a.secretKey,ko.CURVE.n),f=ko.getPublicKey(l);return await e.secureCache.setClientJWTSigner(r,Wp,{p256pubkey:f,p256privkey:l}),{publicKey:f,privateKey:l}}finally{o.cleanup()}}n(js,"deriveClientJWTKeypair");var X_=n(e=>e.type===P.Seed||e.type===P.Seedless||e.type===P.PrivateKey,"isAccountWithKey"),px=n(async(e,t)=>{let r=await ht(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let o=r.filter(X_).find(l=>l.type===P.PrivateKey?l.privateKeyIdentifier===t:l.seedIdentifier===t);if(!o)throw new Error("Unable to derive authentication public key for given secret identifier.");let a=await js(e,o);return ct(a.publicKey)},"getAuthenticationPublicKey");d();h();var mx=he(No());d();h();var ek="m/24001'/0'",xl=n(async e=>{let t=await ht(e);if(t.length===0)throw new Error("No accounts, unable to derive cash key.");let r=t[0],i;switch(r.type){case P.Seed:case P.Seedless:{i=(await jt(e,r.seedIdentifier)).fold(a=>new Fo(a));break}case P.PrivateKey:{let o=await Ki(e,r.privateKeyIdentifier);i=new Fo(o.privateKey);break}default:throw new Error(`Account type ${r.type} is not supported, unable to derive cash key.`)}try{let o=i.derivePath({ellipticCurve:"ed25519",derivationPath:ek,bytesInPrivateKey:64});return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}},"deriveCashKeypair");var gx=n(async e=>{let{publicKey:t}=await xl(e);return mx.default.encode(t)},"getCashAddress");d();h();async function yx(e,t){let r=await ht(e);if(r.length===0)throw new bn;let i=r.filter(o=>o.identifier!==t);await on(e,i),await Od(e)}n(yx,"removeAccount");d();h();async function vx(e,t,r){let i=await ht(e);if(r<0||r>=i.length)throw new bn;let o=i.map(l=>l.identifier).indexOf(t);if(o<0)throw new bn;if(o===r)return;let a=i[o];i.splice(o,1),i.splice(r,0,a),await on(e,i)}n(vx,"reorderAccount");d();h();d();h();d();h();function Al(e){return e.find(t=>t.type===P.Seedless)??e.find(t=>t.type===P.Seed)??e.find(t=>t.type===P.PrivateKey)}n(Al,"selectKMSAuthenticatorSourceAccount");function tk(e){let t;async function r(){if(t)return t;let a=await ht(e),l=Al(a);if(!l)throw new Error("Vault requires a seed, seedless, or private key account to derive the KMS authenticator. Add a local secret before calling getKMSInstance().");return t=l,t}n(r,"getSigningAccount");async function i(){let a=await r();return js(e,a)}return n(i,"getKeyPair"),{getPublicKey:n(async()=>ct((await i()).publicKey),"getPublicKey"),signRpcPayload:n(async a=>{let l=await i(),f=await e.vaultSigner.signWithKeypair(l,{isKMSPKIAuthenticator:!0,payload:a});if("status"in f&&f.status==="error")throw new Error(f.message);return f.signature},"signRpcPayload")}}n(tk,"createVaultKMSPKIAuthenticator");function Ga(e){return kd({authenticator:tk(e)})}n(Ga,"createVaultKMS");async function Sl(e,t,r){let i=t.chains[r]?.pathType;if(!i)return ve(se.InvalidAddressType,`Seed Account does not contain a chain address for the chain type ${r}.`);let o=await jt(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(o,t.derivationIndex,i)}n(Sl,"deriveKeyPairFromAddressType");async function wx(e,t,r){let i=await ht(e),o=i.find(a=>a.identifier===t);if(!o)return ve(se.InvalidAccountId,`Vault (${i.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isAgentWallet"in r)switch(o.type){case P.KMSVault:case P.Seedless:case P.Seed:case P.PrivateKey:{let a=await bl(e,o.identifier);return e.vaultSigner.signWithKeypair(a,r)}default:return ve(se.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isJWT"in r)switch(o.type){case P.Seedless:case P.Seed:case P.PrivateKey:{let a=await js(e,o);return e.vaultSigner.signWithKeypair(a,r)}default:return ve(se.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isKMSPKIAuthenticator"in r)return ve(se.UnsupportedOperation,"Signing with the KMS PKI authenticator key is not supported through the external vault interface, as this key is reserved for internal authentication purposes.");if("isCash"in r){if("isCashKMS"in r)switch(o.type){case P.Seedless:case P.Seed:case P.PrivateKey:{let l=Ga(e),f=await yy(l);return e.vaultSigner.signWithKMS(l,{organizationId:f.organizationId,walletId:f.walletId,derivationPath:f.account.derivationPath},r.data)}default:return ve(se.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}let a=await xl(e);return e.vaultSigner.signWithKeypair(a,r)}switch(o.type){case P.KMSVault:{let a=Ga(e),{organizationId:l,walletId:f}=o.kms,g=o.chains[r.chainType];if(!g)return ve(se.InvalidAddressType,`KMSVault account does not have a derivation path for chain type ${r.chainType}`);let x=Jn({pathType:g.pathType,index:o.derivationIndex});return e.vaultSigner.signWithKMS(a,{organizationId:l,walletId:f,derivationPath:x},r)}case P.Seedless:case P.Seed:{switch(r.chainType){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{enabledAddressTypes:a}=await e.fetchChainAvailability(),l={},f=Object.keys(o.chains).filter(g=>Ys.safeParse(g).success).filter(g=>a.includes(g));for(let g of f){let x=await Sl(e,o,g);if("status"in x&&x.status==="error")return x;l[g]=x}return e.vaultSigner.signWithKeypair(l,r)}case k.EVM:{let a=await Sl(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case k.Solana:{let a=await Sl(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case k.Sui:{let a=await Sl(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}}break}case P.PrivateKey:{let a=await Ki(e,o.privateKeyIdentifier);if(a.chainType!==r.chainType)return ve(se.InvalidAddressType,`Private Key account from accountID is a different chain type from params. Expected ${a.chainType}, got ${r.chainType}`);let l=e.keypairGenerator.generateKeypairFromPrivateKey(Tr.from(a.privateKey),r.chainType);switch(r.chainType){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return e.vaultSigner.signWithKeypair({[r.chainType]:l},r);case k.EVM:return e.vaultSigner.signWithKeypair(l,r);case k.Solana:return e.vaultSigner.signWithKeypair(l,r);case k.Sui:return e.vaultSigner.signWithKeypair(l,r)}break}case P.Ledger:{let a=o.chains[r.chainType];if(!a)return ve(se.InvalidAddressType,`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let l=L0.safeParse({pathType:a.pathType,index:o.derivationIndex});if(!l.success)return ve(se.InvalidDerivationPath,"Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let f=Jn(l.data);return e.vaultSigner.signWithHardware(t,f,r)}case P.SeedVault:{let{authToken:a,derivationPath:l,chainType:f}=o;return f!==r.chainType?ve(se.InvalidAddressType,`Solana Seed Vault account from accountID is a different chain type from params. Expected ${f}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(a,l,r)}case P.ReadOnly:return ve(se.UnsupportedOperation,"Read Only Accounts cannot sign transactions.");default:(a=>{throw new Error("invalid account type")})(o)}}n(wx,"sign");d();h();function bx(e){switch(e.type){case P.Seed:return Za(e);case P.Seedless:return Qa(e);case P.PrivateKey:return $p(e);case P.Ledger:return Hp(e);case P.SeedVault:return Gp(e);case P.ReadOnly:return e;case P.KMSVault:return El(e)}}n(bx,"toExternalVaultAccount");function El(e){let{chains:t,version:r,...i}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case k.Solana:case k.EVM:{let{publicKey:g,...x}=l;f={...x,address:g};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:g,...x}=l,T=Object.values(Rt).reduce((I,_)=>{let O=g?g[_]:void 0;if(!O)throw new Si;return{...I,[_]:O}},{});f={...x,addresses:T};break}case k.Sui:{f=l;break}}o[a]=f}return{...i,chains:o}}n(El,"toExternalKMSVaultAccount");function Hp(e){let{chains:t,version:r,...i}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case k.Solana:case k.EVM:{let{publicKey:g,...x}=l;f={...x,address:g};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:g,...x}=l,T=Object.values(Rt).reduce((I,_)=>{let O=g?g[_]:void 0;if(!O)throw new Si;return{...I,[_]:O}},{});f={...x,addresses:T};break}case k.Sui:{f=l;break}}o[a]=f}return{...i,chains:o}}n(Hp,"toExternalVaultLedgerAccount");function $p(e){switch(e.chainType){case k.Solana:case k.EVM:{let{publicKey:t,version:r,...i}=e;return{...i,address:t}}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:t,version:r,...i}=e,o=Object.values(Rt).reduce((a,l)=>{let f=t?t[l]:void 0;if(!f)throw new Si;return{...a,[l]:f}},{});return{...i,addresses:o}}case k.Sui:return e}}n($p,"toExternalVaultPrivateKeyAccount");function Gp(e){let{publicKey:t,version:r,...i}=e;return{...i,address:t}}n(Gp,"toExternalSolanaSeedVaultAccount");function Za(e){let{chains:t,version:r,...i}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case k.Solana:case k.EVM:{let{publicKey:g,...x}=l;f={...x,address:g};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:g,...x}=l,T=Object.values(Rt).reduce((I,_)=>{let O=g?g[_]:void 0;if(!O)throw new Si;return{...I,[_]:O}},{});f={...x,addresses:T};break}case k.Sui:{f=l;break}}o[a]=f}return{...i,chains:o}}n(Za,"toExternalVaultSeedAccount");function Qa(e){let{chains:t,version:r,...i}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case k.Solana:case k.EVM:{let{publicKey:g,...x}=l;f={...x,address:g};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:g,...x}=l,T=Object.values(Rt).reduce((I,_)=>{let O=g?g[_]:void 0;if(!O)throw new Si;return{...I,[_]:O}},{});f={...x,addresses:T};break}case k.Sui:f=l}o[a]=f}return{...i,chains:o}}n(Qa,"toExternalVaultSeedlessAccount");function rk(e){return{addSeedWithDefaultAccount:n((t,r)=>Yb(e,t,r).then(Za),"addSeedWithDefaultAccount"),addAccountForExistingSeed:n(t=>Kb(e,t).then(Za),"addAccountForExistingSeed"),addSeedWithMultipleAccounts:n((t,r,i,o)=>pl(e,t,r,i,o).then(a=>a.map(Za)),"addSeedWithMultipleAccounts"),addPrivateKeyAccount:n((t,r,i)=>Hb(e,t,r,i).then($p),"addPrivateKeyAccount"),addLedgerAccounts:n((t,r)=>zb(e,t,r).then(i=>i.map(Hp)),"addLedgerAccounts"),addSolanaSeedVaultAccounts:n(t=>ex(e,t).then(r=>r.map(Gp)),"addSolanaSeedVaultAccounts"),addReadonlyAccount:n(t=>Gb(e,t),"addReadonlyAccount"),addKMSVaultAccount:n(async({organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a,apiEnvironment:l})=>Ib(e,{organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a,apiEnvironment:l}).then(El),"addKMSVaultAccount"),upsertKMSVaultChains:n(async({organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a})=>_b(e,{organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a}).then(El),"upsertKMSVaultChains"),deriveAddresses:n(()=>ax(e),"deriveAddresses"),removeAccount:n(t=>yx(e,t),"removeAccount"),reorderAccount:n((t,r)=>vx(e,t,r),"reorderAccount"),exportEntropy:n(t=>Gi(e,t),"exportEntropy"),exportPrivateKey:n((t,r)=>ml(e,t,r),"exportPrivateKey"),fetchAllAccounts:n(()=>ht(e).then(t=>t.map(bx)),"fetchAllAccounts"),fetchAllSeedMetas:n(()=>Sy(e),"fetchAllSeedMetas"),fetchAllSeedlessMetas:n(()=>hu(e),"fetchAllSeedlessMetas"),sign:n((t,r)=>wx(e,t,r),"sign"),isExistingSeed:n(t=>Ns(e,t),"isExistingSeed"),checkVaultIntegrity:n(()=>sx(e),"checkVaultIntegrity"),clearVault:n(()=>_y(e),"clearVault"),addSeedlessWithMultipleAccounts:n((t,r,i)=>hl(e,t,r,i).then(o=>o.map(Qa)),"addSeedlessWithMultipleAccounts"),addSeedlessWithDefaultAccount:n((t,r)=>Jb(e,t,r).then(Qa),"addSeedlessWithDefaultAccount"),addAccountForExistingSeedless:n(t=>Zb(e,t).then(Qa),"addAccountForExistingSeedless"),getAuthenticationPublicKey:n(t=>px(e,t),"getAuthenticationPublicKey"),getCashAddress:n(()=>gx(e),"getCashAddress"),getAgentAddress:n((t,r)=>hx(e,t,r),"getAgentAddress"),getKMSInstance:n(()=>Ga(e),"getKMSInstance"),canDeriveKMSAuthenticator:n(async()=>{let t=await ht(e);return!!Al(t)},"canDeriveKMSAuthenticator")}}n(rk,"createVault");d();h();var Ml=he(Pt());d();h();var gn=n(()=>({isReady:!0,value:im(qo)}),"useChainAvailability");d();h();var Zp=n(()=>{let e=_e();return Ae({mutationFn:n(async({addressTypes:r})=>{for(let i of r)await fm(i);wi(e)},"mutationFn")})},"useDisableAddressTypes");d();h();var nk=n(()=>{let e=_e();return Ae({mutationFn:n(async({chainIDs:r})=>{await cm(r),wi(e)},"mutationFn")})},"useDisableChains");d();h();var Qp=n(()=>{let e=_e(),{deriveAddresses:t}=yc();return Ae({mutationFn:n(async({addressTypes:i})=>{for(let o of i)await lm(o);await t(),await wi(e)},"mutationFn")})},"useEnableAddressTypes");d();h();var ik=n(()=>{let e=_e(),{deriveAddresses:t}=yc();return Ae({mutationFn:n(async({chainIDs:i})=>{await am(i),await t(),await wi(e)},"mutationFn")})},"useEnableChains");d();h();var ok=n(()=>{let{mutateAsync:e}=Zp(),{mutateAsync:t}=Qp();return Ae({mutationFn:n(async({addressTypes:i})=>{if(await um())await t({addressTypes:i});else{let a=new Set(pe.bitcoin.addressTypes);for(let l of i)a.delete(l);if(a.size===pe.bitcoin.addressTypes.length&&a.delete(k.BitcoinNativeSegwit),a.size>0){let l=Array.from(a);await e({addressTypes:l})}}},"mutationFn")})},"useUpdateVisibleBitcoinAddressTypes");var Jp=pe.getAllChainIDs().filter(e=>pe.isChainDefaultEnabled(e)),xx=Jp.map(e=>pe.getMainnetNetworkID(e)),sk=xx.flatMap(e=>pe.getAddressTypes(e)),Ax=n(()=>gn().value?.enabledAddressTypes??sk,"useEnabledAddressTypes"),qs=n(()=>gn().value?.enabledChainIDs??Jp,"useEnabledChains"),hoe=n(()=>gn().value?.supportedChainIDs??Jp,"useAllChains"),poe=n(e=>{let t=gn().value;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:xx},"useEnabledNetworkIDs"),moe=n(()=>qs().length===1,"useIsSingleChainEnabled"),goe=n(()=>{let e=qs();return(0,Ml.useMemo)(()=>pe.getChainIDs(k.EVM).some(t=>e.includes(t)),[e])},"useIsEvmChainEnabled"),yoe=n(()=>{let e=qs();return(0,Ml.useMemo)(()=>e.length===1&&e.includes(dr.Solana),[e])},"useIsSolanaOnlyEnabled"),voe=n(e=>{let t=qs();return(0,Ml.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])},"useIsEnabledChains");d();h();d();h();d();h();var zs=n(async e=>{let t=await e.get(et.NetworkSetting);if(!t)return Xs();let r=ak(t);return ck(e,r)},"getMultiChainNetworkSetting");function ak(e){let t={...e,setting:{...e.setting}};return t.setting[k.Sui]||(t.setting[k.Sui]=Xs().setting[k.Sui]),t}n(ak,"ensureChainSetting");var ck=n(async(e,t)=>{let r=!1;uk(t)&&(r=!0);let i=t.setting[k.Solana];i&&pe.isMainnetNetworkID(i)&&(t.setting[k.Solana]=$o,r=!0);let o=t.setting[k.EVM];return o&&pe.isMainnetNetworkID(o)&&(t.setting[k.EVM]=Go,r=!0),r&&await e.set(et.NetworkSetting,t),t},"overrideMainnetNetworksIfNeeded"),uk=n(e=>{let t=!1,r=e.setting[k.EVM];return r&&(r.toString()==="eip155:5"&&(e.setting[k.EVM]=tn.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting[k.EVM]=tn.Polygon.Amoy,t=!0)),t},"migrateDeprecatedTestnets");var Yp=n(async(e,t,r)=>{let i=await e.fetchAllAccounts();if(i.length===0)return[];let o=nr()===Ct.Production?"production":"staging",a=i.filter(_=>_.type===P.KMSVault?!_.apiEnvironment||_.apiEnvironment===o:!0),l=t.get(et.DeveloperMode),f=zs(t),g=_g(t),[x,T,I]=await Promise.all([l,f,g]);return a.map(_=>{let O=I[_.identifier];O||(O={name:wn.t("onboardingImportAccountsAccountName",{walletIndex:""})});let C={name:O.name,icon:O.icon,identifier:_.identifier,addresses:Qc(_,r.enabledMainnetOnlyNetworkIDs,r.enabledAddressTypes,r.enabledChainIDs,T,x?.isDeveloperMode??!1)};return _.type===P.Seed?{...C,type:P.Seed,seedIdentifier:_.seedIdentifier,isReadOnly:!1}:_.type===P.Seedless?{...C,type:P.Seedless,seedIdentifier:_.seedIdentifier,isReadOnly:!1}:_.type===P.ReadOnly?{...C,type:P.ReadOnly,isReadOnly:!0}:_.type===P.PrivateKey?{...C,privateKeyIdentifier:_.privateKeyIdentifier,type:P.PrivateKey,isReadOnly:!1}:{...C,type:_.type,isReadOnly:!1}})},"getAllMultiChainAccounts");function Ws(e){let{isReady:t,value:r}=gn(),i=mt(),o=tt.allAccounts(r),a=rt();return ft({enabled:t,queryKey:o,queryFn:n(async()=>{if(!r)throw new Error(va);let f=await Yp(i,a,r);return G.addBreadcrumb(H.Account,`Finished fetching all accounts. Num accounts: ${f.length}`,X.Info),f},"queryFn"),select:e})}n(Ws,"useAllMultiChainAccountsQuery");var Tl=n(()=>{let{isSuccess:e,isFetching:t,data:r=[]}=Ws(),i=e&&!t&&!!r.length;return i?{enabled:i,accounts:r}:{enabled:i}},"useAllMultiChainAccounts");d();h();d();h();function Xp(){let e=rt(),t=_e();return Ae({mutationFn:n(async({metadataBatch:a})=>{G.addBreadcrumb(H.Account,`Adding Account Metadata Batch: ${Object.entries(a).length} entries`,X.Info),await Eg(e,a)},"mutationFn"),onSuccess:n(async()=>{await ut(t)},"onSuccess"),onError:n(a=>{G.captureError(a,H.Account)},"onError")})}n(Xp,"useAddAccountMetadataBatch");function lk(){let{mutateAsync:e}=Xp(),t=rt(),r=_e(),i=mt(),{t:o}=bi();return Ae({mutationFn:n(async({accounts:g,pairedBLEDevice:x})=>{let T=P0(),I=await i.connectLedgerAccounts(T,g),_=I.reduce((C,R,j)=>{let{name:F,accountIndex:Y}=g[j],L;!F||F.length===0?L=o("onboardingImportAccountsLedgerAccountName",{walletIndex:1+Y}):L=F;let ce;x&&(ce=[{...x,version:1,connectionType:Ho.BLE,deviceType:Wo.Ledger}]);let te={name:L,icon:void 0,connectedDevices:ce};return C[R.identifier]=te,C},{});await e({metadataBatch:_});let O=I[0]?.identifier;return O||(O=(await i.fetchAllAccounts())[0].identifier),await Pr(t,O),r.setQueryData(tt.selectedAccountIdentifier(),O),I},"mutationFn"),onSettled:n(async()=>{await ut(r)},"onSettled"),onError:n(g=>G.captureError(g,H.Account),"onError")})}n(lk,"useConnectLedgerAccounts");d();h();d();h();var Yi=n(async(e,t)=>{if(e.length===0)throw new Error(ls);let r=await jf(t),i=e.find(o=>o.identifier===r);return i||(await Pr(t,e[0].identifier),e[0])},"getSelectedAccountFromStorage");function Ar({select:e}={}){let{isReady:t,value:r}=gn(),i=Tl(),o=i.enabled&&t,a=rt(),l=Ef(),f=tt.selectedAccount(r);return ft({queryKey:f,queryFn:n(async()=>{try{if(!r)throw new Error(va);if(!i.enabled)throw new Error(ls);let x=await Yi(i.accounts,a);return G.addBreadcrumb(H.Account,`Finished fetching selected account: ${x.identifier}`,X.Info),l.identifyAccount(i.accounts,x,r),x}catch(x){throw x instanceof Error&&G.captureError(x,H.Account),x}},"queryFn"),enabled:o,select:e})}n(Ar,"useSelectedMultiChainAccount");d();h();var Hs=he(Pt());var Sx=(0,Hs.createContext)(null);function fk({children:e,userRepository:t}){return Hs.default.createElement(Sx.Provider,{value:{userRepository:t}},e)}n(fk,"UserProvider");function dk(){let e=(0,Hs.useContext)(Sx);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}n(dk,"useUserContext");function Sr(){return dk().userRepository}n(Sr,"useUserRepository");d();h();d();h();d();h();var Ja=n(e=>`/user/v1/users/${e}/profile`,"userProfileByUserIdEndpoint"),Il=n(e=>`/user/v1/profiles/${e}`,"userProfileByUsernameOrUserProfileIdEndpoint"),Ex=n(()=>"/user/v1/profiles/creation-check","userEligibleToClaimEndpoint");d();h();d();h();var Xi;(function(e){e.PUBLIC="public",e.PRIVATE="private",e.INVISIBLE="invisible",e.HIDDEN="hidden"})(Xi||(Xi={}));var hk=Object.values(Xi),Ix=p.string().brand("ProfileId"),Ya=p.object({id:Ix,username:p.string(),icon:p.string().nullish(),addresses:p.record(p.string(),p.string()),privacyState:p.nativeEnum(Xi).optional().default(Xi.PUBLIC),biography:p.string().nullish(),phantomJoinDate:p.string().nullish()}),e0=p.string().url().brand("ActorId"),pk=p.object({id:p.string().optional(),orderedItems:e0.array(),next:p.string().optional()}),Mx=p.object({id:p.string().url(),current:pk.optional(),totalItems:p.number().optional()}),Tx=p.object({type:p.string(),value:p.string().optional(),name:p.string().optional()}),mk=p.object({id:p.string().url().optional(),name:p.string().optional(),type:p.string()}),gk=p.object({id:e0,name:p.string(),preferredUsername:p.string(),manuallyApprovesFollowers:p.boolean(),followers:p.union([Mx,p.string().url()]),following:p.union([Mx,p.string().url()]),icon:mk.nullish(),attachment:p.union([Tx,p.array(Tx)]).optional(),summary:p.string().nullish(),published:p.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,i={},o=!1,a=!1,l=!1,f=!1,g=!1,x=!0,T=null;if(t){let I=Array.isArray(t)?t:[t];for(let _ of I)if(!(!_.name||!_.value)){if(_.name.endsWith(":address")){let O=F0.safeParse(_.name.replace(":address",""));if(O.success){let C=O.data;i[C]=_.value}}_.name==="requesting"&&(o=_.value==="true"),_.name==="requestedBy"&&(a=_.value==="true"),_.name==="blocking"&&(l=_.value==="true"),_.name==="following"&&(f=_.value==="true"),_.name==="followedBy"&&(g=_.value==="true"),_.name==="notificationsEnabled"&&(x=_.value==="true"),_.name==="tradeCount"&&(T=_.value??null)}}return{...r,addresses:i,isSentFollowRequestPending:o,hasPendingFollowRequest:a,isBlocking:l,isFollowing:f,isFollowedBy:g,areNotificationsEnabled:x,tradeCount:T}}),yk={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},vk=p.object({type:p.nativeEnum(yk),imageUrl:p.string().optional(),unicode:p.string().optional()}),t0=p.object({error:p.object({message:p.string()})});var r0=n(async e=>{let r=await vt.api().get(Il(e)),i=Ya.safeParse(r.data);return i.success?i.data:null},"getUserProfileByUsernameOrUserProfileId");var wk=n(e=>({getUsernameAvailability:n(t=>bk(t),"getUsernameAvailability"),getUserProfile:n(()=>xk(e),"getUserProfile"),getUserProfileByUsername:n(t=>r0(t),"getUserProfileByUsername"),getUserProfileByUsernameOrUserProfileId:n(t=>r0(t),"getUserProfileByUsernameOrUserProfileId"),setUserProfile:n(({username:t,addresses:r,icon:i,privacyState:o})=>Ak(e,{username:t,addresses:r,icon:i,privacyState:o}),"setUserProfile"),patchUserProfile:n(t=>Sk(e,t),"patchUserProfile"),deleteUserProfile:n(()=>Ek(e),"deleteUserProfile"),isEligibleToClaim:n(t=>Mk(t),"isEligibleToClaim")}),"createUserRepository"),bk=n(async e=>{switch((await vt.api().get(Il(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},"getUsernameAvailability"),xk=n(async({authRepository:e})=>{let t=await e.getUser({skipAutoLogin:!0});if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:i}=t,o=await vt.api().bearer(i).get(Ja(r)),a=Ya.safeParse(o.data);return a.success?a.data:null},"getUserProfile"),Ak=n(async({authRepository:e},{username:t,addresses:r,icon:i,privacyState:o})=>{let a=await e.getUser();if(!a)throw new Error("User is not logged in, unable to claim username.");let{userID:l,accessToken:f}=a,g=await vt.api().bearer(f).post(Ja(l),{username:t,icon:i,addresses:r,privacyState:o});if(g.status===201){let I=Ya.safeParse(g.data);if(I.success)return I.data;throw new Error("Failed to parse created profile")}let x=t0.safeParse(g.data);throw x.success?new Error(x.data.error.message):new Error("Unknown error")},"setUserProfile"),Sk=n(async({authRepository:e},{username:t,addresses:r,icon:i,privacyState:o,biography:a})=>{let l=await e.getUser();if(!l)throw new Error("User is not logged in, unable to claim username.");let{userID:f,accessToken:g}=l,x=await vt.api().bearer(g).patch(Ja(f),{username:t,addresses:r,icon:i,privacyState:o,biography:a});if(x.status===200)return;G.captureMessage(`Failed to patch user profile: ${x.status} ${JSON.stringify(x.data)}`,H.Auth);let T=t0.safeParse(x.data);throw T.success?new Error(T.data.error.message):new Error("Unknown error")},"patchUserProfile"),Ek=n(async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:i}=t,o=await vt.api().bearer(i).delete(Ja(r));return 200<=o.status&&o.status<300},"deleteUserProfile"),Mk=n(async e=>{try{return(await vt.api().post(Ex(),{addresses:e})).status===200}catch{return!1}},"isEligibleToClaim");d();h();var n0="@phantom/users",er={checkUsernameAvailability(e){return["user",`${n0}:check-username-availability`,{username:e}]},userProfile(){return["user",`${n0}:user-profile`]},userProfileAttributeEffect(e){return["user",`${n0}:user-profile-attribute-effect`,{username:e}]}};d();h();var Tk=new Set([er.userProfile()[1]]),Ik=n(e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:Tk.has(t)},"userShouldDehydrateQueryPredicate");d();h();d();h();d();h();function _l(e,t){let r=new WeakMap;return()=>{let i=e();if(i===void 0)return;let o=r.get(i);return o===void 0&&(o=t(i),r.set(i,o)),o}}n(_l,"createUseDerivedContext");var kl=_l($t,e=>new i0(e)),i0=class{static{n(this,"ClaimUsernameAnalytics")}#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};d();h();var o0=n(async e=>{await e.removeQueries({queryKey:er.userProfile()})},"removeUserProfile"),s0=n(async e=>{await e.resetQueries({queryKey:er.userProfile()})},"resetUserProfile"),Uo=n(async e=>{await e.invalidateQueries({queryKey:er.userProfile()})},"invalidateUserProfile");function _k(){let e=kl(),t=Ir(),r=Sr(),i=_e(),o=n(async({username:a,addresses:l,icon:f})=>{G.addBreadcrumb(H.Auth,`Claiming Username: ${a}.`,X.Debug);let g=await t.getUser();if(!g)throw new Error("Unable to claim username. User not authenticated.");G.addBreadcrumb(H.Auth,"Creating user profile to claim username",X.Debug);let x=await r.setUserProfile({username:a,addresses:l,icon:f,privacyState:Xi.PUBLIC});return G.addBreadcrumb(H.Auth,"\u2705 Username Claimed!",X.Debug),await Sf(i),await s0(i),await lo(i),await Uo(i),await ni(i),e.onClaimFlowComplete(a,g.userID),x},"mutationFn");return Ae({mutationFn:n(async a=>{try{return await o(a)}catch(l){G.addBreadcrumb(H.Auth,"Could not claim username",X.Error);let f;throw l instanceof Error?f=l:f=new Error("Unable to claim username"),G.captureError(f,H.Auth),f}},"mutationFn")})}n(_k,"useClaimUsername");d();h();function kk(e,t){let r=kl(),i=Sr(),o=er.checkUsernameAvailability(e),a=n(async()=>{if(!e)return!1;let f=await i.getUsernameAvailability(e);return r.onCheckAvailability(e,f),f},"queryFn"),l=t?.enabled??!!e.trim();return ft({enabled:l,queryKey:o,queryFn:a})}n(kk,"useCheckUsernameAvailability");d();h();d();h();var Xa=class extends Error{static{n(this,"NoUserProfileError")}constructor(t="No user profile."){super(t),this.name="NoUserProfileError"}},a0=class extends Error{static{n(this,"MissingRequiredUsernameClaimParamsError")}constructor(t="Missing required username claim params."){super(t),this.name="MissingRequiredUsernameClaimParamsError"}};var Pk=xi({days:1}),Bk=xi({minutes:1});function c0(e){let t=Sr(),r=pa(),i=e?.enabled!==void 0?e.enabled:r,o=er.userProfile();return ft({enabled:i,queryKey:o,queryFn:n(async()=>{let l=await t.getUserProfile();if(!l)throw new Xa;return l},"queryFn"),gcTime:Pk,staleTime:Bk})}n(c0,"useUserProfile");d();h();var Kk=n(()=>{let e=_e(),t=Ir(),r=Sr();return Ae({mutationFn:n(async()=>{await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await o0(e),await Af(e),await Uo(e),await lo(e),await ni(e)},"mutationFn")})},"useDeleteUserProfile");d();h();var u0=n(()=>{let e=_e(),t=Sr(),r=n(async i=>{await t.patchUserProfile(i),await Uo(e)},"mutationFn");return Ae({mutationFn:n(async i=>{try{return await r(i)}catch(o){G.addBreadcrumb(H.Auth,`Could not update user profile: ${JSON.stringify(i)}`,X.Error);let a;throw o instanceof Error?a=o:a=new Error("Could not update user profile!"),G.captureError(a,H.Auth),a}},"mutationFn"),onMutate:n(async i=>{let o=er.userProfile();await e.cancelQueries({queryKey:o});let a=e.getQueryData(o);return e.setQueryData(o,{...a,...i}),{previousData:a}},"onMutate"),onSuccess:n((i,o)=>{let a=er.userProfile(),l=e.getQueryData(a);if(l){let f={...l,...o};e.setQueryData(a,f)}},"onSuccess"),onError:n((i,o,a)=>{a&&e.setQueryData(er.userProfile(),a.previousData)},"onError")})},"usePatchUserProfile");d();h();var Ok=_l($t,e=>new Pl(e)),Pl=class{static{n(this,"ManageUserProfileAnalytics")}#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};d();h();var _x=he(Pt());var Ck=n(e=>{let t=(0,_x.useMemo)(()=>{if(e){if(Rk(e))return i=>i.address===e.address&&i.networkID===e.networkID;if(pe.isNetworkID(e))return i=>i.networkID===e;if(Z0(e))return i=>i.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]);return Ar({select:n(i=>{let o=i.addresses.filter(t);if(o.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return o[0]},"select")})},"useSelectedChainAddress");function Rk(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}n(Rk,"isAddressNetworkIDFilter");d();h();d();h();d();h();var kx=n(async(e,t)=>(await Mg(e,t))?.balance,"getAccountBalance"),Px=n(async e=>await Ig(e),"getAllAccountBalances");var Uk=n((e,t=!0)=>{let r=rt(),i=t&&!!e,o=tt.accountBalance(e||"");return ft({queryKey:o,queryFn:n(async()=>{try{return e&&await kx(r,e)||null}catch(l){throw l instanceof Error&&G.captureError(l,H.Account),l}},"queryFn"),enabled:i})},"useAccountBalance"),Nk=n((e=!0)=>{let t=rt(),r=tt.allAccountBalances();return ft({queryKey:r,queryFn:n(async()=>{try{return await Px(t)}catch(o){throw o instanceof Error&&G.captureError(o,H.Account),o}},"queryFn"),enabled:e})},"useAllAccountBalances");d();h();function Dk(e){let t=Tl(),r=t.enabled&&e.length>0,i=tt.accountIdentifier(e);return ft({enabled:r,queryKey:i,queryFn:n(async()=>{try{if(G.addBreadcrumb(H.Account,`Fetching Account: ${e}`,X.Info),!t.enabled)throw new Error(ls);let{accounts:a}=t,l=a.find(f=>f.identifier===e);if(!l)throw new Error(Kg(a.length,e));return l}catch(a){throw a instanceof Error&&G.captureError(a,H.Account),a}},"queryFn")})}n(Dk,"useAccountWithIdentifier");d();h();function Lk(){let e=rt(),t=_e(),r=mt();return Ae({mutationFn:n(async({name:f,addresses:g,icon:x})=>{let T=await r.addReadonlyAccount(g),I={name:f,icon:x};return await ki(e,T.identifier,I),await Pr(e,T.identifier),T},"mutationFn"),onSettled:n(async()=>{await ut(t)},"onSettled"),onSuccess:n(f=>{t.setQueryData(tt.selectedAccountIdentifier(),f.identifier)},"onSuccess"),onError:n(f=>G.captureError(f,H.Account),"onError")})}n(Lk,"useAddReadOnlyAccount");d();h();function Vk(){let{t:e}=bi(),t=rt(),r=_e(),i=$t(),{fetchAllAccounts:o,addAccountForSeed:a,addAccountForSeedless:l,fetchAllSeedlessMetas:f}=mt();return Ae({mutationFn:n(async({name:_,icon:O,seedIdentifier:C})=>{G.addBreadcrumb(H.Account,`Adding new account for s**d: ${C}`,X.Info);let j=(await f()).find(L=>L.identifier===C),F=j?await l(C):await a(C);await ki(t,F.identifier,{name:_||e("onboardingImportAccountsAccountName",{walletIndex:(await o()).length}),icon:O}),await Pr(t,F.identifier);let Y=ii(F);return i.capture("addSeedAccount",{data:{seedIdentifier:C,accountType:j?"seedless":"seed",walletAddresses:Y}}),F},"mutationFn"),onSettled:n(async()=>{await ut(r)},"onSettled"),onSuccess:n(_=>{r.setQueryData(tt.selectedAccountIdentifier(),_.identifier)},"onSuccess"),onError:n(_=>G.captureError(_,H.Account),"onError")})}n(Vk,"useAddSeedAccount");d();h();function Bl(e){let t=mt(),r=tt.allSeeds(e);return ft({queryKey:r,queryFn:n(async()=>{try{let o;switch(e){case"all":{let a=await t.fetchAllSeedMetas();o=[...await t.fetchAllSeedlessMetas(),...a];break}case"local-only":{o=[...await t.fetchAllSeedMetas()];break}case"recoverable-only":{o=[...await t.fetchAllSeedlessMetas()];break}}return o}catch(o){throw o instanceof Error&&G.captureError(o,H.Account),o}},"queryFn")})}n(Bl,"useAllSeeds");d();h();function l0(){let e=rt();return ft(Bx(e))}n(l0,"useDeveloperMode");function Bx(e){return{queryKey:tt.developerMode(),queryFn:n(async()=>await e.get(et.DeveloperMode)||Zl,"queryFn")}}n(Bx,"developerModeQuery");d();h();function Fk(){let e=rt(),t=_e(),r=mt();return Ae({mutationFn:n(async({chainType:l,privateKey:f,name:g,icon:x})=>{G.addBreadcrumb(H.Account,"Importing Private Key Account... \u23F3",X.Info);let T=await r.importPrivateKeyAccount(l,f),I={name:g,icon:x};return await ki(e,T.identifier,I),await Pr(e,T.identifier),G.addBreadcrumb(H.Account,`Imported Private Key Account \u2705: ${T.identifier}`,X.Info),T},"mutationFn"),onSettled:n(async()=>{await ut(t)},"onSettled"),onSuccess:n(l=>{t.setQueryData(tt.selectedAccountIdentifier(),l.identifier)},"onSuccess")})}n(Fk,"useImportPrivateKeyAccount");d();h();function jk(){let e=tt.selectedNetworkSetting(),t=rt();return ft({queryKey:e,queryFn:n(()=>zs(t),"queryFn")})}n(jk,"useMultiChainNetworkSetting");d();h();function qk(){let e=rt(),t=$t(),r=mt(),i=_e();return Ae({mutationFn:n(async({identifier:l})=>{G.addBreadcrumb(H.Account,`Removing Account... \u23F3: ${l}`,X.Info);let g=(await r.fetchAllAccounts()).find(T=>T.identifier===l),x=ii(g);await Promise.all([r.removeAccount(l),Zc(e,l)]),await Yi(await r.fetchAllAccounts(),e),t.capture("removeAccount",{data:{walletAddresses:x}}),G.addBreadcrumb(H.Account,`Removed Account \u2705: ${l}`,X.Info)},"mutationFn"),onSuccess:n(async()=>{await ut(i)},"onSuccess")})}n(qk,"useRemoveAccount");d();h();function zk(){let e=rt(),t=$t(),r=_e(),i=mt();return Ae({mutationFn:n(async({seedIdentifier:f})=>{let g=await i.fetchAllAccounts(),x=[];for(let I of g)switch(I.type){case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:continue;case P.Seed:case P.Seedless:I.seedIdentifier===f&&x.push(I);break;default:xe(I)}let T=x.flatMap(I=>ii(I));for(let I of x)await Promise.all([i.removeAccount(I.identifier),Zc(e,I.identifier)]);t.capture("removeSeed",{data:{numOfAccounts:x.length,walletAddresses:T}})},"mutationFn"),onSuccess:n(()=>{ut(r)},"onSuccess"),onError:n(f=>{G.captureError(f,H.Account)},"onError")})}n(zk,"useRemoveMultiChainSeed");d();h();function Wk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({identifier:a,name:l})=>{G.addBreadcrumb(H.Account,"Renaming Multichain Account",X.Info),await xg(e,a,l)},"mutationFn"),onSuccess:n(async()=>{await ut(t)},"onSuccess"),onError:n(a=>G.captureError(a,H.Account),"onError")})}n(Wk,"useRenameMultiChainAccount");d();h();function Hk(){let e=_e(),t=mt();return Ae({mutationFn:n(async({identifier:o,toIndex:a})=>{await t.reorderAccount(o,a)},"mutationFn"),onSuccess:n(()=>{ut(e)},"onSuccess")})}n(Hk,"useReorderMultiChainAccount");d();h();function $k(){let e=tt.selectedAccountIdentifier(),t=rt(),r=mt();return ft({queryKey:e,queryFn:n(async()=>{try{let o=await r.fetchAllAccounts(),l=(await Yi(o,t)).identifier;if(!l)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return l}catch(o){throw o instanceof Error&&G.captureError(o,H.Account),o}},"queryFn")})}n($k,"useSelectedAccountIdentifier");d();h();function Gk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({identifier:o,balance:a})=>(await Sg(e,o,a),{identifier:o,balance:a}),"mutationFn"),onSuccess:n(({identifier:o,balance:a})=>{o&&t.invalidateQueries({queryKey:tt.accountBalance(o)}),a&&t.invalidateQueries({queryKey:tt.allAccountBalances()})},"onSuccess")})}n(Gk,"useSetAccountBalance");d();h();function Zk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({developerMode:o})=>{t.setQueryData(tt.developerMode(),o),await e.set(et.DeveloperMode,o)},"mutationFn"),onSuccess:n(()=>{ut(t)},"onSuccess")})}n(Zk,"useSetDeveloperMode");d();h();function Qk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({identifier:o,icon:a})=>{G.addBreadcrumb(H.Account,"Setting Multichain Account Icon",X.Info),await Ag(e,o,a)},"mutationFn"),onSuccess:n(async()=>{await ut(t)},"onSuccess")})}n(Qk,"useSetMultiChainAccountIcon");d();h();function Jk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({networkSetting:o})=>{t.setQueryData(tt.selectedNetworkSetting(),o),await e.set(et.NetworkSetting,o)},"mutationFn"),onSuccess:n(()=>{ut(t)},"onSuccess")})}n(Jk,"useSetMultiChainNetworkSetting");d();h();function Yk(){let e=rt(),t=$t(),r=_e(),i=mt();return Ae({mutationFn:n(async({identifier:f})=>{await Pr(e,f);let x=(await i.fetchAllAccounts()).find(I=>I.identifier===f),T=x?ii(x):[];return t.capture("changeAccount",{data:{identifier:f,walletAddresses:T}}),f},"mutationFn"),onSuccess:n(f=>{xc(r),r.setQueryData(tt.selectedAccountIdentifier(),f)},"onSuccess"),onError:n(f=>G.captureError(f,H.Account),"onError")})}n(Yk,"useSetSelectedMultiChainAccountIdentifier");d();h();var Ox=he(Pt());d();h();var Kx=he(Pt());var ec=n(()=>{let{data:e}=Ar();return(0,Kx.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])},"useSelectedNetworks");var Xk=n(()=>{let{data:e,isFetching:t}=Ws(),{data:r,isFetching:i}=Ar(),o=ec();return(0,Ox.useMemo)(()=>({data:{"All Accounts":Hl(e),"Selected Account":Hl(r),"Selected Networks":o.map(a=>pe.getNetworkName(a))},isFetching:t||i}),[e,t,i,r,o])},"useAccountsExport");d();h();var Cx=he(Pt());var e3=n((e=[])=>{let t=qs();return(0,Cx.useMemo)(()=>e.filter(r=>{let i=pe.getParentChain(r.networkID);return i?t.includes(i):!1}),[e,t])},"useAdditionalNetworks");d();h();var o1=he(k1()),Vl=he(Pt());d();h();var xt=he(Pt(),1);var ic=n(e=>e.type==="checkbox","isCheckBoxInput"),Gs=n(e=>e instanceof Date,"isDateObject"),fr=n(e=>e==null,"isNullOrUndefined"),Wx=n(e=>typeof e=="object","isObjectType"),qt=n(e=>!fr(e)&&!Array.isArray(e)&&Wx(e)&&!Gs(e),"isObject"),Hx=n(e=>qt(e)&&e.target?ic(e.target)?e.target.checked:e.target.value:e,"getEventValue"),t3=n(e=>e.substring(0,e.search(/.\d/))||e,"getNodeParentName"),$x=n((e,t)=>[...e].some(r=>t3(t)===r),"isNameInFieldArray"),Nl=n(e=>e.filter(Boolean),"compact"),_t=n(e=>e===void 0,"isUndefined"),le=n((e,t,r)=>{if(!t||!qt(e))return r;let i=Nl(t.split(/[,[\].]+?/)).reduce((o,a)=>fr(o)?o:o[a],e);return _t(i)||i===e?_t(e[t])?r:e[t]:i},"get"),p0={BLUR:"blur",CHANGE:"change"},yn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},mi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},y0=n((e,t)=>{let r=Object.assign({},e);return delete r[t],r},"omit"),r3=xt.default.createContext(null),v0=n(()=>xt.default.useContext(r3),"useFormContext");var Gx=n((e,t,r,i=!0)=>{function o(l){return()=>{if(l in e)return t[l]!==yn.all&&(t[l]=!i||yn.all),r&&(r[l]=!0),e[l]}}n(o,"createGetter");let a={};for(let l in e)Object.defineProperty(a,l,{get:o(l)});return a},"getProxyFormState"),Er=n(e=>qt(e)&&!Object.keys(e).length,"isEmptyObject"),Zx=n((e,t,r)=>{let i=y0(e,"name");return Er(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!r||yn.all))},"shouldRenderFormState"),Kl=n(e=>Array.isArray(e)?e:[e],"convertToArrayPayload"),Qx=n((e,t,r)=>r&&t?e===t:!e||!t||e===t||Kl(e).some(i=>i&&(i.startsWith(t)||t.startsWith(i))),"shouldSubscribeByName");function w0(e){let t=xt.default.useRef(e);t.current=e,xt.default.useEffect(()=>{let r=n(o=>{o&&o.unsubscribe()},"tearDown"),i=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(i)},[e.disabled])}n(w0,"useSubscribe");function n3(e){let t=v0(),{control:r=t.control,disabled:i,name:o,exact:a}=e||{},[l,f]=xt.default.useState(r._formState),g=xt.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),x=xt.default.useRef(o),T=xt.default.useRef(!0);x.current=o;let I=xt.default.useCallback(_=>T.current&&Qx(x.current,_.name,a)&&Zx(_,g.current)&&f(Object.assign(Object.assign({},r._formState),_)),[r,a]);return w0({disabled:i,callback:I,subject:r._subjects.state}),xt.default.useEffect(()=>()=>{T.current=!1},[]),Gx(l,r._proxyFormState,g.current,!1)}n(n3,"useFormState");var Dn=n(e=>typeof e=="string","isString"),Jx=n((e,t,r,i)=>{let o=Array.isArray(e);return Dn(e)?(i&&t.watch.add(e),le(r,e)):o?e.map(a=>(i&&t.watch.add(a),le(r,a))):(i&&(t.watchAll=!0),r)},"generateWatchOutput"),Dl=n(e=>typeof e=="function","isFunction"),b0=n(e=>{for(let t in e)if(Dl(e[t]))return!0;return!1},"objectHasFunction");function i3(e){let t=v0(),{control:r=t.control,name:i,defaultValue:o,disabled:a,exact:l}=e||{},f=xt.default.useRef(i);f.current=i;let g=xt.default.useCallback(I=>{if(Qx(f.current,I.name,l)){let _=Jx(f.current,r._names,I.values||r._formValues);T(_t(f.current)||qt(_)&&!b0(_)?Object.assign({},_):Array.isArray(_)?[..._]:_t(_)?o:_)}},[r,l,o]);w0({disabled:a,subject:r._subjects.watch,callback:g});let[x,T]=xt.default.useState(_t(o)?r._getWatch(i):o);return xt.default.useEffect(()=>{r._removeUnmounted()}),x}n(i3,"useWatch");function o3(e){let t=v0(),{name:r,control:i=t.control,shouldUnregister:o}=e,a=$x(i._names.array,r),l=i3({control:i,name:r,defaultValue:le(i._formValues,r,le(i._defaultValues,r,e.defaultValue)),exact:!a}),f=n3({control:i,name:r}),g=xt.default.useRef(i.register(r,Object.assign(Object.assign({},e.rules),{value:l})));return xt.default.useEffect(()=>{let x=n((T,I)=>{let _=le(i._fields,T);_&&(_._f.mount=I)},"updateMounted");return x(r,!0),()=>{let T=i._options.shouldUnregister||o;a?T&&i._stateFlags.action:T?i.unregister(r):x(r,!1)}},[r,i,a,o]),{field:{name:r,value:l,onChange:xt.default.useCallback(x=>{g.current.onChange({target:{value:Hx(x),name:r},type:p0.CHANGE})},[r]),onBlur:xt.default.useCallback(()=>{g.current.onBlur({target:{value:le(i._formValues,r),name:r},type:p0.BLUR})},[r,i]),ref:xt.default.useCallback(x=>{let T=le(i._fields,r);x&&T&&x.focus&&(T._f.ref={focus:n(()=>x.focus(),"focus"),setCustomValidity:n(I=>x.setCustomValidity(I),"setCustomValidity"),reportValidity:n(()=>x.reportValidity(),"reportValidity")})},[r,i])},formState:f,fieldState:{invalid:!!le(f.errors,r),isDirty:!!le(f.dirtyFields,r),isTouched:!!le(f.touchedFields,r),error:le(f.errors,r)}}}n(o3,"useController");var Yx=n(e=>e.render(o3(e)),"Controller"),s3=n((e,t,r,i,o)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[i]:o||!0})}):{},"appendErrors"),x0=n(e=>/^\w*$/.test(e),"isKey"),Xx=n(e=>Nl(e.replace(/["|']|\]/g,"").split(/\.|\[/)),"stringToPath");function kt(e,t,r){let i=-1,o=x0(t)?[t]:Xx(t),a=o.length,l=a-1;for(;++i<a;){let f=o[i],g=r;if(i!==l){let x=e[f];g=qt(x)||Array.isArray(x)?x:isNaN(+o[i+1])?{}:[]}e[f]=g,e=e[f]}return e}n(kt,"set");var m0=n((e,t,r)=>{for(let i of r||Object.keys(e)){let o=le(e,i);if(o){let a=o._f,l=y0(o,"_f");if(a&&t(a.name)){if(a.ref.focus&&_t(a.ref.focus()))break;if(a.refs){a.refs[0].focus();break}}else qt(l)&&m0(l,t)}}},"focusFieldBy");var Rx=n((e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length)))),"isWatched");function rc(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||qt(e)){t=r?[]:{};for(let i in e){if(Dl(e[i])){t=e;break}t[i]=rc(e[i])}}else return e;return t}n(rc,"cloneObject");function f0(){let e=[];return{get observers(){return e},next:n(o=>{for(let a of e)a.next(o)},"next"),subscribe:n(o=>(e.push(o),{unsubscribe:n(()=>{e=e.filter(a=>a!==o)},"unsubscribe")}),"subscribe"),unsubscribe:n(()=>{e=[]},"unsubscribe")}}n(f0,"createSubject");var Cl=n(e=>fr(e)||!Wx(e),"isPrimitive");function Zs(e,t){if(Cl(e)||Cl(t))return e===t;if(Gs(e)&&Gs(t))return e.getTime()===t.getTime();let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let o of r){let a=e[o];if(!i.includes(o))return!1;if(o!=="ref"){let l=t[o];if(Gs(a)&&Gs(l)||qt(a)&&qt(l)||Array.isArray(a)&&Array.isArray(l)?!Zs(a,l):a!==l)return!1}}return!0}n(Zs,"deepEqual");var Ux=n(e=>({isOnSubmit:!e||e===yn.onSubmit,isOnBlur:e===yn.onBlur,isOnChange:e===yn.onChange,isOnAll:e===yn.all,isOnTouch:e===yn.onTouched}),"getValidationModes"),nc=n(e=>typeof e=="boolean","isBoolean"),A0=n(e=>e.type==="file","isFileInput"),g0=n(e=>e instanceof HTMLElement,"isHTMLElement"),e1=n(e=>e.type==="select-multiple","isMultipleSelect"),S0=n(e=>e.type==="radio","isRadioInput"),a3=n(e=>S0(e)||ic(e),"isRadioOrCheckbox"),Nx=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",d0=n(e=>g0(e)&&e.isConnected,"live");function c3(e,t){let r=t.slice(0,-1).length,i=0;for(;i<r;)e=_t(e)?i++:e[t[i++]];return e}n(c3,"baseGet");function tr(e,t){let r=x0(t)?[t]:Xx(t),i=r.length==1?e:c3(e,r),o=r[r.length-1],a;i&&delete i[o];for(let l=0;l<r.slice(0,-1).length;l++){let f=-1,g,x=r.slice(0,-(l+1)),T=x.length-1;for(l>0&&(a=e);++f<x.length;){let I=x[f];g=g?g[I]:e[I],T===f&&(qt(g)&&Er(g)||Array.isArray(g)&&!g.filter(_=>qt(_)&&!Er(_)||nc(_)).length)&&(a?delete a[I]:delete e[I]),a=g}}return e}n(tr,"unset");function Rl(e,t={}){let r=Array.isArray(e);if(qt(e)||r)for(let i in e)Array.isArray(e[i])||qt(e[i])&&!b0(e[i])?(t[i]=Array.isArray(e[i])?[]:{},Rl(e[i],t[i])):fr(e[i])||(t[i]=!0);return t}n(Rl,"markFieldsDirty");function t1(e,t,r){let i=Array.isArray(e);if(qt(e)||i)for(let o in e)Array.isArray(e[o])||qt(e[o])&&!b0(e[o])?_t(t)||Cl(r[o])?r[o]=Array.isArray(e[o])?Rl(e[o],[]):Object.assign({},Rl(e[o])):t1(e[o],fr(t)?{}:t[o],r[o]):r[o]=!Zs(e[o],t[o]);return r}n(t1,"getDirtyFieldsFromDefaultValues");var Dx=n((e,t)=>t1(e,t,Rl(t)),"getDirtyFields"),Lx={value:!1,isValid:!1},Vx={value:!0,isValid:!0},r1=n(e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!_t(e[0].attributes.value)?_t(e[0].value)||e[0].value===""?Vx:{value:e[0].value,isValid:!0}:Vx:Lx}return Lx},"getCheckboxValue"),n1=n((e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>_t(e)?e:t?e===""?NaN:+e:r&&Dn(e)?new Date(e):i?i(e):e,"getFieldValueAs"),Fx={isValid:!1,value:null},i1=n(e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Fx):Fx,"getRadioValue");function h0(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return A0(t)?t.files:S0(t)?i1(e.refs).value:e1(t)?[...t.selectedOptions].map(({value:r})=>r):ic(t)?r1(e.refs).value:n1(_t(t.value)?e.ref.value:t.value,e)}n(h0,"getFieldValue");var u3=n((e,t,r,i)=>{let o={};for(let a of e){let l=le(t,a);l&&kt(o,a,l._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:i}},"getResolverOptions"),Ul=n(e=>e instanceof RegExp,"isRegex"),tc=n(e=>_t(e)?void 0:Ul(e)?e.source:qt(e)?Ul(e.value)?e.value.source:e.value:e,"getRuleValue"),l3=n(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),"hasValidation");function jx(e,t,r){let i=le(e,r);if(i||x0(r))return{error:i,name:r};let o=r.split(".");for(;o.length;){let a=o.join("."),l=le(t,a),f=le(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(f&&f.type)return{name:a,error:f};o.pop()}return{name:r}}n(jx,"schemaErrorLookup");var f3=n((e,t,r,i,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?i.isOnBlur:o.isOnBlur)?!e:(r?i.isOnChange:o.isOnChange)?e:!0,"skipValidation"),d3=n((e,t)=>!Nl(le(e,t)).length&&tr(e,t),"unsetEmptyArray"),Ol=n(e=>Dn(e)||xt.default.isValidElement(e),"isMessage");function qx(e,t,r="validate"){if(Ol(e)||Array.isArray(e)&&e.every(Ol)||nc(e)&&!e)return{type:r,message:Ol(e)?e:"",ref:t}}n(qx,"getValidateError");var $s=n(e=>qt(e)&&!Ul(e)?e:{value:e,message:""},"getValueAndMessage"),zx=n(async(e,t,r,i)=>{let{ref:o,refs:a,required:l,maxLength:f,minLength:g,min:x,max:T,pattern:I,validate:_,name:O,valueAsNumber:C,mount:R,disabled:j}=e._f;if(!R||j)return{};let F=a?a[0]:o,Y=n(A=>{i&&F.reportValidity&&(F.setCustomValidity(nc(A)?"":A||" "),F.reportValidity())},"setCustomValidity"),L={},ce=S0(o),te=ic(o),ie=ce||te,ae=(C||A0(o))&&!o.value||t===""||Array.isArray(t)&&!t.length,Z=s3.bind(null,O,r,L),ge=n((A,s,u,m=mi.maxLength,y=mi.minLength)=>{let v=A?s:u;L[O]=Object.assign({type:A?m:y,message:v,ref:o},Z(A?m:y,v))},"getMinMaxMessage");if(l&&(!ie&&(ae||fr(t))||nc(t)&&!t||te&&!r1(a).isValid||ce&&!i1(a).isValid)){let{value:A,message:s}=Ol(l)?{value:!!l,message:l}:$s(l);if(A&&(L[O]=Object.assign({type:mi.required,message:s,ref:F},Z(mi.required,s)),!r))return Y(s),L}if(!ae&&(!fr(x)||!fr(T))){let A,s,u=$s(T),m=$s(x);if(isNaN(t)){let y=o.valueAsDate||new Date(t);Dn(u.value)&&(A=y>new Date(u.value)),Dn(m.value)&&(s=y<new Date(m.value))}else{let y=o.valueAsNumber||parseFloat(t);fr(u.value)||(A=y>u.value),fr(m.value)||(s=y<m.value)}if((A||s)&&(ge(!!A,u.message,m.message,mi.max,mi.min),!r))return Y(L[O].message),L}if((f||g)&&!ae&&Dn(t)){let A=$s(f),s=$s(g),u=!fr(A.value)&&t.length>A.value,m=!fr(s.value)&&t.length<s.value;if((u||m)&&(ge(u,A.message,s.message),!r))return Y(L[O].message),L}if(I&&!ae&&Dn(t)){let{value:A,message:s}=$s(I);if(Ul(A)&&!t.match(A)&&(L[O]=Object.assign({type:mi.pattern,message:s,ref:o},Z(mi.pattern,s)),!r))return Y(s),L}if(_){if(Dl(_)){let A=await _(t),s=qx(A,F);if(s&&(L[O]=Object.assign(Object.assign({},s),Z(mi.validate,s.message)),!r))return Y(s.message),L}else if(qt(_)){let A={};for(let s in _){if(!Er(A)&&!r)break;let u=qx(await _[s](t),F,s);u&&(A=Object.assign(Object.assign({},u),Z(s,u.message)),Y(u.message),r&&(L[O]=A))}if(!Er(A)&&(L[O]=Object.assign({ref:F},A),!r))return L}}return Y(!0),L},"validateField"),h3={mode:yn.onSubmit,reValidateMode:yn.onChange,shouldFocusError:!0};function p3(e={}){let t=Object.assign(Object.assign({},h3),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},o=t.defaultValues||{},a=t.shouldUnregister?{}:rc(o),l={action:!1,mount:!1,watch:!1},f={mount:new Set,unMount:new Set,array:new Set,watch:new Set},g,x=0,T={},I={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={watch:f0(),array:f0(),state:f0()},O=Ux(t.mode),C=Ux(t.reValidateMode),R=t.criteriaMode===yn.all,j=n((K,N)=>(...U)=>{clearTimeout(x),x=self.setTimeout(()=>K(...U),N)},"debounce"),F=n(async K=>{let N=!1;return I.isValid&&(N=t.resolver?Er((await ae()).errors):await ge(i,!0),!K&&N!==r.isValid&&(r.isValid=N,_.state.next({isValid:N}))),N},"_updateValid"),Y=n((K,N,U,W=[],re=!0,q=!0)=>{if(l.action=!0,q&&Array.isArray(le(i,K))){let Q=N(le(i,K),U.argA,U.argB);re&&kt(i,K,Q)}if(I.errors&&q&&Array.isArray(le(r.errors,K))){let Q=N(le(r.errors,K),U.argA,U.argB);re&&kt(r.errors,K,Q),d3(r.errors,K)}if(I.touchedFields&&Array.isArray(le(r.touchedFields,K))){let Q=N(le(r.touchedFields,K),U.argA,U.argB);re&&kt(r.touchedFields,K,Q)}I.dirtyFields&&(r.dirtyFields=Dx(o,a)),_.state.next({isDirty:s(K,W),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},"_updateFieldArray"),L=n((K,N)=>(kt(r.errors,K,N),_.state.next({errors:r.errors})),"updateErrors"),ce=n((K,N,U,W)=>{let re=le(i,K);if(re){let q=le(a,K,_t(U)?le(o,K):U);_t(q)||W&&W.defaultChecked||N?kt(a,K,N?q:h0(re._f)):y(K,q),l.mount&&F()}},"updateValidAndValue"),te=n((K,N,U,W,re)=>{let q=!1,Q={name:K},nt=le(r.touchedFields,K);if(I.isDirty){let ye=r.isDirty;r.isDirty=Q.isDirty=s(),q=ye!==Q.isDirty}if(I.dirtyFields&&(!U||W)){let ye=le(r.dirtyFields,K);Zs(le(o,K),N)?tr(r.dirtyFields,K):kt(r.dirtyFields,K,!0),Q.dirtyFields=r.dirtyFields,q=q||ye!==le(r.dirtyFields,K)}return U&&!nt&&(kt(r.touchedFields,K,U),Q.touchedFields=r.touchedFields,q=q||I.touchedFields&&nt!==U),q&&re&&_.state.next(Q),q?Q:{}},"updateTouchAndDirty"),ie=n(async(K,N,U,W,re)=>{let q=le(r.errors,N),Q=I.isValid&&r.isValid!==U;if(e.delayError&&W?(g=g||j(L,e.delayError),g(N,W)):(clearTimeout(x),W?kt(r.errors,N,W):tr(r.errors,N)),((W?!Zs(q,W):q)||!Er(re)||Q)&&!K){let nt=Object.assign(Object.assign(Object.assign({},re),Q?{isValid:U}:{}),{errors:r.errors,name:N});r=Object.assign(Object.assign({},r),nt),_.state.next(nt)}T[N]--,I.isValidating&&!T[N]&&(_.state.next({isValidating:!1}),T={})},"shouldRenderByError"),ae=n(async K=>t.resolver?await t.resolver(Object.assign({},a),t.context,u3(K||f.mount,i,t.criteriaMode,t.shouldUseNativeValidation)):{},"_executeSchema"),Z=n(async K=>{let{errors:N}=await ae();if(K)for(let U of K){let W=le(N,U);W?kt(r.errors,U,W):tr(r.errors,U)}else r.errors=N;return N},"executeSchemaAndUpdateState"),ge=n(async(K,N,U={valid:!0})=>{for(let W in K){let re=K[W];if(re){let q=re._f,Q=y0(re,"_f");if(q){let nt=await zx(re,le(a,q.name),R,t.shouldUseNativeValidation);if(nt[q.name]&&(U.valid=!1,N))break;N||(nt[q.name]?kt(r.errors,q.name,nt[q.name]):tr(r.errors,q.name))}Q&&await ge(Q,N,U)}}return U.valid},"executeBuildInValidation"),A=n(()=>{for(let K of f.unMount){let N=le(i,K);N&&(N._f.refs?N._f.refs.every(U=>!d0(U)):!d0(N._f.ref))&&z(K)}f.unMount=new Set},"_removeUnmounted"),s=n((K,N)=>(K&&N&&kt(a,K,N),!Zs(c(),o)),"_getDirty"),u=n((K,N,U)=>{let W=Object.assign({},l.mount?a:_t(N)?o:Dn(K)?{[K]:N}:N);return Jx(K,f,W,U)},"_getWatch"),m=n(K=>Nl(le(l.mount?a:o,K,e.shouldUnregister?le(o,K,[]):[])),"_getFieldArray"),y=n((K,N,U={})=>{let W=le(i,K),re=N;if(W){let q=W._f;q&&(!q.disabled&&kt(a,K,n1(N,q)),re=Nx&&g0(q.ref)&&fr(N)?"":N,e1(q.ref)?[...q.ref.options].forEach(Q=>Q.selected=re.includes(Q.value)):q.refs?ic(q.ref)?q.refs.length>1?q.refs.forEach(Q=>Q.checked=Array.isArray(re)?!!re.find(nt=>nt===Q.value):re===Q.value):q.refs[0]&&(q.refs[0].checked=!!re):q.refs.forEach(Q=>Q.checked=Q.value===re):A0(q.ref)||(q.ref.value=re,q.ref.type||_.watch.next({name:K})))}(U.shouldDirty||U.shouldTouch)&&te(K,re,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&w(K)},"setFieldValue"),v=n((K,N,U)=>{for(let W in N){let re=N[W],q=`${K}.${W}`,Q=le(i,q);(f.array.has(K)||!Cl(re)||Q&&!Q._f)&&!Gs(re)?v(q,re,U):y(q,re,U)}},"setValues"),S=n((K,N,U={})=>{let W=le(i,K),re=f.array.has(K);kt(a,K,N),re?(_.array.next({name:K,values:a}),(I.isDirty||I.dirtyFields)&&U.shouldDirty&&(r.dirtyFields=Dx(o,a),_.state.next({name:K,dirtyFields:r.dirtyFields,isDirty:s(K,N)}))):W&&!W._f&&!fr(N)?v(K,N,U):y(K,N,U),Rx(K,f)&&_.state.next({}),_.watch.next({name:K})},"setValue"),E=n(async K=>{let N=K.target,U=N.name,W=le(i,U);if(W){let re,q,Q=N.type?h0(W._f):Hx(K),nt=K.type===p0.BLUR,ye=!l3(W._f)&&!t.resolver&&!le(r.errors,U)&&!W._f.deps||f3(nt,le(r.touchedFields,U),r.isSubmitted,C,O),be=Rx(U,f,nt);kt(a,U,Q),nt?W._f.onBlur&&W._f.onBlur(K):W._f.onChange&&W._f.onChange(K);let Mr=te(U,Q,nt,!1),Ie=!Er(Mr)||be;if(!nt&&_.watch.next({name:U,type:K.type}),ye)return Ie&&_.state.next(Object.assign({name:U},be?{}:Mr));if(!nt&&be&&_.state.next({}),T[U]=(T[U],1),I.isValidating&&_.state.next({isValidating:!0}),t.resolver){let{errors:Ee}=await ae([U]),vn=jx(r.errors,i,U),Me=jx(Ee,i,vn.name||U);re=Me.error,U=Me.name,q=Er(Ee)}else re=(await zx(W,le(a,U),R,t.shouldUseNativeValidation))[U],q=await F(!0);W._f.deps&&w(W._f.deps),ie(!1,U,q,re,Mr)}},"onChange"),w=n(async(K,N={})=>{let U,W,re=Kl(K);if(_.state.next({isValidating:!0}),t.resolver){let q=await Z(_t(K)?K:re);U=Er(q),W=K?!re.some(Q=>le(q,Q)):U}else K?(W=(await Promise.all(re.map(async q=>{let Q=le(i,q);return await ge(Q&&Q._f?{[q]:Q}:Q)}))).every(Boolean),!(!W&&!r.isValid)&&F()):W=U=await ge(i);return _.state.next(Object.assign(Object.assign(Object.assign({},!Dn(K)||I.isValid&&U!==r.isValid?{}:{name:K}),t.resolver?{isValid:U}:{}),{errors:r.errors,isValidating:!1})),N.shouldFocus&&!W&&m0(i,q=>le(r.errors,q),K?re:f.mount),W},"trigger"),c=n(K=>{let N=Object.assign(Object.assign({},o),l.mount?a:{});return _t(K)?N:Dn(K)?le(N,K):K.map(U=>le(N,U))},"getValues"),b=n(K=>{K?Kl(K).forEach(N=>tr(r.errors,N)):r.errors={},_.state.next({errors:r.errors})},"clearErrors"),D=n((K,N,U)=>{let W=(le(i,K,{_f:{}})._f||{}).ref;kt(r.errors,K,Object.assign(Object.assign({},N),{ref:W})),_.state.next({name:K,errors:r.errors,isValid:!1}),U&&U.shouldFocus&&W&&W.focus&&W.focus()},"setError"),V=n((K,N)=>Dl(K)?_.watch.subscribe({next:n(U=>K(u(void 0,N),U),"next")}):u(K,N,!0),"watch"),z=n((K,N={})=>{for(let U of K?Kl(K):f.mount)f.mount.delete(U),f.array.delete(U),le(i,U)&&(N.keepValue||(tr(i,U),tr(a,U)),!N.keepError&&tr(r.errors,U),!N.keepDirty&&tr(r.dirtyFields,U),!N.keepTouched&&tr(r.touchedFields,U),!t.shouldUnregister&&!N.keepDefaultValue&&tr(o,U));_.watch.next({}),_.state.next(Object.assign(Object.assign({},r),N.keepDirty?{isDirty:s()}:{})),!N.keepIsValid&&F()},"unregister"),J=n((K,N={})=>{let U=le(i,K),W=nc(N.disabled);return kt(i,K,{_f:Object.assign(Object.assign(Object.assign({},U&&U._f?U._f:{ref:{name:K}}),{name:K,mount:!0}),N)}),f.mount.add(K),U?W&&kt(a,K,N.disabled?void 0:le(a,K,h0(U._f))):ce(K,!0,N.value),Object.assign(Object.assign(Object.assign({},W?{disabled:N.disabled}:{}),t.shouldUseNativeValidation?{required:!!N.required,min:tc(N.min),max:tc(N.max),minLength:tc(N.minLength),maxLength:tc(N.maxLength),pattern:tc(N.pattern)}:{}),{name:K,onChange:E,onBlur:E,ref:n(re=>{if(re){J(K,N),U=le(i,K);let q=_t(re.value)&&re.querySelectorAll&&re.querySelectorAll("input,select,textarea")[0]||re,Q=a3(q),nt=U._f.refs||[];if(Q?nt.find(ye=>ye===q):q===U._f.ref)return;kt(i,K,{_f:Object.assign(Object.assign({},U._f),Q?{refs:nt.concat(q).filter(d0),ref:{type:q.type,name:K}}:{ref:q})}),ce(K,!1,void 0,q)}else U=le(i,K,{}),U._f&&(U._f.mount=!1),(t.shouldUnregister||N.shouldUnregister)&&!($x(f.array,K)&&l.action)&&f.unMount.add(K)},"ref")})},"register");return{control:{register:J,unregister:z,_executeSchema:ae,_getWatch:u,_getDirty:s,_updateValid:F,_removeUnmounted:A,_updateFieldArray:Y,_getFieldArray:m,_subjects:_,_proxyFormState:I,get _fields(){return i},set _fields(K){i=K},get _formValues(){return a},set _formValues(K){a=K},get _stateFlags(){return l},set _stateFlags(K){l=K},get _defaultValues(){return o},set _defaultValues(K){o=K},get _names(){return f},set _names(K){f=K},get _formState(){return r},set _formState(K){r=K},get _options(){return t},set _options(K){t=Object.assign(Object.assign({},t),K)}},trigger:w,register:J,handleSubmit:n((K,N)=>async U=>{U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let W=!0,re=t.shouldUnregister?rc(a):Object.assign({},a);_.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:q,values:Q}=await ae();r.errors=q,re=Q}else await ge(i);Er(r.errors)&&Object.keys(r.errors).every(q=>le(re,q))?(_.state.next({errors:{},isSubmitting:!0}),await K(re,U)):(N&&await N(r.errors,U),t.shouldFocusError&&m0(i,q=>le(r.errors,q),f.mount))}catch(q){throw W=!1,q}finally{r.isSubmitted=!0,_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Er(r.errors)&&W,submitCount:r.submitCount+1,errors:r.errors})}},"handleSubmit"),watch:V,setValue:S,getValues:c,reset:n((K,N={})=>{let U=K||o,W=rc(U),re=K&&!Er(K)?W:o;if(N.keepDefaultValues||(o=U),!N.keepValues){if(Nx&&_t(K))for(let q of f.mount){let Q=le(i,q);if(Q&&Q._f){let nt=Array.isArray(Q._f.refs)?Q._f.refs[0]:Q._f.ref;try{g0(nt)&&nt.closest("form").reset();break}catch{}}}a=e.shouldUnregister?N.keepDefaultValues?rc(o):{}:W,i={},_.array.next({values:re}),_.watch.next({values:re})}f={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!I.isValid||!!N.keepIsValid,l.watch=!!e.shouldUnregister,_.state.next({submitCount:N.keepSubmitCount?r.submitCount:0,isDirty:N.keepDirty?r.isDirty:N.keepDefaultValues?!Zs(K,o):!1,isSubmitted:N.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:N.keepDirty?r.dirtyFields:N.keepDefaultValues&&K?Object.entries(K).reduce((q,[Q,nt])=>Object.assign(Object.assign({},q),{[Q]:nt!==le(o,Q)}),{}):{},touchedFields:N.keepTouched?r.touchedFields:{},errors:N.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},"reset"),resetField:n((K,N={})=>{le(i,K)&&(_t(N.defaultValue)?S(K,le(o,K)):(S(K,N.defaultValue),kt(o,K,N.defaultValue)),N.keepTouched||tr(r.touchedFields,K),N.keepDirty||(tr(r.dirtyFields,K),r.isDirty=N.defaultValue?s(K,le(o,K)):s()),N.keepError||(tr(r.errors,K),I.isValid&&F()),_.state.next(Object.assign({},r)))},"resetField"),clearErrors:b,unregister:z,setError:D,setFocus:n(K=>{let N=le(i,K)._f;(N.ref.focus?N.ref:N.refs[0]).focus()},"setFocus")}}n(p3,"createFormControl");function Ll(e={}){let t=xt.default.useRef(),[r,i]=xt.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},p3(e)),{formState:r});let o=t.current.control,a=xt.default.useCallback(l=>{Zx(l,o._proxyFormState,!0)&&(o._formState=Object.assign(Object.assign({},o._formState),l),i(Object.assign({},o._formState)))},[o]);return w0({subject:o._subjects.state,callback:a}),xt.default.useEffect(()=>{o._stateFlags.mount||(o._proxyFormState.isValid&&o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()}),t.current.formState=Gx(r,o._proxyFormState),t.current}n(Ll,"useForm");var m3=n(({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:i,addReadOnlyAccount:o,fetchDomainOwner:a})=>{let l=Sr(),{t:f}=bi(),g=$t(),x=i?.networkID||tn.Solana.Mainnet,{formState:{errors:T},control:I,clearErrors:_,getValues:O,setValue:C,register:R,handleSubmit:j,watch:F,trigger:Y}=Ll({mode:"all"}),{networkID:L,name:ce,address:te,resolvedAddress:ie}=F(),ae={required:!0},Z=(0,Vl.useMemo)(()=>({required:{value:!0,message:f("addAccountImportAccountPublicKeyRequired")},validate:(0,o1.default)(async s=>{if(s==="")return!0;if(!tm(s,L||x))try{let v=(await a(s,L,l,g))?.owner;return v?(C("resolvedAddress",v),e.find(E=>E.addresses.map(w=>w.address).includes(v))?f("addAccountImportAccountDuplicateAddress"):!0):f("addAccountImportAccountIncorrectFormat")}catch{return f("sendFormErrorInvalidDomain")}return C("resolvedAddress",s),e.find(y=>y.addresses.map(v=>v.address).includes(s))?f("addAccountImportAccountDuplicateAddress"):!0},500)}),[f,L,x,C,e,a,l,g]),ge=ce&&ie&&!T.name&&!T.address,A=(0,Vl.useCallback)(async({networkID:s,name:u,resolvedAddress:m},y)=>{let v=jo(s,m);t.includes(v)||await r({addressTypes:[v]});let S={};S[v]=m,o({name:u,addresses:S,icon:i?.icon}),y(),g.capture("addReadOnlyAccount",{data:{networkID:s,chainType:v,walletAddress:m}})},[o,i?.icon,r,t,g]);return{Controller:Yx,canSubmit:ge,control:I,errors:T,nameValidations:ae,address:te,addressValidations:Z,clearErrors:_,getValues:O,handleSubmit:j,onSubmit:A,register:R,setValue:C,trigger:Y}},"useAddReadOnlyAccountForm");d();h();function g3(e){let t=Ax();return e.map(r=>Ai.get(r.networkID).addressTooltipNetworkName?.(r.networkID,r.address,t)??pe.getNetworkName(r.networkID))}n(g3,"useAddressTooltipNetworkName");d();h();var s1=he(Pt());var y3=n(()=>{let{data:e}=Ar(),t=(0,s1.useMemo)(()=>{if(!e||!e.addresses.length)return pe.getChainID(V0.Mainnet);let r=e.addresses[0];return pe.getChainID(r.networkID)},[e]);return{caip19:em(rm(t)),tokenName:pe.getChainName(t),tokenSymbol:pe.getTokenSymbol(t)}},"useDefaultNativeTokenForSelectedAccount");d();h();var v3=n(()=>Xs(),"useDefaultNetworkSettings");d();h();var w3=n(()=>{let{data:e}=Ar();return e?e.type===P.Ledger:void 0},"useIsSelectedLedgerAccount");d();h();var b3=n(()=>{let{data:e}=l0();return!!e?.isDeveloperMode},"useIsTestnetMode"),x3=n(()=>ec().some(t=>pe.isLocalNetworkID(t)),"useIsLocalnetMode");d();h();var c1=he(Pt());d();h();var a1=n(()=>{let{value:e}=gn(),{data:t}=Ws(),{data:r}=c0();return ft({queryKey:tt.patchProfileAddresses({chainAvailability:e?.enabledNetworkIDs,accountIdentifiers:t?.map(i=>i.identifier),user:r}),queryFn:e&&t&&r?()=>{let{enabledNetworkIDs:i}=e,o=i?.reduce((T,I)=>{let _=t.find(O=>O.addresses.some(C=>C.networkID===I))?.addresses.find(O=>O.networkID===I)?.address;return _&&(T[I]=_),T},{})??{},a=r?.addresses,l=a?Object.keys(a).filter(pe.isNetworkID):[],f=(i??[]).filter(T=>!l.includes(T)).reduce((T,I)=>{let _=o[I];return _&&(T[I]=_),T},{});return Object.keys(f).length>0?{addresses:{...f,...a},addedAddresses:f}:null}:sm})},"usePatchProfileAddresses");var A3=n(()=>{let{data:e}=a1(),{mutate:t}=u0(),r=$t();(0,c1.useEffect)(()=>{if(e){let{addresses:i,addedAddresses:o}=e,a=Object.keys(o);r.capture("autoSyncUsernameAddresses",{data:{addedChains:a}}),t({addresses:i})}},[e,t,r])},"usePatchAddressesIfNeeded");d();h();var u1=he(Pt());var S3=n(e=>{let t=(0,u1.useCallback)(r=>r.addresses.find(i=>e===pe.getChainID(i.networkID))?.networkID,[e]);return Ar({select:t})},"useSelectedNetwork");d();h();var l1=he(Pt());var E3=n(({accountBalance:e,accountId:t,enabled:r,value:i,setAccountBalance:o})=>{(0,l1.useEffect)(()=>{if(r&&t&&i!==void 0&&i!==e){let a=Date.now();o({identifier:t,balance:{timestamp:a,value:i}})}},[e,t,r,i,o])},"useSetAccountBalanceEffect");d();h();var f1=he(Pt());var M3=n(()=>{let{data:e=[]}=Bl("local-only"),{data:t=[]}=Bl("recoverable-only");return(0,f1.useMemo)(()=>e.length+t.length>1,[e.length,t.length])},"useShowRemoveSecretPhrase");d();h();d();h();d();h();var rr=he(Pt());function T3(e){let t,r=new Set,i=n((x,T)=>{let I=typeof x=="function"?x(t):x;if(I!==t){let _=t;t=T?I:Object.assign({},t,I),r.forEach(O=>O(t,_))}},"setState"),o=n(()=>t,"getState"),a=n((x,T=o,I=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let _=T(t);function O(){let C=T(t);if(!I(_,C)){let R=_;x(_=C,R)}}return n(O,"listenerToAdd"),r.add(O),()=>r.delete(O)},"subscribeWithSelector"),g={setState:i,getState:o,subscribe:n((x,T,I)=>T||I?a(x,T,I):(r.add(x),()=>r.delete(x)),"subscribe"),destroy:n(()=>r.clear(),"destroy")};return t=e(i,o,g),g}n(T3,"createStore");var I3=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),d1=I3?rr.useEffect:rr.useLayoutEffect;function Fl(e){let t=typeof e=="function"?T3(e):e,r=n((i=t.getState,o=Object.is)=>{let[,a]=(0,rr.useReducer)(j=>j+1,0),l=t.getState(),f=(0,rr.useRef)(l),g=(0,rr.useRef)(i),x=(0,rr.useRef)(o),T=(0,rr.useRef)(!1),I=(0,rr.useRef)();I.current===void 0&&(I.current=i(l));let _,O=!1;(f.current!==l||g.current!==i||x.current!==o||T.current)&&(_=i(l),O=!o(I.current,_)),d1(()=>{O&&(I.current=_),f.current=l,g.current=i,x.current=o,T.current=!1});let C=(0,rr.useRef)(l);d1(()=>{let j=n(()=>{try{let Y=t.getState(),L=g.current(Y);x.current(I.current,L)||(f.current=Y,I.current=L,a())}catch{T.current=!0,a()}},"listener"),F=t.subscribe(j);return t.getState()!==C.current&&j(),F},[]);let R=O?_:I.current;return(0,rr.useDebugValue)(R),R},"useStore");return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let i=[r,t];return{next(){let o=i.length<=0;return{value:i.shift(),done:o}}}},r}n(Fl,"create");var _3={editableAccountMetadata:void 0,setEditableAccountMetadata:n(()=>{},"setEditableAccountMetadata")},jl=Fl(e=>({..._3,setEditableAccountMetadata:n(t=>{e({editableAccountMetadata:t})},"setEditableAccountMetadata")}));d();h();var h1={username:"",available:null,usernameAvailabilityError:null,icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},p1=Fl((e,t)=>({...h1,setUsername:n(r=>e({username:r}),"setUsername"),setUsernameAvailabilityError:n(r=>e({usernameAvailabilityError:r}),"setUsernameAvailabilityError"),setAvailable:n(r=>e({available:r}),"setAvailable"),setIcon:n(r=>e({icon:r}),"setIcon"),addSecretIdentifier:n(r=>{let i=[...t().secretIdentifiers];i.includes(r)||i.push(r),e({secretIdentifiers:i})},"addSecretIdentifier"),removeSecretIdentifier:n(r=>{e({secretIdentifiers:t().secretIdentifiers.filter(i=>i!==r)})},"removeSecretIdentifier"),addAccountIdentifierToSync:n(r=>{let i=[...t().accountIdentifiersToSync];i.includes(r)||i.push(r),e({accountIdentifiersToSync:i})},"addAccountIdentifierToSync"),removeAccountIdentifierToSync:n(r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(i=>i!==r)})},"removeAccountIdentifierToSync"),clearAccountIdentifiersToSync:n(()=>e({accountIdentifiersToSync:[]}),"clearAccountIdentifiersToSync"),setAccountIdentifiersToSync:n(r=>e({accountIdentifiersToSync:r}),"setAccountIdentifiersToSync"),addAddress:n((r,i)=>{let o={...t().addresses};o[r]=i,e({addresses:o})},"addAddress"),removeAddress:n((r,i)=>{let o={...t().addresses};o[r]===i&&delete o[r],e({addresses:o})},"removeAddress"),clearAddresses:n(()=>{e({addresses:{}})},"clearAddresses"),reset:n(()=>{e(h1)},"reset")}));d();h();var m1=he(No()),Ln=he(Pt());var k3=n(({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:i})=>{let{t:o}=bi(),{formState:{errors:a},control:l,clearErrors:f,getValues:g,setValue:x,register:T,handleSubmit:I,watch:_,trigger:O}=Ll({mode:"all",defaultValues:{addressType:r?.addressType||k.Solana,networkID:r?.networkID||tn.Solana.Mainnet}}),[C,R]=(0,Ln.useState)(null),j=jl(u=>u.setEditableAccountMetadata),{name:F}=_(),Y=r?.secrets,L=g("networkID"),ce=g("addressType"),te=g("privateKey"),ie=(0,Ln.useMemo)(()=>new G0,[]),ae={required:!0},Z=(0,Ln.useMemo)(()=>({required:{value:!0,message:o("addAccountImportAccountPrivateKeyRequired")},onChange:n(u=>{u.target.value||R(null)},"onChange"),validate:n(u=>{try{let m=g("networkID"),y=g("addressType");if(/\s/.test(u)||!y)return o("addAccountImportAccountIncorrectFormat");let v=pe.getNetworkDefinition(m).value,S=hc({privateKey:u,addressType:y,networkIDValue:v});j({...r,secrets:S});let E=ie.generateKeypairFromPrivateKey(S,y);return t.find(c=>!c.isReadOnly&&(c.addresses.map(b=>b.address).includes(Nt({publicKey:E.publicKey,addressType:y,networkID:m}))||c.addresses.filter(b=>"publicKey"in b).map(b=>b.publicKey).find(b=>b?Buffer.from(b).equals(Buffer.from(E.publicKey)):!1)))?o("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return o("addAccountImportAccountIncorrectFormat")}},"validate")}),[o,ie,t,r,j,g]);(0,Ln.useEffect)(()=>{if(a.privateKey){R(null);return}if(te||Y)try{let u=pe.getNetworkDefinition(L).value,m=Y||hc({privateKey:te,addressType:ce,networkIDValue:u}),y=ie.generateKeypairFromPrivateKey(m,ce);if(!te){let v="";switch(ce){case k.Solana:{v=m1.default.encode(y.privateKey);break}case k.EVM:{v="0x"+Buffer.from(y.privateKey).toString("hex");break}case k.Sui:{v=Q0(y.privateKey);break}}x("privateKey",v)}R(Nt({publicKey:y.publicKey,addressType:ce,networkID:L}))}catch{R(null)}},[a.privateKey,ce,ie,te,Y,x,L]);let ge=(0,Ln.useMemo)(()=>!!(F&&te&&!a.name&&!a.privateKey),[a.name,a.privateKey,F,te]),A=(0,Ln.useCallback)(async({networkID:u,name:m,privateKey:y,addressType:v})=>{let S=pe.getNetworkDefinition(u).value,E=hc({privateKey:y,addressType:v,networkIDValue:S});await e({chainType:v,name:m,icon:r?.icon,privateKey:E}),i.capture("addPrivateKeyAccount",{data:{networkID:u,chainType:v,walletAddress:C}})},[e,r?.icon,i,C]);return{formOnSubmitHandler:I(u=>A(u)),canSubmit:ge,control:l,getValues:g,register:T,setValue:x,trigger:O,errors:a,clearErrors:f,nameValidations:ae,privateKey:te,privateKeyValidations:Z,addressPreview:C}},"useImportPrivateKeyForm");d();h();var P3=n(()=>{let e=mt(),t=tt.canUseCash(),r=n(async()=>{if(!e?.canDeriveKMSAuthenticator)return!1;try{return await e.canDeriveKMSAuthenticator()}catch{return!1}},"queryFn"),{data:i,isPending:o}=ft({queryKey:t,queryFn:r});return{canUseCash:i??!1,isLoading:o}},"useCanAccountUseCash");d();h();var B3=n(async(e,t,r)=>{let{enabledAddressTypes:i,enabledChainIDs:o,enabledMainnetOnlyNetworkIDs:a}=r,[l,f]=await Promise.all([t.get(et.DeveloperMode),zs(t)]),g=await e.fetchAllAccounts(),x=await Yi(g,t),T=await Tg(t,x.identifier),I={name:T.name,icon:T.icon,identifier:x.identifier,addresses:Qc(x,a,i,o,f,l?.isDeveloperMode??!1)};return x.type===P.Seed?{...I,type:P.Seed,seedIdentifier:x.seedIdentifier,isReadOnly:!1}:x.type===P.Seedless?{...I,type:P.Seedless,seedIdentifier:x.seedIdentifier,isReadOnly:!1}:x.type===P.ReadOnly?{...I,type:P.ReadOnly,isReadOnly:!0}:x.type===P.PrivateKey?{...I,privateKeyIdentifier:x.privateKeyIdentifier,type:P.PrivateKey,isReadOnly:!1}:{...I,type:x.type,isReadOnly:!1}},"getSelectedMultichainAccount");export{zo as a,wm as b,C1 as c,R1 as d,Zl as e,Jt as f,N1 as g,D1 as h,dC as i,et as j,CS as k,DS as l,L1 as m,mt as n,wc as o,Ai as p,F1 as q,Hf as r,P as s,j1 as t,HS as u,Zf as v,$S as w,GS as x,va as y,Qf as z,Xf as A,Cg as B,ZS as C,ii as D,oa as E,JS as F,G1 as G,Z1 as H,YS as I,XS as J,eE as K,tE as L,rE as M,nE as N,iE as O,oE as P,po as Q,bE as R,f2 as S,ut as T,vy as U,b2 as V,x2 as W,Kd as X,A2 as Y,S2 as Z,uu as _,ch as $,Yl as aa,ei as ba,kr as ca,fa as da,eS as ea,Sf as fa,lo as ga,ni as ha,nS as ia,dS as ja,hS as ka,Y1 as la,Ir as ma,oo as na,pS as oa,mS as pa,pa as qa,gS as ra,yS as sa,vS as ta,wS as ua,hh as va,se as wa,Mt as xa,ve as ya,nw as za,mh as Aa,ow as Ba,uw as Ca,dw as Da,Kw as Ea,mb as Fa,gb as Ga,wb as Ha,Ab as Ia,fl as Ja,Sb as Ka,v_ as La,Mp as Ma,Lb as Na,jp as Oa,rk as Pa,ma as Qa,bS as Ra,gn as Sa,Zp as Ta,nk as Ua,Qp as Va,ik as Wa,ok as Xa,Ax as Ya,qs as Za,hoe as _a,poe as $a,moe as ab,goe as bb,yoe as cb,voe as db,Uk as eb,Nk as fb,Yp as gb,Ws as hb,Dk as ib,Xp as jb,Lk as kb,Vk as lb,Bl as mb,lk as nb,l0 as ob,Bx as pb,Fk as qb,Ar as rb,jk as sb,qk as tb,zk as ub,Wk as vb,Hk as wb,$k as xb,Gk as yb,Zk as zb,Qk as Ab,Jk as Bb,Yk as Cb,ec as Db,Xk as Eb,e3 as Fb,Xi as Gb,Ix as Hb,gk as Ib,yk as Jb,wk as Kb,er as Lb,Ik as Mb,_l as Nb,fk as Ob,Sr as Pb,s0 as Qb,Uo as Rb,_k as Sb,kk as Tb,Xa as Ub,a0 as Vb,c0 as Wb,Kk as Xb,u0 as Yb,Ok as Zb,o3 as _b,Yx as $b,Ll as ac,m3 as bc,g3 as cc,y3 as dc,v3 as ec,w3 as fc,b3 as gc,x3 as hc,A3 as ic,Ck as jc,S3 as kc,E3 as lc,M3 as mc,Fl as nc,jl as oc,p1 as pc,k3 as qc,P3 as rc,B3 as sc};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-4HRGOILD.js.map
