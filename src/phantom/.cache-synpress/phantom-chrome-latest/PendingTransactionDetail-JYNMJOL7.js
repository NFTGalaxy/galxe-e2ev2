import{a as oe,c as _e}from"./chunk-I6RGO7BV.js";import{b as Ce}from"./chunk-NWANNHHC.js";import"./chunk-FYHA5XUW.js";import{a as Oe}from"./chunk-OC5EEAN7.js";import"./chunk-G75QIEXP.js";import"./chunk-Q3RBD6MB.js";import{C as te,E as ze,G as Le,Ia as Ke}from"./chunk-BUUR4IB6.js";import"./chunk-3SDMYXX6.js";import"./chunk-BWY4SFOW.js";import"./chunk-BO5X4B7T.js";import{s as b}from"./chunk-KWV5LCG2.js";import"./chunk-P4WYBUL7.js";import"./chunk-6RUUKR5H.js";import"./chunk-ZDIDSVJZ.js";import"./chunk-WWRJFBPZ.js";import"./chunk-RPAWFSR5.js";import"./chunk-EYRQTEYY.js";import"./chunk-4X4FCHBV.js";import"./chunk-3XNDUML4.js";import"./chunk-CXTBE6XQ.js";import"./chunk-DNIKDYGU.js";import"./chunk-T35FRZUG.js";import{j}from"./chunk-QNLSAEYJ.js";import"./chunk-XVSHIHTB.js";import{a as Te}from"./chunk-64KTDFHS.js";import{a as Ve}from"./chunk-VKDZ35Y6.js";import"./chunk-XSN3P2VT.js";import"./chunk-5UQY3H6E.js";import"./chunk-DYF4TIEK.js";import"./chunk-LFW6VOKO.js";import{c as He}from"./chunk-TLPEUAVS.js";import"./chunk-IYMLQYB2.js";import"./chunk-5HTF5CEZ.js";import"./chunk-YLX2CXTY.js";import"./chunk-VGIRFM65.js";import"./chunk-4FHWVLFG.js";import"./chunk-2AJHLE3Z.js";import"./chunk-OVAE6C3A.js";import{a as ee,d as K}from"./chunk-EREDVFEV.js";import{B as ge,R as Ge,db as k,m as f,p as fe,q as ue}from"./chunk-2ST3CGSE.js";import{A as Pe,Ja as Ne,wc as Ae}from"./chunk-Q2TGNWPS.js";import"./chunk-CHXPHGEW.js";import"./chunk-3JCRVFH6.js";import"./chunk-JOOVJERF.js";import"./chunk-Z4NIAEKD.js";import"./chunk-FWDXF6DS.js";import{F as Ue,J as Z,M as Be,V as Me,aa as pe,da as Fe,fa as R}from"./chunk-HZ46BFL2.js";import"./chunk-GW7A3FSK.js";import"./chunk-5DTGGQTS.js";import{a as be,b as q}from"./chunk-KK53XKFJ.js";import{ba as O,f as H,h as z,o as L}from"./chunk-DALLY2ZR.js";import"./chunk-MN377ENM.js";import"./chunk-7XMFOJLY.js";import{rb as V}from"./chunk-4HRGOILD.js";import{Qb as ve,Vd as Ie,Y as ke,Yb as _,eb as ae,h as D,k as De}from"./chunk-4KPHYKUF.js";import{Bc as Q,Ec as Y,Pb as C,X as de,Xd as lt}from"./chunk-ODNNZUPK.js";import{G as me}from"./chunk-UAQWDGIM.js";import{Ba as $,V as s,a as le,e as J,r as A}from"./chunk-LELMSWC2.js";import"./chunk-RCTLXTBM.js";import"./chunk-Z26KXQRL.js";import"./chunk-NUMCZRU4.js";import"./chunk-L7YPSK2Y.js";import"./chunk-VAUOTJLY.js";import{a as y,g as ie,i as B,n as M}from"./chunk-NSVULBS3.js";B();M();var a=ie(le(),1);B();M();B();M();var T=ie(le(),1);var mt=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,dt=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,pt=f(k)`
  margin-top: 20px;
  margin-bottom: 20px;
`,ft=f(k)`
  margin-top: 16px;
`,ut=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,je=y(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=A(),[g,n]=(0,T.useState)(void 0),{popDetailView:u}=j(),t=e.networkID,d=C.getAddressType(t),F=e.data.transactions[e.data.transactions.length-1],{data:c}=V(),{data:r,status:I}=pe(e,()=>u(),c),{data:P}=Z(t,r),S=P?.gasEstimationPriceUSD??"",{data:v}=O(),N=[];if(v){let x=v.explorers[t]??H.get(t).defaultExplorer,p=L({networkID:t,endpoint:"transaction",explorerType:x,param:F.hash});p!==""&&N.push({label:o("richTransactionDetailViewOnExplorer",{explorer:z[x]}),value:p,type:"link"})}let{data:U,status:X}=R(t,r?.maxFeePerGas,r?.maxPriorityFeePerGas),h=_(o,X,U),E=[{label:o("richTransactionDetailNetworkFee"),value:S.length>0?o("gasUpTo",{amount:S}):T.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:h!==""?h:T.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},...N],{mutateAsync:w}=Ce(),ne=(0,T.useCallback)(async()=>{if(!c||!r)return;let x=c.addresses.find(p=>p.networkID===t);if(x){e.type===D.Cancel?q.capture("transactionPrioritizeCancelConfirmClicked",{data:{chainID:t,chainType:d}}):q.capture("transactionCancelConfirmClicked",{data:{chainID:t,chainType:d}});try{n("inflight");let p=Ie({ethereumNetworkID:t,sender:x.address,destination:x.address,value:new J("0",10),nonce:e.data.nonce});await w({multichainTransaction:{networkID:t,unsignedTransaction:p},pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:me.parse({from:e.ownerAddress})},senderAddress:x,gasEstimation:r}),u(),i(),n(void 0)}catch(p){Y.captureError(p,Q.Transaction),n("error")}}},[c,t,d,e,r,w,u,i]);return T.default.createElement(mt,null,T.default.createElement(dt,null,T.default.createElement(ze,{image:{type:"icon",preset:"x-bold"},size:64}),T.default.createElement(pt,{size:28,weight:600},e.type===D.Cancel?o("transactionPrioritizeCancel"):o("transactionCancel")),T.default.createElement(oe,{rows:E}),g!=="error"&&T.default.createElement(ft,{lineHeight:16,color:s.colors.legacy.textDiminished,size:14},o("transactionCancelHelperText")),g==="error"&&T.default.createElement(ut,null,T.default.createElement(te,{color:s.colors.legacy.spotNegative,title:T.default.createElement(k,{color:s.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),T.default.createElement(K,{onSecondaryClicked:()=>u(),onPrimaryClicked:ne,primaryTheme:"warning",primaryText:g==="inflight"?T.default.createElement(ee,{trackColor:s.colors.legacy.spotNegative,color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!r?.maxFeePerGas||I==="error",secondaryText:o("commandClose")}))},"CancelEvmTransaction");B();M();var Xe=ie(lt(),1),l=ie(le(),1);var gt=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,Tt=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,xt=f(k)`
  margin-top: 20px;
  margin-bottom: 20px;
`,ht=f(k)`
  margin-top: 16px;
`,yt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,Pt=y(({size:e})=>l.default.createElement(ue,{size:e},l.default.createElement(fe,{shape:"circle",color:Te(s.colors.legacy.spotPositive,.1)},l.default.createElement(ge,{width:32}))),"Icon"),We=y(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=A(),[g,n]=(0,l.useState)(void 0),{popDetailView:u}=j(),t=e.networkID,{data:d}=V(),{data:F,status:c}=Ue({networkID:t}),r=F?.fast,I=ae.get(t).transactionSpeedSeconds(De.fast),{data:P}=O(),S=[];if(P){let h=P.explorers[t]??H.get(t).defaultExplorer,E=L({networkID:t,endpoint:"transaction",explorerType:h,param:e.data.txID});E!==""&&S.push({label:o("richTransactionDetailViewOnExplorer",{explorer:z[h]}),value:E,type:"link"})}let v=_(o,c,I?{timeToMineSeconds:I}:void 0),N=[{label:o("richTransactionDetailNetworkFee"),value:r?`${ke(r.btcPerKilobyte)} sats/vB`:l.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:v!==""?v:l.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},...S],U=Me(),X=(0,l.useCallback)(async()=>{if(!d||!r?.btcPerKilobyte)return;let h=d.addresses.filter(w=>w.networkID===t),E=h[0];h.length>1&&(E=h.find(w=>w.addressType===de.BitcoinNativeSegwit)),q.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t}});try{n("inflight"),await ve(Ae(),{addressType:E.addressType,accountIdentifier:d.identifier,pendingTransaction:e,pendingTransactionInput:{...(0,Xe.default)(e)},desiredFeeRateInBtcPerKilobyte:r.btcPerKilobyte,safeToSendUtxos:await U.getSafeToSendUtxos(E.address),utxoManager:U},new be),u(),i(),n(void 0)}catch(w){Y.captureError(w,Q.Transaction),n("error")}},[d,t,e,r?.btcPerKilobyte,u,i,U]);return l.default.createElement(gt,null,l.default.createElement(Tt,null,l.default.createElement(Pt,{size:64}),l.default.createElement(xt,{size:28,weight:600},o("transactionSpeedUp")),l.default.createElement(oe,{rows:N}),g!=="error"&&l.default.createElement(ht,{lineHeight:16,color:s.colors.legacy.textDiminished,size:14},o("transactionSpeedUplHelperText")),g==="error"&&l.default.createElement(yt,null,l.default.createElement(te,{color:s.colors.legacy.spotNegative,title:l.default.createElement(k,{color:s.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),l.default.createElement(K,{onSecondaryClicked:()=>u(),onPrimaryClicked:X,primaryText:g==="inflight"?l.default.createElement(ee,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:c==="error"&&!r?.btcPerKilobyte,secondaryText:o("commandClose")}))},"SpeedUpBitcoinTransaction");B();M();var m=ie(le(),1);var Ct=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,wt=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,St=f(k)`
  margin-top: 20px;
  margin-bottom: 20px;
`,Et=f(k)`
  margin-top: 16px;
`,Dt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,kt=y(({size:e})=>m.default.createElement(ue,{size:e},m.default.createElement(fe,{shape:"circle",color:Te(s.colors.legacy.spotPositive,.1)},m.default.createElement(ge,{width:32}))),"Icon"),$e=y(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=A(),[g,n]=(0,m.useState)(void 0),{popDetailView:u}=j(),t=e.networkID,d=C.getAddressType(t),F=e.data.transactions[e.data.transactions.length-1],{data:c}=V(),{data:r,status:I}=pe(e,()=>u(),c),{data:P}=Z(t,r),S=P?.gasEstimationPriceUSD??"",{data:v}=O(),N=[];if(v){let x=v.explorers[t]??H.get(t).defaultExplorer,p=L({networkID:t,endpoint:"transaction",explorerType:x,param:F.hash});p!==""&&N.push({label:o("richTransactionDetailViewOnExplorer",{explorer:z[x]}),value:p,type:"link"})}let{data:U,status:X}=R(t,r?.maxFeePerGas,r?.maxPriorityFeePerGas),h=_(o,X,U),E=[{label:o("richTransactionDetailNetworkFee"),value:S.length>0?o("gasUpTo",{amount:S}):m.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:h!==""?h:m.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},...N],{mutateAsync:w}=Fe(),ne=(0,m.useCallback)(async()=>{if(!(!c||!r||!c.addresses.find(p=>p.networkID===t))){q.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t,chainType:d}});try{n("inflight"),await w({chainType:de.EVM,accountIdentifier:c.identifier,pendingTransaction:e,pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:me.parse({from:e.ownerAddress})},gasEstimation:r,nonce:e.data.nonce}),u(),i(),n(void 0)}catch(p){Y.captureError(p,Q.Transaction),n("error")}}},[c,t,d,e,r,w,i,u]);return m.default.createElement(Ct,null,m.default.createElement(wt,null,m.default.createElement(kt,{size:64}),m.default.createElement(St,{size:28,weight:600},o("transactionSpeedUp")),m.default.createElement(oe,{rows:E}),g!=="error"&&m.default.createElement(Et,{lineHeight:16,color:s.colors.legacy.textDiminished,size:14},o("transactionSpeedUplHelperText")),g==="error"&&m.default.createElement(Dt,null,m.default.createElement(te,{color:s.colors.legacy.spotNegative,title:m.default.createElement(k,{color:s.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),m.default.createElement(K,{onSecondaryClicked:()=>u(),onPrimaryClicked:ne,primaryText:g==="inflight"?m.default.createElement(ee,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!r?.maxFeePerGas||I==="error",secondaryText:o("commandClose")}))},"SpeedUpEvmTransaction");var vt=y(e=>{let{networkID:i}=e,[o,g]=(0,a.useState)(Date.now());(0,a.useEffect)(()=>{let W=setInterval(()=>g(Date.now()),5e3);return()=>clearInterval(W)},[g]);let{t:n}=A(),{pushDetailView:u}=j(),{handleHideModalVisibility:t}=Ke(),d=(0,a.useCallback)(()=>t("pendingTransaction"),[t]),{data:F}=V(),{data:c}=Be(F?.addresses||[]),r=c?.pendingTransaction.filter(W=>e.networkID===W.networkID),I=r?r[r.length-1]?.id:void 0,P=ae.get(e.networkID).isPendingTransactionConfirmed(e),S=!1,v=e.type??D.DappInteraction,N=Oe(e.timestamp??0,n("richTransactionDetailAt")),{header:U,assetSymbol:X,tokenUSDPrice:h,uiRecipient:E,logoUri:w}=(0,a.useMemo)(()=>({header:e.display.detail?.header??"",assetSymbol:e.display.detail?.assetSymbol??"",tokenUSDPrice:e.display.detail?.tokenUSDPrice??"",uiRecipient:e.display.detail?.uiRecipient??"",logoUri:e.display.detail?.logoUri??""}),[e]),ne=C.getNetworkName(i),x="",p=s.colors.legacy.textDiminished;P?S?(x=n("transactionsFailed"),p=s.colors.legacy.spotNegative):(x=n("transactionsSuccess"),p=s.colors.legacy.spotPositive):e.type===D.Cancel?(x=n("pendingTransactionCancelling"),p=s.colors.legacy.spotNegative):x=n("pendingTransactionPending");let re;if("transactions"in e.data&&C.isEVMNetworkID(i)){let G=e.data.transactions[e.data.transactions.length-1].unsignedTransaction,ce=new J(G.maxFeePerGas??"0"),ct=new J(G.maxPriorityFeePerGas??"0");re={networkID:i,gasLimit:new J(G.gas??"0"),maxFeePerGas:ce,maxPriorityFeePerGas:ct},S=!!e.data?.transactions?.[e.data?.transactions?.length-1]?.error}let{data:qe}=Z(i,re),Je=n("gasUpTo",{amount:qe?.gasEstimationPriceUSD}),{data:Qe,status:Ye}=R(i,re?.maxFeePerGas,re?.maxPriorityFeePerGas),we=_(n,Ye,Qe),{data:Se}=O(),Ee=[];if(Se){let W=Se.explorers[i]??H.get(i).defaultExplorer,G="";C.isEVMNetworkID(e.networkID)&&"transactions"in e.data&&(G=e.data.transactions[e.data.transactions.length-1].hash),C.isBitcoinNetworkID(e.networkID)&&(G=e.data.txID),C.isSolanaNetworkID(e.networkID)&&(G=e.data.signature);let ce=L({networkID:i,endpoint:"transaction",explorerType:W,param:G});ce!==""&&Ee.push({label:n("richTransactionDetailViewOnExplorer",{explorer:z[W]}),value:ce,type:"link"})}let Ze=C.getNetworkName(i),Re={label:n("pendingTransactionDate"),value:N},et={label:n("pendingTransactionStatus"),value:x,color:p},tt={label:n("transactionsTo"),value:E??""},ot={label:n("historyNetwork"),value:ne},nt={label:n("pendingTransactionNetworkFee"),value:Je,tooltipContent:n("networkFeesTooltipDescription",{chainName:Ze})},rt={label:n("pendingTransactionEstimatedTime"),value:we!==""?we:a.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished}),tooltipContent:n("sendFungibleSummaryEstimatedTimeDescription")},he=a.default.createElement(Le,{pendingTransactionType:v,isError:S,isConfirmed:P,logoUri:w,size:"medium"}),se,it=!P&&Pe.get(i).showFeeRowInPendingTransactionDetail,at=Pe.get(i).showTimeToMineRowInPendingTransactionDetail&&!P,st=e.display.detail?.secondaryHeader,ye=[Re,et,tt,ot,...it?[nt]:[],...at?[rt]:[],...Ee];switch(v){case D.Send:{se={sections:[{rows:ye}],title:P?n("richTransactionDetailSent"):n("pendingTransactionsSendingTitle",{assetSymbol:X}),primaryText:{value:U},secondaryText:{value:h},image:he};break}case D.Cancel:{se={sections:[{rows:ye}],title:n(P?"transactionCancelled":"pendingTransactionCancelling"),primaryText:{value:U},secondaryText:{value:h},image:he};break}case D.DappInteraction:default:{se={sections:[{rows:ye}],title:n(P?"richTransactionDetailAppInteraction":"pendingTransactionPendingInteraction"),primaryText:{value:""},secondaryText:{value:st??n("pendingTransactionUnknownApp")},image:he};break}}return{detailsProps:se,pendingTransaction:e,isOldestPendingTx:I===e.id,leftButton:a.default.createElement(bt,{onClick:d},a.default.createElement(Ge,null)),showCancelEvmTransactionModal:y(()=>{u(a.default.createElement(je,{onSuccess:d,pendingTransaction:e}))},"showCancelEvmTransactionModal"),showSpeedUpEvmTransactionModal:y(()=>{u(a.default.createElement($e,{onSuccess:d,pendingTransaction:e}))},"showSpeedUpEvmTransactionModal"),showSpeedUpBitcoinTransactionModal:y(()=>{u(a.default.createElement(We,{onSuccess:d,pendingTransaction:e}))},"showSpeedUpBitcoinTransactionModal"),hidePendingTransactionModal:d,now:o}},"usePendingTransactionDetailProps"),bt=f(He)`
  position: absolute;
  left: 5px;
`,It=y(({pendingTransaction:e})=>{let i=vt(e);return a.default.createElement(Bt,{...i})},"InnerPendingTransactionDetail"),Ut=y(({pendingTransactionId:e})=>{let{data:i}=Ne(e),[o,g]=(0,a.useState)();return(0,a.useEffect)(()=>{i&&g(i)},[i]),o?a.default.createElement(It,{pendingTransaction:o}):null},"PendingTransactionDetail"),zn=Ut,Bt=a.default.memo(({detailsProps:e,showCancelEvmTransactionModal:i,showSpeedUpEvmTransactionModal:o,showSpeedUpBitcoinTransactionModal:g,hidePendingTransactionModal:n,leftButton:u,pendingTransaction:t,isOldestPendingTx:d,now:F})=>{let{t:c}=A(),r=a.default.createElement($,{onClick:n},c("commandClose"));if(t&&(d||t.type!==D.Cancel)&&!ae.get(t.networkID).isPendingTransactionMined(t)){if(C.isPolygonNetworkID(t.networkID)){t=t;let I=t.data.transactions[t.data.transactions.length-1];F-I.timestamp>6e4&&(t.type===D.Cancel?r=a.default.createElement($,{theme:"warning",onClick:i},c("transactionPrioritizeCancel")):r=a.default.createElement($,{theme:"warning",onClick:i},c("pendingTransactionCancel")))}C.isEthereumNetworkID(t.networkID)&&(t.type===D.Cancel?r=a.default.createElement($,{theme:"warning",onClick:i},c("transactionPrioritizeCancel")):d?r=a.default.createElement(K,{primaryText:c("pendingTransactionSpeedUp"),secondaryText:c("pendingTransactionCancel"),onPrimaryClicked:o,onSecondaryClicked:i,primaryTheme:"default",secondaryTheme:"warning"}):r=a.default.createElement($,{theme:"warning",onClick:i},c("pendingTransactionCancel"))),C.isBitcoinNetworkID(t.networkID)&&(r=a.default.createElement($,{onClick:g},c("pendingTransactionSpeedUp")))}return a.default.createElement(a.default.Fragment,null,a.default.createElement(_e,{...e,leftButton:u}),a.default.createElement(Ve,null,r))});export{Ut as PendingTransactionDetail,zn as default};
//# sourceMappingURL=PendingTransactionDetail-JYNMJOL7.js.map
