import{Y as H}from"./chunk-JOOVJERF.js";import{F as K,V as U,W as V,_ as G,ta as O}from"./chunk-HZ46BFL2.js";import{jc as F,n as h,rb as S}from"./chunk-4HRGOILD.js";import{Gc as q,Hc as B,Mb as k,Nb as M,Qd as _,Wd as v,eb as A,kd as N,ld as D}from"./chunk-4KPHYKUF.js";import{Bc as g,Ec as C,Pb as x,Zd as I,fd as R,sd as b,vd as w}from"./chunk-ODNNZUPK.js";import{l as E}from"./chunk-L7YPSK2Y.js";import{a as o,i as a,n as c}from"./chunk-NSVULBS3.js";a();c();var Y="fungible-transfer-tx",X=I({seconds:30});function oe(e){let n=e?.fungibleKey,{fungible:t}=O({key:n,splTokenAccount:e?.splTokenAccount}),s=G(e?.sendFormValues?.recipient,t?.data.chain.id)??"",u=e?.sendSessionId??"",{chain:f,walletAddress:r}=t?.data??{},{data:m}=F({address:r,networkID:f?.id}),{data:p}=V(m),{data:T}=K({networkID:f?.id,enableFallback:!0}),i=j(f?.id,T,p,m),l=i?.sendContextRequired?i.sendContext:void 0,d=e?.sendFormValues;return w({staleTime:X,enabled:!!t&&!!e&&!!i,queryKey:_.transferTransaction({fungibleKey:n,fungibleSendFormValues:d,sendSessionId:u,sendContext:l}),async queryFn(){if(!t||!d||!i)throw new Error("Missing required data to construct fungible transfer transaction");try{return await v(t,{...d,recipient:s},l)}catch(y){if(E(y)){let Q=y.response?.status;N(y,Q,Y)}}throw new Error("Failed to create transfer transaction")}})}o(oe,"useTransferTransaction");function j(e,n,t,s){if(e)return x.isBitcoinNetworkID(e)?!n||!t||!s?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:n,utxoState:t,chainAddress:s}}:{sendContextRequired:!1}}o(j,"createSendContext");a();c();a();c();var P=o(()=>{let{setRetryArgs:e}=H();return n=>{if(n instanceof M){let{successfulTxIds:t}=n,[s,u]=t;e({type:D.BRC20,commitTxId:s,revealTxId:u})}}},"useHandleRetryableTransactionError");function he(){let e=R(),{data:n}=S({select:o(r=>r.identifier,"select")}),t=P(),s=U(),u=h();return b({mutationFn:o(async({multichainTransaction:r,pendingTransactionInput:m,senderAddress:p,gasEstimation:T})=>{if(!n)throw new Error("No account identifier found");let{networkID:i}=r,l=await A.get(i).onBeforeSend({multichainTransaction:r,gasEstimation:T}),d=await B({accountIdentifier:n,accountSigner:u,multichainTransaction:l,networkID:i,pendingTransactionInput:m,senderAddress:p,storage:e,utxoManager:s});return q(i,d)},"mutationFn"),onError(r){r instanceof Error&&(C.captureError(r,g.Fungibles),r instanceof k&&t(r))}})}o(he,"useTransferFungible");export{oe as a,he as b};
//# sourceMappingURL=chunk-NWANNHHC.js.map
