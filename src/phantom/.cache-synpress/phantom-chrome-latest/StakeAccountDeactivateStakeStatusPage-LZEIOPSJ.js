import{a as j}from"./chunk-WGNI5Q3H.js";import{a as y}from"./chunk-WWRJFBPZ.js";import"./chunk-RPAWFSR5.js";import{e as V,f as Q,g as Y}from"./chunk-EYRQTEYY.js";import"./chunk-4X4FCHBV.js";import"./chunk-QNLSAEYJ.js";import"./chunk-XVSHIHTB.js";import"./chunk-64KTDFHS.js";import"./chunk-5UQY3H6E.js";import"./chunk-LFW6VOKO.js";import"./chunk-TLPEUAVS.js";import"./chunk-5HTF5CEZ.js";import"./chunk-YLX2CXTY.js";import{b as g}from"./chunk-2AJHLE3Z.js";import"./chunk-EREDVFEV.js";import{db as A}from"./chunk-2ST3CGSE.js";import{Ba as M,V as F,ga as B,v as z}from"./chunk-FWDXF6DS.js";import"./chunk-HZ46BFL2.js";import"./chunk-5DTGGQTS.js";import"./chunk-DALLY2ZR.js";import"./chunk-MN377ENM.js";import"./chunk-7XMFOJLY.js";import{rb as O,s as N}from"./chunk-4HRGOILD.js";import{ib as U,jb as K,t as H,u as _}from"./chunk-4KPHYKUF.js";import{Pb as b,X as E,_ as L,w as u}from"./chunk-ODNNZUPK.js";import"./chunk-UAQWDGIM.js";import{V as f,a as ee,r as I}from"./chunk-LELMSWC2.js";import"./chunk-RCTLXTBM.js";import"./chunk-Z26KXQRL.js";import"./chunk-NUMCZRU4.js";import"./chunk-L7YPSK2Y.js";import"./chunk-VAUOTJLY.js";import{a as w,g as R,i as P,n as x}from"./chunk-NSVULBS3.js";P();x();var e=R(ee(),1);var te=w(n=>{let i={stakePubkey:n.stakeAccountPubkey,stakeAuthorityPubkey:n.stakeAuthorityPubkey,onClose:n.onClose},{t}=I(),{deactivateStake:c,needsLedgerApproval:l,txHash:r,confirmationStatus:s,isError:k,error:d,onDeny:a}=oe(i);if(l)return e.default.createElement(Q,{ledgerAction:c,cancel:a});if(k){let o=d,S=o?.message,m=V(o),D=o?.message.includes(_),v=o?.message.includes(H);return m?e.default.createElement(Y,{ledgerActionError:o,onRetryClick:c,onCancelClick:a}):D||v?e.default.createElement(j,{onCancelClick:a}):e.default.createElement(g,{icon:"error",title:t("stakeAccountDeactivateStakeUnstakingFailed"),onClose:a,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8},S??t("stakeAccountDeactivateStakeUnstakingFailedDescription")),e.default.createElement(y,{txHash:r},t("stakeAccountDeactivateStakeViewTransaction")))}return s==="confirmed"||s==="finalized"?e.default.createElement(g,{icon:"success",title:t("stakeAccountDeactivateStakeSolUnstaked"),onClose:n.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8},e.default.createElement(z,{i18nKey:"stakeAccountDeactivateStakeSolUnstakedDescriptionInterpolated"},"You will be able to withdraw your stake",e.default.createElement("br",null)," in the next couple of days once the stake account becomes inactive.")),e.default.createElement(y,{txHash:r},t("stakeAccountDeactivateStakeViewTransaction"))):e.default.createElement(g,{icon:"loading",title:t("stakeAccountDeactivateStakeUnstakingSol"),onClose:n.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8},t("stakeAccountDeactivateStakeUnstakingSolDescription")),e.default.createElement(y,{txHash:r},t("stakeAccountDeactivateStakeViewTransaction")))},"StakeAccountDeactivateStakeStatusPage"),pe=te,oe=w(({onClose:n,...i})=>{let{data:t,isSuccess:c}=O(),{accountIdentifier:l,isLedgerAccount:r,solanaChainAddress:s,solanaPublicKey:k,connection:d,networkID:a}=(0,e.useMemo)(()=>{let J=t?.identifier??"",p=(t?.addresses??[]).find($=>b.isSolanaNetworkID($.networkID)),W=new u.PublicKey(p?.address??""),X=t?.type===N.Ledger,T=p?.networkID,Z=U(K(T));return{accountIdentifier:J,isLedgerAccount:X,solanaChainAddress:p,solanaPublicKey:W,connection:Z,networkID:T}},[t]),o=M(d),S=(0,e.useCallback)(()=>{o.mutate({...i,accountIdentifier:l,senderAddress:s,stakePubkey:new u.PublicKey(i.stakePubkey),stakeAuthorityPubkey:new u.PublicKey(i.stakeAuthorityPubkey),authorizedPubkey:k})},[l,i,o,s,k]),m=F(),D=(0,e.useCallback)(()=>{m.denied({chainType:E.Solana,chainName:L.Solana,networkId:b.getSolanaNetworkIDValue(a),type:"undelegate"}),n()},[a,n,m]);(0,e.useEffect)(()=>{if(c){if(!t||!s)throw new Error("Selected account undefined when trying to perform stake transaction.");r||S()}},[c]);let C=o.data?.id,h=B(d,2e3,C),q=r&&(o.isIdle||o.isPending),G=h.data?.value?.confirmationStatus;return{deactivateStake:S,onDeny:D,needsLedgerApproval:q,txHash:C,confirmationStatus:G,isError:o.isError??h.isError,error:o.error??h.error}},"useDeactivateStakeOnMount");export{te as StakeAccountDeactivateStakeStatusPage,pe as default};
//# sourceMappingURL=StakeAccountDeactivateStakeStatusPage-LZEIOPSJ.js.map
